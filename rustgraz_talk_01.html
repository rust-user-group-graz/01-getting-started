<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="generator" content="pandoc">
  <meta name="author" content="Lukas Prokop">
  <meta name="dcterms.date" content="2019-07-25">
  <title>Rust Graz – 01 Getting started</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link href="data:text/css; charset=utf-8,%2F%2A%21%0A%20%2A%20reveal%2Ejs%0A%20%2A%20http%3A%2F%2Frevealjs%2Ecom%0A%20%2A%20MIT%20licensed%0A%20%2A%0A%20%2A%20Copyright%20%28C%29%202019%20Hakim%20El%20Hattab%2C%20http%3A%2F%2Fhakim%2Ese%0A%20%2A%2F%0A%2F%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%0A%20%2A%20GLOBAL%20STYLES%0A%20%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2F%0Ahtml%20%7B%0A%20%20width%3A%20100%25%3B%0A%20%20height%3A%20100%25%3B%0A%20%20height%3A%20100vh%3B%0A%20%20height%3A%20calc%28%20var%28%2D%2Dvh%2C%201vh%29%20%2A%20100%29%3B%0A%20%20overflow%3A%20hidden%3B%20%7D%0A%0Abody%20%7B%0A%20%20height%3A%20100%25%3B%0A%20%20overflow%3A%20hidden%3B%0A%20%20position%3A%20relative%3B%0A%20%20line%2Dheight%3A%201%3B%0A%20%20margin%3A%200%3B%0A%20%20background%2Dcolor%3A%20%23fff%3B%0A%20%20color%3A%20%23000%3B%20%7D%0A%0A%2F%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%0A%20%2A%20VIEW%20FRAGMENTS%0A%20%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2F%0A%2Ereveal%20%2Eslides%20section%20%2Efragment%20%7B%0A%20%20opacity%3A%200%3B%0A%20%20visibility%3A%20hidden%3B%0A%20%20transition%3A%20all%20%2E2s%20ease%3B%20%7D%0A%20%20%2Ereveal%20%2Eslides%20section%20%2Efragment%2Evisible%20%7B%0A%20%20%20%20opacity%3A%201%3B%0A%20%20%20%20visibility%3A%20inherit%3B%20%7D%0A%0A%2Ereveal%20%2Eslides%20section%20%2Efragment%2Egrow%20%7B%0A%20%20opacity%3A%201%3B%0A%20%20visibility%3A%20inherit%3B%20%7D%0A%20%20%2Ereveal%20%2Eslides%20section%20%2Efragment%2Egrow%2Evisible%20%7B%0A%20%20%20%20%2Dwebkit%2Dtransform%3A%20scale%281%2E3%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20transform%3A%20scale%281%2E3%29%3B%20%7D%0A%0A%2Ereveal%20%2Eslides%20section%20%2Efragment%2Eshrink%20%7B%0A%20%20opacity%3A%201%3B%0A%20%20visibility%3A%20inherit%3B%20%7D%0A%20%20%2Ereveal%20%2Eslides%20section%20%2Efragment%2Eshrink%2Evisible%20%7B%0A%20%20%20%20%2Dwebkit%2Dtransform%3A%20scale%280%2E7%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20transform%3A%20scale%280%2E7%29%3B%20%7D%0A%0A%2Ereveal%20%2Eslides%20section%20%2Efragment%2Ezoom%2Din%20%7B%0A%20%20%2Dwebkit%2Dtransform%3A%20scale%280%2E1%29%3B%0A%20%20%20%20%20%20%20%20%20%20transform%3A%20scale%280%2E1%29%3B%20%7D%0A%20%20%2Ereveal%20%2Eslides%20section%20%2Efragment%2Ezoom%2Din%2Evisible%20%7B%0A%20%20%20%20%2Dwebkit%2Dtransform%3A%20none%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20transform%3A%20none%3B%20%7D%0A%0A%2Ereveal%20%2Eslides%20section%20%2Efragment%2Efade%2Dout%20%7B%0A%20%20opacity%3A%201%3B%0A%20%20visibility%3A%20inherit%3B%20%7D%0A%20%20%2Ereveal%20%2Eslides%20section%20%2Efragment%2Efade%2Dout%2Evisible%20%7B%0A%20%20%20%20opacity%3A%200%3B%0A%20%20%20%20visibility%3A%20hidden%3B%20%7D%0A%0A%2Ereveal%20%2Eslides%20section%20%2Efragment%2Esemi%2Dfade%2Dout%20%7B%0A%20%20opacity%3A%201%3B%0A%20%20visibility%3A%20inherit%3B%20%7D%0A%20%20%2Ereveal%20%2Eslides%20section%20%2Efragment%2Esemi%2Dfade%2Dout%2Evisible%20%7B%0A%20%20%20%20opacity%3A%200%2E5%3B%0A%20%20%20%20visibility%3A%20inherit%3B%20%7D%0A%0A%2Ereveal%20%2Eslides%20section%20%2Efragment%2Estrike%20%7B%0A%20%20opacity%3A%201%3B%0A%20%20visibility%3A%20inherit%3B%20%7D%0A%20%20%2Ereveal%20%2Eslides%20section%20%2Efragment%2Estrike%2Evisible%20%7B%0A%20%20%20%20text%2Ddecoration%3A%20line%2Dthrough%3B%20%7D%0A%0A%2Ereveal%20%2Eslides%20section%20%2Efragment%2Efade%2Dup%20%7B%0A%20%20%2Dwebkit%2Dtransform%3A%20translate%280%2C%2020%25%29%3B%0A%20%20%20%20%20%20%20%20%20%20transform%3A%20translate%280%2C%2020%25%29%3B%20%7D%0A%20%20%2Ereveal%20%2Eslides%20section%20%2Efragment%2Efade%2Dup%2Evisible%20%7B%0A%20%20%20%20%2Dwebkit%2Dtransform%3A%20translate%280%2C%200%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20transform%3A%20translate%280%2C%200%29%3B%20%7D%0A%0A%2Ereveal%20%2Eslides%20section%20%2Efragment%2Efade%2Ddown%20%7B%0A%20%20%2Dwebkit%2Dtransform%3A%20translate%280%2C%20%2D20%25%29%3B%0A%20%20%20%20%20%20%20%20%20%20transform%3A%20translate%280%2C%20%2D20%25%29%3B%20%7D%0A%20%20%2Ereveal%20%2Eslides%20section%20%2Efragment%2Efade%2Ddown%2Evisible%20%7B%0A%20%20%20%20%2Dwebkit%2Dtransform%3A%20translate%280%2C%200%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20transform%3A%20translate%280%2C%200%29%3B%20%7D%0A%0A%2Ereveal%20%2Eslides%20section%20%2Efragment%2Efade%2Dright%20%7B%0A%20%20%2Dwebkit%2Dtransform%3A%20translate%28%2D20%25%2C%200%29%3B%0A%20%20%20%20%20%20%20%20%20%20transform%3A%20translate%28%2D20%25%2C%200%29%3B%20%7D%0A%20%20%2Ereveal%20%2Eslides%20section%20%2Efragment%2Efade%2Dright%2Evisible%20%7B%0A%20%20%20%20%2Dwebkit%2Dtransform%3A%20translate%280%2C%200%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20transform%3A%20translate%280%2C%200%29%3B%20%7D%0A%0A%2Ereveal%20%2Eslides%20section%20%2Efragment%2Efade%2Dleft%20%7B%0A%20%20%2Dwebkit%2Dtransform%3A%20translate%2820%25%2C%200%29%3B%0A%20%20%20%20%20%20%20%20%20%20transform%3A%20translate%2820%25%2C%200%29%3B%20%7D%0A%20%20%2Ereveal%20%2Eslides%20section%20%2Efragment%2Efade%2Dleft%2Evisible%20%7B%0A%20%20%20%20%2Dwebkit%2Dtransform%3A%20translate%280%2C%200%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20transform%3A%20translate%280%2C%200%29%3B%20%7D%0A%0A%2Ereveal%20%2Eslides%20section%20%2Efragment%2Efade%2Din%2Dthen%2Dout%2C%0A%2Ereveal%20%2Eslides%20section%20%2Efragment%2Ecurrent%2Dvisible%20%7B%0A%20%20opacity%3A%200%3B%0A%20%20visibility%3A%20hidden%3B%20%7D%0A%20%20%2Ereveal%20%2Eslides%20section%20%2Efragment%2Efade%2Din%2Dthen%2Dout%2Ecurrent%2Dfragment%2C%0A%20%20%2Ereveal%20%2Eslides%20section%20%2Efragment%2Ecurrent%2Dvisible%2Ecurrent%2Dfragment%20%7B%0A%20%20%20%20opacity%3A%201%3B%0A%20%20%20%20visibility%3A%20inherit%3B%20%7D%0A%0A%2Ereveal%20%2Eslides%20section%20%2Efragment%2Efade%2Din%2Dthen%2Dsemi%2Dout%20%7B%0A%20%20opacity%3A%200%3B%0A%20%20visibility%3A%20hidden%3B%20%7D%0A%20%20%2Ereveal%20%2Eslides%20section%20%2Efragment%2Efade%2Din%2Dthen%2Dsemi%2Dout%2Evisible%20%7B%0A%20%20%20%20opacity%3A%200%2E5%3B%0A%20%20%20%20visibility%3A%20inherit%3B%20%7D%0A%20%20%2Ereveal%20%2Eslides%20section%20%2Efragment%2Efade%2Din%2Dthen%2Dsemi%2Dout%2Ecurrent%2Dfragment%20%7B%0A%20%20%20%20opacity%3A%201%3B%0A%20%20%20%20visibility%3A%20inherit%3B%20%7D%0A%0A%2Ereveal%20%2Eslides%20section%20%2Efragment%2Ehighlight%2Dred%2C%0A%2Ereveal%20%2Eslides%20section%20%2Efragment%2Ehighlight%2Dcurrent%2Dred%2C%0A%2Ereveal%20%2Eslides%20section%20%2Efragment%2Ehighlight%2Dgreen%2C%0A%2Ereveal%20%2Eslides%20section%20%2Efragment%2Ehighlight%2Dcurrent%2Dgreen%2C%0A%2Ereveal%20%2Eslides%20section%20%2Efragment%2Ehighlight%2Dblue%2C%0A%2Ereveal%20%2Eslides%20section%20%2Efragment%2Ehighlight%2Dcurrent%2Dblue%20%7B%0A%20%20opacity%3A%201%3B%0A%20%20visibility%3A%20inherit%3B%20%7D%0A%0A%2Ereveal%20%2Eslides%20section%20%2Efragment%2Ehighlight%2Dred%2Evisible%20%7B%0A%20%20color%3A%20%23ff2c2d%3B%20%7D%0A%0A%2Ereveal%20%2Eslides%20section%20%2Efragment%2Ehighlight%2Dgreen%2Evisible%20%7B%0A%20%20color%3A%20%2317ff2e%3B%20%7D%0A%0A%2Ereveal%20%2Eslides%20section%20%2Efragment%2Ehighlight%2Dblue%2Evisible%20%7B%0A%20%20color%3A%20%231b91ff%3B%20%7D%0A%0A%2Ereveal%20%2Eslides%20section%20%2Efragment%2Ehighlight%2Dcurrent%2Dred%2Ecurrent%2Dfragment%20%7B%0A%20%20color%3A%20%23ff2c2d%3B%20%7D%0A%0A%2Ereveal%20%2Eslides%20section%20%2Efragment%2Ehighlight%2Dcurrent%2Dgreen%2Ecurrent%2Dfragment%20%7B%0A%20%20color%3A%20%2317ff2e%3B%20%7D%0A%0A%2Ereveal%20%2Eslides%20section%20%2Efragment%2Ehighlight%2Dcurrent%2Dblue%2Ecurrent%2Dfragment%20%7B%0A%20%20color%3A%20%231b91ff%3B%20%7D%0A%0A%2F%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%0A%20%2A%20DEFAULT%20ELEMENT%20STYLES%0A%20%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2F%0A%2F%2A%20Fixes%20issue%20in%20Chrome%20where%20italic%20fonts%20did%20not%20appear%20when%20printing%20to%20PDF%20%2A%2F%0A%2Ereveal%3Aafter%20%7B%0A%20%20content%3A%20%27%27%3B%0A%20%20font%2Dstyle%3A%20italic%3B%20%7D%0A%0A%2Ereveal%20iframe%20%7B%0A%20%20z%2Dindex%3A%201%3B%20%7D%0A%0A%2F%2A%2A%20Prevents%20layering%20issues%20in%20certain%20browser%2Ftransition%20combinations%20%2A%2F%0A%2Ereveal%20a%20%7B%0A%20%20position%3A%20relative%3B%20%7D%0A%0A%2Ereveal%20%2Estretch%20%7B%0A%20%20max%2Dwidth%3A%20none%3B%0A%20%20max%2Dheight%3A%20none%3B%20%7D%0A%0A%2Ereveal%20pre%2Estretch%20code%20%7B%0A%20%20height%3A%20100%25%3B%0A%20%20max%2Dheight%3A%20100%25%3B%0A%20%20box%2Dsizing%3A%20border%2Dbox%3B%20%7D%0A%0A%2F%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%0A%20%2A%20CONTROLS%0A%20%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2F%0A%40%2Dwebkit%2Dkeyframes%20bounce%2Dright%20%7B%0A%20%200%25%2C%2010%25%2C%2025%25%2C%2040%25%2C%2050%25%20%7B%0A%20%20%20%20%2Dwebkit%2Dtransform%3A%20translateX%280%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20transform%3A%20translateX%280%29%3B%20%7D%0A%20%2020%25%20%7B%0A%20%20%20%20%2Dwebkit%2Dtransform%3A%20translateX%2810px%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20transform%3A%20translateX%2810px%29%3B%20%7D%0A%20%2030%25%20%7B%0A%20%20%20%20%2Dwebkit%2Dtransform%3A%20translateX%28%2D5px%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20transform%3A%20translateX%28%2D5px%29%3B%20%7D%20%7D%0A%40keyframes%20bounce%2Dright%20%7B%0A%20%200%25%2C%2010%25%2C%2025%25%2C%2040%25%2C%2050%25%20%7B%0A%20%20%20%20%2Dwebkit%2Dtransform%3A%20translateX%280%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20transform%3A%20translateX%280%29%3B%20%7D%0A%20%2020%25%20%7B%0A%20%20%20%20%2Dwebkit%2Dtransform%3A%20translateX%2810px%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20transform%3A%20translateX%2810px%29%3B%20%7D%0A%20%2030%25%20%7B%0A%20%20%20%20%2Dwebkit%2Dtransform%3A%20translateX%28%2D5px%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20transform%3A%20translateX%28%2D5px%29%3B%20%7D%20%7D%0A%0A%40%2Dwebkit%2Dkeyframes%20bounce%2Ddown%20%7B%0A%20%200%25%2C%2010%25%2C%2025%25%2C%2040%25%2C%2050%25%20%7B%0A%20%20%20%20%2Dwebkit%2Dtransform%3A%20translateY%280%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20transform%3A%20translateY%280%29%3B%20%7D%0A%20%2020%25%20%7B%0A%20%20%20%20%2Dwebkit%2Dtransform%3A%20translateY%2810px%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20transform%3A%20translateY%2810px%29%3B%20%7D%0A%20%2030%25%20%7B%0A%20%20%20%20%2Dwebkit%2Dtransform%3A%20translateY%28%2D5px%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20transform%3A%20translateY%28%2D5px%29%3B%20%7D%20%7D%0A%0A%40keyframes%20bounce%2Ddown%20%7B%0A%20%200%25%2C%2010%25%2C%2025%25%2C%2040%25%2C%2050%25%20%7B%0A%20%20%20%20%2Dwebkit%2Dtransform%3A%20translateY%280%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20transform%3A%20translateY%280%29%3B%20%7D%0A%20%2020%25%20%7B%0A%20%20%20%20%2Dwebkit%2Dtransform%3A%20translateY%2810px%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20transform%3A%20translateY%2810px%29%3B%20%7D%0A%20%2030%25%20%7B%0A%20%20%20%20%2Dwebkit%2Dtransform%3A%20translateY%28%2D5px%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20transform%3A%20translateY%28%2D5px%29%3B%20%7D%20%7D%0A%0A%2Ereveal%20%2Econtrols%20%7B%0A%20%20display%3A%20none%3B%0A%20%20position%3A%20absolute%3B%0A%20%20top%3A%20auto%3B%0A%20%20bottom%3A%2012px%3B%0A%20%20right%3A%2012px%3B%0A%20%20left%3A%20auto%3B%0A%20%20z%2Dindex%3A%2011%3B%0A%20%20color%3A%20%23000%3B%0A%20%20pointer%2Devents%3A%20none%3B%0A%20%20font%2Dsize%3A%2010px%3B%20%7D%0A%20%20%2Ereveal%20%2Econtrols%20button%20%7B%0A%20%20%20%20position%3A%20absolute%3B%0A%20%20%20%20padding%3A%200%3B%0A%20%20%20%20background%2Dcolor%3A%20transparent%3B%0A%20%20%20%20border%3A%200%3B%0A%20%20%20%20outline%3A%200%3B%0A%20%20%20%20cursor%3A%20pointer%3B%0A%20%20%20%20color%3A%20currentColor%3B%0A%20%20%20%20%2Dwebkit%2Dtransform%3A%20scale%280%2E9999%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20transform%3A%20scale%280%2E9999%29%3B%0A%20%20%20%20transition%3A%20color%200%2E2s%20ease%2C%20opacity%200%2E2s%20ease%2C%20%2Dwebkit%2Dtransform%200%2E2s%20ease%3B%0A%20%20%20%20transition%3A%20color%200%2E2s%20ease%2C%20opacity%200%2E2s%20ease%2C%20transform%200%2E2s%20ease%3B%0A%20%20%20%20z%2Dindex%3A%202%3B%0A%20%20%20%20pointer%2Devents%3A%20auto%3B%0A%20%20%20%20font%2Dsize%3A%20inherit%3B%0A%20%20%20%20visibility%3A%20hidden%3B%0A%20%20%20%20opacity%3A%200%3B%0A%20%20%20%20%2Dwebkit%2Dappearance%3A%20none%3B%0A%20%20%20%20%2Dwebkit%2Dtap%2Dhighlight%2Dcolor%3A%20rgba%280%2C%200%2C%200%2C%200%29%3B%20%7D%0A%20%20%2Ereveal%20%2Econtrols%20%2Econtrols%2Darrow%3Abefore%2C%0A%20%20%2Ereveal%20%2Econtrols%20%2Econtrols%2Darrow%3Aafter%20%7B%0A%20%20%20%20content%3A%20%27%27%3B%0A%20%20%20%20position%3A%20absolute%3B%0A%20%20%20%20top%3A%200%3B%0A%20%20%20%20left%3A%200%3B%0A%20%20%20%20width%3A%202%2E6em%3B%0A%20%20%20%20height%3A%200%2E5em%3B%0A%20%20%20%20border%2Dradius%3A%200%2E25em%3B%0A%20%20%20%20background%2Dcolor%3A%20currentColor%3B%0A%20%20%20%20transition%3A%20all%200%2E15s%20ease%2C%20background%2Dcolor%200%2E8s%20ease%3B%0A%20%20%20%20%2Dwebkit%2Dtransform%2Dorigin%3A%200%2E2em%2050%25%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20transform%2Dorigin%3A%200%2E2em%2050%25%3B%0A%20%20%20%20will%2Dchange%3A%20transform%3B%20%7D%0A%20%20%2Ereveal%20%2Econtrols%20%2Econtrols%2Darrow%20%7B%0A%20%20%20%20position%3A%20relative%3B%0A%20%20%20%20width%3A%203%2E6em%3B%0A%20%20%20%20height%3A%203%2E6em%3B%20%7D%0A%20%20%20%20%2Ereveal%20%2Econtrols%20%2Econtrols%2Darrow%3Abefore%20%7B%0A%20%20%20%20%20%20%2Dwebkit%2Dtransform%3A%20translateX%280%2E5em%29%20translateY%281%2E55em%29%20rotate%2845deg%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20transform%3A%20translateX%280%2E5em%29%20translateY%281%2E55em%29%20rotate%2845deg%29%3B%20%7D%0A%20%20%20%20%2Ereveal%20%2Econtrols%20%2Econtrols%2Darrow%3Aafter%20%7B%0A%20%20%20%20%20%20%2Dwebkit%2Dtransform%3A%20translateX%280%2E5em%29%20translateY%281%2E55em%29%20rotate%28%2D45deg%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20transform%3A%20translateX%280%2E5em%29%20translateY%281%2E55em%29%20rotate%28%2D45deg%29%3B%20%7D%0A%20%20%20%20%2Ereveal%20%2Econtrols%20%2Econtrols%2Darrow%3Ahover%3Abefore%20%7B%0A%20%20%20%20%20%20%2Dwebkit%2Dtransform%3A%20translateX%280%2E5em%29%20translateY%281%2E55em%29%20rotate%2840deg%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20transform%3A%20translateX%280%2E5em%29%20translateY%281%2E55em%29%20rotate%2840deg%29%3B%20%7D%0A%20%20%20%20%2Ereveal%20%2Econtrols%20%2Econtrols%2Darrow%3Ahover%3Aafter%20%7B%0A%20%20%20%20%20%20%2Dwebkit%2Dtransform%3A%20translateX%280%2E5em%29%20translateY%281%2E55em%29%20rotate%28%2D40deg%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20transform%3A%20translateX%280%2E5em%29%20translateY%281%2E55em%29%20rotate%28%2D40deg%29%3B%20%7D%0A%20%20%20%20%2Ereveal%20%2Econtrols%20%2Econtrols%2Darrow%3Aactive%3Abefore%20%7B%0A%20%20%20%20%20%20%2Dwebkit%2Dtransform%3A%20translateX%280%2E5em%29%20translateY%281%2E55em%29%20rotate%2836deg%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20transform%3A%20translateX%280%2E5em%29%20translateY%281%2E55em%29%20rotate%2836deg%29%3B%20%7D%0A%20%20%20%20%2Ereveal%20%2Econtrols%20%2Econtrols%2Darrow%3Aactive%3Aafter%20%7B%0A%20%20%20%20%20%20%2Dwebkit%2Dtransform%3A%20translateX%280%2E5em%29%20translateY%281%2E55em%29%20rotate%28%2D36deg%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20transform%3A%20translateX%280%2E5em%29%20translateY%281%2E55em%29%20rotate%28%2D36deg%29%3B%20%7D%0A%20%20%2Ereveal%20%2Econtrols%20%2Enavigate%2Dleft%20%7B%0A%20%20%20%20right%3A%206%2E4em%3B%0A%20%20%20%20bottom%3A%203%2E2em%3B%0A%20%20%20%20%2Dwebkit%2Dtransform%3A%20translateX%28%2D10px%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20transform%3A%20translateX%28%2D10px%29%3B%20%7D%0A%20%20%2Ereveal%20%2Econtrols%20%2Enavigate%2Dright%20%7B%0A%20%20%20%20right%3A%200%3B%0A%20%20%20%20bottom%3A%203%2E2em%3B%0A%20%20%20%20%2Dwebkit%2Dtransform%3A%20translateX%2810px%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20transform%3A%20translateX%2810px%29%3B%20%7D%0A%20%20%20%20%2Ereveal%20%2Econtrols%20%2Enavigate%2Dright%20%2Econtrols%2Darrow%20%7B%0A%20%20%20%20%20%20%2Dwebkit%2Dtransform%3A%20rotate%28180deg%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20transform%3A%20rotate%28180deg%29%3B%20%7D%0A%20%20%20%20%2Ereveal%20%2Econtrols%20%2Enavigate%2Dright%2Ehighlight%20%7B%0A%20%20%20%20%20%20%2Dwebkit%2Danimation%3A%20bounce%2Dright%202s%2050%20both%20ease%2Dout%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20animation%3A%20bounce%2Dright%202s%2050%20both%20ease%2Dout%3B%20%7D%0A%20%20%2Ereveal%20%2Econtrols%20%2Enavigate%2Dup%20%7B%0A%20%20%20%20right%3A%203%2E2em%3B%0A%20%20%20%20bottom%3A%206%2E4em%3B%0A%20%20%20%20%2Dwebkit%2Dtransform%3A%20translateY%28%2D10px%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20transform%3A%20translateY%28%2D10px%29%3B%20%7D%0A%20%20%20%20%2Ereveal%20%2Econtrols%20%2Enavigate%2Dup%20%2Econtrols%2Darrow%20%7B%0A%20%20%20%20%20%20%2Dwebkit%2Dtransform%3A%20rotate%2890deg%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20transform%3A%20rotate%2890deg%29%3B%20%7D%0A%20%20%2Ereveal%20%2Econtrols%20%2Enavigate%2Ddown%20%7B%0A%20%20%20%20right%3A%203%2E2em%3B%0A%20%20%20%20bottom%3A%20%2D1%2E4em%3B%0A%20%20%20%20padding%2Dbottom%3A%201%2E4em%3B%0A%20%20%20%20%2Dwebkit%2Dtransform%3A%20translateY%2810px%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20transform%3A%20translateY%2810px%29%3B%20%7D%0A%20%20%20%20%2Ereveal%20%2Econtrols%20%2Enavigate%2Ddown%20%2Econtrols%2Darrow%20%7B%0A%20%20%20%20%20%20%2Dwebkit%2Dtransform%3A%20rotate%28%2D90deg%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20transform%3A%20rotate%28%2D90deg%29%3B%20%7D%0A%20%20%20%20%2Ereveal%20%2Econtrols%20%2Enavigate%2Ddown%2Ehighlight%20%7B%0A%20%20%20%20%20%20%2Dwebkit%2Danimation%3A%20bounce%2Ddown%202s%2050%20both%20ease%2Dout%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20animation%3A%20bounce%2Ddown%202s%2050%20both%20ease%2Dout%3B%20%7D%0A%20%20%2Ereveal%20%2Econtrols%5Bdata%2Dcontrols%2Dback%2Darrows%3D%22faded%22%5D%20%2Enavigate%2Dleft%2Eenabled%2C%0A%20%20%2Ereveal%20%2Econtrols%5Bdata%2Dcontrols%2Dback%2Darrows%3D%22faded%22%5D%20%2Enavigate%2Dup%2Eenabled%20%7B%0A%20%20%20%20opacity%3A%200%2E3%3B%20%7D%0A%20%20%20%20%2Ereveal%20%2Econtrols%5Bdata%2Dcontrols%2Dback%2Darrows%3D%22faded%22%5D%20%2Enavigate%2Dleft%2Eenabled%3Ahover%2C%0A%20%20%20%20%2Ereveal%20%2Econtrols%5Bdata%2Dcontrols%2Dback%2Darrows%3D%22faded%22%5D%20%2Enavigate%2Dup%2Eenabled%3Ahover%20%7B%0A%20%20%20%20%20%20opacity%3A%201%3B%20%7D%0A%20%20%2Ereveal%20%2Econtrols%5Bdata%2Dcontrols%2Dback%2Darrows%3D%22hidden%22%5D%20%2Enavigate%2Dleft%2Eenabled%2C%0A%20%20%2Ereveal%20%2Econtrols%5Bdata%2Dcontrols%2Dback%2Darrows%3D%22hidden%22%5D%20%2Enavigate%2Dup%2Eenabled%20%7B%0A%20%20%20%20opacity%3A%200%3B%0A%20%20%20%20visibility%3A%20hidden%3B%20%7D%0A%20%20%2Ereveal%20%2Econtrols%20%2Eenabled%20%7B%0A%20%20%20%20visibility%3A%20visible%3B%0A%20%20%20%20opacity%3A%200%2E9%3B%0A%20%20%20%20cursor%3A%20pointer%3B%0A%20%20%20%20%2Dwebkit%2Dtransform%3A%20none%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20transform%3A%20none%3B%20%7D%0A%20%20%2Ereveal%20%2Econtrols%20%2Eenabled%2Efragmented%20%7B%0A%20%20%20%20opacity%3A%200%2E5%3B%20%7D%0A%20%20%2Ereveal%20%2Econtrols%20%2Eenabled%3Ahover%2C%0A%20%20%2Ereveal%20%2Econtrols%20%2Eenabled%2Efragmented%3Ahover%20%7B%0A%20%20%20%20opacity%3A%201%3B%20%7D%0A%0A%2Ereveal%5Bdata%2Dnavigation%2Dmode%3D%22linear%22%5D%2Ehas%2Dhorizontal%2Dslides%20%2Enavigate%2Dup%2C%0A%2Ereveal%5Bdata%2Dnavigation%2Dmode%3D%22linear%22%5D%2Ehas%2Dhorizontal%2Dslides%20%2Enavigate%2Ddown%20%7B%0A%20%20display%3A%20none%3B%20%7D%0A%0A%2Ereveal%5Bdata%2Dnavigation%2Dmode%3D%22linear%22%5D%2Ehas%2Dhorizontal%2Dslides%20%2Enavigate%2Dleft%2C%0A%2Ereveal%3Anot%28%2Ehas%2Dvertical%2Dslides%29%20%2Econtrols%20%2Enavigate%2Dleft%20%7B%0A%20%20bottom%3A%201%2E4em%3B%0A%20%20right%3A%205%2E5em%3B%20%7D%0A%0A%2Ereveal%5Bdata%2Dnavigation%2Dmode%3D%22linear%22%5D%2Ehas%2Dhorizontal%2Dslides%20%2Enavigate%2Dright%2C%0A%2Ereveal%3Anot%28%2Ehas%2Dvertical%2Dslides%29%20%2Econtrols%20%2Enavigate%2Dright%20%7B%0A%20%20bottom%3A%201%2E4em%3B%0A%20%20right%3A%200%2E5em%3B%20%7D%0A%0A%2Ereveal%3Anot%28%2Ehas%2Dhorizontal%2Dslides%29%20%2Econtrols%20%2Enavigate%2Dup%20%7B%0A%20%20right%3A%201%2E4em%3B%0A%20%20bottom%3A%205em%3B%20%7D%0A%0A%2Ereveal%3Anot%28%2Ehas%2Dhorizontal%2Dslides%29%20%2Econtrols%20%2Enavigate%2Ddown%20%7B%0A%20%20right%3A%201%2E4em%3B%0A%20%20bottom%3A%200%2E5em%3B%20%7D%0A%0A%2Ereveal%2Ehas%2Ddark%2Dbackground%20%2Econtrols%20%7B%0A%20%20color%3A%20%23fff%3B%20%7D%0A%0A%2Ereveal%2Ehas%2Dlight%2Dbackground%20%2Econtrols%20%7B%0A%20%20color%3A%20%23000%3B%20%7D%0A%0A%2Ereveal%2Eno%2Dhover%20%2Econtrols%20%2Econtrols%2Darrow%3Ahover%3Abefore%2C%0A%2Ereveal%2Eno%2Dhover%20%2Econtrols%20%2Econtrols%2Darrow%3Aactive%3Abefore%20%7B%0A%20%20%2Dwebkit%2Dtransform%3A%20translateX%280%2E5em%29%20translateY%281%2E55em%29%20rotate%2845deg%29%3B%0A%20%20%20%20%20%20%20%20%20%20transform%3A%20translateX%280%2E5em%29%20translateY%281%2E55em%29%20rotate%2845deg%29%3B%20%7D%0A%0A%2Ereveal%2Eno%2Dhover%20%2Econtrols%20%2Econtrols%2Darrow%3Ahover%3Aafter%2C%0A%2Ereveal%2Eno%2Dhover%20%2Econtrols%20%2Econtrols%2Darrow%3Aactive%3Aafter%20%7B%0A%20%20%2Dwebkit%2Dtransform%3A%20translateX%280%2E5em%29%20translateY%281%2E55em%29%20rotate%28%2D45deg%29%3B%0A%20%20%20%20%20%20%20%20%20%20transform%3A%20translateX%280%2E5em%29%20translateY%281%2E55em%29%20rotate%28%2D45deg%29%3B%20%7D%0A%0A%40media%20screen%20and%20%28min%2Dwidth%3A%20500px%29%20%7B%0A%20%20%2Ereveal%20%2Econtrols%5Bdata%2Dcontrols%2Dlayout%3D%22edges%22%5D%20%7B%0A%20%20%20%20top%3A%200%3B%0A%20%20%20%20right%3A%200%3B%0A%20%20%20%20bottom%3A%200%3B%0A%20%20%20%20left%3A%200%3B%20%7D%0A%20%20%2Ereveal%20%2Econtrols%5Bdata%2Dcontrols%2Dlayout%3D%22edges%22%5D%20%2Enavigate%2Dleft%2C%0A%20%20%2Ereveal%20%2Econtrols%5Bdata%2Dcontrols%2Dlayout%3D%22edges%22%5D%20%2Enavigate%2Dright%2C%0A%20%20%2Ereveal%20%2Econtrols%5Bdata%2Dcontrols%2Dlayout%3D%22edges%22%5D%20%2Enavigate%2Dup%2C%0A%20%20%2Ereveal%20%2Econtrols%5Bdata%2Dcontrols%2Dlayout%3D%22edges%22%5D%20%2Enavigate%2Ddown%20%7B%0A%20%20%20%20bottom%3A%20auto%3B%0A%20%20%20%20right%3A%20auto%3B%20%7D%0A%20%20%2Ereveal%20%2Econtrols%5Bdata%2Dcontrols%2Dlayout%3D%22edges%22%5D%20%2Enavigate%2Dleft%20%7B%0A%20%20%20%20top%3A%2050%25%3B%0A%20%20%20%20left%3A%200%2E8em%3B%0A%20%20%20%20margin%2Dtop%3A%20%2D1%2E8em%3B%20%7D%0A%20%20%2Ereveal%20%2Econtrols%5Bdata%2Dcontrols%2Dlayout%3D%22edges%22%5D%20%2Enavigate%2Dright%20%7B%0A%20%20%20%20top%3A%2050%25%3B%0A%20%20%20%20right%3A%200%2E8em%3B%0A%20%20%20%20margin%2Dtop%3A%20%2D1%2E8em%3B%20%7D%0A%20%20%2Ereveal%20%2Econtrols%5Bdata%2Dcontrols%2Dlayout%3D%22edges%22%5D%20%2Enavigate%2Dup%20%7B%0A%20%20%20%20top%3A%200%2E8em%3B%0A%20%20%20%20left%3A%2050%25%3B%0A%20%20%20%20margin%2Dleft%3A%20%2D1%2E8em%3B%20%7D%0A%20%20%2Ereveal%20%2Econtrols%5Bdata%2Dcontrols%2Dlayout%3D%22edges%22%5D%20%2Enavigate%2Ddown%20%7B%0A%20%20%20%20bottom%3A%20%2D0%2E3em%3B%0A%20%20%20%20left%3A%2050%25%3B%0A%20%20%20%20margin%2Dleft%3A%20%2D1%2E8em%3B%20%7D%20%7D%0A%0A%2F%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%0A%20%2A%20PROGRESS%20BAR%0A%20%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2F%0A%2Ereveal%20%2Eprogress%20%7B%0A%20%20position%3A%20absolute%3B%0A%20%20display%3A%20none%3B%0A%20%20height%3A%203px%3B%0A%20%20width%3A%20100%25%3B%0A%20%20bottom%3A%200%3B%0A%20%20left%3A%200%3B%0A%20%20z%2Dindex%3A%2010%3B%0A%20%20background%2Dcolor%3A%20rgba%280%2C%200%2C%200%2C%200%2E2%29%3B%0A%20%20color%3A%20%23fff%3B%20%7D%0A%0A%2Ereveal%20%2Eprogress%3Aafter%20%7B%0A%20%20content%3A%20%27%27%3B%0A%20%20display%3A%20block%3B%0A%20%20position%3A%20absolute%3B%0A%20%20height%3A%2010px%3B%0A%20%20width%3A%20100%25%3B%0A%20%20top%3A%20%2D10px%3B%20%7D%0A%0A%2Ereveal%20%2Eprogress%20span%20%7B%0A%20%20display%3A%20block%3B%0A%20%20height%3A%20100%25%3B%0A%20%20width%3A%200px%3B%0A%20%20background%2Dcolor%3A%20currentColor%3B%0A%20%20transition%3A%20width%20800ms%20cubic%2Dbezier%280%2E26%2C%200%2E86%2C%200%2E44%2C%200%2E985%29%3B%20%7D%0A%0A%2F%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%0A%20%2A%20SLIDE%20NUMBER%0A%20%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2F%0A%2Ereveal%20%2Eslide%2Dnumber%20%7B%0A%20%20position%3A%20absolute%3B%0A%20%20display%3A%20block%3B%0A%20%20right%3A%208px%3B%0A%20%20bottom%3A%208px%3B%0A%20%20z%2Dindex%3A%2031%3B%0A%20%20font%2Dfamily%3A%20Helvetica%2C%20sans%2Dserif%3B%0A%20%20font%2Dsize%3A%2012px%3B%0A%20%20line%2Dheight%3A%201%3B%0A%20%20color%3A%20%23fff%3B%0A%20%20background%2Dcolor%3A%20rgba%280%2C%200%2C%200%2C%200%2E4%29%3B%0A%20%20padding%3A%205px%3B%20%7D%0A%0A%2Ereveal%20%2Eslide%2Dnumber%20a%20%7B%0A%20%20color%3A%20currentColor%3B%20%7D%0A%0A%2Ereveal%20%2Eslide%2Dnumber%2Ddelimiter%20%7B%0A%20%20margin%3A%200%203px%3B%20%7D%0A%0A%2F%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%0A%20%2A%20SLIDES%0A%20%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2F%0A%2Ereveal%20%7B%0A%20%20position%3A%20relative%3B%0A%20%20width%3A%20100%25%3B%0A%20%20height%3A%20100%25%3B%0A%20%20overflow%3A%20hidden%3B%0A%20%20%2Dms%2Dtouch%2Daction%3A%20pinch%2Dzoom%3B%0A%20%20%20%20%20%20touch%2Daction%3A%20pinch%2Dzoom%3B%20%7D%0A%0A%2Ereveal%20%2Eslides%20%7B%0A%20%20position%3A%20absolute%3B%0A%20%20width%3A%20100%25%3B%0A%20%20height%3A%20100%25%3B%0A%20%20top%3A%200%3B%0A%20%20right%3A%200%3B%0A%20%20bottom%3A%200%3B%0A%20%20left%3A%200%3B%0A%20%20margin%3A%20auto%3B%0A%20%20pointer%2Devents%3A%20none%3B%0A%20%20overflow%3A%20visible%3B%0A%20%20z%2Dindex%3A%201%3B%0A%20%20text%2Dalign%3A%20center%3B%0A%20%20%2Dwebkit%2Dperspective%3A%20600px%3B%0A%20%20%20%20%20%20%20%20%20%20perspective%3A%20600px%3B%0A%20%20%2Dwebkit%2Dperspective%2Dorigin%3A%2050%25%2040%25%3B%0A%20%20%20%20%20%20%20%20%20%20perspective%2Dorigin%3A%2050%25%2040%25%3B%20%7D%0A%0A%2Ereveal%20%2Eslides%20%3E%20section%20%7B%0A%20%20%2Dwebkit%2Dperspective%3A%20600px%3B%0A%20%20%20%20%20%20%20%20%20%20perspective%3A%20600px%3B%20%7D%0A%0A%2Ereveal%20%2Eslides%20%3E%20section%2C%0A%2Ereveal%20%2Eslides%20%3E%20section%20%3E%20section%20%7B%0A%20%20display%3A%20none%3B%0A%20%20position%3A%20absolute%3B%0A%20%20width%3A%20100%25%3B%0A%20%20padding%3A%2020px%200px%3B%0A%20%20pointer%2Devents%3A%20auto%3B%0A%20%20z%2Dindex%3A%2010%3B%0A%20%20%2Dwebkit%2Dtransform%2Dstyle%3A%20flat%3B%0A%20%20%20%20%20%20%20%20%20%20transform%2Dstyle%3A%20flat%3B%0A%20%20transition%3A%20%2Dwebkit%2Dtransform%2Dorigin%20800ms%20cubic%2Dbezier%280%2E26%2C%200%2E86%2C%200%2E44%2C%200%2E985%29%2C%20%2Dwebkit%2Dtransform%20800ms%20cubic%2Dbezier%280%2E26%2C%200%2E86%2C%200%2E44%2C%200%2E985%29%2C%20visibility%20800ms%20cubic%2Dbezier%280%2E26%2C%200%2E86%2C%200%2E44%2C%200%2E985%29%2C%20opacity%20800ms%20cubic%2Dbezier%280%2E26%2C%200%2E86%2C%200%2E44%2C%200%2E985%29%3B%0A%20%20transition%3A%20transform%2Dorigin%20800ms%20cubic%2Dbezier%280%2E26%2C%200%2E86%2C%200%2E44%2C%200%2E985%29%2C%20transform%20800ms%20cubic%2Dbezier%280%2E26%2C%200%2E86%2C%200%2E44%2C%200%2E985%29%2C%20visibility%20800ms%20cubic%2Dbezier%280%2E26%2C%200%2E86%2C%200%2E44%2C%200%2E985%29%2C%20opacity%20800ms%20cubic%2Dbezier%280%2E26%2C%200%2E86%2C%200%2E44%2C%200%2E985%29%3B%20%7D%0A%0A%2F%2A%20Global%20transition%20speed%20settings%20%2A%2F%0A%2Ereveal%5Bdata%2Dtransition%2Dspeed%3D%22fast%22%5D%20%2Eslides%20section%20%7B%0A%20%20transition%2Dduration%3A%20400ms%3B%20%7D%0A%0A%2Ereveal%5Bdata%2Dtransition%2Dspeed%3D%22slow%22%5D%20%2Eslides%20section%20%7B%0A%20%20transition%2Dduration%3A%201200ms%3B%20%7D%0A%0A%2F%2A%20Slide%2Dspecific%20transition%20speed%20overrides%20%2A%2F%0A%2Ereveal%20%2Eslides%20section%5Bdata%2Dtransition%2Dspeed%3D%22fast%22%5D%20%7B%0A%20%20transition%2Dduration%3A%20400ms%3B%20%7D%0A%0A%2Ereveal%20%2Eslides%20section%5Bdata%2Dtransition%2Dspeed%3D%22slow%22%5D%20%7B%0A%20%20transition%2Dduration%3A%201200ms%3B%20%7D%0A%0A%2Ereveal%20%2Eslides%20%3E%20section%2Estack%20%7B%0A%20%20padding%2Dtop%3A%200%3B%0A%20%20padding%2Dbottom%3A%200%3B%0A%20%20pointer%2Devents%3A%20none%3B%0A%20%20height%3A%20100%25%3B%20%7D%0A%0A%2Ereveal%20%2Eslides%20%3E%20section%2Epresent%2C%0A%2Ereveal%20%2Eslides%20%3E%20section%20%3E%20section%2Epresent%20%7B%0A%20%20display%3A%20block%3B%0A%20%20z%2Dindex%3A%2011%3B%0A%20%20opacity%3A%201%3B%20%7D%0A%0A%2Ereveal%20%2Eslides%20%3E%20section%3Aempty%2C%0A%2Ereveal%20%2Eslides%20%3E%20section%20%3E%20section%3Aempty%2C%0A%2Ereveal%20%2Eslides%20%3E%20section%5Bdata%2Dbackground%2Dinteractive%5D%2C%0A%2Ereveal%20%2Eslides%20%3E%20section%20%3E%20section%5Bdata%2Dbackground%2Dinteractive%5D%20%7B%0A%20%20pointer%2Devents%3A%20none%3B%20%7D%0A%0A%2Ereveal%2Ecenter%2C%0A%2Ereveal%2Ecenter%20%2Eslides%2C%0A%2Ereveal%2Ecenter%20%2Eslides%20section%20%7B%0A%20%20min%2Dheight%3A%200%20%21important%3B%20%7D%0A%0A%2F%2A%20Don%27t%20allow%20interaction%20with%20invisible%20slides%20%2A%2F%0A%2Ereveal%20%2Eslides%20%3E%20section%2Efuture%2C%0A%2Ereveal%20%2Eslides%20%3E%20section%20%3E%20section%2Efuture%2C%0A%2Ereveal%20%2Eslides%20%3E%20section%2Epast%2C%0A%2Ereveal%20%2Eslides%20%3E%20section%20%3E%20section%2Epast%20%7B%0A%20%20pointer%2Devents%3A%20none%3B%20%7D%0A%0A%2Ereveal%2Eoverview%20%2Eslides%20%3E%20section%2C%0A%2Ereveal%2Eoverview%20%2Eslides%20%3E%20section%20%3E%20section%20%7B%0A%20%20pointer%2Devents%3A%20auto%3B%20%7D%0A%0A%2Ereveal%20%2Eslides%20%3E%20section%2Epast%2C%0A%2Ereveal%20%2Eslides%20%3E%20section%2Efuture%2C%0A%2Ereveal%20%2Eslides%20%3E%20section%20%3E%20section%2Epast%2C%0A%2Ereveal%20%2Eslides%20%3E%20section%20%3E%20section%2Efuture%20%7B%0A%20%20opacity%3A%200%3B%20%7D%0A%0A%2F%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%0A%20%2A%20Mixins%20for%20readability%20of%20transitions%0A%20%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2F%0A%2F%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%0A%20%2A%20SLIDE%20TRANSITION%0A%20%2A%20Aliased%20%27linear%27%20for%20backwards%20compatibility%0A%20%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2F%0A%2Ereveal%2Eslide%20section%20%7B%0A%20%20%2Dwebkit%2Dbackface%2Dvisibility%3A%20hidden%3B%0A%20%20%20%20%20%20%20%20%20%20backface%2Dvisibility%3A%20hidden%3B%20%7D%0A%0A%2Ereveal%20%2Eslides%20%3E%20section%5Bdata%2Dtransition%3Dslide%5D%2Epast%2C%0A%2Ereveal%20%2Eslides%20%3E%20section%5Bdata%2Dtransition%7E%3Dslide%2Dout%5D%2Epast%2C%0A%2Ereveal%2Eslide%20%2Eslides%20%3E%20section%3Anot%28%5Bdata%2Dtransition%5D%29%2Epast%20%7B%0A%20%20%2Dwebkit%2Dtransform%3A%20translate%28%2D150%25%2C%200%29%3B%0A%20%20%20%20%20%20%20%20%20%20transform%3A%20translate%28%2D150%25%2C%200%29%3B%20%7D%0A%0A%2Ereveal%20%2Eslides%20%3E%20section%5Bdata%2Dtransition%3Dslide%5D%2Efuture%2C%0A%2Ereveal%20%2Eslides%20%3E%20section%5Bdata%2Dtransition%7E%3Dslide%2Din%5D%2Efuture%2C%0A%2Ereveal%2Eslide%20%2Eslides%20%3E%20section%3Anot%28%5Bdata%2Dtransition%5D%29%2Efuture%20%7B%0A%20%20%2Dwebkit%2Dtransform%3A%20translate%28150%25%2C%200%29%3B%0A%20%20%20%20%20%20%20%20%20%20transform%3A%20translate%28150%25%2C%200%29%3B%20%7D%0A%0A%2Ereveal%20%2Eslides%20%3E%20section%20%3E%20section%5Bdata%2Dtransition%3Dslide%5D%2Epast%2C%0A%2Ereveal%20%2Eslides%20%3E%20section%20%3E%20section%5Bdata%2Dtransition%7E%3Dslide%2Dout%5D%2Epast%2C%0A%2Ereveal%2Eslide%20%2Eslides%20%3E%20section%20%3E%20section%3Anot%28%5Bdata%2Dtransition%5D%29%2Epast%20%7B%0A%20%20%2Dwebkit%2Dtransform%3A%20translate%280%2C%20%2D150%25%29%3B%0A%20%20%20%20%20%20%20%20%20%20transform%3A%20translate%280%2C%20%2D150%25%29%3B%20%7D%0A%0A%2Ereveal%20%2Eslides%20%3E%20section%20%3E%20section%5Bdata%2Dtransition%3Dslide%5D%2Efuture%2C%0A%2Ereveal%20%2Eslides%20%3E%20section%20%3E%20section%5Bdata%2Dtransition%7E%3Dslide%2Din%5D%2Efuture%2C%0A%2Ereveal%2Eslide%20%2Eslides%20%3E%20section%20%3E%20section%3Anot%28%5Bdata%2Dtransition%5D%29%2Efuture%20%7B%0A%20%20%2Dwebkit%2Dtransform%3A%20translate%280%2C%20150%25%29%3B%0A%20%20%20%20%20%20%20%20%20%20transform%3A%20translate%280%2C%20150%25%29%3B%20%7D%0A%0A%2Ereveal%2Elinear%20section%20%7B%0A%20%20%2Dwebkit%2Dbackface%2Dvisibility%3A%20hidden%3B%0A%20%20%20%20%20%20%20%20%20%20backface%2Dvisibility%3A%20hidden%3B%20%7D%0A%0A%2Ereveal%20%2Eslides%20%3E%20section%5Bdata%2Dtransition%3Dlinear%5D%2Epast%2C%0A%2Ereveal%20%2Eslides%20%3E%20section%5Bdata%2Dtransition%7E%3Dlinear%2Dout%5D%2Epast%2C%0A%2Ereveal%2Elinear%20%2Eslides%20%3E%20section%3Anot%28%5Bdata%2Dtransition%5D%29%2Epast%20%7B%0A%20%20%2Dwebkit%2Dtransform%3A%20translate%28%2D150%25%2C%200%29%3B%0A%20%20%20%20%20%20%20%20%20%20transform%3A%20translate%28%2D150%25%2C%200%29%3B%20%7D%0A%0A%2Ereveal%20%2Eslides%20%3E%20section%5Bdata%2Dtransition%3Dlinear%5D%2Efuture%2C%0A%2Ereveal%20%2Eslides%20%3E%20section%5Bdata%2Dtransition%7E%3Dlinear%2Din%5D%2Efuture%2C%0A%2Ereveal%2Elinear%20%2Eslides%20%3E%20section%3Anot%28%5Bdata%2Dtransition%5D%29%2Efuture%20%7B%0A%20%20%2Dwebkit%2Dtransform%3A%20translate%28150%25%2C%200%29%3B%0A%20%20%20%20%20%20%20%20%20%20transform%3A%20translate%28150%25%2C%200%29%3B%20%7D%0A%0A%2Ereveal%20%2Eslides%20%3E%20section%20%3E%20section%5Bdata%2Dtransition%3Dlinear%5D%2Epast%2C%0A%2Ereveal%20%2Eslides%20%3E%20section%20%3E%20section%5Bdata%2Dtransition%7E%3Dlinear%2Dout%5D%2Epast%2C%0A%2Ereveal%2Elinear%20%2Eslides%20%3E%20section%20%3E%20section%3Anot%28%5Bdata%2Dtransition%5D%29%2Epast%20%7B%0A%20%20%2Dwebkit%2Dtransform%3A%20translate%280%2C%20%2D150%25%29%3B%0A%20%20%20%20%20%20%20%20%20%20transform%3A%20translate%280%2C%20%2D150%25%29%3B%20%7D%0A%0A%2Ereveal%20%2Eslides%20%3E%20section%20%3E%20section%5Bdata%2Dtransition%3Dlinear%5D%2Efuture%2C%0A%2Ereveal%20%2Eslides%20%3E%20section%20%3E%20section%5Bdata%2Dtransition%7E%3Dlinear%2Din%5D%2Efuture%2C%0A%2Ereveal%2Elinear%20%2Eslides%20%3E%20section%20%3E%20section%3Anot%28%5Bdata%2Dtransition%5D%29%2Efuture%20%7B%0A%20%20%2Dwebkit%2Dtransform%3A%20translate%280%2C%20150%25%29%3B%0A%20%20%20%20%20%20%20%20%20%20transform%3A%20translate%280%2C%20150%25%29%3B%20%7D%0A%0A%2F%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%0A%20%2A%20CONVEX%20TRANSITION%0A%20%2A%20Aliased%20%27default%27%20for%20backwards%20compatibility%0A%20%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2F%0A%2Ereveal%20%2Eslides%20section%5Bdata%2Dtransition%3Ddefault%5D%2Estack%2C%0A%2Ereveal%2Edefault%20%2Eslides%20section%2Estack%20%7B%0A%20%20%2Dwebkit%2Dtransform%2Dstyle%3A%20preserve%2D3d%3B%0A%20%20%20%20%20%20%20%20%20%20transform%2Dstyle%3A%20preserve%2D3d%3B%20%7D%0A%0A%2Ereveal%20%2Eslides%20%3E%20section%5Bdata%2Dtransition%3Ddefault%5D%2Epast%2C%0A%2Ereveal%20%2Eslides%20%3E%20section%5Bdata%2Dtransition%7E%3Ddefault%2Dout%5D%2Epast%2C%0A%2Ereveal%2Edefault%20%2Eslides%20%3E%20section%3Anot%28%5Bdata%2Dtransition%5D%29%2Epast%20%7B%0A%20%20%2Dwebkit%2Dtransform%3A%20translate3d%28%2D100%25%2C%200%2C%200%29%20rotateY%28%2D90deg%29%20translate3d%28%2D100%25%2C%200%2C%200%29%3B%0A%20%20%20%20%20%20%20%20%20%20transform%3A%20translate3d%28%2D100%25%2C%200%2C%200%29%20rotateY%28%2D90deg%29%20translate3d%28%2D100%25%2C%200%2C%200%29%3B%20%7D%0A%0A%2Ereveal%20%2Eslides%20%3E%20section%5Bdata%2Dtransition%3Ddefault%5D%2Efuture%2C%0A%2Ereveal%20%2Eslides%20%3E%20section%5Bdata%2Dtransition%7E%3Ddefault%2Din%5D%2Efuture%2C%0A%2Ereveal%2Edefault%20%2Eslides%20%3E%20section%3Anot%28%5Bdata%2Dtransition%5D%29%2Efuture%20%7B%0A%20%20%2Dwebkit%2Dtransform%3A%20translate3d%28100%25%2C%200%2C%200%29%20rotateY%2890deg%29%20translate3d%28100%25%2C%200%2C%200%29%3B%0A%20%20%20%20%20%20%20%20%20%20transform%3A%20translate3d%28100%25%2C%200%2C%200%29%20rotateY%2890deg%29%20translate3d%28100%25%2C%200%2C%200%29%3B%20%7D%0A%0A%2Ereveal%20%2Eslides%20%3E%20section%20%3E%20section%5Bdata%2Dtransition%3Ddefault%5D%2Epast%2C%0A%2Ereveal%20%2Eslides%20%3E%20section%20%3E%20section%5Bdata%2Dtransition%7E%3Ddefault%2Dout%5D%2Epast%2C%0A%2Ereveal%2Edefault%20%2Eslides%20%3E%20section%20%3E%20section%3Anot%28%5Bdata%2Dtransition%5D%29%2Epast%20%7B%0A%20%20%2Dwebkit%2Dtransform%3A%20translate3d%280%2C%20%2D300px%2C%200%29%20rotateX%2870deg%29%20translate3d%280%2C%20%2D300px%2C%200%29%3B%0A%20%20%20%20%20%20%20%20%20%20transform%3A%20translate3d%280%2C%20%2D300px%2C%200%29%20rotateX%2870deg%29%20translate3d%280%2C%20%2D300px%2C%200%29%3B%20%7D%0A%0A%2Ereveal%20%2Eslides%20%3E%20section%20%3E%20section%5Bdata%2Dtransition%3Ddefault%5D%2Efuture%2C%0A%2Ereveal%20%2Eslides%20%3E%20section%20%3E%20section%5Bdata%2Dtransition%7E%3Ddefault%2Din%5D%2Efuture%2C%0A%2Ereveal%2Edefault%20%2Eslides%20%3E%20section%20%3E%20section%3Anot%28%5Bdata%2Dtransition%5D%29%2Efuture%20%7B%0A%20%20%2Dwebkit%2Dtransform%3A%20translate3d%280%2C%20300px%2C%200%29%20rotateX%28%2D70deg%29%20translate3d%280%2C%20300px%2C%200%29%3B%0A%20%20%20%20%20%20%20%20%20%20transform%3A%20translate3d%280%2C%20300px%2C%200%29%20rotateX%28%2D70deg%29%20translate3d%280%2C%20300px%2C%200%29%3B%20%7D%0A%0A%2Ereveal%20%2Eslides%20section%5Bdata%2Dtransition%3Dconvex%5D%2Estack%2C%0A%2Ereveal%2Econvex%20%2Eslides%20section%2Estack%20%7B%0A%20%20%2Dwebkit%2Dtransform%2Dstyle%3A%20preserve%2D3d%3B%0A%20%20%20%20%20%20%20%20%20%20transform%2Dstyle%3A%20preserve%2D3d%3B%20%7D%0A%0A%2Ereveal%20%2Eslides%20%3E%20section%5Bdata%2Dtransition%3Dconvex%5D%2Epast%2C%0A%2Ereveal%20%2Eslides%20%3E%20section%5Bdata%2Dtransition%7E%3Dconvex%2Dout%5D%2Epast%2C%0A%2Ereveal%2Econvex%20%2Eslides%20%3E%20section%3Anot%28%5Bdata%2Dtransition%5D%29%2Epast%20%7B%0A%20%20%2Dwebkit%2Dtransform%3A%20translate3d%28%2D100%25%2C%200%2C%200%29%20rotateY%28%2D90deg%29%20translate3d%28%2D100%25%2C%200%2C%200%29%3B%0A%20%20%20%20%20%20%20%20%20%20transform%3A%20translate3d%28%2D100%25%2C%200%2C%200%29%20rotateY%28%2D90deg%29%20translate3d%28%2D100%25%2C%200%2C%200%29%3B%20%7D%0A%0A%2Ereveal%20%2Eslides%20%3E%20section%5Bdata%2Dtransition%3Dconvex%5D%2Efuture%2C%0A%2Ereveal%20%2Eslides%20%3E%20section%5Bdata%2Dtransition%7E%3Dconvex%2Din%5D%2Efuture%2C%0A%2Ereveal%2Econvex%20%2Eslides%20%3E%20section%3Anot%28%5Bdata%2Dtransition%5D%29%2Efuture%20%7B%0A%20%20%2Dwebkit%2Dtransform%3A%20translate3d%28100%25%2C%200%2C%200%29%20rotateY%2890deg%29%20translate3d%28100%25%2C%200%2C%200%29%3B%0A%20%20%20%20%20%20%20%20%20%20transform%3A%20translate3d%28100%25%2C%200%2C%200%29%20rotateY%2890deg%29%20translate3d%28100%25%2C%200%2C%200%29%3B%20%7D%0A%0A%2Ereveal%20%2Eslides%20%3E%20section%20%3E%20section%5Bdata%2Dtransition%3Dconvex%5D%2Epast%2C%0A%2Ereveal%20%2Eslides%20%3E%20section%20%3E%20section%5Bdata%2Dtransition%7E%3Dconvex%2Dout%5D%2Epast%2C%0A%2Ereveal%2Econvex%20%2Eslides%20%3E%20section%20%3E%20section%3Anot%28%5Bdata%2Dtransition%5D%29%2Epast%20%7B%0A%20%20%2Dwebkit%2Dtransform%3A%20translate3d%280%2C%20%2D300px%2C%200%29%20rotateX%2870deg%29%20translate3d%280%2C%20%2D300px%2C%200%29%3B%0A%20%20%20%20%20%20%20%20%20%20transform%3A%20translate3d%280%2C%20%2D300px%2C%200%29%20rotateX%2870deg%29%20translate3d%280%2C%20%2D300px%2C%200%29%3B%20%7D%0A%0A%2Ereveal%20%2Eslides%20%3E%20section%20%3E%20section%5Bdata%2Dtransition%3Dconvex%5D%2Efuture%2C%0A%2Ereveal%20%2Eslides%20%3E%20section%20%3E%20section%5Bdata%2Dtransition%7E%3Dconvex%2Din%5D%2Efuture%2C%0A%2Ereveal%2Econvex%20%2Eslides%20%3E%20section%20%3E%20section%3Anot%28%5Bdata%2Dtransition%5D%29%2Efuture%20%7B%0A%20%20%2Dwebkit%2Dtransform%3A%20translate3d%280%2C%20300px%2C%200%29%20rotateX%28%2D70deg%29%20translate3d%280%2C%20300px%2C%200%29%3B%0A%20%20%20%20%20%20%20%20%20%20transform%3A%20translate3d%280%2C%20300px%2C%200%29%20rotateX%28%2D70deg%29%20translate3d%280%2C%20300px%2C%200%29%3B%20%7D%0A%0A%2F%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%0A%20%2A%20CONCAVE%20TRANSITION%0A%20%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2F%0A%2Ereveal%20%2Eslides%20section%5Bdata%2Dtransition%3Dconcave%5D%2Estack%2C%0A%2Ereveal%2Econcave%20%2Eslides%20section%2Estack%20%7B%0A%20%20%2Dwebkit%2Dtransform%2Dstyle%3A%20preserve%2D3d%3B%0A%20%20%20%20%20%20%20%20%20%20transform%2Dstyle%3A%20preserve%2D3d%3B%20%7D%0A%0A%2Ereveal%20%2Eslides%20%3E%20section%5Bdata%2Dtransition%3Dconcave%5D%2Epast%2C%0A%2Ereveal%20%2Eslides%20%3E%20section%5Bdata%2Dtransition%7E%3Dconcave%2Dout%5D%2Epast%2C%0A%2Ereveal%2Econcave%20%2Eslides%20%3E%20section%3Anot%28%5Bdata%2Dtransition%5D%29%2Epast%20%7B%0A%20%20%2Dwebkit%2Dtransform%3A%20translate3d%28%2D100%25%2C%200%2C%200%29%20rotateY%2890deg%29%20translate3d%28%2D100%25%2C%200%2C%200%29%3B%0A%20%20%20%20%20%20%20%20%20%20transform%3A%20translate3d%28%2D100%25%2C%200%2C%200%29%20rotateY%2890deg%29%20translate3d%28%2D100%25%2C%200%2C%200%29%3B%20%7D%0A%0A%2Ereveal%20%2Eslides%20%3E%20section%5Bdata%2Dtransition%3Dconcave%5D%2Efuture%2C%0A%2Ereveal%20%2Eslides%20%3E%20section%5Bdata%2Dtransition%7E%3Dconcave%2Din%5D%2Efuture%2C%0A%2Ereveal%2Econcave%20%2Eslides%20%3E%20section%3Anot%28%5Bdata%2Dtransition%5D%29%2Efuture%20%7B%0A%20%20%2Dwebkit%2Dtransform%3A%20translate3d%28100%25%2C%200%2C%200%29%20rotateY%28%2D90deg%29%20translate3d%28100%25%2C%200%2C%200%29%3B%0A%20%20%20%20%20%20%20%20%20%20transform%3A%20translate3d%28100%25%2C%200%2C%200%29%20rotateY%28%2D90deg%29%20translate3d%28100%25%2C%200%2C%200%29%3B%20%7D%0A%0A%2Ereveal%20%2Eslides%20%3E%20section%20%3E%20section%5Bdata%2Dtransition%3Dconcave%5D%2Epast%2C%0A%2Ereveal%20%2Eslides%20%3E%20section%20%3E%20section%5Bdata%2Dtransition%7E%3Dconcave%2Dout%5D%2Epast%2C%0A%2Ereveal%2Econcave%20%2Eslides%20%3E%20section%20%3E%20section%3Anot%28%5Bdata%2Dtransition%5D%29%2Epast%20%7B%0A%20%20%2Dwebkit%2Dtransform%3A%20translate3d%280%2C%20%2D80%25%2C%200%29%20rotateX%28%2D70deg%29%20translate3d%280%2C%20%2D80%25%2C%200%29%3B%0A%20%20%20%20%20%20%20%20%20%20transform%3A%20translate3d%280%2C%20%2D80%25%2C%200%29%20rotateX%28%2D70deg%29%20translate3d%280%2C%20%2D80%25%2C%200%29%3B%20%7D%0A%0A%2Ereveal%20%2Eslides%20%3E%20section%20%3E%20section%5Bdata%2Dtransition%3Dconcave%5D%2Efuture%2C%0A%2Ereveal%20%2Eslides%20%3E%20section%20%3E%20section%5Bdata%2Dtransition%7E%3Dconcave%2Din%5D%2Efuture%2C%0A%2Ereveal%2Econcave%20%2Eslides%20%3E%20section%20%3E%20section%3Anot%28%5Bdata%2Dtransition%5D%29%2Efuture%20%7B%0A%20%20%2Dwebkit%2Dtransform%3A%20translate3d%280%2C%2080%25%2C%200%29%20rotateX%2870deg%29%20translate3d%280%2C%2080%25%2C%200%29%3B%0A%20%20%20%20%20%20%20%20%20%20transform%3A%20translate3d%280%2C%2080%25%2C%200%29%20rotateX%2870deg%29%20translate3d%280%2C%2080%25%2C%200%29%3B%20%7D%0A%0A%2F%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%0A%20%2A%20ZOOM%20TRANSITION%0A%20%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2F%0A%2Ereveal%20%2Eslides%20section%5Bdata%2Dtransition%3Dzoom%5D%2C%0A%2Ereveal%2Ezoom%20%2Eslides%20section%3Anot%28%5Bdata%2Dtransition%5D%29%20%7B%0A%20%20transition%2Dtiming%2Dfunction%3A%20ease%3B%20%7D%0A%0A%2Ereveal%20%2Eslides%20%3E%20section%5Bdata%2Dtransition%3Dzoom%5D%2Epast%2C%0A%2Ereveal%20%2Eslides%20%3E%20section%5Bdata%2Dtransition%7E%3Dzoom%2Dout%5D%2Epast%2C%0A%2Ereveal%2Ezoom%20%2Eslides%20%3E%20section%3Anot%28%5Bdata%2Dtransition%5D%29%2Epast%20%7B%0A%20%20visibility%3A%20hidden%3B%0A%20%20%2Dwebkit%2Dtransform%3A%20scale%2816%29%3B%0A%20%20%20%20%20%20%20%20%20%20transform%3A%20scale%2816%29%3B%20%7D%0A%0A%2Ereveal%20%2Eslides%20%3E%20section%5Bdata%2Dtransition%3Dzoom%5D%2Efuture%2C%0A%2Ereveal%20%2Eslides%20%3E%20section%5Bdata%2Dtransition%7E%3Dzoom%2Din%5D%2Efuture%2C%0A%2Ereveal%2Ezoom%20%2Eslides%20%3E%20section%3Anot%28%5Bdata%2Dtransition%5D%29%2Efuture%20%7B%0A%20%20visibility%3A%20hidden%3B%0A%20%20%2Dwebkit%2Dtransform%3A%20scale%280%2E2%29%3B%0A%20%20%20%20%20%20%20%20%20%20transform%3A%20scale%280%2E2%29%3B%20%7D%0A%0A%2Ereveal%20%2Eslides%20%3E%20section%20%3E%20section%5Bdata%2Dtransition%3Dzoom%5D%2Epast%2C%0A%2Ereveal%20%2Eslides%20%3E%20section%20%3E%20section%5Bdata%2Dtransition%7E%3Dzoom%2Dout%5D%2Epast%2C%0A%2Ereveal%2Ezoom%20%2Eslides%20%3E%20section%20%3E%20section%3Anot%28%5Bdata%2Dtransition%5D%29%2Epast%20%7B%0A%20%20%2Dwebkit%2Dtransform%3A%20scale%2816%29%3B%0A%20%20%20%20%20%20%20%20%20%20transform%3A%20scale%2816%29%3B%20%7D%0A%0A%2Ereveal%20%2Eslides%20%3E%20section%20%3E%20section%5Bdata%2Dtransition%3Dzoom%5D%2Efuture%2C%0A%2Ereveal%20%2Eslides%20%3E%20section%20%3E%20section%5Bdata%2Dtransition%7E%3Dzoom%2Din%5D%2Efuture%2C%0A%2Ereveal%2Ezoom%20%2Eslides%20%3E%20section%20%3E%20section%3Anot%28%5Bdata%2Dtransition%5D%29%2Efuture%20%7B%0A%20%20%2Dwebkit%2Dtransform%3A%20scale%280%2E2%29%3B%0A%20%20%20%20%20%20%20%20%20%20transform%3A%20scale%280%2E2%29%3B%20%7D%0A%0A%2F%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%0A%20%2A%20CUBE%20TRANSITION%0A%20%2A%0A%20%2A%20WARNING%3A%0A%20%2A%20this%20is%20deprecated%20and%20will%20be%20removed%20in%20a%0A%20%2A%20future%20version%2E%0A%20%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2F%0A%2Ereveal%2Ecube%20%2Eslides%20%7B%0A%20%20%2Dwebkit%2Dperspective%3A%201300px%3B%0A%20%20%20%20%20%20%20%20%20%20perspective%3A%201300px%3B%20%7D%0A%0A%2Ereveal%2Ecube%20%2Eslides%20section%20%7B%0A%20%20padding%3A%2030px%3B%0A%20%20min%2Dheight%3A%20700px%3B%0A%20%20%2Dwebkit%2Dbackface%2Dvisibility%3A%20hidden%3B%0A%20%20%20%20%20%20%20%20%20%20backface%2Dvisibility%3A%20hidden%3B%0A%20%20box%2Dsizing%3A%20border%2Dbox%3B%0A%20%20%2Dwebkit%2Dtransform%2Dstyle%3A%20preserve%2D3d%3B%0A%20%20%20%20%20%20%20%20%20%20transform%2Dstyle%3A%20preserve%2D3d%3B%20%7D%0A%0A%2Ereveal%2Ecenter%2Ecube%20%2Eslides%20section%20%7B%0A%20%20min%2Dheight%3A%200%3B%20%7D%0A%0A%2Ereveal%2Ecube%20%2Eslides%20section%3Anot%28%2Estack%29%3Abefore%20%7B%0A%20%20content%3A%20%27%27%3B%0A%20%20position%3A%20absolute%3B%0A%20%20display%3A%20block%3B%0A%20%20width%3A%20100%25%3B%0A%20%20height%3A%20100%25%3B%0A%20%20left%3A%200%3B%0A%20%20top%3A%200%3B%0A%20%20background%3A%20rgba%280%2C%200%2C%200%2C%200%2E1%29%3B%0A%20%20border%2Dradius%3A%204px%3B%0A%20%20%2Dwebkit%2Dtransform%3A%20translateZ%28%2D20px%29%3B%0A%20%20%20%20%20%20%20%20%20%20transform%3A%20translateZ%28%2D20px%29%3B%20%7D%0A%0A%2Ereveal%2Ecube%20%2Eslides%20section%3Anot%28%2Estack%29%3Aafter%20%7B%0A%20%20content%3A%20%27%27%3B%0A%20%20position%3A%20absolute%3B%0A%20%20display%3A%20block%3B%0A%20%20width%3A%2090%25%3B%0A%20%20height%3A%2030px%3B%0A%20%20left%3A%205%25%3B%0A%20%20bottom%3A%200%3B%0A%20%20background%3A%20none%3B%0A%20%20z%2Dindex%3A%201%3B%0A%20%20border%2Dradius%3A%204px%3B%0A%20%20box%2Dshadow%3A%200px%2095px%2025px%20rgba%280%2C%200%2C%200%2C%200%2E2%29%3B%0A%20%20%2Dwebkit%2Dtransform%3A%20translateZ%28%2D90px%29%20rotateX%2865deg%29%3B%0A%20%20%20%20%20%20%20%20%20%20transform%3A%20translateZ%28%2D90px%29%20rotateX%2865deg%29%3B%20%7D%0A%0A%2Ereveal%2Ecube%20%2Eslides%20%3E%20section%2Estack%20%7B%0A%20%20padding%3A%200%3B%0A%20%20background%3A%20none%3B%20%7D%0A%0A%2Ereveal%2Ecube%20%2Eslides%20%3E%20section%2Epast%20%7B%0A%20%20%2Dwebkit%2Dtransform%2Dorigin%3A%20100%25%200%25%3B%0A%20%20%20%20%20%20%20%20%20%20transform%2Dorigin%3A%20100%25%200%25%3B%0A%20%20%2Dwebkit%2Dtransform%3A%20translate3d%28%2D100%25%2C%200%2C%200%29%20rotateY%28%2D90deg%29%3B%0A%20%20%20%20%20%20%20%20%20%20transform%3A%20translate3d%28%2D100%25%2C%200%2C%200%29%20rotateY%28%2D90deg%29%3B%20%7D%0A%0A%2Ereveal%2Ecube%20%2Eslides%20%3E%20section%2Efuture%20%7B%0A%20%20%2Dwebkit%2Dtransform%2Dorigin%3A%200%25%200%25%3B%0A%20%20%20%20%20%20%20%20%20%20transform%2Dorigin%3A%200%25%200%25%3B%0A%20%20%2Dwebkit%2Dtransform%3A%20translate3d%28100%25%2C%200%2C%200%29%20rotateY%2890deg%29%3B%0A%20%20%20%20%20%20%20%20%20%20transform%3A%20translate3d%28100%25%2C%200%2C%200%29%20rotateY%2890deg%29%3B%20%7D%0A%0A%2Ereveal%2Ecube%20%2Eslides%20%3E%20section%20%3E%20section%2Epast%20%7B%0A%20%20%2Dwebkit%2Dtransform%2Dorigin%3A%200%25%20100%25%3B%0A%20%20%20%20%20%20%20%20%20%20transform%2Dorigin%3A%200%25%20100%25%3B%0A%20%20%2Dwebkit%2Dtransform%3A%20translate3d%280%2C%20%2D100%25%2C%200%29%20rotateX%2890deg%29%3B%0A%20%20%20%20%20%20%20%20%20%20transform%3A%20translate3d%280%2C%20%2D100%25%2C%200%29%20rotateX%2890deg%29%3B%20%7D%0A%0A%2Ereveal%2Ecube%20%2Eslides%20%3E%20section%20%3E%20section%2Efuture%20%7B%0A%20%20%2Dwebkit%2Dtransform%2Dorigin%3A%200%25%200%25%3B%0A%20%20%20%20%20%20%20%20%20%20transform%2Dorigin%3A%200%25%200%25%3B%0A%20%20%2Dwebkit%2Dtransform%3A%20translate3d%280%2C%20100%25%2C%200%29%20rotateX%28%2D90deg%29%3B%0A%20%20%20%20%20%20%20%20%20%20transform%3A%20translate3d%280%2C%20100%25%2C%200%29%20rotateX%28%2D90deg%29%3B%20%7D%0A%0A%2F%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%0A%20%2A%20PAGE%20TRANSITION%0A%20%2A%0A%20%2A%20WARNING%3A%0A%20%2A%20this%20is%20deprecated%20and%20will%20be%20removed%20in%20a%0A%20%2A%20future%20version%2E%0A%20%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2F%0A%2Ereveal%2Epage%20%2Eslides%20%7B%0A%20%20%2Dwebkit%2Dperspective%2Dorigin%3A%200%25%2050%25%3B%0A%20%20%20%20%20%20%20%20%20%20perspective%2Dorigin%3A%200%25%2050%25%3B%0A%20%20%2Dwebkit%2Dperspective%3A%203000px%3B%0A%20%20%20%20%20%20%20%20%20%20perspective%3A%203000px%3B%20%7D%0A%0A%2Ereveal%2Epage%20%2Eslides%20section%20%7B%0A%20%20padding%3A%2030px%3B%0A%20%20min%2Dheight%3A%20700px%3B%0A%20%20box%2Dsizing%3A%20border%2Dbox%3B%0A%20%20%2Dwebkit%2Dtransform%2Dstyle%3A%20preserve%2D3d%3B%0A%20%20%20%20%20%20%20%20%20%20transform%2Dstyle%3A%20preserve%2D3d%3B%20%7D%0A%0A%2Ereveal%2Epage%20%2Eslides%20section%2Epast%20%7B%0A%20%20z%2Dindex%3A%2012%3B%20%7D%0A%0A%2Ereveal%2Epage%20%2Eslides%20section%3Anot%28%2Estack%29%3Abefore%20%7B%0A%20%20content%3A%20%27%27%3B%0A%20%20position%3A%20absolute%3B%0A%20%20display%3A%20block%3B%0A%20%20width%3A%20100%25%3B%0A%20%20height%3A%20100%25%3B%0A%20%20left%3A%200%3B%0A%20%20top%3A%200%3B%0A%20%20background%3A%20rgba%280%2C%200%2C%200%2C%200%2E1%29%3B%0A%20%20%2Dwebkit%2Dtransform%3A%20translateZ%28%2D20px%29%3B%0A%20%20%20%20%20%20%20%20%20%20transform%3A%20translateZ%28%2D20px%29%3B%20%7D%0A%0A%2Ereveal%2Epage%20%2Eslides%20section%3Anot%28%2Estack%29%3Aafter%20%7B%0A%20%20content%3A%20%27%27%3B%0A%20%20position%3A%20absolute%3B%0A%20%20display%3A%20block%3B%0A%20%20width%3A%2090%25%3B%0A%20%20height%3A%2030px%3B%0A%20%20left%3A%205%25%3B%0A%20%20bottom%3A%200%3B%0A%20%20background%3A%20none%3B%0A%20%20z%2Dindex%3A%201%3B%0A%20%20border%2Dradius%3A%204px%3B%0A%20%20box%2Dshadow%3A%200px%2095px%2025px%20rgba%280%2C%200%2C%200%2C%200%2E2%29%3B%0A%20%20%2Dwebkit%2Dtransform%3A%20translateZ%28%2D90px%29%20rotateX%2865deg%29%3B%20%7D%0A%0A%2Ereveal%2Epage%20%2Eslides%20%3E%20section%2Estack%20%7B%0A%20%20padding%3A%200%3B%0A%20%20background%3A%20none%3B%20%7D%0A%0A%2Ereveal%2Epage%20%2Eslides%20%3E%20section%2Epast%20%7B%0A%20%20%2Dwebkit%2Dtransform%2Dorigin%3A%200%25%200%25%3B%0A%20%20%20%20%20%20%20%20%20%20transform%2Dorigin%3A%200%25%200%25%3B%0A%20%20%2Dwebkit%2Dtransform%3A%20translate3d%28%2D40%25%2C%200%2C%200%29%20rotateY%28%2D80deg%29%3B%0A%20%20%20%20%20%20%20%20%20%20transform%3A%20translate3d%28%2D40%25%2C%200%2C%200%29%20rotateY%28%2D80deg%29%3B%20%7D%0A%0A%2Ereveal%2Epage%20%2Eslides%20%3E%20section%2Efuture%20%7B%0A%20%20%2Dwebkit%2Dtransform%2Dorigin%3A%20100%25%200%25%3B%0A%20%20%20%20%20%20%20%20%20%20transform%2Dorigin%3A%20100%25%200%25%3B%0A%20%20%2Dwebkit%2Dtransform%3A%20translate3d%280%2C%200%2C%200%29%3B%0A%20%20%20%20%20%20%20%20%20%20transform%3A%20translate3d%280%2C%200%2C%200%29%3B%20%7D%0A%0A%2Ereveal%2Epage%20%2Eslides%20%3E%20section%20%3E%20section%2Epast%20%7B%0A%20%20%2Dwebkit%2Dtransform%2Dorigin%3A%200%25%200%25%3B%0A%20%20%20%20%20%20%20%20%20%20transform%2Dorigin%3A%200%25%200%25%3B%0A%20%20%2Dwebkit%2Dtransform%3A%20translate3d%280%2C%20%2D40%25%2C%200%29%20rotateX%2880deg%29%3B%0A%20%20%20%20%20%20%20%20%20%20transform%3A%20translate3d%280%2C%20%2D40%25%2C%200%29%20rotateX%2880deg%29%3B%20%7D%0A%0A%2Ereveal%2Epage%20%2Eslides%20%3E%20section%20%3E%20section%2Efuture%20%7B%0A%20%20%2Dwebkit%2Dtransform%2Dorigin%3A%200%25%20100%25%3B%0A%20%20%20%20%20%20%20%20%20%20transform%2Dorigin%3A%200%25%20100%25%3B%0A%20%20%2Dwebkit%2Dtransform%3A%20translate3d%280%2C%200%2C%200%29%3B%0A%20%20%20%20%20%20%20%20%20%20transform%3A%20translate3d%280%2C%200%2C%200%29%3B%20%7D%0A%0A%2F%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%0A%20%2A%20FADE%20TRANSITION%0A%20%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2F%0A%2Ereveal%20%2Eslides%20section%5Bdata%2Dtransition%3Dfade%5D%2C%0A%2Ereveal%2Efade%20%2Eslides%20section%3Anot%28%5Bdata%2Dtransition%5D%29%2C%0A%2Ereveal%2Efade%20%2Eslides%20%3E%20section%20%3E%20section%3Anot%28%5Bdata%2Dtransition%5D%29%20%7B%0A%20%20%2Dwebkit%2Dtransform%3A%20none%3B%0A%20%20%20%20%20%20%20%20%20%20transform%3A%20none%3B%0A%20%20transition%3A%20opacity%200%2E5s%3B%20%7D%0A%0A%2Ereveal%2Efade%2Eoverview%20%2Eslides%20section%2C%0A%2Ereveal%2Efade%2Eoverview%20%2Eslides%20%3E%20section%20%3E%20section%20%7B%0A%20%20transition%3A%20none%3B%20%7D%0A%0A%2F%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%0A%20%2A%20NO%20TRANSITION%0A%20%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2F%0A%2Ereveal%20%2Eslides%20section%5Bdata%2Dtransition%3Dnone%5D%2C%0A%2Ereveal%2Enone%20%2Eslides%20section%3Anot%28%5Bdata%2Dtransition%5D%29%20%7B%0A%20%20%2Dwebkit%2Dtransform%3A%20none%3B%0A%20%20%20%20%20%20%20%20%20%20transform%3A%20none%3B%0A%20%20transition%3A%20none%3B%20%7D%0A%0A%2F%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%0A%20%2A%20PAUSED%20MODE%0A%20%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2F%0A%2Ereveal%20%2Epause%2Doverlay%20%7B%0A%20%20position%3A%20absolute%3B%0A%20%20top%3A%200%3B%0A%20%20left%3A%200%3B%0A%20%20width%3A%20100%25%3B%0A%20%20height%3A%20100%25%3B%0A%20%20background%3A%20black%3B%0A%20%20visibility%3A%20hidden%3B%0A%20%20opacity%3A%200%3B%0A%20%20z%2Dindex%3A%20100%3B%0A%20%20transition%3A%20all%201s%20ease%3B%20%7D%0A%0A%2Ereveal%20%2Epause%2Doverlay%20%2Eresume%2Dbutton%20%7B%0A%20%20position%3A%20absolute%3B%0A%20%20bottom%3A%2020px%3B%0A%20%20right%3A%2020px%3B%0A%20%20color%3A%20%23ccc%3B%0A%20%20border%2Dradius%3A%202px%3B%0A%20%20padding%3A%206px%2014px%3B%0A%20%20border%3A%202px%20solid%20%23ccc%3B%0A%20%20font%2Dsize%3A%2016px%3B%0A%20%20background%3A%20transparent%3B%0A%20%20cursor%3A%20pointer%3B%20%7D%0A%20%20%2Ereveal%20%2Epause%2Doverlay%20%2Eresume%2Dbutton%3Ahover%20%7B%0A%20%20%20%20color%3A%20%23fff%3B%0A%20%20%20%20border%2Dcolor%3A%20%23fff%3B%20%7D%0A%0A%2Ereveal%2Epaused%20%2Epause%2Doverlay%20%7B%0A%20%20visibility%3A%20visible%3B%0A%20%20opacity%3A%201%3B%20%7D%0A%0A%2F%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%0A%20%2A%20FALLBACK%0A%20%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2F%0A%2Eno%2Dtransforms%20%7B%0A%20%20overflow%2Dy%3A%20auto%3B%20%7D%0A%0A%2Eno%2Dtransforms%20%2Ereveal%20%7B%0A%20%20overflow%3A%20visible%3B%20%7D%0A%0A%2Eno%2Dtransforms%20%2Ereveal%20%2Eslides%20%7B%0A%20%20position%3A%20relative%3B%0A%20%20width%3A%2080%25%3B%0A%20%20max%2Dwidth%3A%201280px%3B%0A%20%20height%3A%20auto%3B%0A%20%20top%3A%200%3B%0A%20%20margin%3A%200%20auto%3B%0A%20%20text%2Dalign%3A%20center%3B%20%7D%0A%0A%2Eno%2Dtransforms%20%2Ereveal%20%2Econtrols%2C%0A%2Eno%2Dtransforms%20%2Ereveal%20%2Eprogress%20%7B%0A%20%20display%3A%20none%3B%20%7D%0A%0A%2Eno%2Dtransforms%20%2Ereveal%20%2Eslides%20section%20%7B%0A%20%20display%3A%20block%3B%0A%20%20opacity%3A%201%3B%0A%20%20position%3A%20relative%3B%0A%20%20height%3A%20auto%3B%0A%20%20min%2Dheight%3A%200%3B%0A%20%20top%3A%200%3B%0A%20%20left%3A%200%3B%0A%20%20margin%3A%2010vh%200%3B%0A%20%20margin%3A%2070px%200%3B%0A%20%20%2Dwebkit%2Dtransform%3A%20none%3B%0A%20%20%20%20%20%20%20%20%20%20transform%3A%20none%3B%20%7D%0A%0A%2Ereveal%20%2Eno%2Dtransition%2C%0A%2Ereveal%20%2Eno%2Dtransition%20%2A%20%7B%0A%20%20transition%3A%20none%20%21important%3B%20%7D%0A%0A%2F%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%0A%20%2A%20PER%2DSLIDE%20BACKGROUNDS%0A%20%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2F%0A%2Ereveal%20%2Ebackgrounds%20%7B%0A%20%20position%3A%20absolute%3B%0A%20%20width%3A%20100%25%3B%0A%20%20height%3A%20100%25%3B%0A%20%20top%3A%200%3B%0A%20%20left%3A%200%3B%0A%20%20%2Dwebkit%2Dperspective%3A%20600px%3B%0A%20%20%20%20%20%20%20%20%20%20perspective%3A%20600px%3B%20%7D%0A%0A%2Ereveal%20%2Eslide%2Dbackground%20%7B%0A%20%20display%3A%20none%3B%0A%20%20position%3A%20absolute%3B%0A%20%20width%3A%20100%25%3B%0A%20%20height%3A%20100%25%3B%0A%20%20opacity%3A%200%3B%0A%20%20visibility%3A%20hidden%3B%0A%20%20overflow%3A%20hidden%3B%0A%20%20background%2Dcolor%3A%20rgba%280%2C%200%2C%200%2C%200%29%3B%0A%20%20transition%3A%20all%20800ms%20cubic%2Dbezier%280%2E26%2C%200%2E86%2C%200%2E44%2C%200%2E985%29%3B%20%7D%0A%0A%2Ereveal%20%2Eslide%2Dbackground%2Dcontent%20%7B%0A%20%20position%3A%20absolute%3B%0A%20%20width%3A%20100%25%3B%0A%20%20height%3A%20100%25%3B%0A%20%20background%2Dposition%3A%2050%25%2050%25%3B%0A%20%20background%2Drepeat%3A%20no%2Drepeat%3B%0A%20%20background%2Dsize%3A%20cover%3B%20%7D%0A%0A%2Ereveal%20%2Eslide%2Dbackground%2Estack%20%7B%0A%20%20display%3A%20block%3B%20%7D%0A%0A%2Ereveal%20%2Eslide%2Dbackground%2Epresent%20%7B%0A%20%20opacity%3A%201%3B%0A%20%20visibility%3A%20visible%3B%0A%20%20z%2Dindex%3A%202%3B%20%7D%0A%0A%2Eprint%2Dpdf%20%2Ereveal%20%2Eslide%2Dbackground%20%7B%0A%20%20opacity%3A%201%20%21important%3B%0A%20%20visibility%3A%20visible%20%21important%3B%20%7D%0A%0A%2F%2A%20Video%20backgrounds%20%2A%2F%0A%2Ereveal%20%2Eslide%2Dbackground%20video%20%7B%0A%20%20position%3A%20absolute%3B%0A%20%20width%3A%20100%25%3B%0A%20%20height%3A%20100%25%3B%0A%20%20max%2Dwidth%3A%20none%3B%0A%20%20max%2Dheight%3A%20none%3B%0A%20%20top%3A%200%3B%0A%20%20left%3A%200%3B%0A%20%20%2Do%2Dobject%2Dfit%3A%20cover%3B%0A%20%20%20%20%20object%2Dfit%3A%20cover%3B%20%7D%0A%0A%2Ereveal%20%2Eslide%2Dbackground%5Bdata%2Dbackground%2Dsize%3D%22contain%22%5D%20video%20%7B%0A%20%20%2Do%2Dobject%2Dfit%3A%20contain%3B%0A%20%20%20%20%20object%2Dfit%3A%20contain%3B%20%7D%0A%0A%2F%2A%20Immediate%20transition%20style%20%2A%2F%0A%2Ereveal%5Bdata%2Dbackground%2Dtransition%3Dnone%5D%20%3E%20%2Ebackgrounds%20%2Eslide%2Dbackground%2C%0A%2Ereveal%20%3E%20%2Ebackgrounds%20%2Eslide%2Dbackground%5Bdata%2Dbackground%2Dtransition%3Dnone%5D%20%7B%0A%20%20transition%3A%20none%3B%20%7D%0A%0A%2F%2A%20Slide%20%2A%2F%0A%2Ereveal%5Bdata%2Dbackground%2Dtransition%3Dslide%5D%20%3E%20%2Ebackgrounds%20%2Eslide%2Dbackground%2C%0A%2Ereveal%20%3E%20%2Ebackgrounds%20%2Eslide%2Dbackground%5Bdata%2Dbackground%2Dtransition%3Dslide%5D%20%7B%0A%20%20opacity%3A%201%3B%0A%20%20%2Dwebkit%2Dbackface%2Dvisibility%3A%20hidden%3B%0A%20%20%20%20%20%20%20%20%20%20backface%2Dvisibility%3A%20hidden%3B%20%7D%0A%0A%2Ereveal%5Bdata%2Dbackground%2Dtransition%3Dslide%5D%20%3E%20%2Ebackgrounds%20%2Eslide%2Dbackground%2Epast%2C%0A%2Ereveal%20%3E%20%2Ebackgrounds%20%2Eslide%2Dbackground%2Epast%5Bdata%2Dbackground%2Dtransition%3Dslide%5D%20%7B%0A%20%20%2Dwebkit%2Dtransform%3A%20translate%28%2D100%25%2C%200%29%3B%0A%20%20%20%20%20%20%20%20%20%20transform%3A%20translate%28%2D100%25%2C%200%29%3B%20%7D%0A%0A%2Ereveal%5Bdata%2Dbackground%2Dtransition%3Dslide%5D%20%3E%20%2Ebackgrounds%20%2Eslide%2Dbackground%2Efuture%2C%0A%2Ereveal%20%3E%20%2Ebackgrounds%20%2Eslide%2Dbackground%2Efuture%5Bdata%2Dbackground%2Dtransition%3Dslide%5D%20%7B%0A%20%20%2Dwebkit%2Dtransform%3A%20translate%28100%25%2C%200%29%3B%0A%20%20%20%20%20%20%20%20%20%20transform%3A%20translate%28100%25%2C%200%29%3B%20%7D%0A%0A%2Ereveal%5Bdata%2Dbackground%2Dtransition%3Dslide%5D%20%3E%20%2Ebackgrounds%20%2Eslide%2Dbackground%20%3E%20%2Eslide%2Dbackground%2Epast%2C%0A%2Ereveal%20%3E%20%2Ebackgrounds%20%2Eslide%2Dbackground%20%3E%20%2Eslide%2Dbackground%2Epast%5Bdata%2Dbackground%2Dtransition%3Dslide%5D%20%7B%0A%20%20%2Dwebkit%2Dtransform%3A%20translate%280%2C%20%2D100%25%29%3B%0A%20%20%20%20%20%20%20%20%20%20transform%3A%20translate%280%2C%20%2D100%25%29%3B%20%7D%0A%0A%2Ereveal%5Bdata%2Dbackground%2Dtransition%3Dslide%5D%20%3E%20%2Ebackgrounds%20%2Eslide%2Dbackground%20%3E%20%2Eslide%2Dbackground%2Efuture%2C%0A%2Ereveal%20%3E%20%2Ebackgrounds%20%2Eslide%2Dbackground%20%3E%20%2Eslide%2Dbackground%2Efuture%5Bdata%2Dbackground%2Dtransition%3Dslide%5D%20%7B%0A%20%20%2Dwebkit%2Dtransform%3A%20translate%280%2C%20100%25%29%3B%0A%20%20%20%20%20%20%20%20%20%20transform%3A%20translate%280%2C%20100%25%29%3B%20%7D%0A%0A%2F%2A%20Convex%20%2A%2F%0A%2Ereveal%5Bdata%2Dbackground%2Dtransition%3Dconvex%5D%20%3E%20%2Ebackgrounds%20%2Eslide%2Dbackground%2Epast%2C%0A%2Ereveal%20%3E%20%2Ebackgrounds%20%2Eslide%2Dbackground%2Epast%5Bdata%2Dbackground%2Dtransition%3Dconvex%5D%20%7B%0A%20%20opacity%3A%200%3B%0A%20%20%2Dwebkit%2Dtransform%3A%20translate3d%28%2D100%25%2C%200%2C%200%29%20rotateY%28%2D90deg%29%20translate3d%28%2D100%25%2C%200%2C%200%29%3B%0A%20%20%20%20%20%20%20%20%20%20transform%3A%20translate3d%28%2D100%25%2C%200%2C%200%29%20rotateY%28%2D90deg%29%20translate3d%28%2D100%25%2C%200%2C%200%29%3B%20%7D%0A%0A%2Ereveal%5Bdata%2Dbackground%2Dtransition%3Dconvex%5D%20%3E%20%2Ebackgrounds%20%2Eslide%2Dbackground%2Efuture%2C%0A%2Ereveal%20%3E%20%2Ebackgrounds%20%2Eslide%2Dbackground%2Efuture%5Bdata%2Dbackground%2Dtransition%3Dconvex%5D%20%7B%0A%20%20opacity%3A%200%3B%0A%20%20%2Dwebkit%2Dtransform%3A%20translate3d%28100%25%2C%200%2C%200%29%20rotateY%2890deg%29%20translate3d%28100%25%2C%200%2C%200%29%3B%0A%20%20%20%20%20%20%20%20%20%20transform%3A%20translate3d%28100%25%2C%200%2C%200%29%20rotateY%2890deg%29%20translate3d%28100%25%2C%200%2C%200%29%3B%20%7D%0A%0A%2Ereveal%5Bdata%2Dbackground%2Dtransition%3Dconvex%5D%20%3E%20%2Ebackgrounds%20%2Eslide%2Dbackground%20%3E%20%2Eslide%2Dbackground%2Epast%2C%0A%2Ereveal%20%3E%20%2Ebackgrounds%20%2Eslide%2Dbackground%20%3E%20%2Eslide%2Dbackground%2Epast%5Bdata%2Dbackground%2Dtransition%3Dconvex%5D%20%7B%0A%20%20opacity%3A%200%3B%0A%20%20%2Dwebkit%2Dtransform%3A%20translate3d%280%2C%20%2D100%25%2C%200%29%20rotateX%2890deg%29%20translate3d%280%2C%20%2D100%25%2C%200%29%3B%0A%20%20%20%20%20%20%20%20%20%20transform%3A%20translate3d%280%2C%20%2D100%25%2C%200%29%20rotateX%2890deg%29%20translate3d%280%2C%20%2D100%25%2C%200%29%3B%20%7D%0A%0A%2Ereveal%5Bdata%2Dbackground%2Dtransition%3Dconvex%5D%20%3E%20%2Ebackgrounds%20%2Eslide%2Dbackground%20%3E%20%2Eslide%2Dbackground%2Efuture%2C%0A%2Ereveal%20%3E%20%2Ebackgrounds%20%2Eslide%2Dbackground%20%3E%20%2Eslide%2Dbackground%2Efuture%5Bdata%2Dbackground%2Dtransition%3Dconvex%5D%20%7B%0A%20%20opacity%3A%200%3B%0A%20%20%2Dwebkit%2Dtransform%3A%20translate3d%280%2C%20100%25%2C%200%29%20rotateX%28%2D90deg%29%20translate3d%280%2C%20100%25%2C%200%29%3B%0A%20%20%20%20%20%20%20%20%20%20transform%3A%20translate3d%280%2C%20100%25%2C%200%29%20rotateX%28%2D90deg%29%20translate3d%280%2C%20100%25%2C%200%29%3B%20%7D%0A%0A%2F%2A%20Concave%20%2A%2F%0A%2Ereveal%5Bdata%2Dbackground%2Dtransition%3Dconcave%5D%20%3E%20%2Ebackgrounds%20%2Eslide%2Dbackground%2Epast%2C%0A%2Ereveal%20%3E%20%2Ebackgrounds%20%2Eslide%2Dbackground%2Epast%5Bdata%2Dbackground%2Dtransition%3Dconcave%5D%20%7B%0A%20%20opacity%3A%200%3B%0A%20%20%2Dwebkit%2Dtransform%3A%20translate3d%28%2D100%25%2C%200%2C%200%29%20rotateY%2890deg%29%20translate3d%28%2D100%25%2C%200%2C%200%29%3B%0A%20%20%20%20%20%20%20%20%20%20transform%3A%20translate3d%28%2D100%25%2C%200%2C%200%29%20rotateY%2890deg%29%20translate3d%28%2D100%25%2C%200%2C%200%29%3B%20%7D%0A%0A%2Ereveal%5Bdata%2Dbackground%2Dtransition%3Dconcave%5D%20%3E%20%2Ebackgrounds%20%2Eslide%2Dbackground%2Efuture%2C%0A%2Ereveal%20%3E%20%2Ebackgrounds%20%2Eslide%2Dbackground%2Efuture%5Bdata%2Dbackground%2Dtransition%3Dconcave%5D%20%7B%0A%20%20opacity%3A%200%3B%0A%20%20%2Dwebkit%2Dtransform%3A%20translate3d%28100%25%2C%200%2C%200%29%20rotateY%28%2D90deg%29%20translate3d%28100%25%2C%200%2C%200%29%3B%0A%20%20%20%20%20%20%20%20%20%20transform%3A%20translate3d%28100%25%2C%200%2C%200%29%20rotateY%28%2D90deg%29%20translate3d%28100%25%2C%200%2C%200%29%3B%20%7D%0A%0A%2Ereveal%5Bdata%2Dbackground%2Dtransition%3Dconcave%5D%20%3E%20%2Ebackgrounds%20%2Eslide%2Dbackground%20%3E%20%2Eslide%2Dbackground%2Epast%2C%0A%2Ereveal%20%3E%20%2Ebackgrounds%20%2Eslide%2Dbackground%20%3E%20%2Eslide%2Dbackground%2Epast%5Bdata%2Dbackground%2Dtransition%3Dconcave%5D%20%7B%0A%20%20opacity%3A%200%3B%0A%20%20%2Dwebkit%2Dtransform%3A%20translate3d%280%2C%20%2D100%25%2C%200%29%20rotateX%28%2D90deg%29%20translate3d%280%2C%20%2D100%25%2C%200%29%3B%0A%20%20%20%20%20%20%20%20%20%20transform%3A%20translate3d%280%2C%20%2D100%25%2C%200%29%20rotateX%28%2D90deg%29%20translate3d%280%2C%20%2D100%25%2C%200%29%3B%20%7D%0A%0A%2Ereveal%5Bdata%2Dbackground%2Dtransition%3Dconcave%5D%20%3E%20%2Ebackgrounds%20%2Eslide%2Dbackground%20%3E%20%2Eslide%2Dbackground%2Efuture%2C%0A%2Ereveal%20%3E%20%2Ebackgrounds%20%2Eslide%2Dbackground%20%3E%20%2Eslide%2Dbackground%2Efuture%5Bdata%2Dbackground%2Dtransition%3Dconcave%5D%20%7B%0A%20%20opacity%3A%200%3B%0A%20%20%2Dwebkit%2Dtransform%3A%20translate3d%280%2C%20100%25%2C%200%29%20rotateX%2890deg%29%20translate3d%280%2C%20100%25%2C%200%29%3B%0A%20%20%20%20%20%20%20%20%20%20transform%3A%20translate3d%280%2C%20100%25%2C%200%29%20rotateX%2890deg%29%20translate3d%280%2C%20100%25%2C%200%29%3B%20%7D%0A%0A%2F%2A%20Zoom%20%2A%2F%0A%2Ereveal%5Bdata%2Dbackground%2Dtransition%3Dzoom%5D%20%3E%20%2Ebackgrounds%20%2Eslide%2Dbackground%2C%0A%2Ereveal%20%3E%20%2Ebackgrounds%20%2Eslide%2Dbackground%5Bdata%2Dbackground%2Dtransition%3Dzoom%5D%20%7B%0A%20%20transition%2Dtiming%2Dfunction%3A%20ease%3B%20%7D%0A%0A%2Ereveal%5Bdata%2Dbackground%2Dtransition%3Dzoom%5D%20%3E%20%2Ebackgrounds%20%2Eslide%2Dbackground%2Epast%2C%0A%2Ereveal%20%3E%20%2Ebackgrounds%20%2Eslide%2Dbackground%2Epast%5Bdata%2Dbackground%2Dtransition%3Dzoom%5D%20%7B%0A%20%20opacity%3A%200%3B%0A%20%20visibility%3A%20hidden%3B%0A%20%20%2Dwebkit%2Dtransform%3A%20scale%2816%29%3B%0A%20%20%20%20%20%20%20%20%20%20transform%3A%20scale%2816%29%3B%20%7D%0A%0A%2Ereveal%5Bdata%2Dbackground%2Dtransition%3Dzoom%5D%20%3E%20%2Ebackgrounds%20%2Eslide%2Dbackground%2Efuture%2C%0A%2Ereveal%20%3E%20%2Ebackgrounds%20%2Eslide%2Dbackground%2Efuture%5Bdata%2Dbackground%2Dtransition%3Dzoom%5D%20%7B%0A%20%20opacity%3A%200%3B%0A%20%20visibility%3A%20hidden%3B%0A%20%20%2Dwebkit%2Dtransform%3A%20scale%280%2E2%29%3B%0A%20%20%20%20%20%20%20%20%20%20transform%3A%20scale%280%2E2%29%3B%20%7D%0A%0A%2Ereveal%5Bdata%2Dbackground%2Dtransition%3Dzoom%5D%20%3E%20%2Ebackgrounds%20%2Eslide%2Dbackground%20%3E%20%2Eslide%2Dbackground%2Epast%2C%0A%2Ereveal%20%3E%20%2Ebackgrounds%20%2Eslide%2Dbackground%20%3E%20%2Eslide%2Dbackground%2Epast%5Bdata%2Dbackground%2Dtransition%3Dzoom%5D%20%7B%0A%20%20opacity%3A%200%3B%0A%20%20visibility%3A%20hidden%3B%0A%20%20%2Dwebkit%2Dtransform%3A%20scale%2816%29%3B%0A%20%20%20%20%20%20%20%20%20%20transform%3A%20scale%2816%29%3B%20%7D%0A%0A%2Ereveal%5Bdata%2Dbackground%2Dtransition%3Dzoom%5D%20%3E%20%2Ebackgrounds%20%2Eslide%2Dbackground%20%3E%20%2Eslide%2Dbackground%2Efuture%2C%0A%2Ereveal%20%3E%20%2Ebackgrounds%20%2Eslide%2Dbackground%20%3E%20%2Eslide%2Dbackground%2Efuture%5Bdata%2Dbackground%2Dtransition%3Dzoom%5D%20%7B%0A%20%20opacity%3A%200%3B%0A%20%20visibility%3A%20hidden%3B%0A%20%20%2Dwebkit%2Dtransform%3A%20scale%280%2E2%29%3B%0A%20%20%20%20%20%20%20%20%20%20transform%3A%20scale%280%2E2%29%3B%20%7D%0A%0A%2F%2A%20Global%20transition%20speed%20settings%20%2A%2F%0A%2Ereveal%5Bdata%2Dtransition%2Dspeed%3D%22fast%22%5D%20%3E%20%2Ebackgrounds%20%2Eslide%2Dbackground%20%7B%0A%20%20transition%2Dduration%3A%20400ms%3B%20%7D%0A%0A%2Ereveal%5Bdata%2Dtransition%2Dspeed%3D%22slow%22%5D%20%3E%20%2Ebackgrounds%20%2Eslide%2Dbackground%20%7B%0A%20%20transition%2Dduration%3A%201200ms%3B%20%7D%0A%0A%2F%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%0A%20%2A%20OVERVIEW%0A%20%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2F%0A%2Ereveal%2Eoverview%20%7B%0A%20%20%2Dwebkit%2Dperspective%2Dorigin%3A%2050%25%2050%25%3B%0A%20%20%20%20%20%20%20%20%20%20perspective%2Dorigin%3A%2050%25%2050%25%3B%0A%20%20%2Dwebkit%2Dperspective%3A%20700px%3B%0A%20%20%20%20%20%20%20%20%20%20perspective%3A%20700px%3B%20%7D%0A%20%20%2Ereveal%2Eoverview%20%2Eslides%20%7B%0A%20%20%20%20%2Dmoz%2Dtransform%2Dstyle%3A%20preserve%2D3d%3B%20%7D%0A%20%20%2Ereveal%2Eoverview%20%2Eslides%20section%20%7B%0A%20%20%20%20height%3A%20100%25%3B%0A%20%20%20%20top%3A%200%20%21important%3B%0A%20%20%20%20opacity%3A%201%20%21important%3B%0A%20%20%20%20overflow%3A%20hidden%3B%0A%20%20%20%20visibility%3A%20visible%20%21important%3B%0A%20%20%20%20cursor%3A%20pointer%3B%0A%20%20%20%20box%2Dsizing%3A%20border%2Dbox%3B%20%7D%0A%20%20%2Ereveal%2Eoverview%20%2Eslides%20section%3Ahover%2C%0A%20%20%2Ereveal%2Eoverview%20%2Eslides%20section%2Epresent%20%7B%0A%20%20%20%20outline%3A%2010px%20solid%20rgba%28150%2C%20150%2C%20150%2C%200%2E4%29%3B%0A%20%20%20%20outline%2Doffset%3A%2010px%3B%20%7D%0A%20%20%2Ereveal%2Eoverview%20%2Eslides%20section%20%2Efragment%20%7B%0A%20%20%20%20opacity%3A%201%3B%0A%20%20%20%20transition%3A%20none%3B%20%7D%0A%20%20%2Ereveal%2Eoverview%20%2Eslides%20section%3Aafter%2C%0A%20%20%2Ereveal%2Eoverview%20%2Eslides%20section%3Abefore%20%7B%0A%20%20%20%20display%3A%20none%20%21important%3B%20%7D%0A%20%20%2Ereveal%2Eoverview%20%2Eslides%20%3E%20section%2Estack%20%7B%0A%20%20%20%20padding%3A%200%3B%0A%20%20%20%20top%3A%200%20%21important%3B%0A%20%20%20%20background%3A%20none%3B%0A%20%20%20%20outline%3A%20none%3B%0A%20%20%20%20overflow%3A%20visible%3B%20%7D%0A%20%20%2Ereveal%2Eoverview%20%2Ebackgrounds%20%7B%0A%20%20%20%20%2Dwebkit%2Dperspective%3A%20inherit%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20perspective%3A%20inherit%3B%0A%20%20%20%20%2Dmoz%2Dtransform%2Dstyle%3A%20preserve%2D3d%3B%20%7D%0A%20%20%2Ereveal%2Eoverview%20%2Ebackgrounds%20%2Eslide%2Dbackground%20%7B%0A%20%20%20%20opacity%3A%201%3B%0A%20%20%20%20visibility%3A%20visible%3B%0A%20%20%20%20outline%3A%2010px%20solid%20rgba%28150%2C%20150%2C%20150%2C%200%2E1%29%3B%0A%20%20%20%20outline%2Doffset%3A%2010px%3B%20%7D%0A%20%20%2Ereveal%2Eoverview%20%2Ebackgrounds%20%2Eslide%2Dbackground%2Estack%20%7B%0A%20%20%20%20overflow%3A%20visible%3B%20%7D%0A%0A%2Ereveal%2Eoverview%20%2Eslides%20section%2C%0A%2Ereveal%2Eoverview%2Ddeactivating%20%2Eslides%20section%20%7B%0A%20%20transition%3A%20none%3B%20%7D%0A%0A%2Ereveal%2Eoverview%20%2Ebackgrounds%20%2Eslide%2Dbackground%2C%0A%2Ereveal%2Eoverview%2Ddeactivating%20%2Ebackgrounds%20%2Eslide%2Dbackground%20%7B%0A%20%20transition%3A%20none%3B%20%7D%0A%0A%2F%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%0A%20%2A%20RTL%20SUPPORT%0A%20%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2F%0A%2Ereveal%2Ertl%20%2Eslides%2C%0A%2Ereveal%2Ertl%20%2Eslides%20h1%2C%0A%2Ereveal%2Ertl%20%2Eslides%20h2%2C%0A%2Ereveal%2Ertl%20%2Eslides%20h3%2C%0A%2Ereveal%2Ertl%20%2Eslides%20h4%2C%0A%2Ereveal%2Ertl%20%2Eslides%20h5%2C%0A%2Ereveal%2Ertl%20%2Eslides%20h6%20%7B%0A%20%20direction%3A%20rtl%3B%0A%20%20font%2Dfamily%3A%20sans%2Dserif%3B%20%7D%0A%0A%2Ereveal%2Ertl%20pre%2C%0A%2Ereveal%2Ertl%20code%20%7B%0A%20%20direction%3A%20ltr%3B%20%7D%0A%0A%2Ereveal%2Ertl%20ol%2C%0A%2Ereveal%2Ertl%20ul%20%7B%0A%20%20text%2Dalign%3A%20right%3B%20%7D%0A%0A%2Ereveal%2Ertl%20%2Eprogress%20span%20%7B%0A%20%20float%3A%20right%3B%20%7D%0A%0A%2F%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%0A%20%2A%20PARALLAX%20BACKGROUND%0A%20%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2F%0A%2Ereveal%2Ehas%2Dparallax%2Dbackground%20%2Ebackgrounds%20%7B%0A%20%20transition%3A%20all%200%2E8s%20ease%3B%20%7D%0A%0A%2F%2A%20Global%20transition%20speed%20settings%20%2A%2F%0A%2Ereveal%2Ehas%2Dparallax%2Dbackground%5Bdata%2Dtransition%2Dspeed%3D%22fast%22%5D%20%2Ebackgrounds%20%7B%0A%20%20transition%2Dduration%3A%20400ms%3B%20%7D%0A%0A%2Ereveal%2Ehas%2Dparallax%2Dbackground%5Bdata%2Dtransition%2Dspeed%3D%22slow%22%5D%20%2Ebackgrounds%20%7B%0A%20%20transition%2Dduration%3A%201200ms%3B%20%7D%0A%0A%2F%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%0A%20%2A%20OVERLAY%20FOR%20LINK%20PREVIEWS%20AND%20HELP%0A%20%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2F%0A%2Ereveal%20%3E%20%2Eoverlay%20%7B%0A%20%20position%3A%20absolute%3B%0A%20%20top%3A%200%3B%0A%20%20left%3A%200%3B%0A%20%20width%3A%20100%25%3B%0A%20%20height%3A%20100%25%3B%0A%20%20z%2Dindex%3A%201000%3B%0A%20%20background%3A%20rgba%280%2C%200%2C%200%2C%200%2E9%29%3B%0A%20%20opacity%3A%200%3B%0A%20%20visibility%3A%20hidden%3B%0A%20%20transition%3A%20all%200%2E3s%20ease%3B%20%7D%0A%0A%2Ereveal%20%3E%20%2Eoverlay%2Evisible%20%7B%0A%20%20opacity%3A%201%3B%0A%20%20visibility%3A%20visible%3B%20%7D%0A%0A%2Ereveal%20%3E%20%2Eoverlay%20%2Espinner%20%7B%0A%20%20position%3A%20absolute%3B%0A%20%20display%3A%20block%3B%0A%20%20top%3A%2050%25%3B%0A%20%20left%3A%2050%25%3B%0A%20%20width%3A%2032px%3B%0A%20%20height%3A%2032px%3B%0A%20%20margin%3A%20%2D16px%200%200%20%2D16px%3B%0A%20%20z%2Dindex%3A%2010%3B%0A%20%20background%2Dimage%3A%20url%28data%3Aimage%2Fgif%3Bbase64%2CR0lGODlhIAAgAPMAAJmZmf%252F%252F%252F6%252Bvr8nJybW1tcDAwOjo6Nvb26ioqKOjo7Ozs%252FLy8vz8%252FAAAAAAAAAAAACH%252FC05FVFNDQVBFMi4wAwEAAAAh%252FhpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh%252BQQJCgAAACwAAAAAIAAgAAAE5xDISWlhperN52JLhSSdRgwVo1ICQZRUsiwHpTJT4iowNS8vyW2icCF6k8HMMBkCEDskxTBDAZwuAkkqIfxIQyhBQBFvAQSDITM5VDW6XNE4KagNh6Bgwe60smQUB3d4Rz1ZBApnFASDd0hihh12BkE9kjAJVlycXIg7CQIFA6SlnJ87paqbSKiKoqusnbMdmDC2tXQlkUhziYtyWTxIfy6BE8WJt5YJvpJivxNaGmLHT0VnOgSYf0dZXS7APdpB309RnHOG5gDqXGLDaC457D1zZ%252FV%252FnmOM82XiHRLYKhKP1oZmADdEAAAh%252BQQJCgAAACwAAAAAIAAgAAAE6hDISWlZpOrNp1lGNRSdRpDUolIGw5RUYhhHukqFu8DsrEyqnWThGvAmhVlteBvojpTDDBUEIFwMFBRAmBkSgOrBFZogCASwBDEY%252FCZSg7GSE0gSCjQBMVG023xWBhklAnoEdhQEfyNqMIcKjhRsjEdnezB%252BA4k8gTwJhFuiW4dokXiloUepBAp5qaKpp6%252BHo7aWW54wl7obvEe0kRuoplCGepwSx2jJvqHEmGt6whJpGpfJCHmOoNHKaHx61WiSR92E4lbFoq%252BB6QDtuetcaBPnW6%252BO7wDHpIiK9SaVK5GgV543tzjgGcghAgAh%252BQQJCgAAACwAAAAAIAAgAAAE7hDISSkxpOrN5zFHNWRdhSiVoVLHspRUMoyUakyEe8PTPCATW9A14E0UvuAKMNAZKYUZCiBMuBakSQKG8G2FzUWox2AUtAQFcBKlVQoLgQReZhQlCIJesQXI5B0CBnUMOxMCenoCfTCEWBsJColTMANldx15BGs8B5wlCZ9Po6OJkwmRpnqkqnuSrayqfKmqpLajoiW5HJq7FL1Gr2mMMcKUMIiJgIemy7xZtJsTmsM4xHiKv5KMCXqfyUCJEonXPN2rAOIAmsfB3uPoAK%252B%252BG%252Bw48edZPK%252BM6hLJpQg484enXIdQFSS1u6UhksENEQAAIfkECQoAAAAsAAAAACAAIAAABOcQyEmpGKLqzWcZRVUQnZYg1aBSh2GUVEIQ2aQOE%252BG%252BcD4ntpWkZQj1JIiZIogDFFyHI0UxQwFugMSOFIPJftfVAEoZLBbcLEFhlQiqGp1Vd140AUklUN3eCA51C1EWMzMCezCBBmkxVIVHBWd3HHl9JQOIJSdSnJ0TDKChCwUJjoWMPaGqDKannasMo6WnM562R5YluZRwur0wpgqZE7NKUm%252BFNRPIhjBJxKZteWuIBMN4zRMIVIhffcgojwCF117i4nlLnY5ztRLsnOk%252BaV%252BoJY7V7m76PdkS4trKcdg0Zc0tTcKkRAAAIfkECQoAAAAsAAAAACAAIAAABO4QyEkpKqjqzScpRaVkXZWQEximw1BSCUEIlDohrft6cpKCk5xid5MNJTaAIkekKGQkWyKHkvhKsR7ARmitkAYDYRIbUQRQjWBwJRzChi9CRlBcY1UN4g0%252FVNB0AlcvcAYHRyZPdEQFYV8ccwR5HWxEJ02YmRMLnJ1xCYp0Y5idpQuhopmmC2KgojKasUQDk5BNAwwMOh2RtRq5uQuPZKGIJQIGwAwGf6I0JXMpC8C7kXWDBINFMxS4DKMAWVWAGYsAdNqW5uaRxkSKJOZKaU3tPOBZ4DuK2LATgJhkPJMgTwKCdFjyPHEnKxFCDhEAACH5BAkKAAAALAAAAAAgACAAAATzEMhJaVKp6s2nIkolIJ2WkBShpkVRWqqQrhLSEu9MZJKK9y1ZrqYK9WiClmvoUaF8gIQSNeF1Er4MNFn4SRSDARWroAIETg1iVwuHjYB1kYc1mwruwXKC9gmsJXliGxc%252BXiUCby9ydh1sOSdMkpMTBpaXBzsfhoc5l58Gm5yToAaZhaOUqjkDgCWNHAULCwOLaTmzswadEqggQwgHuQsHIoZCHQMMQgQGubVEcxOPFAcMDAYUA85eWARmfSRQCdcMe0zeP1AAygwLlJtPNAAL19DARdPzBOWSm1brJBi45soRAWQAAkrQIykShQ9wVhHCwCQCACH5BAkKAAAALAAAAAAgACAAAATrEMhJaVKp6s2nIkqFZF2VIBWhUsJaTokqUCoBq%252BE71SRQeyqUToLA7VxF0JDyIQh%252FMVVPMt1ECZlfcjZJ9mIKoaTl1MRIl5o4CUKXOwmyrCInCKqcWtvadL2SYhyASyNDJ0uIiRMDjI0Fd30%252FiI2UA5GSS5UDj2l6NoqgOgN4gksEBgYFf0FDqKgHnyZ9OX8HrgYHdHpcHQULXAS2qKpENRg7eAMLC7kTBaixUYFkKAzWAAnLC7FLVxLWDBLKCwaKTULgEwbLA4hJtOkSBNqITT3xEgfLpBtzE%252FjiuL04RGEBgwWhShRgQExHBAAh%252BQQJCgAAACwAAAAAIAAgAAAE7xDISWlSqerNpyJKhWRdlSAVoVLCWk6JKlAqAavhO9UkUHsqlE6CwO1cRdCQ8iEIfzFVTzLdRAmZX3I2SfZiCqGk5dTESJeaOAlClzsJsqwiJwiqnFrb2nS9kmIcgEsjQydLiIlHehhpejaIjzh9eomSjZR%252BipslWIRLAgMDOR2DOqKogTB9pCUJBagDBXR6XB0EBkIIsaRsGGMMAxoDBgYHTKJiUYEGDAzHC9EACcUGkIgFzgwZ0QsSBcXHiQvOwgDdEwfFs0sDzt4S6BK4xYjkDOzn0unFeBzOBijIm1Dgmg5YFQwsCMjp1oJ8LyIAACH5BAkKAAAALAAAAAAgACAAAATwEMhJaVKp6s2nIkqFZF2VIBWhUsJaTokqUCoBq%252BE71SRQeyqUToLA7VxF0JDyIQh%252FMVVPMt1ECZlfcjZJ9mIKoaTl1MRIl5o4CUKXOwmyrCInCKqcWtvadL2SYhyASyNDJ0uIiUd6GGl6NoiPOH16iZKNlH6KmyWFOggHhEEvAwwMA0N9GBsEC6amhnVcEwavDAazGwIDaH1ipaYLBUTCGgQDA8NdHz0FpqgTBwsLqAbWAAnIA4FWKdMLGdYGEgraigbT0OITBcg5QwPT4xLrROZL6AuQAPUS7bxLpoWidY0JtxLHKhwwMJBTHgPKdEQAACH5BAkKAAAALAAAAAAgACAAAATrEMhJaVKp6s2nIkqFZF2VIBWhUsJaTokqUCoBq%252BE71SRQeyqUToLA7VxF0JDyIQh%252FMVVPMt1ECZlfcjZJ9mIKoaTl1MRIl5o4CUKXOwmyrCInCKqcWtvadL2SYhyASyNDJ0uIiUd6GAULDJCRiXo1CpGXDJOUjY%252BYip9DhToJA4RBLwMLCwVDfRgbBAaqqoZ1XBMHswsHtxtFaH1iqaoGNgAIxRpbFAgfPQSqpbgGBqUD1wBXeCYp1AYZ19JJOYgH1KwA4UBvQwXUBxPqVD9L3sbp2BNk2xvvFPJd%252BMFCN6HAAIKgNggY0KtEBAAh%252BQQJCgAAACwAAAAAIAAgAAAE6BDISWlSqerNpyJKhWRdlSAVoVLCWk6JKlAqAavhO9UkUHsqlE6CwO1cRdCQ8iEIfzFVTzLdRAmZX3I2SfYIDMaAFdTESJeaEDAIMxYFqrOUaNW4E4ObYcCXaiBVEgULe0NJaxxtYksjh2NLkZISgDgJhHthkpU4mW6blRiYmZOlh4JWkDqILwUGBnE6TYEbCgevr0N1gH4At7gHiRpFaLNrrq8HNgAJA70AWxQIH1%252BvsYMDAzZQPC9VCNkDWUhGkuE5PxJNwiUK4UfLzOlD4WvzAHaoG9nxPi5d%252BjYUqfAhhykOFwJWiAAAIfkECQoAAAAsAAAAACAAIAAABPAQyElpUqnqzaciSoVkXVUMFaFSwlpOCcMYlErAavhOMnNLNo8KsZsMZItJEIDIFSkLGQoQTNhIsFehRww2CQLKF0tYGKYSg%252BygsZIuNqJksKgbfgIGepNo2cIUB3V1B3IvNiBYNQaDSTtfhhx0CwVPI0UJe0%252Bbm4g5VgcGoqOcnjmjqDSdnhgEoamcsZuXO1aWQy8KAwOAuTYYGwi7w5h%252BKr0SJ8MFihpNbx%252B4Erq7BYBuzsdiH1jCAzoSfl0rVirNbRXlBBlLX%252BBP0XJLAPGzTkAuAOqb0WT5AH7OcdCm5B8TgRwSRKIHQtaLCwg1RAAAOwAAAAAAAAAAAA%253D%253D%29%3B%0A%20%20visibility%3A%20visible%3B%0A%20%20opacity%3A%200%2E6%3B%0A%20%20transition%3A%20all%200%2E3s%20ease%3B%20%7D%0A%0A%2Ereveal%20%3E%20%2Eoverlay%20header%20%7B%0A%20%20position%3A%20absolute%3B%0A%20%20left%3A%200%3B%0A%20%20top%3A%200%3B%0A%20%20width%3A%20100%25%3B%0A%20%20height%3A%2040px%3B%0A%20%20z%2Dindex%3A%202%3B%0A%20%20border%2Dbottom%3A%201px%20solid%20%23222%3B%20%7D%0A%0A%2Ereveal%20%3E%20%2Eoverlay%20header%20a%20%7B%0A%20%20display%3A%20inline%2Dblock%3B%0A%20%20width%3A%2040px%3B%0A%20%20height%3A%2040px%3B%0A%20%20line%2Dheight%3A%2036px%3B%0A%20%20padding%3A%200%2010px%3B%0A%20%20float%3A%20right%3B%0A%20%20opacity%3A%200%2E6%3B%0A%20%20box%2Dsizing%3A%20border%2Dbox%3B%20%7D%0A%0A%2Ereveal%20%3E%20%2Eoverlay%20header%20a%3Ahover%20%7B%0A%20%20opacity%3A%201%3B%20%7D%0A%0A%2Ereveal%20%3E%20%2Eoverlay%20header%20a%20%2Eicon%20%7B%0A%20%20display%3A%20inline%2Dblock%3B%0A%20%20width%3A%2020px%3B%0A%20%20height%3A%2020px%3B%0A%20%20background%2Dposition%3A%2050%25%2050%25%3B%0A%20%20background%2Dsize%3A%20100%25%3B%0A%20%20background%2Drepeat%3A%20no%2Drepeat%3B%20%7D%0A%0A%2Ereveal%20%3E%20%2Eoverlay%20header%20a%2Eclose%20%2Eicon%20%7B%0A%20%20background%2Dimage%3A%20url%28data%3Aimage%2Fpng%3Bbase64%2CiVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABkklEQVRYR8WX4VHDMAxG6wnoJrABZQPYBCaBTWAD2g1gE5gg6OOsXuxIlr40d81dfrSJ9V4c2VLK7spHuTJ%2F5wpM07QXuXc5X0opX2tEJcadjHuV80li%2FFgxTIEK%2F5QBCICBD6xEhSMGHgQPgBgLiYVAB1dpSqKDawxTohFw4JSEA3clzgIBPCURwE2JucBR7rhPJJv5OpJwDX%2BSfDjgx1wACQeJG1aChP9K%2FIMmdZ8DtESV1WyP3Bt4MwM6sj4NMxMYiqUWHQu4KYA%2FSYkIjOsm3BXYWMKFDwU2khjCQ4ELJUJ4SmClRArOCmSXGuKma0fYD5CbzHxFpCSGAhfAVSSUGDUk2BWZaff2g6GE15BsBQ9nwmpIGDiyHQddwNTMKkbZaf9fajXQca1EX44puJZUsnY0ObGmITE3GVLCbEhQUjGVt146j6oasWN%2B49Vph2w1pZ5EansNZqKBm1txbU57iRRcZ86RWMDdWtBJUHBHwoQPi1GV%2BJCbntmvok7iTX4%2FUp9mgyTc%2FFJYDTcndgH%2FAA5A%2FCHsyEkVAAAAAElFTkSuQmCC%29%3B%20%7D%0A%0A%2Ereveal%20%3E%20%2Eoverlay%20header%20a%2Eexternal%20%2Eicon%20%7B%0A%20%20background%2Dimage%3A%20url%28data%3Aimage%2Fpng%3Bbase64%2CiVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAcElEQVRYR%2B2WSQoAIQwEzf8f7XiOMkUQxUPlGkM3hVmiQfQR9GYnH1SsAQlI4DiBqkCMoNb9y2e90IAEJPAcgdznU9%2BengMaeJ7Azh5Y1U67gAho4DqBqmB1buAf0MB1AlVBek83ZPkmJMGc1wAR%2BAAqod%2FB97TRpQAAAABJRU5ErkJggg%3D%3D%29%3B%20%7D%0A%0A%2Ereveal%20%3E%20%2Eoverlay%20%2Eviewport%20%7B%0A%20%20position%3A%20absolute%3B%0A%20%20display%3A%20%2Dwebkit%2Dbox%3B%0A%20%20display%3A%20%2Dms%2Dflexbox%3B%0A%20%20display%3A%20flex%3B%0A%20%20top%3A%2040px%3B%0A%20%20right%3A%200%3B%0A%20%20bottom%3A%200%3B%0A%20%20left%3A%200%3B%20%7D%0A%0A%2Ereveal%20%3E%20%2Eoverlay%2Eoverlay%2Dpreview%20%2Eviewport%20iframe%20%7B%0A%20%20width%3A%20100%25%3B%0A%20%20height%3A%20100%25%3B%0A%20%20max%2Dwidth%3A%20100%25%3B%0A%20%20max%2Dheight%3A%20100%25%3B%0A%20%20border%3A%200%3B%0A%20%20opacity%3A%200%3B%0A%20%20visibility%3A%20hidden%3B%0A%20%20transition%3A%20all%200%2E3s%20ease%3B%20%7D%0A%0A%2Ereveal%20%3E%20%2Eoverlay%2Eoverlay%2Dpreview%2Eloaded%20%2Eviewport%20iframe%20%7B%0A%20%20opacity%3A%201%3B%0A%20%20visibility%3A%20visible%3B%20%7D%0A%0A%2Ereveal%20%3E%20%2Eoverlay%2Eoverlay%2Dpreview%2Eloaded%20%2Eviewport%2Dinner%20%7B%0A%20%20position%3A%20absolute%3B%0A%20%20z%2Dindex%3A%20%2D1%3B%0A%20%20left%3A%200%3B%0A%20%20top%3A%2045%25%3B%0A%20%20width%3A%20100%25%3B%0A%20%20text%2Dalign%3A%20center%3B%0A%20%20letter%2Dspacing%3A%20normal%3B%20%7D%0A%0A%2Ereveal%20%3E%20%2Eoverlay%2Eoverlay%2Dpreview%20%2Ex%2Dframe%2Derror%20%7B%0A%20%20opacity%3A%200%3B%0A%20%20transition%3A%20opacity%200%2E3s%20ease%200%2E3s%3B%20%7D%0A%0A%2Ereveal%20%3E%20%2Eoverlay%2Eoverlay%2Dpreview%2Eloaded%20%2Ex%2Dframe%2Derror%20%7B%0A%20%20opacity%3A%201%3B%20%7D%0A%0A%2Ereveal%20%3E%20%2Eoverlay%2Eoverlay%2Dpreview%2Eloaded%20%2Espinner%20%7B%0A%20%20opacity%3A%200%3B%0A%20%20visibility%3A%20hidden%3B%0A%20%20%2Dwebkit%2Dtransform%3A%20scale%280%2E2%29%3B%0A%20%20%20%20%20%20%20%20%20%20transform%3A%20scale%280%2E2%29%3B%20%7D%0A%0A%2Ereveal%20%3E%20%2Eoverlay%2Eoverlay%2Dhelp%20%2Eviewport%20%7B%0A%20%20overflow%3A%20auto%3B%0A%20%20color%3A%20%23fff%3B%20%7D%0A%0A%2Ereveal%20%3E%20%2Eoverlay%2Eoverlay%2Dhelp%20%2Eviewport%20%2Eviewport%2Dinner%20%7B%0A%20%20width%3A%20600px%3B%0A%20%20margin%3A%20auto%3B%0A%20%20padding%3A%2020px%2020px%2080px%2020px%3B%0A%20%20text%2Dalign%3A%20center%3B%0A%20%20letter%2Dspacing%3A%20normal%3B%20%7D%0A%0A%2Ereveal%20%3E%20%2Eoverlay%2Eoverlay%2Dhelp%20%2Eviewport%20%2Eviewport%2Dinner%20%2Etitle%20%7B%0A%20%20font%2Dsize%3A%2020px%3B%20%7D%0A%0A%2Ereveal%20%3E%20%2Eoverlay%2Eoverlay%2Dhelp%20%2Eviewport%20%2Eviewport%2Dinner%20table%20%7B%0A%20%20border%3A%201px%20solid%20%23fff%3B%0A%20%20border%2Dcollapse%3A%20collapse%3B%0A%20%20font%2Dsize%3A%2016px%3B%20%7D%0A%0A%2Ereveal%20%3E%20%2Eoverlay%2Eoverlay%2Dhelp%20%2Eviewport%20%2Eviewport%2Dinner%20table%20th%2C%0A%2Ereveal%20%3E%20%2Eoverlay%2Eoverlay%2Dhelp%20%2Eviewport%20%2Eviewport%2Dinner%20table%20td%20%7B%0A%20%20width%3A%20200px%3B%0A%20%20padding%3A%2014px%3B%0A%20%20border%3A%201px%20solid%20%23fff%3B%0A%20%20vertical%2Dalign%3A%20middle%3B%20%7D%0A%0A%2Ereveal%20%3E%20%2Eoverlay%2Eoverlay%2Dhelp%20%2Eviewport%20%2Eviewport%2Dinner%20table%20th%20%7B%0A%20%20padding%2Dtop%3A%2020px%3B%0A%20%20padding%2Dbottom%3A%2020px%3B%20%7D%0A%0A%2F%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%0A%20%2A%20PLAYBACK%20COMPONENT%0A%20%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2F%0A%2Ereveal%20%2Eplayback%20%7B%0A%20%20position%3A%20absolute%3B%0A%20%20left%3A%2015px%3B%0A%20%20bottom%3A%2020px%3B%0A%20%20z%2Dindex%3A%2030%3B%0A%20%20cursor%3A%20pointer%3B%0A%20%20transition%3A%20all%20400ms%20ease%3B%0A%20%20%2Dwebkit%2Dtap%2Dhighlight%2Dcolor%3A%20rgba%280%2C%200%2C%200%2C%200%29%3B%20%7D%0A%0A%2Ereveal%2Eoverview%20%2Eplayback%20%7B%0A%20%20opacity%3A%200%3B%0A%20%20visibility%3A%20hidden%3B%20%7D%0A%0A%2F%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%0A%20%2A%20CODE%20HIGHLGIHTING%0A%20%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2F%0A%2Ereveal%20%2Ehljs%20table%20%7B%0A%20%20margin%3A%20initial%3B%20%7D%0A%0A%2Ereveal%20%2Ehljs%2Dln%2Dcode%2C%0A%2Ereveal%20%2Ehljs%2Dln%2Dnumbers%20%7B%0A%20%20padding%3A%200%3B%0A%20%20border%3A%200%3B%20%7D%0A%0A%2Ereveal%20%2Ehljs%2Dln%2Dnumbers%20%7B%0A%20%20opacity%3A%200%2E6%3B%0A%20%20padding%2Dright%3A%200%2E75em%3B%0A%20%20text%2Dalign%3A%20right%3B%0A%20%20vertical%2Dalign%3A%20top%3B%20%7D%0A%0A%2Ereveal%20%2Ehljs%2Ehas%2Dhighlights%20tr%3Anot%28%2Ehighlight%2Dline%29%20%7B%0A%20%20opacity%3A%200%2E4%3B%20%7D%0A%0A%2Ereveal%20%2Ehljs%3Anot%28%3Afirst%2Dchild%29%2Efragment%20%7B%0A%20%20position%3A%20absolute%3B%0A%20%20top%3A%200%3B%0A%20%20left%3A%200%3B%0A%20%20width%3A%20100%25%3B%0A%20%20box%2Dsizing%3A%20border%2Dbox%3B%20%7D%0A%0A%2F%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%0A%20%2A%20ROLLING%20LINKS%0A%20%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2F%0A%2Ereveal%20%2Eroll%20%7B%0A%20%20display%3A%20inline%2Dblock%3B%0A%20%20line%2Dheight%3A%201%2E2%3B%0A%20%20overflow%3A%20hidden%3B%0A%20%20vertical%2Dalign%3A%20top%3B%0A%20%20%2Dwebkit%2Dperspective%3A%20400px%3B%0A%20%20%20%20%20%20%20%20%20%20perspective%3A%20400px%3B%0A%20%20%2Dwebkit%2Dperspective%2Dorigin%3A%2050%25%2050%25%3B%0A%20%20%20%20%20%20%20%20%20%20perspective%2Dorigin%3A%2050%25%2050%25%3B%20%7D%0A%0A%2Ereveal%20%2Eroll%3Ahover%20%7B%0A%20%20background%3A%20none%3B%0A%20%20text%2Dshadow%3A%20none%3B%20%7D%0A%0A%2Ereveal%20%2Eroll%20span%20%7B%0A%20%20display%3A%20block%3B%0A%20%20position%3A%20relative%3B%0A%20%20padding%3A%200%202px%3B%0A%20%20pointer%2Devents%3A%20none%3B%0A%20%20transition%3A%20all%20400ms%20ease%3B%0A%20%20%2Dwebkit%2Dtransform%2Dorigin%3A%2050%25%200%25%3B%0A%20%20%20%20%20%20%20%20%20%20transform%2Dorigin%3A%2050%25%200%25%3B%0A%20%20%2Dwebkit%2Dtransform%2Dstyle%3A%20preserve%2D3d%3B%0A%20%20%20%20%20%20%20%20%20%20transform%2Dstyle%3A%20preserve%2D3d%3B%0A%20%20%2Dwebkit%2Dbackface%2Dvisibility%3A%20hidden%3B%0A%20%20%20%20%20%20%20%20%20%20backface%2Dvisibility%3A%20hidden%3B%20%7D%0A%0A%2Ereveal%20%2Eroll%3Ahover%20span%20%7B%0A%20%20background%3A%20rgba%280%2C%200%2C%200%2C%200%2E5%29%3B%0A%20%20%2Dwebkit%2Dtransform%3A%20translate3d%280px%2C%200px%2C%20%2D45px%29%20rotateX%2890deg%29%3B%0A%20%20%20%20%20%20%20%20%20%20transform%3A%20translate3d%280px%2C%200px%2C%20%2D45px%29%20rotateX%2890deg%29%3B%20%7D%0A%0A%2Ereveal%20%2Eroll%20span%3Aafter%20%7B%0A%20%20content%3A%20attr%28data%2Dtitle%29%3B%0A%20%20display%3A%20block%3B%0A%20%20position%3A%20absolute%3B%0A%20%20left%3A%200%3B%0A%20%20top%3A%200%3B%0A%20%20padding%3A%200%202px%3B%0A%20%20%2Dwebkit%2Dbackface%2Dvisibility%3A%20hidden%3B%0A%20%20%20%20%20%20%20%20%20%20backface%2Dvisibility%3A%20hidden%3B%0A%20%20%2Dwebkit%2Dtransform%2Dorigin%3A%2050%25%200%25%3B%0A%20%20%20%20%20%20%20%20%20%20transform%2Dorigin%3A%2050%25%200%25%3B%0A%20%20%2Dwebkit%2Dtransform%3A%20translate3d%280px%2C%20110%25%2C%200px%29%20rotateX%28%2D90deg%29%3B%0A%20%20%20%20%20%20%20%20%20%20transform%3A%20translate3d%280px%2C%20110%25%2C%200px%29%20rotateX%28%2D90deg%29%3B%20%7D%0A%0A%2F%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%0A%20%2A%20SPEAKER%20NOTES%0A%20%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2F%0A%2Ereveal%20aside%2Enotes%20%7B%0A%20%20display%3A%20none%3B%20%7D%0A%0A%2Ereveal%20%2Espeaker%2Dnotes%20%7B%0A%20%20display%3A%20none%3B%0A%20%20position%3A%20absolute%3B%0A%20%20width%3A%2033%2E3333333333%25%3B%0A%20%20height%3A%20100%25%3B%0A%20%20top%3A%200%3B%0A%20%20left%3A%20100%25%3B%0A%20%20padding%3A%2014px%2018px%2014px%2018px%3B%0A%20%20z%2Dindex%3A%201%3B%0A%20%20font%2Dsize%3A%2018px%3B%0A%20%20line%2Dheight%3A%201%2E4%3B%0A%20%20border%3A%201px%20solid%20rgba%280%2C%200%2C%200%2C%200%2E05%29%3B%0A%20%20color%3A%20%23222%3B%0A%20%20background%2Dcolor%3A%20%23f5f5f5%3B%0A%20%20overflow%3A%20auto%3B%0A%20%20box%2Dsizing%3A%20border%2Dbox%3B%0A%20%20text%2Dalign%3A%20left%3B%0A%20%20font%2Dfamily%3A%20Helvetica%2C%20sans%2Dserif%3B%0A%20%20%2Dwebkit%2Doverflow%2Dscrolling%3A%20touch%3B%20%7D%0A%20%20%2Ereveal%20%2Espeaker%2Dnotes%20%2Enotes%2Dplaceholder%20%7B%0A%20%20%20%20color%3A%20%23ccc%3B%0A%20%20%20%20font%2Dstyle%3A%20italic%3B%20%7D%0A%20%20%2Ereveal%20%2Espeaker%2Dnotes%3Afocus%20%7B%0A%20%20%20%20outline%3A%20none%3B%20%7D%0A%20%20%2Ereveal%20%2Espeaker%2Dnotes%3Abefore%20%7B%0A%20%20%20%20content%3A%20%27Speaker%20notes%27%3B%0A%20%20%20%20display%3A%20block%3B%0A%20%20%20%20margin%2Dbottom%3A%2010px%3B%0A%20%20%20%20opacity%3A%200%2E5%3B%20%7D%0A%0A%2Ereveal%2Eshow%2Dnotes%20%7B%0A%20%20max%2Dwidth%3A%2075%25%3B%0A%20%20overflow%3A%20visible%3B%20%7D%0A%0A%2Ereveal%2Eshow%2Dnotes%20%2Espeaker%2Dnotes%20%7B%0A%20%20display%3A%20block%3B%20%7D%0A%0A%40media%20screen%20and%20%28min%2Dwidth%3A%201600px%29%20%7B%0A%20%20%2Ereveal%20%2Espeaker%2Dnotes%20%7B%0A%20%20%20%20font%2Dsize%3A%2020px%3B%20%7D%20%7D%0A%0A%40media%20screen%20and%20%28max%2Dwidth%3A%201024px%29%20%7B%0A%20%20%2Ereveal%2Eshow%2Dnotes%20%7B%0A%20%20%20%20border%2Dleft%3A%200%3B%0A%20%20%20%20max%2Dwidth%3A%20none%3B%0A%20%20%20%20max%2Dheight%3A%2070%25%3B%0A%20%20%20%20max%2Dheight%3A%2070vh%3B%0A%20%20%20%20overflow%3A%20visible%3B%20%7D%0A%20%20%2Ereveal%2Eshow%2Dnotes%20%2Espeaker%2Dnotes%20%7B%0A%20%20%20%20top%3A%20100%25%3B%0A%20%20%20%20left%3A%200%3B%0A%20%20%20%20width%3A%20100%25%3B%0A%20%20%20%20height%3A%2042%2E8571428571%25%3B%0A%20%20%20%20height%3A%2030vh%3B%0A%20%20%20%20border%3A%200%3B%20%7D%20%7D%0A%0A%40media%20screen%20and%20%28max%2Dwidth%3A%20600px%29%20%7B%0A%20%20%2Ereveal%2Eshow%2Dnotes%20%7B%0A%20%20%20%20max%2Dheight%3A%2060%25%3B%0A%20%20%20%20max%2Dheight%3A%2060vh%3B%20%7D%0A%20%20%2Ereveal%2Eshow%2Dnotes%20%2Espeaker%2Dnotes%20%7B%0A%20%20%20%20top%3A%20100%25%3B%0A%20%20%20%20height%3A%2066%2E6666666667%25%3B%0A%20%20%20%20height%3A%2040vh%3B%20%7D%0A%20%20%2Ereveal%20%2Espeaker%2Dnotes%20%7B%0A%20%20%20%20font%2Dsize%3A%2014px%3B%20%7D%20%7D%0A%0A%2F%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%0A%20%2A%20ZOOM%20PLUGIN%0A%20%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2F%0A%2Ezoomed%20%2Ereveal%20%2A%2C%0A%2Ezoomed%20%2Ereveal%20%2A%3Abefore%2C%0A%2Ezoomed%20%2Ereveal%20%2A%3Aafter%20%7B%0A%20%20%2Dwebkit%2Dbackface%2Dvisibility%3A%20visible%20%21important%3B%0A%20%20%20%20%20%20%20%20%20%20backface%2Dvisibility%3A%20visible%20%21important%3B%20%7D%0A%0A%2Ezoomed%20%2Ereveal%20%2Eprogress%2C%0A%2Ezoomed%20%2Ereveal%20%2Econtrols%20%7B%0A%20%20opacity%3A%200%3B%20%7D%0A%0A%2Ezoomed%20%2Ereveal%20%2Eroll%20span%20%7B%0A%20%20background%3A%20none%3B%20%7D%0A%0A%2Ezoomed%20%2Ereveal%20%2Eroll%20span%3Aafter%20%7B%0A%20%20visibility%3A%20hidden%3B%20%7D%0A" rel="stylesheet">
  <style type="text/css">code{white-space: pre;}</style>
  <style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
  </style>
  <link href="data:text/css; charset=utf-8,%2F%2A%2A%0A%20%2A%20White%20theme%20for%20reveal%2Ejs%2E%20This%20is%20the%20opposite%20of%20the%20%27black%27%20theme%2E%0A%20%2A%0A%20%2A%20By%20Hakim%20El%20Hattab%2C%20http%3A%2F%2Fhakim%2Ese%0A%20%2A%2F%0A%40import%20url%28%2E%2E%2F%2E%2E%2Flib%2Ffont%2Fsource%2Dsans%2Dpro%2Fsource%2Dsans%2Dpro%2Ecss%29%3B%0Asection%2Ehas%2Ddark%2Dbackground%2C%20section%2Ehas%2Ddark%2Dbackground%20h1%2C%20section%2Ehas%2Ddark%2Dbackground%20h2%2C%20section%2Ehas%2Ddark%2Dbackground%20h3%2C%20section%2Ehas%2Ddark%2Dbackground%20h4%2C%20section%2Ehas%2Ddark%2Dbackground%20h5%2C%20section%2Ehas%2Ddark%2Dbackground%20h6%20%7B%0A%20%20color%3A%20%23fff%3B%20%7D%0A%0A%2F%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%0A%20%2A%20GLOBAL%20STYLES%0A%20%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2F%0Abody%20%7B%0A%20%20background%3A%20%23fff%3B%0A%20%20background%2Dcolor%3A%20%23fff%3B%20%7D%0A%0A%2Ereveal%20%7B%0A%20%20font%2Dfamily%3A%20%22Source%20Sans%20Pro%22%2C%20Helvetica%2C%20sans%2Dserif%3B%0A%20%20font%2Dsize%3A%2042px%3B%0A%20%20font%2Dweight%3A%20normal%3B%0A%20%20color%3A%20%23222%3B%20%7D%0A%0A%3A%3Aselection%20%7B%0A%20%20color%3A%20%23fff%3B%0A%20%20background%3A%20%2398bdef%3B%0A%20%20text%2Dshadow%3A%20none%3B%20%7D%0A%0A%3A%3A%2Dmoz%2Dselection%20%7B%0A%20%20color%3A%20%23fff%3B%0A%20%20background%3A%20%2398bdef%3B%0A%20%20text%2Dshadow%3A%20none%3B%20%7D%0A%0A%2Ereveal%20%2Eslides%20section%2C%0A%2Ereveal%20%2Eslides%20section%20%3E%20section%20%7B%0A%20%20line%2Dheight%3A%201%2E3%3B%0A%20%20font%2Dweight%3A%20inherit%3B%20%7D%0A%0A%2F%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%0A%20%2A%20HEADERS%0A%20%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2F%0A%2Ereveal%20h1%2C%0A%2Ereveal%20h2%2C%0A%2Ereveal%20h3%2C%0A%2Ereveal%20h4%2C%0A%2Ereveal%20h5%2C%0A%2Ereveal%20h6%20%7B%0A%20%20margin%3A%200%200%2020px%200%3B%0A%20%20color%3A%20%23222%3B%0A%20%20font%2Dfamily%3A%20%22Source%20Sans%20Pro%22%2C%20Helvetica%2C%20sans%2Dserif%3B%0A%20%20font%2Dweight%3A%20600%3B%0A%20%20line%2Dheight%3A%201%2E2%3B%0A%20%20letter%2Dspacing%3A%20normal%3B%0A%20%20text%2Dtransform%3A%20uppercase%3B%0A%20%20text%2Dshadow%3A%20none%3B%0A%20%20word%2Dwrap%3A%20break%2Dword%3B%20%7D%0A%0A%2Ereveal%20h1%20%7B%0A%20%20font%2Dsize%3A%202%2E5em%3B%20%7D%0A%0A%2Ereveal%20h2%20%7B%0A%20%20font%2Dsize%3A%201%2E6em%3B%20%7D%0A%0A%2Ereveal%20h3%20%7B%0A%20%20font%2Dsize%3A%201%2E3em%3B%20%7D%0A%0A%2Ereveal%20h4%20%7B%0A%20%20font%2Dsize%3A%201em%3B%20%7D%0A%0A%2Ereveal%20h1%20%7B%0A%20%20text%2Dshadow%3A%20none%3B%20%7D%0A%0A%2F%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%0A%20%2A%20OTHER%0A%20%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2F%0A%2Ereveal%20p%20%7B%0A%20%20margin%3A%2020px%200%3B%0A%20%20line%2Dheight%3A%201%2E3%3B%20%7D%0A%0A%2F%2A%20Ensure%20certain%20elements%20are%20never%20larger%20than%20the%20slide%20itself%20%2A%2F%0A%2Ereveal%20img%2C%0A%2Ereveal%20video%2C%0A%2Ereveal%20iframe%20%7B%0A%20%20max%2Dwidth%3A%2095%25%3B%0A%20%20max%2Dheight%3A%2095%25%3B%20%7D%0A%0A%2Ereveal%20strong%2C%0A%2Ereveal%20b%20%7B%0A%20%20font%2Dweight%3A%20bold%3B%20%7D%0A%0A%2Ereveal%20em%20%7B%0A%20%20font%2Dstyle%3A%20italic%3B%20%7D%0A%0A%2Ereveal%20ol%2C%0A%2Ereveal%20dl%2C%0A%2Ereveal%20ul%20%7B%0A%20%20display%3A%20inline%2Dblock%3B%0A%20%20text%2Dalign%3A%20left%3B%0A%20%20margin%3A%200%200%200%201em%3B%20%7D%0A%0A%2Ereveal%20ol%20%7B%0A%20%20list%2Dstyle%2Dtype%3A%20decimal%3B%20%7D%0A%0A%2Ereveal%20ul%20%7B%0A%20%20list%2Dstyle%2Dtype%3A%20disc%3B%20%7D%0A%0A%2Ereveal%20ul%20ul%20%7B%0A%20%20list%2Dstyle%2Dtype%3A%20square%3B%20%7D%0A%0A%2Ereveal%20ul%20ul%20ul%20%7B%0A%20%20list%2Dstyle%2Dtype%3A%20circle%3B%20%7D%0A%0A%2Ereveal%20ul%20ul%2C%0A%2Ereveal%20ul%20ol%2C%0A%2Ereveal%20ol%20ol%2C%0A%2Ereveal%20ol%20ul%20%7B%0A%20%20display%3A%20block%3B%0A%20%20margin%2Dleft%3A%2040px%3B%20%7D%0A%0A%2Ereveal%20dt%20%7B%0A%20%20font%2Dweight%3A%20bold%3B%20%7D%0A%0A%2Ereveal%20dd%20%7B%0A%20%20margin%2Dleft%3A%2040px%3B%20%7D%0A%0A%2Ereveal%20blockquote%20%7B%0A%20%20display%3A%20block%3B%0A%20%20position%3A%20relative%3B%0A%20%20width%3A%2070%25%3B%0A%20%20margin%3A%2020px%20auto%3B%0A%20%20padding%3A%205px%3B%0A%20%20font%2Dstyle%3A%20italic%3B%0A%20%20background%3A%20rgba%28255%2C%20255%2C%20255%2C%200%2E05%29%3B%0A%20%20box%2Dshadow%3A%200px%200px%202px%20rgba%280%2C%200%2C%200%2C%200%2E2%29%3B%20%7D%0A%0A%2Ereveal%20blockquote%20p%3Afirst%2Dchild%2C%0A%2Ereveal%20blockquote%20p%3Alast%2Dchild%20%7B%0A%20%20display%3A%20inline%2Dblock%3B%20%7D%0A%0A%2Ereveal%20q%20%7B%0A%20%20font%2Dstyle%3A%20italic%3B%20%7D%0A%0A%2Ereveal%20pre%20%7B%0A%20%20display%3A%20block%3B%0A%20%20position%3A%20relative%3B%0A%20%20width%3A%2090%25%3B%0A%20%20margin%3A%2020px%20auto%3B%0A%20%20text%2Dalign%3A%20left%3B%0A%20%20font%2Dsize%3A%200%2E55em%3B%0A%20%20font%2Dfamily%3A%20monospace%3B%0A%20%20line%2Dheight%3A%201%2E2em%3B%0A%20%20word%2Dwrap%3A%20break%2Dword%3B%0A%20%20box%2Dshadow%3A%200px%205px%2015px%20rgba%280%2C%200%2C%200%2C%200%2E15%29%3B%20%7D%0A%0A%2Ereveal%20code%20%7B%0A%20%20font%2Dfamily%3A%20monospace%3B%0A%20%20text%2Dtransform%3A%20none%3B%20%7D%0A%0A%2Ereveal%20pre%20code%20%7B%0A%20%20display%3A%20block%3B%0A%20%20padding%3A%205px%3B%0A%20%20overflow%3A%20auto%3B%0A%20%20max%2Dheight%3A%20400px%3B%0A%20%20word%2Dwrap%3A%20normal%3B%20%7D%0A%0A%2Ereveal%20table%20%7B%0A%20%20margin%3A%20auto%3B%0A%20%20border%2Dcollapse%3A%20collapse%3B%0A%20%20border%2Dspacing%3A%200%3B%20%7D%0A%0A%2Ereveal%20table%20th%20%7B%0A%20%20font%2Dweight%3A%20bold%3B%20%7D%0A%0A%2Ereveal%20table%20th%2C%0A%2Ereveal%20table%20td%20%7B%0A%20%20text%2Dalign%3A%20left%3B%0A%20%20padding%3A%200%2E2em%200%2E5em%200%2E2em%200%2E5em%3B%0A%20%20border%2Dbottom%3A%201px%20solid%3B%20%7D%0A%0A%2Ereveal%20table%20th%5Balign%3D%22center%22%5D%2C%0A%2Ereveal%20table%20td%5Balign%3D%22center%22%5D%20%7B%0A%20%20text%2Dalign%3A%20center%3B%20%7D%0A%0A%2Ereveal%20table%20th%5Balign%3D%22right%22%5D%2C%0A%2Ereveal%20table%20td%5Balign%3D%22right%22%5D%20%7B%0A%20%20text%2Dalign%3A%20right%3B%20%7D%0A%0A%2Ereveal%20table%20tbody%20tr%3Alast%2Dchild%20th%2C%0A%2Ereveal%20table%20tbody%20tr%3Alast%2Dchild%20td%20%7B%0A%20%20border%2Dbottom%3A%20none%3B%20%7D%0A%0A%2Ereveal%20sup%20%7B%0A%20%20vertical%2Dalign%3A%20super%3B%0A%20%20font%2Dsize%3A%20smaller%3B%20%7D%0A%0A%2Ereveal%20sub%20%7B%0A%20%20vertical%2Dalign%3A%20sub%3B%0A%20%20font%2Dsize%3A%20smaller%3B%20%7D%0A%0A%2Ereveal%20small%20%7B%0A%20%20display%3A%20inline%2Dblock%3B%0A%20%20font%2Dsize%3A%200%2E6em%3B%0A%20%20line%2Dheight%3A%201%2E2em%3B%0A%20%20vertical%2Dalign%3A%20top%3B%20%7D%0A%0A%2Ereveal%20small%20%2A%20%7B%0A%20%20vertical%2Dalign%3A%20top%3B%20%7D%0A%0A%2F%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%0A%20%2A%20LINKS%0A%20%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2F%0A%2Ereveal%20a%20%7B%0A%20%20color%3A%20%232a76dd%3B%0A%20%20text%2Ddecoration%3A%20none%3B%0A%20%20%2Dwebkit%2Dtransition%3A%20color%20%2E15s%20ease%3B%0A%20%20%2Dmoz%2Dtransition%3A%20color%20%2E15s%20ease%3B%0A%20%20transition%3A%20color%20%2E15s%20ease%3B%20%7D%0A%0A%2Ereveal%20a%3Ahover%20%7B%0A%20%20color%3A%20%236ca0e8%3B%0A%20%20text%2Dshadow%3A%20none%3B%0A%20%20border%3A%20none%3B%20%7D%0A%0A%2Ereveal%20%2Eroll%20span%3Aafter%20%7B%0A%20%20color%3A%20%23fff%3B%0A%20%20background%3A%20%231a53a1%3B%20%7D%0A%0A%2F%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%0A%20%2A%20IMAGES%0A%20%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2F%0A%2Ereveal%20section%20img%20%7B%0A%20%20margin%3A%2015px%200px%3B%0A%20%20background%3A%20rgba%28255%2C%20255%2C%20255%2C%200%2E12%29%3B%0A%20%20border%3A%204px%20solid%20%23222%3B%0A%20%20box%2Dshadow%3A%200%200%2010px%20rgba%280%2C%200%2C%200%2C%200%2E15%29%3B%20%7D%0A%0A%2Ereveal%20section%20img%2Eplain%20%7B%0A%20%20border%3A%200%3B%0A%20%20box%2Dshadow%3A%20none%3B%20%7D%0A%0A%2Ereveal%20a%20img%20%7B%0A%20%20%2Dwebkit%2Dtransition%3A%20all%20%2E15s%20linear%3B%0A%20%20%2Dmoz%2Dtransition%3A%20all%20%2E15s%20linear%3B%0A%20%20transition%3A%20all%20%2E15s%20linear%3B%20%7D%0A%0A%2Ereveal%20a%3Ahover%20img%20%7B%0A%20%20background%3A%20rgba%28255%2C%20255%2C%20255%2C%200%2E2%29%3B%0A%20%20border%2Dcolor%3A%20%232a76dd%3B%0A%20%20box%2Dshadow%3A%200%200%2020px%20rgba%280%2C%200%2C%200%2C%200%2E55%29%3B%20%7D%0A%0A%2F%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%0A%20%2A%20NAVIGATION%20CONTROLS%0A%20%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2F%0A%2Ereveal%20%2Econtrols%20%7B%0A%20%20color%3A%20%232a76dd%3B%20%7D%0A%0A%2F%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%0A%20%2A%20PROGRESS%20BAR%0A%20%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2F%0A%2Ereveal%20%2Eprogress%20%7B%0A%20%20background%3A%20rgba%280%2C%200%2C%200%2C%200%2E2%29%3B%0A%20%20color%3A%20%232a76dd%3B%20%7D%0A%0A%2Ereveal%20%2Eprogress%20span%20%7B%0A%20%20%2Dwebkit%2Dtransition%3A%20width%20800ms%20cubic%2Dbezier%280%2E26%2C%200%2E86%2C%200%2E44%2C%200%2E985%29%3B%0A%20%20%2Dmoz%2Dtransition%3A%20width%20800ms%20cubic%2Dbezier%280%2E26%2C%200%2E86%2C%200%2E44%2C%200%2E985%29%3B%0A%20%20transition%3A%20width%20800ms%20cubic%2Dbezier%280%2E26%2C%200%2E86%2C%200%2E44%2C%200%2E985%29%3B%20%7D%0A%0A%2F%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%0A%20%2A%20PRINT%20BACKGROUND%0A%20%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2A%2F%0A%40media%20print%20%7B%0A%20%20%2Ebackgrounds%20%7B%0A%20%20%20%20background%2Dcolor%3A%20%23fff%3B%20%7D%20%7D%0A" rel="stylesheet" id="theme">
  <!-- Printing and PDF exports -->
  <script>
    var link = document.createElement( 'link' );
    link.rel = 'stylesheet';
    link.type = 'text/css';
    link.href = window.location.search.match( /print-pdf/gi ) ? 'https://revealjs.com/css/print/pdf.css' : 'https://revealjs.com/css/print/paper.css';
    document.getElementsByTagName( 'head' )[0].appendChild( link );
  </script>
  <!--[if lt IE 9]>
  <script src="https://revealjs.com/lib/js/html5shiv.js"></script>
  <![endif]-->
</head>
<body>
  <div class="reveal">
    <div class="slides">

<section>
  <h1 class="title">Rust Graz – 01 Getting started</h1>
  <p class="author">Lukas Prokop</p>
  <p class="date">July 25, 2019</p>
</section>

<section id="setup" class="slide level2">
<h2>Setup</h2>
<p>Either <a href="https://play.rust-lang.org/">play.rust-lang.org</a> or [macOS/Linux/UNIX]</p>
<pre><code>curl https://sh.rustup.rs -sSf | sh</code></pre>
<p><em>rustup:</em> Rust installer and version management tool <br /> Use <code>rustup self uninstall</code> to uninstall</p>
<ol type="1">
<li>Determines host triple (arch&amp;vendor&amp;os): <code>x86_64-unknown-linux-gnu</code></li>
<li>Installs rust tools to <code>/root/.cargo/bin</code></li>
<li>Adds <code>/root/.cargo/bin</code> to PATH</li>
<li>Sets toolchain to <code>stable</code></li>
</ol>
</section>
<section id="resources" class="slide level2">
<h2>Resources</h2>
<ul>
<li><a href="https://doc.rust-lang.org/">doc.rust-lang.org</a></li>
<li><a href="https://doc.rust-lang.org/book/">doc.rust-lang.org/book/</a> or <code>rustup doc --book</code></li>
<li><a href="https://doc.rust-lang.org/stable/rust-by-example/">doc.rust-lang.org/stable/rust-by-example/</a></li>
<li><a href="https://exercism.io/tracks/rust">exercism.io/tracks/rust</a></li>
<li><a href="https://newrustacean.com/">newrustacean.com</a> (stopped in May 2019)</li>
<li><a href="https://rusty-spike.blubrry.net/">rusty-spike.blubrry.net</a></li>
<li><a href="https://www.youtube.com/watch?v=hY0gyzItyEo">“Help Wanted: Research Questions in Rust - Aaron Turon - OPLSS 2018”</a></li>
</ul>
<p>IMHO: huge bunch of community resources!</p>
</section>
<section id="tooling" class="slide level2">
<h2>Tooling</h2>
<p>In general: many features provided by the language (e.g. unlike C++ and Doxygen).</p>
<ul>
<li><strong>cargo</strong> is rust's package (= crate) manager</li>
<li><strong>rls</strong> is rust's language server</li>
<li><strong>rustfmt</strong> formats/normalizes rust programs</li>
<li><strong>rustdoc</strong> generates documentation from comments</li>
<li><strong>rust-gdb/rust-lldb</strong> for debugging</li>
</ul>
</section>
<section id="tooling-1" class="slide level2">
<h2>Tooling</h2>
<p>LLVM-based compiler and toolchain. <br /> IMHO use an IDE for programming:</p>
<ul>
<li>IntelliJ IDEA with <a href="https://intellij-rust.github.io/">Rust plugin</a></li>
<li>CLion with same plugin</li>
<li>Visual Studio Code with <code>rust-lang.rust</code> extension</li>
<li>…</li>
</ul>
</section>
<section id="releases" class="slide level2">
<h2>Releases</h2>
<p><code>rustup install {stable,beta,nightly}</code></p>
<ul>
<li><strong>Stable</strong> (1.36.0, default)</li>
<li><strong>Beta</strong> (1.37.0-beta.6, tests for stable release)</li>
<li><strong>Nightly</strong> (1.38.0-nightly, unstandardized features)</li>
</ul>
<p>Rapid 6-week release schedule <br /> set default release with:<br /> <code>rustup default {stable,beta,nightly}</code></p>
</section>
<section id="editions" class="slide level2">
<h2>Editions</h2>
<table>
<tr>
<th>
January 2012
</th>
<td>
⇒
</td>
<td>
first numbered pre-alpha release
</td>
</tr>
<tr>
<th>
May 2015
</th>
<td>
⇒
</td>
<td>
1.0.0 release (stable std API), “Rust 2015”
</td>
</tr>
<tr>
<th>
Dec 2018
</th>
<td>
⇒
</td>
<td>
1.31 release, “Rust 2018”
</td>
</tr>
</table>
<p>Editions (“long-term releases with a theme”):</p>
<ul>
<li>Rust 2015 ‘stability’</li>
<li>Rust 2018 ‘productivity’</li>
</ul>
</section>
<section id="syntactic-notes-for-today" class="slide level2">
<h2>Syntactic notes for today</h2>
</section>
<section class="slide level2">

<h3 id="hello-world">Hello World</h3>
<div class="sourceCode"><pre class="sourceCode rust"><code class="sourceCode rust"><span class="kw">fn</span> main() <span class="op">{</span>
    <span class="pp">println!</span>(<span class="st">&quot;Hello World!&quot;</span>);
<span class="op">}</span></code></pre></div>
</section>
<section class="slide level2">

<h3 id="hello-world-1">Hello World</h3>
<div class="sourceCode"><pre class="sourceCode rust"><code class="sourceCode rust"><span class="kw">fn</span> main() <span class="op">{</span>
    <span class="pp">println!</span>(<span class="st">&quot;Hello World!&quot;</span>);
<span class="op">}</span></code></pre></div>
<ul>
<li><code>fn</code> for <em>function</em></li>
<li>C-like block structures, 4 spaces for indentation</li>
<li>main function w/o return value</li>
<li><code>!</code> because <code>println</code> is a macro, not a function</li>
<li>strings with <code>&quot;</code></li>
<li>C-like semicolon after statements</li>
</ul>
</section>
<section class="slide level2">

<h3 id="formatting">Formatting</h3>
<div class="sourceCode"><pre class="sourceCode rust"><code class="sourceCode rust"><span class="kw">fn</span> main() <span class="op">{</span>
    <span class="pp">println!</span>(<span class="st">&quot;Hello {:06b} {}!&quot;</span>, <span class="dv">9</span>, <span class="st">&quot;rustaceans&quot;</span>);
<span class="op">}</span></code></pre></div>
<ul>
<li>featuring string formatting</li>
<li>inspired by C's <code>printf</code> and Python's <code>str.format</code></li>
<li><code>06</code> for left-padding with <code>0</code> character</li>
<li><code>b</code> for binary representation</li>
</ul>
<div class="sourceCode"><pre class="sourceCode rust"><code class="sourceCode rust"><span class="kw">fn</span> main() <span class="op">{</span>
    <span class="pp">println!</span>(<span class="st">&quot;Hello {no:06b} {who}!&quot;</span>,
             no = <span class="dv">9</span>, who = <span class="st">&quot;rustaceans&quot;</span>);
<span class="op">}</span></code></pre></div>
</section>
<section class="slide level2">

<h3 id="assignment">Assignment</h3>
<div class="sourceCode"><pre class="sourceCode rust"><code class="sourceCode rust"><span class="kw">fn</span> main() <span class="op">{</span>
    <span class="kw">let</span> attending_rustaceans = <span class="dv">9</span>;
    <span class="pp">println!</span>(<span class="st">&quot;Hello {} rustaceans!&quot;</span>, attending_rustaceans);
<span class="op">}</span></code></pre></div>
<ul>
<li><code>let</code> keyword for assignment</li>
<li>underlines in variables by convention</li>
</ul>
</section>
<section class="slide level2">

<h3 id="assignment-1">Assignment</h3>
<div class="sourceCode"><pre class="sourceCode rust"><code class="sourceCode rust"><span class="kw">fn</span> main() <span class="op">{</span>
    <span class="kw">let</span> attending_rustaceans = <span class="dv">9</span>;
    attending_rustaceans += <span class="dv">1</span>;
    <span class="pp">println!</span>(<span class="st">&quot;Hello {} rustaceans!&quot;</span>, attending_rustaceans);
<span class="op">}</span></code></pre></div>
</section>
<section class="slide level2">

<h3 id="wait-what">Wait… what?</h3>
<!-- unbuffer rustc test2.rs 1&>2 | aha > test2.html -->
<pre>
<span style="font-weight:bold;"></span><span style="font-weight:bold;filter: contrast(70%) brightness(190%);color:red;">error[E0384]</span><span style="font-weight:bold;">: cannot assign twice to immutable variable `attending_rustaceans`</span>
 <span style="font-weight:bold;"></span><span style="font-weight:bold;filter: contrast(70%) brightness(190%);color:blue;">--&gt; </span>test2.rs:3:5
  <span style="font-weight:bold;"></span><span style="font-weight:bold;filter: contrast(70%) brightness(190%);color:blue;">|</span>
<span style="font-weight:bold;"></span><span style="font-weight:bold;filter: contrast(70%) brightness(190%);color:blue;">2</span> <span style="font-weight:bold;"></span><span style="font-weight:bold;filter: contrast(70%) brightness(190%);color:blue;">| </span>    let attending_rustaceans = 9;
  <span style="font-weight:bold;"></span><span style="font-weight:bold;filter: contrast(70%) brightness(190%);color:blue;">| </span>        <span style="font-weight:bold;"></span><span style="font-weight:bold;filter: contrast(70%) brightness(190%);color:blue;">--------------------</span> <span style="font-weight:bold;"></span><span style="font-weight:bold;filter: contrast(70%) brightness(190%);color:blue;">first assignment to `attending_rustaceans`</span>
<span style="font-weight:bold;"></span><span style="font-weight:bold;filter: contrast(70%) brightness(190%);color:blue;">3</span> <span style="font-weight:bold;"></span><span style="font-weight:bold;filter: contrast(70%) brightness(190%);color:blue;">| </span>    attending_rustaceans += 1;
  <span style="font-weight:bold;"></span><span style="font-weight:bold;filter: contrast(70%) brightness(190%);color:blue;">| </span>    <span style="font-weight:bold;"></span><span style="font-weight:bold;filter: contrast(70%) brightness(190%);color:red;">^^^^^^^^^^^^^^^^^^^^^^^^^</span> <span style="font-weight:bold;"></span><span style="font-weight:bold;filter: contrast(70%) brightness(190%);color:red;">cannot assign twice to immutable variable</span>

<span style="font-weight:bold;"></span><span style="font-weight:bold;filter: contrast(70%) brightness(190%);color:red;">error</span><span style="font-weight:bold;">: aborting due to previous error</span>

<span style="font-weight:bold;">For more information about this error, try `rustc --explain E0384`.</span>
</pre>
</section>
<section class="slide level2">

<h3 id="immutability-by-default">Immutability by default!</h3>
</section>
<section class="slide level2">

<h3 id="assignment-2">Assignment</h3>
<div class="sourceCode"><pre class="sourceCode rust"><code class="sourceCode rust"><span class="kw">fn</span> main() <span class="op">{</span>
    <span class="kw">let</span> <span class="kw">mut</span> attending_rustaceans = <span class="dv">9</span>;
    attending_rustaceans += <span class="dv">1</span>;
    <span class="pp">println!</span>(<span class="st">&quot;Hello {} rustaceans!&quot;</span>, attending_rustaceans);
<span class="op">}</span></code></pre></div>
<ul>
<li><code>mut</code> keyword for <em>mutability</em></li>
</ul>
</section>
<section class="slide level2">

<h3 id="how-to-compile">How to compile?</h3>
</section>
<section class="slide level2">

<pre>
user@sys / % <strong>cargo new hello_world --bin</strong>
     Created binary (application) `hello_world` package
user@sys / % <strong>cd hello_world/</strong>
user@sys /hello_world % <strong>ls -la</strong>
total 8
drwxrwxr-x 1 user user   54 Jul 25 12:03 .
drwxrwxrwt 1 root       root       1356 Jul 25 12:03 ..
drwxrwxr-x 1 user user   82 Jul 25 12:03 .git
-rw-rw-r-- 1 user user   19 Jul 25 12:03 .gitignore
-rw-rw-r-- 1 user user  131 Jul 25 12:03 Cargo.toml
drwxrwxr-x 1 user user   14 Jul 25 12:03 src
</pre>
</section>
<section class="slide level2">

<pre>
user@sys /hello_world % <strong>cat Cargo.toml</strong>
[package]
name = &quot;hello_world&quot;
version = &quot;0.1.0&quot;
authors = [&quot;user &lt;my@git-email.addr&gt;&quot;]
edition = &quot;2018&quot;

[dependencies]
user@sys /hello_world % <strong>cd src/</strong>
user@sys /hello_world/src % <strong>cat main.rs</strong>
fn main() {
    println!(&quot;Hello, world!&quot;);
}
user@sys /hello_world/src % <strong>cargo run</strong>
   Compiling hello_world v0.1.0 (/hello_world)
    Finished dev [unoptimized + debuginfo] target(s) in 0.42s
     Running `/hello_world/target/debug/hello_world`
Hello, world!
</pre>
</section>
    </div>
  </div>

  <script src="data:text/html; charset=utf-8,%3C%21DOCTYPE%20html%3E%0A%3Chtml%3E%0A%20%20%3Chead%3E%0A%20%20%20%20%3Cmeta%20http%2Dequiv%3D%22Content%2Dtype%22%20content%3D%22text%2Fhtml%3B%20charset%3Dutf%2D8%22%3E%0A%20%20%20%20%3Cmeta%20http%2Dequiv%3D%22Content%2DSecurity%2DPolicy%22%20content%3D%22default%2Dsrc%20%27none%27%3B%20style%2Dsrc%20%27unsafe%2Dinline%27%3B%20img%2Dsrc%20data%3A%3B%20connect%2Dsrc%20%27self%27%22%3E%0A%20%20%20%20%3Ctitle%3EPage%20not%20found%20%26middot%3B%20GitHub%20Pages%3C%2Ftitle%3E%0A%20%20%20%20%3Cstyle%20type%3D%22text%2Fcss%22%20media%3D%22screen%22%3E%0A%20%20%20%20%20%20body%20%7B%0A%20%20%20%20%20%20%20%20background%2Dcolor%3A%20%23f1f1f1%3B%0A%20%20%20%20%20%20%20%20margin%3A%200%3B%0A%20%20%20%20%20%20%20%20font%2Dfamily%3A%20%22Helvetica%20Neue%22%2C%20Helvetica%2C%20Arial%2C%20sans%2Dserif%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%2Econtainer%20%7B%20margin%3A%2050px%20auto%2040px%20auto%3B%20width%3A%20600px%3B%20text%2Dalign%3A%20center%3B%20%7D%0A%0A%20%20%20%20%20%20a%20%7B%20color%3A%20%234183c4%3B%20text%2Ddecoration%3A%20none%3B%20%7D%0A%20%20%20%20%20%20a%3Ahover%20%7B%20text%2Ddecoration%3A%20underline%3B%20%7D%0A%0A%20%20%20%20%20%20h1%20%7B%20width%3A%20800px%3B%20position%3Arelative%3B%20left%3A%20%2D100px%3B%20letter%2Dspacing%3A%20%2D1px%3B%20line%2Dheight%3A%2060px%3B%20font%2Dsize%3A%2060px%3B%20font%2Dweight%3A%20100%3B%20margin%3A%200px%200%2050px%200%3B%20text%2Dshadow%3A%200%201px%200%20%23fff%3B%20%7D%0A%20%20%20%20%20%20p%20%7B%20color%3A%20rgba%280%2C%200%2C%200%2C%200%2E5%29%3B%20margin%3A%2020px%200%3B%20line%2Dheight%3A%201%2E6%3B%20%7D%0A%0A%20%20%20%20%20%20ul%20%7B%20list%2Dstyle%3A%20none%3B%20margin%3A%2025px%200%3B%20padding%3A%200%3B%20%7D%0A%20%20%20%20%20%20li%20%7B%20display%3A%20table%2Dcell%3B%20font%2Dweight%3A%20bold%3B%20width%3A%201%25%3B%20%7D%0A%0A%20%20%20%20%20%20%2Elogo%20%7B%20display%3A%20inline%2Dblock%3B%20margin%2Dtop%3A%2035px%3B%20%7D%0A%20%20%20%20%20%20%2Elogo%2Dimg%2D2x%20%7B%20display%3A%20none%3B%20%7D%0A%20%20%20%20%20%20%40media%0A%20%20%20%20%20%20only%20screen%20and%20%28%2Dwebkit%2Dmin%2Ddevice%2Dpixel%2Dratio%3A%202%29%2C%0A%20%20%20%20%20%20only%20screen%20and%20%28%20%20%20min%2D%2Dmoz%2Ddevice%2Dpixel%2Dratio%3A%202%29%2C%0A%20%20%20%20%20%20only%20screen%20and%20%28%20%20%20%20%20%2Do%2Dmin%2Ddevice%2Dpixel%2Dratio%3A%202%2F1%29%2C%0A%20%20%20%20%20%20only%20screen%20and%20%28%20%20%20%20%20%20%20%20min%2Ddevice%2Dpixel%2Dratio%3A%202%29%2C%0A%20%20%20%20%20%20only%20screen%20and%20%28%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20min%2Dresolution%3A%20192dpi%29%2C%0A%20%20%20%20%20%20only%20screen%20and%20%28%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20min%2Dresolution%3A%202dppx%29%20%7B%0A%20%20%20%20%20%20%20%20%2Elogo%2Dimg%2D1x%20%7B%20display%3A%20none%3B%20%7D%0A%20%20%20%20%20%20%20%20%2Elogo%2Dimg%2D2x%20%7B%20display%3A%20inline%2Dblock%3B%20%7D%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%23suggestions%20%7B%0A%20%20%20%20%20%20%20%20margin%2Dtop%3A%2035px%3B%0A%20%20%20%20%20%20%20%20color%3A%20%23ccc%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%23suggestions%20a%20%7B%0A%20%20%20%20%20%20%20%20color%3A%20%23666666%3B%0A%20%20%20%20%20%20%20%20font%2Dweight%3A%20200%3B%0A%20%20%20%20%20%20%20%20font%2Dsize%3A%2014px%3B%0A%20%20%20%20%20%20%20%20margin%3A%200%2010px%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%3C%2Fstyle%3E%0A%20%20%3C%2Fhead%3E%0A%20%20%3Cbody%3E%0A%0A%20%20%20%20%3Cdiv%20class%3D%22container%22%3E%0A%0A%20%20%20%20%20%20%3Ch1%3E404%3C%2Fh1%3E%0A%20%20%20%20%20%20%3Cp%3E%3Cstrong%3EFile%20not%20found%3C%2Fstrong%3E%3C%2Fp%3E%0A%0A%20%20%20%20%20%20%3Cp%3E%0A%20%20%20%20%20%20%20%20The%20site%20configured%20at%20this%20address%20does%20not%0A%20%20%20%20%20%20%20%20contain%20the%20requested%20file%2E%0A%20%20%20%20%20%20%3C%2Fp%3E%0A%0A%20%20%20%20%20%20%3Cp%3E%0A%20%20%20%20%20%20%20%20If%20this%20is%20your%20site%2C%20make%20sure%20that%20the%20filename%20case%20matches%20the%20URL%2E%3Cbr%3E%0A%20%20%20%20%20%20%20%20For%20root%20URLs%20%28like%20%3Ccode%3Ehttp%3A%2F%2Fexample%2Ecom%2F%3C%2Fcode%3E%29%20you%20must%20provide%20an%0A%20%20%20%20%20%20%20%20%3Ccode%3Eindex%2Ehtml%3C%2Fcode%3E%20file%2E%0A%20%20%20%20%20%20%3C%2Fp%3E%0A%0A%20%20%20%20%20%20%3Cp%3E%0A%20%20%20%20%20%20%20%20%3Ca%20href%3D%22https%3A%2F%2Fhelp%2Egithub%2Ecom%2Fpages%2F%22%3ERead%20the%20full%20documentation%3C%2Fa%3E%0A%20%20%20%20%20%20%20%20for%20more%20information%20about%20using%20%3Cstrong%3EGitHub%20Pages%3C%2Fstrong%3E%2E%0A%20%20%20%20%20%20%3C%2Fp%3E%0A%0A%20%20%20%20%20%20%3Cdiv%20id%3D%22suggestions%22%3E%0A%20%20%20%20%20%20%20%20%3Ca%20href%3D%22https%3A%2F%2Fgithubstatus%2Ecom%22%3EGitHub%20Status%3C%2Fa%3E%20%26mdash%3B%0A%20%20%20%20%20%20%20%20%3Ca%20href%3D%22https%3A%2F%2Ftwitter%2Ecom%2Fgithubstatus%22%3E%40githubstatus%3C%2Fa%3E%0A%20%20%20%20%20%20%3C%2Fdiv%3E%0A%0A%20%20%20%20%20%20%3Ca%20href%3D%22%2F%22%20class%3D%22logo%20logo%2Dimg%2D1x%22%3E%0A%20%20%20%20%20%20%20%20%3Cimg%20width%3D%2232%22%20height%3D%2232%22%20title%3D%22%22%20alt%3D%22%22%20src%3D%22data%3Aimage%2Fpng%3Bbase64%2CiVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyRpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw%2FeHBhY2tldCBiZWdpbj0i77u%2FIiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8%2BIDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoTWFjaW50b3NoKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpFMTZCRDY3REIzRjAxMUUyQUQzREIxQzRENUFFNUM5NiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpFMTZCRDY3RUIzRjAxMUUyQUQzREIxQzRENUFFNUM5NiI%2BIDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkUxNkJENjdCQjNGMDExRTJBRDNEQjFDNEQ1QUU1Qzk2IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkUxNkJENjdDQjNGMDExRTJBRDNEQjFDNEQ1QUU1Qzk2Ii8%2BIDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY%2BIDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8%2BSM9MCAAAA%2B5JREFUeNrEV11Ik1EY3s4%2BddOp29Q5b0opCgKFsoKoi5Kg6CIhuwi6zLJLoYLopq4qsKKgi4i6CYIoU%2Fq5iDAKs6syoS76IRWtyJ%2Bp7cdt7sf1PGOD%2Be0c3dygAx%2F67ZzzPM95%2F877GYdHRg3ZjMXFxepQKNS6sLCwJxqNNuFpiMfjVs4ZjUa%2FpmmjeD6VlJS8NpvNT4QQ7mxwjSsJiEQim%2F1%2B%2F9lgMHgIr5ohuxG1WCw9Vqv1clFR0dCqBODElV6v90ogEDjGdYbVjXhpaendioqK07CIR7ZAqE49PT09BPL2PMgTByQGsYiZlQD4uMXtdr%2BJxWINhgINYhGT2MsKgMrm2dnZXgRXhaHAg5jEJodUAHxux4LudHJE9RdEdA%2Bi3Juz7bGHe4mhE9FNrgwBCLirMFV9Okh5eflFh8PR5nK5nDabrR2BNJlKO0T35%2BLi4n4%2B%2FJ%2B%2FJQCxhmu5h3uJoXNHPbmWZAHMshWB8l5%2FipqammaAf0zPDDx1ONV3vurdidqwAQL%2BpEc8sLcAe1CCvQ3YHxIW8Pl85xSWNC1hADDIv0rIE%2Fo4J0k3kww4xSlwIhcq3EFFOm7KN%2FhUGOQkt0CFa5WpNJlMvxBEz%2FIVQAxg%2FZRZl9wiHA63yDYieM7DnLP5CiAGsC7I5sgtYKJGWe2A8seFqgFJrJjEPY1Cn3pJ8%2F9W1e5VWsFDTEmFrBcoDhZJEQkXuhICMyKpjhahqN21hRYATKfUOlDmkygrR4o4C0VOLGJKrOITKB4jijzdXygBKixyC5TDQdnk%2FPz8qRw6oOWGlsTKGOQW6OH6FBWsyePxdOXLTgxiyebILZCjz%2BGLgMIKnXNzc49YMlcRdHXcSwxFVgTInQhC9G33UhNoJLuqq6t345p9y3eUy8OTk5PjAHuI9uo4b07FBaOhsu0A4Unc%2BT1TU1Nj3KsSSE5yJ65jqF2DDd8QqWYmAZrIM2VlZTdnZmb6AbpdV9V6ec9znf5Q7HjYumdRE0JOp3MjitO4SFa%2BcZz8Umqe3TCbSLvdfkR%2FkWDdNQl5InuTcysOcpFT35ZrbBxx4p3JAHlZVVW1D%2F634VRt%2BFvLBgK%2Fv5LV9WS%2B10xMTEwtRw7XvqOL%2Be2Q8V3AYIOIAXQ26%2FheWVnZCVfcyKHg2CBgTpmPmjYM8l24GyaUHyaIh7XwfR9ErE8qHoDfn2LTNAVC0HX6MFcBIP8Bi%2B6F6cdW%2FDICkANRfx99fEYFQ7Nph5i%2FuQiA214gno7K%2BguhaiKg9gC62%2BM8eR7XsBsYJ4ilam60Fb7r7uAj8wFyuwM1oIOWgfmDy6RXEEQzJMPe23DXrVS7rtyD3Df8z%2FFPgAEAzWU5Ku59ZAUAAAAASUVORK5CYII%3D%22%3E%0A%20%20%20%20%20%20%3C%2Fa%3E%0A%0A%20%20%20%20%20%20%3Ca%20href%3D%22%2F%22%20class%3D%22logo%20logo%2Dimg%2D2x%22%3E%0A%20%20%20%20%20%20%20%20%3Cimg%20width%3D%2232%22%20height%3D%2232%22%20title%3D%22%22%20alt%3D%22%22%20src%3D%22data%3Aimage%2Fpng%3Bbase64%2CiVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyRpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw%2FeHBhY2tldCBiZWdpbj0i77u%2FIiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8%2BIDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoTWFjaW50b3NoKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpEQUM1QkUxRUI0MUMxMUUyQUQzREIxQzRENUFFNUM5NiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpEQUM1QkUxRkI0MUMxMUUyQUQzREIxQzRENUFFNUM5NiI%2BIDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkUxNkJENjdGQjNGMDExRTJBRDNEQjFDNEQ1QUU1Qzk2IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkUxNkJENjgwQjNGMDExRTJBRDNEQjFDNEQ1QUU1Qzk2Ii8%2BIDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY%2BIDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8%2BhfPRaQAAB6lJREFUeNrsW2mME2UYbodtt%2B2222u35QheoCCYGBQligIJgkZJNPzgigoaTEj8AdFEMfADfyABkgWiiWcieK4S%2BQOiHAYUj2hMNKgYlEujpNttu9vttbvdw%2BchU1K6M535pt3ubHCSyezR%2Bb73eb73%2Bt7vrfXsufOW4bz6%2Bvom9%2Fb23ovnNNw34b5xYGAgODg46Mbt4mesVmsWd1qSpHhdXd2fuP%2FAfcput5%2FA88xwymcdBgLqenp6FuRyuWV4zu%2Fv759QyWBjxoz5t76%2B%2Fgun09mK5xFyakoCAPSaTCazNpvNPoYVbh6O1YKGRF0u13sNDQ27QMzfpiAAKj0lnU6%2FgBVfAZW2WWpwwVzy0IgP3G73FpjI6REhAGA9qVRqA1b9mVoBVyIC2tDi8Xg24%2BdUzQiAbS%2Fs7Ox8G2o%2F3mKCC%2BZw0efzPQEfcVjYrARX3dbV1bUtHo8fMgt42f%2BMp0yUTVQbdWsAHVsikdiHkHaPxcQXQufXgUBgMRxme9U0AAxfH4vFvjM7eF6UkbJS5qoQwEQGA57Ac5JllFyUVZZ5ckUEgMVxsK2jlSYzI%2BQXJsiyjzNEAJyJAzb%2FKQa41jJKL8pODMQiTEAymXw5n8%2FP0IjD3bh7Rgog59aanxiIRTVvV%2Foj0tnHca%2FWMrVwODwB3raTGxzkBg%2FgnZVapFV62Wy2n5AO70HM%2F5wbJ0QnXyQSaVPDIuNZzY0V3ntHMwxiwHA0Gj2Np7ecIBDgaDAYXKCQJM1DhrgJ3nhulcPbl8j4NmHe46X%2Fg60fwbz3aewjkqFQaAqebWU1AOqyQwt8Id6qEHMc97zu7u7FGGsn7HAiVuosVw7P35C1nccdgSCxop1dHeZswmfHMnxBo6ZTk%2BjN8dl%2FvF7vWofDsa%2BMLN9oEUBMxOb3%2B1eoEsBVw6Zmua49r8YmhAKDiEPcMwBsxMiqQ%2BixzPFxZyqRpXARG%2FYOr1ObFJ0gUskXBbamcR1OKmMUvDxHRAu8%2FLmY3jFLMUpFqz9HxG65smYJdyKyECOxDiEAe%2Fp1gjF2oonivZAsxVgl2daa4EQWCW6J55qFAFFZiJWYLxNQy2qOSUzGRsyXCUDIeliwAHEO4WSlWQBRFoZakXcKmCXmyXAKs0Ve9vl8q42WoIYpJU4hV3hKcNs8m9gl7p%2FxQ73eF5kB4j5mNrWmTJRNwAzqiV1CxjVTZCIkEq%2BZ1bZFZSN2CenmVAFVy4Plz8xKAGWjjAKFk6lCBMDR%2FMJjLLMSQNm43xAiQKTaA%2B9%2FwewhDjL%2BJVI1kkTSSOTcKbMTwPqESAot6dn6Fr1gHwVJju6IRuyiByPuUUBAg5DGkAgBmxlvdgIEK9gDkohdY%2FBJo4CAG0R8miRSsGABkgVQs4KXu098IgUXSSRsFAoKZiVAVDY2WUiiPTjYRi41KwGisrGsLtlsth8Fiwnz2fBkQvWfRtlE3iF2yW63%2FyCacXZ1dW02GwGyTFaRd4idJnCKHRaCxYRHoG5LTKT6SyiToP1fJHbmAYPYRR0UnZQtMnA6s0zg%2BGZBlt0Gdo7EPHgpE3Q6nZ8YyLhc8Xj8MJh%2FaKTAY%2B5FPAKHLE7RdwuYJZmNwzyCMkBCYyKROJBMJl9B%2FPXXCjjmCmDOVzH3fiPpObEWGqoKe4EBl8v1hlqsdLvd23mkxHM9pc9kMpmno9HoeTii7ewbHEZPPx1ztLS1tV3AnGuMjiNjvbQFuHw6zDo5By7dTPAQNBgMLrRarTkSls1mnwT7uwp9virx9QzbW%2FHuV%2Fj5d%2Fb%2B6jniKlllP8lkeONJDk%2Bdq9GsQTnC4fB1heO0K47Hwe7WdDr9nAKgXwOBwHI%2BC45Htj1d6sd429TUNEcmUdc%2BPRaLHcvn87dXW4ugzdsaGxufL94NFv9zi1J7GVbhlvb2dnaJ3SVrxfc%2Bn2%2BNTsZ7%2FH7%2FMr3g5XdSIHyJSH1PZ%2B7fToyl2%2BErqilgZ4NaLYB9goVGaHjR93Hv1ZrU4XDsFT20kH3PObzbWk0CgG1jacVIUnAQb9F%2BVexyLMzkpcLv0IJV7AHQIOCAUYHx7v5qgScmYHtTqSAyZLEJTK22Bie4iq3xsqpm4SAf9Hq9a2DnJ4uLK3SEULcdRvp3i3zHySqpficxEdsQc1NrlYXXvR%2BO7qASSezXB%2Bh1SuUomgg9LL8BUoV4749EIolKh%2BEiqWmqVEZlDgHks2pxHw7xTqUQw9J5NcAXOK10AGIoZ6Zli6JY6Z1Q461KoZ4NiKLHarW%2BKDsxlDUPHZ5zPQZqUVDPJsTqb5n9malbpAh8C2XXDLl62%2BWZIDFRUlNVOiwencnNU3aQEkL%2BcDMSoLvZo2fQB7AJssNAuFuvorlDVVkkg2I87%2Bjo2K2QAVphDrfyViK5VqtO34OkaxXCp%2B7drdDBCAdubm6eidX%2B2WwqT5komwh4YQLk%2BH4aE93h8Xg2gvHekQZOGSgLZTLyDTLJ4Lx9%2FKZWKBSainT4Iy3FqQBfnUZR42PKQFksBr9QKVXCPusD3OiA%2FRkQ5kP8qV%2FJl1WywAp%2F6%2BdcmPM2zL1UrUahe4JqfnWWKXIul3uUbfP8njAFLW1OFr3gdFtZ72cNH%2BPtQT7%2FbrW%2BNXqJAHh0y9V8%2FU%2FA1U7AfwIMAD7mS3pCbuWJAAAAAElFTkSuQmCC%22%3E%0A%20%20%20%20%20%20%3C%2Fa%3E%0A%20%20%20%20%3C%2Fdiv%3E%0A%20%20%3C%2Fbody%3E%0A%3C%2Fhtml%3E%0A"></script>
  <script src="data:application/javascript; charset=utf-8;base64,LyohCiAqIHJldmVhbC5qcwogKiBodHRwOi8vcmV2ZWFsanMuY29tCiAqIE1JVCBsaWNlbnNlZAogKgogKiBDb3B5cmlnaHQgKEMpIDIwMTkgSGFraW0gRWwgSGF0dGFiLCBodHRwOi8vaGFraW0uc2UKICovCihmdW5jdGlvbiggcm9vdCwgZmFjdG9yeSApIHsKCWlmKCB0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQgKSB7CgkJLy8gQU1ELiBSZWdpc3RlciBhcyBhbiBhbm9ueW1vdXMgbW9kdWxlLgoJCWRlZmluZSggZnVuY3Rpb24oKSB7CgkJCXJvb3QuUmV2ZWFsID0gZmFjdG9yeSgpOwoJCQlyZXR1cm4gcm9vdC5SZXZlYWw7CgkJfSApOwoJfSBlbHNlIGlmKCB0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgKSB7CgkJLy8gTm9kZS4gRG9lcyBub3Qgd29yayB3aXRoIHN0cmljdCBDb21tb25KUy4KCQltb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoKTsKCX0gZWxzZSB7CgkJLy8gQnJvd3NlciBnbG9iYWxzLgoJCXJvb3QuUmV2ZWFsID0gZmFjdG9yeSgpOwoJfQp9KCB0aGlzLCBmdW5jdGlvbigpIHsKCgkndXNlIHN0cmljdCc7CgoJdmFyIFJldmVhbDsKCgkvLyBUaGUgcmV2ZWFsLmpzIHZlcnNpb24KCXZhciBWRVJTSU9OID0gJzMuOC4wJzsKCgl2YXIgU0xJREVTX1NFTEVDVE9SID0gJy5zbGlkZXMgc2VjdGlvbicsCgkJSE9SSVpPTlRBTF9TTElERVNfU0VMRUNUT1IgPSAnLnNsaWRlcz5zZWN0aW9uJywKCQlWRVJUSUNBTF9TTElERVNfU0VMRUNUT1IgPSAnLnNsaWRlcz5zZWN0aW9uLnByZXNlbnQ+c2VjdGlvbicsCgkJSE9NRV9TTElERV9TRUxFQ1RPUiA9ICcuc2xpZGVzPnNlY3Rpb246Zmlyc3Qtb2YtdHlwZScsCgkJVUEgPSBuYXZpZ2F0b3IudXNlckFnZW50LAoKCQkvLyBDb25maWd1cmF0aW9uIGRlZmF1bHRzLCBjYW4gYmUgb3ZlcnJpZGRlbiBhdCBpbml0aWFsaXphdGlvbiB0aW1lCgkJY29uZmlnID0gewoKCQkJLy8gVGhlICJub3JtYWwiIHNpemUgb2YgdGhlIHByZXNlbnRhdGlvbiwgYXNwZWN0IHJhdGlvIHdpbGwgYmUgcHJlc2VydmVkCgkJCS8vIHdoZW4gdGhlIHByZXNlbnRhdGlvbiBpcyBzY2FsZWQgdG8gZml0IGRpZmZlcmVudCByZXNvbHV0aW9ucwoJCQl3aWR0aDogOTYwLAoJCQloZWlnaHQ6IDcwMCwKCgkJCS8vIEZhY3RvciBvZiB0aGUgZGlzcGxheSBzaXplIHRoYXQgc2hvdWxkIHJlbWFpbiBlbXB0eSBhcm91bmQgdGhlIGNvbnRlbnQKCQkJbWFyZ2luOiAwLjA0LAoKCQkJLy8gQm91bmRzIGZvciBzbWFsbGVzdC9sYXJnZXN0IHBvc3NpYmxlIHNjYWxlIHRvIGFwcGx5IHRvIGNvbnRlbnQKCQkJbWluU2NhbGU6IDAuMiwKCQkJbWF4U2NhbGU6IDIuMCwKCgkJCS8vIERpc3BsYXkgcHJlc2VudGF0aW9uIGNvbnRyb2wgYXJyb3dzCgkJCWNvbnRyb2xzOiB0cnVlLAoKCQkJLy8gSGVscCB0aGUgdXNlciBsZWFybiB0aGUgY29udHJvbHMgYnkgcHJvdmlkaW5nIGhpbnRzLCBmb3IgZXhhbXBsZSBieQoJCQkvLyBib3VuY2luZyB0aGUgZG93biBhcnJvdyB3aGVuIHRoZXkgZmlyc3QgZW5jb3VudGVyIGEgdmVydGljYWwgc2xpZGUKCQkJY29udHJvbHNUdXRvcmlhbDogdHJ1ZSwKCgkJCS8vIERldGVybWluZXMgd2hlcmUgY29udHJvbHMgYXBwZWFyLCAiZWRnZXMiIG9yICJib3R0b20tcmlnaHQiCgkJCWNvbnRyb2xzTGF5b3V0OiAnYm90dG9tLXJpZ2h0JywKCgkJCS8vIFZpc2liaWxpdHkgcnVsZSBmb3IgYmFja3dhcmRzIG5hdmlnYXRpb24gYXJyb3dzOyAiZmFkZWQiLCAiaGlkZGVuIgoJCQkvLyBvciAidmlzaWJsZSIKCQkJY29udHJvbHNCYWNrQXJyb3dzOiAnZmFkZWQnLAoKCQkJLy8gRGlzcGxheSBhIHByZXNlbnRhdGlvbiBwcm9ncmVzcyBiYXIKCQkJcHJvZ3Jlc3M6IHRydWUsCgoJCQkvLyBEaXNwbGF5IHRoZSBwYWdlIG51bWJlciBvZiB0aGUgY3VycmVudCBzbGlkZQoJCQkvLyAtIHRydWU6ICAgIFNob3cgc2xpZGUgbnVtYmVyCgkJCS8vIC0gZmFsc2U6ICAgSGlkZSBzbGlkZSBudW1iZXIKCQkJLy8KCQkJLy8gQ2FuIG9wdGlvbmFsbHkgYmUgc2V0IGFzIGEgc3RyaW5nIHRoYXQgc3BlY2lmaWVzIHRoZSBudW1iZXIgZm9ybWF0dGluZzoKCQkJLy8gLSAiaC52IjoJICBIb3Jpem9udGFsIC4gdmVydGljYWwgc2xpZGUgbnVtYmVyIChkZWZhdWx0KQoJCQkvLyAtICJoL3YiOgkgIEhvcml6b250YWwgLyB2ZXJ0aWNhbCBzbGlkZSBudW1iZXIKCQkJLy8gLSAiYyI6CSAgRmxhdHRlbmVkIHNsaWRlIG51bWJlcgoJCQkvLyAtICJjL3QiOgkgIEZsYXR0ZW5lZCBzbGlkZSBudW1iZXIgLyB0b3RhbCBzbGlkZXMKCQkJLy8KCQkJLy8gQWx0ZXJuYXRpdmVseSwgeW91IGNhbiBwcm92aWRlIGEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIHRoZSBzbGlkZQoJCQkvLyBudW1iZXIgZm9yIHRoZSBjdXJyZW50IHNsaWRlLiBUaGUgZnVuY3Rpb24gbmVlZHMgdG8gcmV0dXJuIGFuIGFycmF5CgkJCS8vIHdpdGggb25lIHN0cmluZyBbc2xpZGVOdW1iZXJdIG9yIHRocmVlIHN0cmluZ3MgW24xLGRlbGltaXRlcixuMl0uCgkJCS8vIFNlZSAjZm9ybWF0U2xpZGVOdW1iZXIoKS4KCQkJc2xpZGVOdW1iZXI6IGZhbHNlLAoKCQkJLy8gQ2FuIGJlIHVzZWQgdG8gbGltaXQgdGhlIGNvbnRleHRzIGluIHdoaWNoIHRoZSBzbGlkZSBudW1iZXIgYXBwZWFycwoJCQkvLyAtICJhbGwiOiAgICAgIEFsd2F5cyBzaG93IHRoZSBzbGlkZSBudW1iZXIKCQkJLy8gLSAicHJpbnQiOiAgICBPbmx5IHdoZW4gcHJpbnRpbmcgdG8gUERGCgkJCS8vIC0gInNwZWFrZXIiOiAgT25seSBpbiB0aGUgc3BlYWtlciB2aWV3CgkJCXNob3dTbGlkZU51bWJlcjogJ2FsbCcsCgoJCQkvLyBVc2UgMSBiYXNlZCBpbmRleGluZyBmb3IgIyBsaW5rcyB0byBtYXRjaCBzbGlkZSBudW1iZXIgKGRlZmF1bHQgaXMgemVybwoJCQkvLyBiYXNlZCkKCQkJaGFzaE9uZUJhc2VkSW5kZXg6IGZhbHNlLAoKCQkJLy8gQWRkIHRoZSBjdXJyZW50IHNsaWRlIG51bWJlciB0byB0aGUgVVJMIGhhc2ggc28gdGhhdCByZWxvYWRpbmcgdGhlCgkJCS8vIHBhZ2UvY29weWluZyB0aGUgVVJMIHdpbGwgcmV0dXJuIHlvdSB0byB0aGUgc2FtZSBzbGlkZQoJCQloYXNoOiBmYWxzZSwKCgkJCS8vIFB1c2ggZWFjaCBzbGlkZSBjaGFuZ2UgdG8gdGhlIGJyb3dzZXIgaGlzdG9yeS4gIEltcGxpZXMgYGhhc2g6IHRydWVgCgkJCWhpc3Rvcnk6IGZhbHNlLAoKCQkJLy8gRW5hYmxlIGtleWJvYXJkIHNob3J0Y3V0cyBmb3IgbmF2aWdhdGlvbgoJCQlrZXlib2FyZDogdHJ1ZSwKCgkJCS8vIE9wdGlvbmFsIGZ1bmN0aW9uIHRoYXQgYmxvY2tzIGtleWJvYXJkIGV2ZW50cyB3aGVuIHJldHVuaW5nIGZhbHNlCgkJCWtleWJvYXJkQ29uZGl0aW9uOiBudWxsLAoKCQkJLy8gRW5hYmxlIHRoZSBzbGlkZSBvdmVydmlldyBtb2RlCgkJCW92ZXJ2aWV3OiB0cnVlLAoKCQkJLy8gRGlzYWJsZXMgdGhlIGRlZmF1bHQgcmV2ZWFsLmpzIHNsaWRlIGxheW91dCBzbyB0aGF0IHlvdSBjYW4gdXNlCgkJCS8vIGN1c3RvbSBDU1MgbGF5b3V0CgkJCWRpc2FibGVMYXlvdXQ6IGZhbHNlLAoKCQkJLy8gVmVydGljYWwgY2VudGVyaW5nIG9mIHNsaWRlcwoJCQljZW50ZXI6IHRydWUsCgoJCQkvLyBFbmFibGVzIHRvdWNoIG5hdmlnYXRpb24gb24gZGV2aWNlcyB3aXRoIHRvdWNoIGlucHV0CgkJCXRvdWNoOiB0cnVlLAoKCQkJLy8gTG9vcCB0aGUgcHJlc2VudGF0aW9uCgkJCWxvb3A6IGZhbHNlLAoKCQkJLy8gQ2hhbmdlIHRoZSBwcmVzZW50YXRpb24gZGlyZWN0aW9uIHRvIGJlIFJUTAoJCQlydGw6IGZhbHNlLAoKCQkJLy8gQ2hhbmdlcyB0aGUgYmVoYXZpb3Igb2Ygb3VyIG5hdmlnYXRpb24gZGlyZWN0aW9ucy4KCQkJLy8KCQkJLy8gImRlZmF1bHQiCgkJCS8vIExlZnQvcmlnaHQgYXJyb3cga2V5cyBzdGVwIGJldHdlZW4gaG9yaXpvbnRhbCBzbGlkZXMsIHVwL2Rvd24KCQkJLy8gYXJyb3cga2V5cyBzdGVwIGJldHdlZW4gdmVydGljYWwgc2xpZGVzLiBTcGFjZSBrZXkgc3RlcHMgdGhyb3VnaAoJCQkvLyBhbGwgc2xpZGVzIChib3RoIGhvcml6b250YWwgYW5kIHZlcnRpY2FsKS4KCQkJLy8KCQkJLy8gImxpbmVhciIKCQkJLy8gUmVtb3ZlcyB0aGUgdXAvZG93biBhcnJvd3MuIExlZnQvcmlnaHQgYXJyb3dzIHN0ZXAgdGhyb3VnaCBhbGwKCQkJLy8gc2xpZGVzIChib3RoIGhvcml6b250YWwgYW5kIHZlcnRpY2FsKS4KCQkJLy8KCQkJLy8gImdyaWQiCgkJCS8vIFdoZW4gdGhpcyBpcyBlbmFibGVkLCBzdGVwcGluZyBsZWZ0L3JpZ2h0IGZyb20gYSB2ZXJ0aWNhbCBzdGFjawoJCQkvLyB0byBhbiBhZGphY2VudCB2ZXJ0aWNhbCBzdGFjayB3aWxsIGxhbmQgeW91IGF0IHRoZSBzYW1lIHZlcnRpY2FsCgkJCS8vIGluZGV4LgoJCQkvLwoJCQkvLyBDb25zaWRlciBhIGRlY2sgd2l0aCBzaXggc2xpZGVzIG9yZGVyZWQgaW4gdHdvIHZlcnRpY2FsIHN0YWNrczoKCQkJLy8gMS4xICAgIDIuMQoJCQkvLyAxLjIgICAgMi4yCgkJCS8vIDEuMyAgICAyLjMKCQkJLy8KCQkJLy8gSWYgeW91J3JlIG9uIHNsaWRlIDEuMyBhbmQgbmF2aWdhdGUgcmlnaHQsIHlvdSB3aWxsIG5vcm1hbGx5IG1vdmUKCQkJLy8gZnJvbSAxLjMgLT4gMi4xLiBJZiAiZ3JpZCIgaXMgdXNlZCwgdGhlIHNhbWUgbmF2aWdhdGlvbiB0YWtlcyB5b3UKCQkJLy8gZnJvbSAxLjMgLT4gMi4zLgoJCQluYXZpZ2F0aW9uTW9kZTogJ2RlZmF1bHQnLAoKCQkJLy8gUmFuZG9taXplcyB0aGUgb3JkZXIgb2Ygc2xpZGVzIGVhY2ggdGltZSB0aGUgcHJlc2VudGF0aW9uIGxvYWRzCgkJCXNodWZmbGU6IGZhbHNlLAoKCQkJLy8gVHVybnMgZnJhZ21lbnRzIG9uIGFuZCBvZmYgZ2xvYmFsbHkKCQkJZnJhZ21lbnRzOiB0cnVlLAoKCQkJLy8gRmxhZ3Mgd2hldGhlciB0byBpbmNsdWRlIHRoZSBjdXJyZW50IGZyYWdtZW50IGluIHRoZSBVUkwsCgkJCS8vIHNvIHRoYXQgcmVsb2FkaW5nIGJyaW5ncyB5b3UgdG8gdGhlIHNhbWUgZnJhZ21lbnQgcG9zaXRpb24KCQkJZnJhZ21lbnRJblVSTDogZmFsc2UsCgoJCQkvLyBGbGFncyBpZiB0aGUgcHJlc2VudGF0aW9uIGlzIHJ1bm5pbmcgaW4gYW4gZW1iZWRkZWQgbW9kZSwKCQkJLy8gaS5lLiBjb250YWluZWQgd2l0aGluIGEgbGltaXRlZCBwb3J0aW9uIG9mIHRoZSBzY3JlZW4KCQkJZW1iZWRkZWQ6IGZhbHNlLAoKCQkJLy8gRmxhZ3MgaWYgd2Ugc2hvdWxkIHNob3cgYSBoZWxwIG92ZXJsYXkgd2hlbiB0aGUgcXVlc3Rpb24tbWFyawoJCQkvLyBrZXkgaXMgcHJlc3NlZAoJCQloZWxwOiB0cnVlLAoKCQkJLy8gRmxhZ3MgaWYgaXQgc2hvdWxkIGJlIHBvc3NpYmxlIHRvIHBhdXNlIHRoZSBwcmVzZW50YXRpb24gKGJsYWNrb3V0KQoJCQlwYXVzZTogdHJ1ZSwKCgkJCS8vIEZsYWdzIGlmIHNwZWFrZXIgbm90ZXMgc2hvdWxkIGJlIHZpc2libGUgdG8gYWxsIHZpZXdlcnMKCQkJc2hvd05vdGVzOiBmYWxzZSwKCgkJCS8vIEdsb2JhbCBvdmVycmlkZSBmb3IgYXV0b2xheWluZyBlbWJlZGRlZCBtZWRpYSAodmlkZW8vYXVkaW8vaWZyYW1lKQoJCQkvLyAtIG51bGw6ICAgTWVkaWEgd2lsbCBvbmx5IGF1dG9wbGF5IGlmIGRhdGEtYXV0b3BsYXkgaXMgcHJlc2VudAoJCQkvLyAtIHRydWU6ICAgQWxsIG1lZGlhIHdpbGwgYXV0b3BsYXksIHJlZ2FyZGxlc3Mgb2YgaW5kaXZpZHVhbCBzZXR0aW5nCgkJCS8vIC0gZmFsc2U6ICBObyBtZWRpYSB3aWxsIGF1dG9wbGF5LCByZWdhcmRsZXNzIG9mIGluZGl2aWR1YWwgc2V0dGluZwoJCQlhdXRvUGxheU1lZGlhOiBudWxsLAoKCQkJLy8gR2xvYmFsIG92ZXJyaWRlIGZvciBwcmVsb2FkaW5nIGxhenktbG9hZGVkIGlmcmFtZXMKCQkJLy8gLSBudWxsOiAgIElmcmFtZXMgd2l0aCBkYXRhLXNyYyBBTkQgZGF0YS1wcmVsb2FkIHdpbGwgYmUgbG9hZGVkIHdoZW4gd2l0aGluCgkJCS8vICAgICAgICAgICB0aGUgdmlld0Rpc3RhbmNlLCBpZnJhbWVzIHdpdGggb25seSBkYXRhLXNyYyB3aWxsIGJlIGxvYWRlZCB3aGVuIHZpc2libGUKCQkJLy8gLSB0cnVlOiAgIEFsbCBpZnJhbWVzIHdpdGggZGF0YS1zcmMgd2lsbCBiZSBsb2FkZWQgd2hlbiB3aXRoaW4gdGhlIHZpZXdEaXN0YW5jZQoJCQkvLyAtIGZhbHNlOiAgQWxsIGlmcmFtZXMgd2l0aCBkYXRhLXNyYyB3aWxsIGJlIGxvYWRlZCBvbmx5IHdoZW4gdmlzaWJsZQoJCQlwcmVsb2FkSWZyYW1lczogbnVsbCwKCgkJCS8vIENvbnRyb2xzIGF1dG9tYXRpYyBwcm9ncmVzc2lvbiB0byB0aGUgbmV4dCBzbGlkZQoJCQkvLyAtIDA6ICAgICAgQXV0by1zbGlkaW5nIG9ubHkgaGFwcGVucyBpZiB0aGUgZGF0YS1hdXRvc2xpZGUgSFRNTCBhdHRyaWJ1dGUKCQkJLy8gICAgICAgICAgIGlzIHByZXNlbnQgb24gdGhlIGN1cnJlbnQgc2xpZGUgb3IgZnJhZ21lbnQKCQkJLy8gLSAxKzogICAgIEFsbCBzbGlkZXMgd2lsbCBwcm9ncmVzcyBhdXRvbWF0aWNhbGx5IGF0IHRoZSBnaXZlbiBpbnRlcnZhbAoJCQkvLyAtIGZhbHNlOiAgTm8gYXV0by1zbGlkaW5nLCBldmVuIGlmIGRhdGEtYXV0b3NsaWRlIGlzIHByZXNlbnQKCQkJYXV0b1NsaWRlOiAwLAoKCQkJLy8gU3RvcCBhdXRvLXNsaWRpbmcgYWZ0ZXIgdXNlciBpbnB1dAoJCQlhdXRvU2xpZGVTdG9wcGFibGU6IHRydWUsCgoJCQkvLyBVc2UgdGhpcyBtZXRob2QgZm9yIG5hdmlnYXRpb24gd2hlbiBhdXRvLXNsaWRpbmcgKGRlZmF1bHRzIHRvIG5hdmlnYXRlTmV4dCkKCQkJYXV0b1NsaWRlTWV0aG9kOiBudWxsLAoKCQkJLy8gU3BlY2lmeSB0aGUgYXZlcmFnZSB0aW1lIGluIHNlY29uZHMgdGhhdCB5b3UgdGhpbmsgeW91IHdpbGwgc3BlbmQKCQkJLy8gcHJlc2VudGluZyBlYWNoIHNsaWRlLiBUaGlzIGlzIHVzZWQgdG8gc2hvdyBhIHBhY2luZyB0aW1lciBpbiB0aGUKCQkJLy8gc3BlYWtlciB2aWV3CgkJCWRlZmF1bHRUaW1pbmc6IG51bGwsCgoJCQkvLyBFbmFibGUgc2xpZGUgbmF2aWdhdGlvbiB2aWEgbW91c2Ugd2hlZWwKCQkJbW91c2VXaGVlbDogZmFsc2UsCgoJCQkvLyBBcHBseSBhIDNEIHJvbGwgdG8gbGlua3Mgb24gaG92ZXIKCQkJcm9sbGluZ0xpbmtzOiBmYWxzZSwKCgkJCS8vIEhpZGVzIHRoZSBhZGRyZXNzIGJhciBvbiBtb2JpbGUgZGV2aWNlcwoJCQloaWRlQWRkcmVzc0JhcjogdHJ1ZSwKCgkJCS8vIE9wZW5zIGxpbmtzIGluIGFuIGlmcmFtZSBwcmV2aWV3IG92ZXJsYXkKCQkJLy8gQWRkIGBkYXRhLXByZXZpZXctbGlua2AgYW5kIGBkYXRhLXByZXZpZXctbGluaz0iZmFsc2UiYCB0byBjdXN0b21pc2UgZWFjaCBsaW5rCgkJCS8vIGluZGl2aWR1YWxseQoJCQlwcmV2aWV3TGlua3M6IGZhbHNlLAoKCQkJLy8gRXhwb3NlcyB0aGUgcmV2ZWFsLmpzIEFQSSB0aHJvdWdoIHdpbmRvdy5wb3N0TWVzc2FnZQoJCQlwb3N0TWVzc2FnZTogdHJ1ZSwKCgkJCS8vIERpc3BhdGNoZXMgYWxsIHJldmVhbC5qcyBldmVudHMgdG8gdGhlIHBhcmVudCB3aW5kb3cgdGhyb3VnaCBwb3N0TWVzc2FnZQoJCQlwb3N0TWVzc2FnZUV2ZW50czogZmFsc2UsCgoJCQkvLyBGb2N1c2VzIGJvZHkgd2hlbiBwYWdlIGNoYW5nZXMgdmlzaWJpbGl0eSB0byBlbnN1cmUga2V5Ym9hcmQgc2hvcnRjdXRzIHdvcmsKCQkJZm9jdXNCb2R5T25QYWdlVmlzaWJpbGl0eUNoYW5nZTogdHJ1ZSwKCgkJCS8vIFRyYW5zaXRpb24gc3R5bGUKCQkJdHJhbnNpdGlvbjogJ3NsaWRlJywgLy8gbm9uZS9mYWRlL3NsaWRlL2NvbnZleC9jb25jYXZlL3pvb20KCgkJCS8vIFRyYW5zaXRpb24gc3BlZWQKCQkJdHJhbnNpdGlvblNwZWVkOiAnZGVmYXVsdCcsIC8vIGRlZmF1bHQvZmFzdC9zbG93CgoJCQkvLyBUcmFuc2l0aW9uIHN0eWxlIGZvciBmdWxsIHBhZ2Ugc2xpZGUgYmFja2dyb3VuZHMKCQkJYmFja2dyb3VuZFRyYW5zaXRpb246ICdmYWRlJywgLy8gbm9uZS9mYWRlL3NsaWRlL2NvbnZleC9jb25jYXZlL3pvb20KCgkJCS8vIFBhcmFsbGF4IGJhY2tncm91bmQgaW1hZ2UKCQkJcGFyYWxsYXhCYWNrZ3JvdW5kSW1hZ2U6ICcnLCAvLyBDU1Mgc3ludGF4LCBlLmcuICJhLmpwZyIKCgkJCS8vIFBhcmFsbGF4IGJhY2tncm91bmQgc2l6ZQoJCQlwYXJhbGxheEJhY2tncm91bmRTaXplOiAnJywgLy8gQ1NTIHN5bnRheCwgZS5nLiAiMzAwMHB4IDIwMDBweCIKCgkJCS8vIFBhcmFsbGF4IGJhY2tncm91bmQgcmVwZWF0CgkJCXBhcmFsbGF4QmFja2dyb3VuZFJlcGVhdDogJycsIC8vIHJlcGVhdC9yZXBlYXQteC9yZXBlYXQteS9uby1yZXBlYXQvaW5pdGlhbC9pbmhlcml0CgoJCQkvLyBQYXJhbGxheCBiYWNrZ3JvdW5kIHBvc2l0aW9uCgkJCXBhcmFsbGF4QmFja2dyb3VuZFBvc2l0aW9uOiAnJywgLy8gQ1NTIHN5bnRheCwgZS5nLiAidG9wIGxlZnQiCgoJCQkvLyBBbW91bnQgb2YgcGl4ZWxzIHRvIG1vdmUgdGhlIHBhcmFsbGF4IGJhY2tncm91bmQgcGVyIHNsaWRlIHN0ZXAKCQkJcGFyYWxsYXhCYWNrZ3JvdW5kSG9yaXpvbnRhbDogbnVsbCwKCQkJcGFyYWxsYXhCYWNrZ3JvdW5kVmVydGljYWw6IG51bGwsCgoJCQkvLyBUaGUgbWF4aW11bSBudW1iZXIgb2YgcGFnZXMgYSBzaW5nbGUgc2xpZGUgY2FuIGV4cGFuZCBvbnRvIHdoZW4gcHJpbnRpbmcKCQkJLy8gdG8gUERGLCB1bmxpbWl0ZWQgYnkgZGVmYXVsdAoJCQlwZGZNYXhQYWdlc1BlclNsaWRlOiBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFksCgoJCQkvLyBQcmludHMgZWFjaCBmcmFnbWVudCBvbiBhIHNlcGFyYXRlIHNsaWRlCgkJCXBkZlNlcGFyYXRlRnJhZ21lbnRzOiB0cnVlLAoKCQkJLy8gT2Zmc2V0IHVzZWQgdG8gcmVkdWNlIHRoZSBoZWlnaHQgb2YgY29udGVudCB3aXRoaW4gZXhwb3J0ZWQgUERGIHBhZ2VzLgoJCQkvLyBUaGlzIGV4aXN0cyB0byBhY2NvdW50IGZvciBlbnZpcm9ubWVudCBkaWZmZXJlbmNlcyBiYXNlZCBvbiBob3cgeW91CgkJCS8vIHByaW50IHRvIFBERi4gQ0xJIHByaW50aW5nIG9wdGlvbnMsIGxpa2UgcGhhbnRvbWpzIGFuZCB3a3BkZiwgY2FuIGVuZAoJCQkvLyBvbiBwcmVjaXNlbHkgdGhlIHRvdGFsIGhlaWdodCBvZiB0aGUgZG9jdW1lbnQgd2hlcmVhcyBpbi1icm93c2VyCgkJCS8vIHByaW50aW5nIGhhcyB0byBlbmQgb25lIHBpeGVsIGJlZm9yZS4KCQkJcGRmUGFnZUhlaWdodE9mZnNldDogLTEsCgoJCQkvLyBOdW1iZXIgb2Ygc2xpZGVzIGF3YXkgZnJvbSB0aGUgY3VycmVudCB0aGF0IGFyZSB2aXNpYmxlCgkJCXZpZXdEaXN0YW5jZTogMywKCgkJCS8vIFRoZSBkaXNwbGF5IG1vZGUgdGhhdCB3aWxsIGJlIHVzZWQgdG8gc2hvdyBzbGlkZXMKCQkJZGlzcGxheTogJ2Jsb2NrJywKCgkJCS8vIEhpZGUgY3Vyc29yIGlmIGluYWN0aXZlCgkJCWhpZGVJbmFjdGl2ZUN1cnNvcjogdHJ1ZSwKCgkJCS8vIFRpbWUgYmVmb3JlIHRoZSBjdXJzb3IgaXMgaGlkZGVuIChpbiBtcykKCQkJaGlkZUN1cnNvclRpbWU6IDUwMDAsCgoJCQkvLyBTY3JpcHQgZGVwZW5kZW5jaWVzIHRvIGxvYWQKCQkJZGVwZW5kZW5jaWVzOiBbXQoKCQl9LAoKCQkvLyBGbGFncyBpZiBSZXZlYWwuaW5pdGlhbGl6ZSgpIGhhcyBiZWVuIGNhbGxlZAoJCWluaXRpYWxpemVkID0gZmFsc2UsCgoJCS8vIEZsYWdzIGlmIHJldmVhbC5qcyBpcyBsb2FkZWQgKGhhcyBkaXNwYXRjaGVkIHRoZSAncmVhZHknIGV2ZW50KQoJCWxvYWRlZCA9IGZhbHNlLAoKCQkvLyBGbGFncyBpZiB0aGUgb3ZlcnZpZXcgbW9kZSBpcyBjdXJyZW50bHkgYWN0aXZlCgkJb3ZlcnZpZXcgPSBmYWxzZSwKCgkJLy8gSG9sZHMgdGhlIGRpbWVuc2lvbnMgb2Ygb3VyIG92ZXJ2aWV3IHNsaWRlcywgaW5jbHVkaW5nIG1hcmdpbnMKCQlvdmVydmlld1NsaWRlV2lkdGggPSBudWxsLAoJCW92ZXJ2aWV3U2xpZGVIZWlnaHQgPSBudWxsLAoKCQkvLyBUaGUgaG9yaXpvbnRhbCBhbmQgdmVydGljYWwgaW5kZXggb2YgdGhlIGN1cnJlbnRseSBhY3RpdmUgc2xpZGUKCQlpbmRleGgsCgkJaW5kZXh2LAoKCQkvLyBUaGUgcHJldmlvdXMgYW5kIGN1cnJlbnQgc2xpZGUgSFRNTCBlbGVtZW50cwoJCXByZXZpb3VzU2xpZGUsCgkJY3VycmVudFNsaWRlLAoKCQlwcmV2aW91c0JhY2tncm91bmQsCgoJCS8vIFJlbWVtYmVyIHdoaWNoIGRpcmVjdGlvbnMgdGhhdCB0aGUgdXNlciBoYXMgbmF2aWdhdGVkIHRvd2FyZHMKCQloYXNOYXZpZ2F0ZWRSaWdodCA9IGZhbHNlLAoJCWhhc05hdmlnYXRlZERvd24gPSBmYWxzZSwKCgkJLy8gU2xpZGVzIG1heSBob2xkIGEgZGF0YS1zdGF0ZSBhdHRyaWJ1dGUgd2hpY2ggd2UgcGljayB1cCBhbmQgYXBwbHkKCQkvLyBhcyBhIGNsYXNzIHRvIHRoZSBib2R5LiBUaGlzIGxpc3QgY29udGFpbnMgdGhlIGNvbWJpbmVkIHN0YXRlIG9mCgkJLy8gYWxsIGN1cnJlbnQgc2xpZGVzLgoJCXN0YXRlID0gW10sCgoJCS8vIFRoZSBjdXJyZW50IHNjYWxlIG9mIHRoZSBwcmVzZW50YXRpb24gKHNlZSB3aWR0aC9oZWlnaHQgY29uZmlnKQoJCXNjYWxlID0gMSwKCgkJLy8gQ1NTIHRyYW5zZm9ybSB0aGF0IGlzIGN1cnJlbnRseSBhcHBsaWVkIHRvIHRoZSBzbGlkZXMgY29udGFpbmVyLAoJCS8vIHNwbGl0IGludG8gdHdvIGdyb3VwcwoJCXNsaWRlc1RyYW5zZm9ybSA9IHsgbGF5b3V0OiAnJywgb3ZlcnZpZXc6ICcnIH0sCgoJCS8vIENhY2hlZCByZWZlcmVuY2VzIHRvIERPTSBlbGVtZW50cwoJCWRvbSA9IHt9LAoKCQkvLyBBIGxpc3Qgb2YgcmVnaXN0ZXJlZCByZXZlYWwuanMgcGx1Z2lucwoJCXBsdWdpbnMgPSB7fSwKCgkJLy8gTGlzdCBvZiBhc3luY2hyb25vdXNseSBsb2FkZWQgcmV2ZWFsLmpzIGRlcGVuZGVuY2llcwoJCWFzeW5jRGVwZW5kZW5jaWVzID0gW10sCgoJCS8vIEZlYXR1cmVzIHN1cHBvcnRlZCBieSB0aGUgYnJvd3Nlciwgc2VlICNjaGVja0NhcGFiaWxpdGllcygpCgkJZmVhdHVyZXMgPSB7fSwKCgkJLy8gQ2xpZW50IGlzIGEgbW9iaWxlIGRldmljZSwgc2VlICNjaGVja0NhcGFiaWxpdGllcygpCgkJaXNNb2JpbGVEZXZpY2UsCgoJCS8vIENsaWVudCBpcyBhIGRlc2t0b3AgQ2hyb21lLCBzZWUgI2NoZWNrQ2FwYWJpbGl0aWVzKCkKCQlpc0Nocm9tZSwKCgkJLy8gVGhyb3R0bGVzIG1vdXNlIHdoZWVsIG5hdmlnYXRpb24KCQlsYXN0TW91c2VXaGVlbFN0ZXAgPSAwLAoKCQkvLyBEZWxheXMgdXBkYXRlcyB0byB0aGUgVVJMIGR1ZSB0byBhIENocm9tZSB0aHVtYm5haWxlciBidWcKCQl3cml0ZVVSTFRpbWVvdXQgPSAwLAoKCQkvLyBJcyB0aGUgbW91c2UgcG9pbnRlciBjdXJyZW50bHkgaGlkZGVuIGZyb20gdmlldwoJCWN1cnNvckhpZGRlbiA9IGZhbHNlLAoKCQkvLyBUaW1lb3V0IHVzZWQgdG8gZGV0ZXJtaW5lIHdoZW4gdGhlIGN1cnNvciBpcyBpbmFjdGl2ZQoJCWN1cnNvckluYWN0aXZlVGltZW91dCA9IDAsCgoJCS8vIEZsYWdzIGlmIHRoZSBpbnRlcmFjdGlvbiBldmVudCBsaXN0ZW5lcnMgYXJlIGJvdW5kCgkJZXZlbnRzQXJlQm91bmQgPSBmYWxzZSwKCgkJLy8gVGhlIGN1cnJlbnQgYXV0by1zbGlkZSBkdXJhdGlvbgoJCWF1dG9TbGlkZSA9IDAsCgoJCS8vIEF1dG8gc2xpZGUgcHJvcGVydGllcwoJCWF1dG9TbGlkZVBsYXllciwKCQlhdXRvU2xpZGVUaW1lb3V0ID0gMCwKCQlhdXRvU2xpZGVTdGFydFRpbWUgPSAtMSwKCQlhdXRvU2xpZGVQYXVzZWQgPSBmYWxzZSwKCgkJLy8gSG9sZHMgaW5mb3JtYXRpb24gYWJvdXQgdGhlIGN1cnJlbnRseSBvbmdvaW5nIHRvdWNoIGlucHV0CgkJdG91Y2ggPSB7CgkJCXN0YXJ0WDogMCwKCQkJc3RhcnRZOiAwLAoJCQlzdGFydENvdW50OiAwLAoJCQljYXB0dXJlZDogZmFsc2UsCgkJCXRocmVzaG9sZDogNDAKCQl9LAoKCQkvLyBBIGtleTp2YWx1ZSBtYXAgb2Ygc2hvcnRjdXQga2V5Ym9hcmQga2V5cyBhbmQgZGVzY3JpcHRpb25zIG9mCgkJLy8gdGhlIGFjdGlvbnMgdGhleSB0cmlnZ2VyLCBnZW5lcmF0ZWQgaW4gI2NvbmZpZ3VyZSgpCgkJa2V5Ym9hcmRTaG9ydGN1dHMgPSB7fSwKCgkJLy8gSG9sZHMgY3VzdG9tIGtleSBjb2RlIG1hcHBpbmdzCgkJcmVnaXN0ZXJlZEtleUJpbmRpbmdzID0ge307CgoJLyoqCgkgKiBTdGFydHMgdXAgdGhlIHByZXNlbnRhdGlvbiBpZiB0aGUgY2xpZW50IGlzIGNhcGFibGUuCgkgKi8KCWZ1bmN0aW9uIGluaXRpYWxpemUoIG9wdGlvbnMgKSB7CgoJCS8vIE1ha2Ugc3VyZSB3ZSBvbmx5IGluaXRpYWxpemUgb25jZQoJCWlmKCBpbml0aWFsaXplZCA9PT0gdHJ1ZSApIHJldHVybjsKCgkJaW5pdGlhbGl6ZWQgPSB0cnVlOwoKCQljaGVja0NhcGFiaWxpdGllcygpOwoKCQlpZiggIWZlYXR1cmVzLnRyYW5zZm9ybXMyZCAmJiAhZmVhdHVyZXMudHJhbnNmb3JtczNkICkgewoJCQlkb2N1bWVudC5ib2R5LnNldEF0dHJpYnV0ZSggJ2NsYXNzJywgJ25vLXRyYW5zZm9ybXMnICk7CgoJCQkvLyBTaW5jZSBKUyB3b24ndCBiZSBydW5uaW5nIGFueSBmdXJ0aGVyLCB3ZSBsb2FkIGFsbCBsYXp5CgkJCS8vIGxvYWRpbmcgZWxlbWVudHMgdXBmcm9udAoJCQl2YXIgaW1hZ2VzID0gdG9BcnJheSggZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoICdpbWcnICkgKSwKCQkJCWlmcmFtZXMgPSB0b0FycmF5KCBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSggJ2lmcmFtZScgKSApOwoKCQkJdmFyIGxhenlMb2FkYWJsZSA9IGltYWdlcy5jb25jYXQoIGlmcmFtZXMgKTsKCgkJCWZvciggdmFyIGkgPSAwLCBsZW4gPSBsYXp5TG9hZGFibGUubGVuZ3RoOyBpIDwgbGVuOyBpKysgKSB7CgkJCQl2YXIgZWxlbWVudCA9IGxhenlMb2FkYWJsZVtpXTsKCQkJCWlmKCBlbGVtZW50LmdldEF0dHJpYnV0ZSggJ2RhdGEtc3JjJyApICkgewoJCQkJCWVsZW1lbnQuc2V0QXR0cmlidXRlKCAnc3JjJywgZWxlbWVudC5nZXRBdHRyaWJ1dGUoICdkYXRhLXNyYycgKSApOwoJCQkJCWVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKCAnZGF0YS1zcmMnICk7CgkJCQl9CgkJCX0KCgkJCS8vIElmIHRoZSBicm93c2VyIGRvZXNuJ3Qgc3VwcG9ydCBjb3JlIGZlYXR1cmVzIHdlIHdvbid0IGJlCgkJCS8vIHVzaW5nIEphdmFTY3JpcHQgdG8gY29udHJvbCB0aGUgcHJlc2VudGF0aW9uCgkJCXJldHVybjsKCQl9CgoJCS8vIENhY2hlIHJlZmVyZW5jZXMgdG8ga2V5IERPTSBlbGVtZW50cwoJCWRvbS53cmFwcGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvciggJy5yZXZlYWwnICk7CgkJZG9tLnNsaWRlcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoICcucmV2ZWFsIC5zbGlkZXMnICk7CgoJCS8vIEZvcmNlIGEgbGF5b3V0IHdoZW4gdGhlIHdob2xlIHBhZ2UsIGluY2wgZm9udHMsIGhhcyBsb2FkZWQKCQl3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lciggJ2xvYWQnLCBsYXlvdXQsIGZhbHNlICk7CgoJCXZhciBxdWVyeSA9IFJldmVhbC5nZXRRdWVyeUhhc2goKTsKCgkJLy8gRG8gbm90IGFjY2VwdCBuZXcgZGVwZW5kZW5jaWVzIHZpYSBxdWVyeSBjb25maWcgdG8gYXZvaWQKCQkvLyB0aGUgcG90ZW50aWFsIG9mIG1hbGljaW91cyBzY3JpcHQgaW5qZWN0aW9uCgkJaWYoIHR5cGVvZiBxdWVyeVsnZGVwZW5kZW5jaWVzJ10gIT09ICd1bmRlZmluZWQnICkgZGVsZXRlIHF1ZXJ5WydkZXBlbmRlbmNpZXMnXTsKCgkJLy8gQ29weSBvcHRpb25zIG92ZXIgdG8gb3VyIGNvbmZpZyBvYmplY3QKCQlleHRlbmQoIGNvbmZpZywgb3B0aW9ucyApOwoJCWV4dGVuZCggY29uZmlnLCBxdWVyeSApOwoKCQkvLyBIaWRlIHRoZSBhZGRyZXNzIGJhciBpbiBtb2JpbGUgYnJvd3NlcnMKCQloaWRlQWRkcmVzc0JhcigpOwoKCQkvLyBMb2FkcyBkZXBlbmRlbmNpZXMgYW5kIGNvbnRpbnVlcyB0byAjc3RhcnQoKSBvbmNlIGRvbmUKCQlsb2FkKCk7CgoJfQoKCS8qKgoJICogSW5zcGVjdCB0aGUgY2xpZW50IHRvIHNlZSB3aGF0IGl0J3MgY2FwYWJsZSBvZiwgdGhpcwoJICogc2hvdWxkIG9ubHkgaGFwcGVucyBvbmNlIHBlciBydW50aW1lLgoJICovCglmdW5jdGlvbiBjaGVja0NhcGFiaWxpdGllcygpIHsKCgkJaXNNb2JpbGVEZXZpY2UgPSAvKGlwaG9uZXxpcG9kfGlwYWR8YW5kcm9pZCkvZ2kudGVzdCggVUEgKTsKCQlpc0Nocm9tZSA9IC9jaHJvbWUvaS50ZXN0KCBVQSApICYmICEvZWRnZS9pLnRlc3QoIFVBICk7CgoJCXZhciB0ZXN0RWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoICdkaXYnICk7CgoJCWZlYXR1cmVzLnRyYW5zZm9ybXMzZCA9ICdXZWJraXRQZXJzcGVjdGl2ZScgaW4gdGVzdEVsZW1lbnQuc3R5bGUgfHwKCQkJCQkJCQknTW96UGVyc3BlY3RpdmUnIGluIHRlc3RFbGVtZW50LnN0eWxlIHx8CgkJCQkJCQkJJ21zUGVyc3BlY3RpdmUnIGluIHRlc3RFbGVtZW50LnN0eWxlIHx8CgkJCQkJCQkJJ09QZXJzcGVjdGl2ZScgaW4gdGVzdEVsZW1lbnQuc3R5bGUgfHwKCQkJCQkJCQkncGVyc3BlY3RpdmUnIGluIHRlc3RFbGVtZW50LnN0eWxlOwoKCQlmZWF0dXJlcy50cmFuc2Zvcm1zMmQgPSAnV2Via2l0VHJhbnNmb3JtJyBpbiB0ZXN0RWxlbWVudC5zdHlsZSB8fAoJCQkJCQkJCSdNb3pUcmFuc2Zvcm0nIGluIHRlc3RFbGVtZW50LnN0eWxlIHx8CgkJCQkJCQkJJ21zVHJhbnNmb3JtJyBpbiB0ZXN0RWxlbWVudC5zdHlsZSB8fAoJCQkJCQkJCSdPVHJhbnNmb3JtJyBpbiB0ZXN0RWxlbWVudC5zdHlsZSB8fAoJCQkJCQkJCSd0cmFuc2Zvcm0nIGluIHRlc3RFbGVtZW50LnN0eWxlOwoKCQlmZWF0dXJlcy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWVNZXRob2QgPSB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lIHx8IHdpbmRvdy53ZWJraXRSZXF1ZXN0QW5pbWF0aW9uRnJhbWUgfHwgd2luZG93Lm1velJlcXVlc3RBbmltYXRpb25GcmFtZTsKCQlmZWF0dXJlcy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUgPSB0eXBlb2YgZmVhdHVyZXMucmVxdWVzdEFuaW1hdGlvbkZyYW1lTWV0aG9kID09PSAnZnVuY3Rpb24nOwoKCQlmZWF0dXJlcy5jYW52YXMgPSAhIWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoICdjYW52YXMnICkuZ2V0Q29udGV4dDsKCgkJLy8gVHJhbnNpdGlvbnMgaW4gdGhlIG92ZXJ2aWV3IGFyZSBkaXNhYmxlZCBpbiBkZXNrdG9wIGFuZAoJCS8vIFNhZmFyaSBkdWUgdG8gbGFnCgkJZmVhdHVyZXMub3ZlcnZpZXdUcmFuc2l0aW9ucyA9ICEvVmVyc2lvblwvW1xkXC5dKy4qU2FmYXJpLy50ZXN0KCBVQSApOwoKCQkvLyBGbGFncyBpZiB3ZSBzaG91bGQgdXNlIHpvb20gaW5zdGVhZCBvZiB0cmFuc2Zvcm0gdG8gc2NhbGUKCQkvLyB1cCBzbGlkZXMuIFpvb20gcHJvZHVjZXMgY3Jpc3BlciByZXN1bHRzIGJ1dCBoYXMgYSBsb3Qgb2YKCQkvLyB4YnJvd3NlciBxdWlya3Mgc28gd2Ugb25seSB1c2UgaXQgaW4gd2hpdGVsc2l0ZWQgYnJvd3NlcnMuCgkJZmVhdHVyZXMuem9vbSA9ICd6b29tJyBpbiB0ZXN0RWxlbWVudC5zdHlsZSAmJiAhaXNNb2JpbGVEZXZpY2UgJiYKCQkJCQkJKCBpc0Nocm9tZSB8fCAvVmVyc2lvblwvW1xkXC5dKy4qU2FmYXJpLy50ZXN0KCBVQSApICk7CgoJfQoKCS8qKgoJICogTG9hZHMgdGhlIGRlcGVuZGVuY2llcyBvZiByZXZlYWwuanMuIERlcGVuZGVuY2llcyBhcmUKCSAqIGRlZmluZWQgdmlhIHRoZSBjb25maWd1cmF0aW9uIG9wdGlvbiAnZGVwZW5kZW5jaWVzJwoJICogYW5kIHdpbGwgYmUgbG9hZGVkIHByaW9yIHRvIHN0YXJ0aW5nL2JpbmRpbmcgcmV2ZWFsLmpzLgoJICogU29tZSBkZXBlbmRlbmNpZXMgbWF5IGhhdmUgYW4gJ2FzeW5jJyBmbGFnLCBpZiBzbyB0aGV5CgkgKiB3aWxsIGxvYWQgYWZ0ZXIgcmV2ZWFsLmpzIGhhcyBiZWVuIHN0YXJ0ZWQgdXAuCgkgKi8KCWZ1bmN0aW9uIGxvYWQoKSB7CgoJCXZhciBzY3JpcHRzID0gW10sCgkJCXNjcmlwdHNUb0xvYWQgPSAwOwoKCQljb25maWcuZGVwZW5kZW5jaWVzLmZvckVhY2goIGZ1bmN0aW9uKCBzICkgewoJCQkvLyBMb2FkIGlmIHRoZXJlJ3Mgbm8gY29uZGl0aW9uIG9yIHRoZSBjb25kaXRpb24gaXMgdHJ1dGh5CgkJCWlmKCAhcy5jb25kaXRpb24gfHwgcy5jb25kaXRpb24oKSApIHsKCQkJCWlmKCBzLmFzeW5jICkgewoJCQkJCWFzeW5jRGVwZW5kZW5jaWVzLnB1c2goIHMgKTsKCQkJCX0KCQkJCWVsc2UgewoJCQkJCXNjcmlwdHMucHVzaCggcyApOwoJCQkJfQoJCQl9CgkJfSApOwoKCQlpZiggc2NyaXB0cy5sZW5ndGggKSB7CgkJCXNjcmlwdHNUb0xvYWQgPSBzY3JpcHRzLmxlbmd0aDsKCgkJCS8vIExvYWQgc3luY2hyb25vdXMgc2NyaXB0cwoJCQlzY3JpcHRzLmZvckVhY2goIGZ1bmN0aW9uKCBzICkgewoJCQkJbG9hZFNjcmlwdCggcy5zcmMsIGZ1bmN0aW9uKCkgewoKCQkJCQlpZiggdHlwZW9mIHMuY2FsbGJhY2sgPT09ICdmdW5jdGlvbicgKSBzLmNhbGxiYWNrKCk7CgoJCQkJCWlmKCAtLXNjcmlwdHNUb0xvYWQgPT09IDAgKSB7CgkJCQkJCWluaXRQbHVnaW5zKCk7CgkJCQkJfQoKCQkJCX0gKTsKCQkJfSApOwoJCX0KCQllbHNlIHsKCQkJaW5pdFBsdWdpbnMoKTsKCQl9CgoJfQoKCS8qKgoJICogSW5pdGlhbGl6ZXMgb3VyIHBsdWdpbnMgYW5kIHdhaXRzIGZvciB0aGVtIHRvIGJlIHJlYWR5CgkgKiBiZWZvcmUgcHJvY2VlZGluZy4KCSAqLwoJZnVuY3Rpb24gaW5pdFBsdWdpbnMoKSB7CgoJCXZhciBwbHVnaW5zVG9Jbml0aWFsaXplID0gT2JqZWN0LmtleXMoIHBsdWdpbnMgKS5sZW5ndGg7CgoJCS8vIElmIHRoZXJlIGFyZSBubyBwbHVnaW5zLCBza2lwIHRoaXMgc3RlcAoJCWlmKCBwbHVnaW5zVG9Jbml0aWFsaXplID09PSAwICkgewoJCQlsb2FkQXN5bmNEZXBlbmRlbmNpZXMoKTsKCQl9CgkJLy8gLi4uIG90aGVyd2lzZSBpbml0aWFsaXplIHBsdWdpbnMKCQllbHNlIHsKCgkJCXZhciBhZnRlclBsdWdJbml0aWFsaXplZCA9IGZ1bmN0aW9uKCkgewoJCQkJaWYoIC0tcGx1Z2luc1RvSW5pdGlhbGl6ZSA9PT0gMCApIHsKCQkJCQlsb2FkQXN5bmNEZXBlbmRlbmNpZXMoKTsKCQkJCX0KCQkJfTsKCgkJCWZvciggdmFyIGkgaW4gcGx1Z2lucyApIHsKCgkJCQl2YXIgcGx1Z2luID0gcGx1Z2luc1tpXTsKCgkJCQkvLyBJZiB0aGUgcGx1Z2luIGhhcyBhbiAnaW5pdCcgbWV0aG9kLCBpbnZva2UgaXQKCQkJCWlmKCB0eXBlb2YgcGx1Z2luLmluaXQgPT09ICdmdW5jdGlvbicgKSB7CgkJCQkJdmFyIGNhbGxiYWNrID0gcGx1Z2luLmluaXQoKTsKCgkJCQkJLy8gSWYgdGhlIHBsdWdpbiByZXR1cm5lZCBhIFByb21pc2UsIHdhaXQgZm9yIGl0CgkJCQkJaWYoIGNhbGxiYWNrICYmIHR5cGVvZiBjYWxsYmFjay50aGVuID09PSAnZnVuY3Rpb24nICkgewoJCQkJCQljYWxsYmFjay50aGVuKCBhZnRlclBsdWdJbml0aWFsaXplZCApOwoJCQkJCX0KCQkJCQllbHNlIHsKCQkJCQkJYWZ0ZXJQbHVnSW5pdGlhbGl6ZWQoKTsKCQkJCQl9CgkJCQl9CgkJCQllbHNlIHsKCQkJCQlhZnRlclBsdWdJbml0aWFsaXplZCgpOwoJCQkJfQoKCQkJfQoKCQl9CgoJfQoKCS8qKgoJICogTG9hZHMgYWxsIGFzeW5jIHJldmVhbC5qcyBkZXBlbmRlbmNpZXMuCgkgKi8KCWZ1bmN0aW9uIGxvYWRBc3luY0RlcGVuZGVuY2llcygpIHsKCgkJaWYoIGFzeW5jRGVwZW5kZW5jaWVzLmxlbmd0aCApIHsKCQkJYXN5bmNEZXBlbmRlbmNpZXMuZm9yRWFjaCggZnVuY3Rpb24oIHMgKSB7CgkJCQlsb2FkU2NyaXB0KCBzLnNyYywgcy5jYWxsYmFjayApOwoJCQl9ICk7CgkJfQoKCQlzdGFydCgpOwoKCX0KCgkvKioKCSAqIExvYWRzIGEgSmF2YVNjcmlwdCBmaWxlIGZyb20gdGhlIGdpdmVuIFVSTCBhbmQgZXhlY3V0ZXMgaXQuCgkgKgoJICogQHBhcmFtIHtzdHJpbmd9IHVybCBBZGRyZXNzIG9mIHRoZSAuanMgZmlsZSB0byBsb2FkCgkgKiBAcGFyYW0ge2Z1bmN0aW9ufSBjYWxsYmFjayBNZXRob2QgdG8gaW52b2tlIHdoZW4gdGhlIHNjcmlwdAoJICogaGFzIGxvYWRlZCBhbmQgZXhlY3V0ZWQKCSAqLwoJZnVuY3Rpb24gbG9hZFNjcmlwdCggdXJsLCBjYWxsYmFjayApIHsKCgkJdmFyIHNjcmlwdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoICdzY3JpcHQnICk7CgkJc2NyaXB0LnR5cGUgPSAndGV4dC9qYXZhc2NyaXB0JzsKCQlzY3JpcHQuYXN5bmMgPSBmYWxzZTsKCQlzY3JpcHQuZGVmZXIgPSBmYWxzZTsKCQlzY3JpcHQuc3JjID0gdXJsOwoKCQlpZiggY2FsbGJhY2sgKSB7CgoJCQkvLyBTdWNjZXNzIGNhbGxiYWNrCgkJCXNjcmlwdC5vbmxvYWQgPSBzY3JpcHQub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24oIGV2ZW50ICkgewoJCQkJaWYoIGV2ZW50LnR5cGUgPT09ICJsb2FkIiB8fCAoL2xvYWRlZHxjb21wbGV0ZS8udGVzdCggc2NyaXB0LnJlYWR5U3RhdGUgKSApICkgewoKCQkJCQkvLyBLaWxsIGV2ZW50IGxpc3RlbmVycwoJCQkJCXNjcmlwdC5vbmxvYWQgPSBzY3JpcHQub25yZWFkeXN0YXRlY2hhbmdlID0gc2NyaXB0Lm9uZXJyb3IgPSBudWxsOwoKCQkJCQljYWxsYmFjaygpOwoKCQkJCX0KCQkJfTsKCgkJCS8vIEVycm9yIGNhbGxiYWNrCgkJCXNjcmlwdC5vbmVycm9yID0gZnVuY3Rpb24oIGVyciApIHsKCgkJCQkvLyBLaWxsIGV2ZW50IGxpc3RlbmVycwoJCQkJc2NyaXB0Lm9ubG9hZCA9IHNjcmlwdC5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBzY3JpcHQub25lcnJvciA9IG51bGw7CgoJCQkJY2FsbGJhY2soIG5ldyBFcnJvciggJ0ZhaWxlZCBsb2FkaW5nIHNjcmlwdDogJyArIHNjcmlwdC5zcmMgKyAnXG4nICsgZXJyKSApOwoKCQkJfTsKCgkJfQoKCQkvLyBBcHBlbmQgdGhlIHNjcmlwdCBhdCB0aGUgZW5kIG9mIDxoZWFkPgoJCXZhciBoZWFkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvciggJ2hlYWQnICk7CgkJaGVhZC5pbnNlcnRCZWZvcmUoIHNjcmlwdCwgaGVhZC5sYXN0Q2hpbGQgKTsKCgl9CgoJLyoqCgkgKiBTdGFydHMgdXAgcmV2ZWFsLmpzIGJ5IGJpbmRpbmcgaW5wdXQgZXZlbnRzIGFuZCBuYXZpZ2F0aW5nCgkgKiB0byB0aGUgY3VycmVudCBVUkwgZGVlcGxpbmsgaWYgdGhlcmUgaXMgb25lLgoJICovCglmdW5jdGlvbiBzdGFydCgpIHsKCgkJbG9hZGVkID0gdHJ1ZTsKCgkJLy8gTWFrZSBzdXJlIHdlJ3ZlIGdvdCBhbGwgdGhlIERPTSBlbGVtZW50cyB3ZSBuZWVkCgkJc2V0dXBET00oKTsKCgkJLy8gTGlzdGVuIHRvIG1lc3NhZ2VzIHBvc3RlZCB0byB0aGlzIHdpbmRvdwoJCXNldHVwUG9zdE1lc3NhZ2UoKTsKCgkJLy8gUHJldmVudCB0aGUgc2xpZGVzIGZyb20gYmVpbmcgc2Nyb2xsZWQgb3V0IG9mIHZpZXcKCQlzZXR1cFNjcm9sbFByZXZlbnRpb24oKTsKCgkJLy8gUmVzZXRzIGFsbCB2ZXJ0aWNhbCBzbGlkZXMgc28gdGhhdCBvbmx5IHRoZSBmaXJzdCBpcyB2aXNpYmxlCgkJcmVzZXRWZXJ0aWNhbFNsaWRlcygpOwoKCQkvLyBVcGRhdGVzIHRoZSBwcmVzZW50YXRpb24gdG8gbWF0Y2ggdGhlIGN1cnJlbnQgY29uZmlndXJhdGlvbiB2YWx1ZXMKCQljb25maWd1cmUoKTsKCgkJLy8gUmVhZCB0aGUgaW5pdGlhbCBoYXNoCgkJcmVhZFVSTCgpOwoKCQkvLyBVcGRhdGUgYWxsIGJhY2tncm91bmRzCgkJdXBkYXRlQmFja2dyb3VuZCggdHJ1ZSApOwoKCQkvLyBOb3RpZnkgbGlzdGVuZXJzIHRoYXQgdGhlIHByZXNlbnRhdGlvbiBpcyByZWFkeSBidXQgdXNlIGEgMW1zCgkJLy8gdGltZW91dCB0byBlbnN1cmUgaXQncyBub3QgZmlyZWQgc3luY2hyb25vdXNseSBhZnRlciAjaW5pdGlhbGl6ZSgpCgkJc2V0VGltZW91dCggZnVuY3Rpb24oKSB7CgkJCS8vIEVuYWJsZSB0cmFuc2l0aW9ucyBub3cgdGhhdCB3ZSdyZSBsb2FkZWQKCQkJZG9tLnNsaWRlcy5jbGFzc0xpc3QucmVtb3ZlKCAnbm8tdHJhbnNpdGlvbicgKTsKCgkJCWRvbS53cmFwcGVyLmNsYXNzTGlzdC5hZGQoICdyZWFkeScgKTsKCgkJCWRpc3BhdGNoRXZlbnQoICdyZWFkeScsIHsKCQkJCSdpbmRleGgnOiBpbmRleGgsCgkJCQknaW5kZXh2JzogaW5kZXh2LAoJCQkJJ2N1cnJlbnRTbGlkZSc6IGN1cnJlbnRTbGlkZQoJCQl9ICk7CgkJfSwgMSApOwoKCQkvLyBTcGVjaWFsIHNldHVwIGFuZCBjb25maWcgaXMgcmVxdWlyZWQgd2hlbiBwcmludGluZyB0byBQREYKCQlpZiggaXNQcmludGluZ1BERigpICkgewoJCQlyZW1vdmVFdmVudExpc3RlbmVycygpOwoKCQkJLy8gVGhlIGRvY3VtZW50IG5lZWRzIHRvIGhhdmUgbG9hZGVkIGZvciB0aGUgUERGIGxheW91dAoJCQkvLyBtZWFzdXJlbWVudHMgdG8gYmUgYWNjdXJhdGUKCQkJaWYoIGRvY3VtZW50LnJlYWR5U3RhdGUgPT09ICdjb21wbGV0ZScgKSB7CgkJCQlzZXR1cFBERigpOwoJCQl9CgkJCWVsc2UgewoJCQkJd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoICdsb2FkJywgc2V0dXBQREYgKTsKCQkJfQoJCX0KCgl9CgoJLyoqCgkgKiBGaW5kcyBhbmQgc3RvcmVzIHJlZmVyZW5jZXMgdG8gRE9NIGVsZW1lbnRzIHdoaWNoIGFyZQoJICogcmVxdWlyZWQgYnkgdGhlIHByZXNlbnRhdGlvbi4gSWYgYSByZXF1aXJlZCBlbGVtZW50IGlzCgkgKiBub3QgZm91bmQsIGl0IGlzIGNyZWF0ZWQuCgkgKi8KCWZ1bmN0aW9uIHNldHVwRE9NKCkgewoKCQkvLyBQcmV2ZW50IHRyYW5zaXRpb25zIHdoaWxlIHdlJ3JlIGxvYWRpbmcKCQlkb20uc2xpZGVzLmNsYXNzTGlzdC5hZGQoICduby10cmFuc2l0aW9uJyApOwoKCQlpZiggaXNNb2JpbGVEZXZpY2UgKSB7CgkJCWRvbS53cmFwcGVyLmNsYXNzTGlzdC5hZGQoICduby1ob3ZlcicgKTsKCQl9CgkJZWxzZSB7CgkJCWRvbS53cmFwcGVyLmNsYXNzTGlzdC5yZW1vdmUoICduby1ob3ZlcicgKTsKCQl9CgoJCWlmKCAvaXBob25lL2dpLnRlc3QoIFVBICkgKSB7CgkJCWRvbS53cmFwcGVyLmNsYXNzTGlzdC5hZGQoICd1YS1pcGhvbmUnICk7CgkJfQoJCWVsc2UgewoJCQlkb20ud3JhcHBlci5jbGFzc0xpc3QucmVtb3ZlKCAndWEtaXBob25lJyApOwoJCX0KCgkJLy8gQmFja2dyb3VuZCBlbGVtZW50CgkJZG9tLmJhY2tncm91bmQgPSBjcmVhdGVTaW5nbGV0b25Ob2RlKCBkb20ud3JhcHBlciwgJ2RpdicsICdiYWNrZ3JvdW5kcycsIG51bGwgKTsKCgkJLy8gUHJvZ3Jlc3MgYmFyCgkJZG9tLnByb2dyZXNzID0gY3JlYXRlU2luZ2xldG9uTm9kZSggZG9tLndyYXBwZXIsICdkaXYnLCAncHJvZ3Jlc3MnLCAnPHNwYW4+PC9zcGFuPicgKTsKCQlkb20ucHJvZ3Jlc3NiYXIgPSBkb20ucHJvZ3Jlc3MucXVlcnlTZWxlY3RvciggJ3NwYW4nICk7CgoJCS8vIEFycm93IGNvbnRyb2xzCgkJZG9tLmNvbnRyb2xzID0gY3JlYXRlU2luZ2xldG9uTm9kZSggZG9tLndyYXBwZXIsICdhc2lkZScsICdjb250cm9scycsCgkJCSc8YnV0dG9uIGNsYXNzPSJuYXZpZ2F0ZS1sZWZ0IiBhcmlhLWxhYmVsPSJwcmV2aW91cyBzbGlkZSI+PGRpdiBjbGFzcz0iY29udHJvbHMtYXJyb3ciPjwvZGl2PjwvYnV0dG9uPicgKwoJCQknPGJ1dHRvbiBjbGFzcz0ibmF2aWdhdGUtcmlnaHQiIGFyaWEtbGFiZWw9Im5leHQgc2xpZGUiPjxkaXYgY2xhc3M9ImNvbnRyb2xzLWFycm93Ij48L2Rpdj48L2J1dHRvbj4nICsKCQkJJzxidXR0b24gY2xhc3M9Im5hdmlnYXRlLXVwIiBhcmlhLWxhYmVsPSJhYm92ZSBzbGlkZSI+PGRpdiBjbGFzcz0iY29udHJvbHMtYXJyb3ciPjwvZGl2PjwvYnV0dG9uPicgKwoJCQknPGJ1dHRvbiBjbGFzcz0ibmF2aWdhdGUtZG93biIgYXJpYS1sYWJlbD0iYmVsb3cgc2xpZGUiPjxkaXYgY2xhc3M9ImNvbnRyb2xzLWFycm93Ij48L2Rpdj48L2J1dHRvbj4nICk7CgoJCS8vIFNsaWRlIG51bWJlcgoJCWRvbS5zbGlkZU51bWJlciA9IGNyZWF0ZVNpbmdsZXRvbk5vZGUoIGRvbS53cmFwcGVyLCAnZGl2JywgJ3NsaWRlLW51bWJlcicsICcnICk7CgoJCS8vIEVsZW1lbnQgY29udGFpbmluZyBub3RlcyB0aGF0IGFyZSB2aXNpYmxlIHRvIHRoZSBhdWRpZW5jZQoJCWRvbS5zcGVha2VyTm90ZXMgPSBjcmVhdGVTaW5nbGV0b25Ob2RlKCBkb20ud3JhcHBlciwgJ2RpdicsICdzcGVha2VyLW5vdGVzJywgbnVsbCApOwoJCWRvbS5zcGVha2VyTm90ZXMuc2V0QXR0cmlidXRlKCAnZGF0YS1wcmV2ZW50LXN3aXBlJywgJycgKTsKCQlkb20uc3BlYWtlck5vdGVzLnNldEF0dHJpYnV0ZSggJ3RhYmluZGV4JywgJzAnICk7CgoJCS8vIE92ZXJsYXkgZ3JhcGhpYyB3aGljaCBpcyBkaXNwbGF5ZWQgZHVyaW5nIHRoZSBwYXVzZWQgbW9kZQoJCWRvbS5wYXVzZU92ZXJsYXkgPSBjcmVhdGVTaW5nbGV0b25Ob2RlKCBkb20ud3JhcHBlciwgJ2RpdicsICdwYXVzZS1vdmVybGF5JywgY29uZmlnLmNvbnRyb2xzID8gJzxidXR0b24gY2xhc3M9InJlc3VtZS1idXR0b24iPlJlc3VtZSBwcmVzZW50YXRpb248L2J1dHRvbj4nIDogbnVsbCApOwoKCQlkb20ud3JhcHBlci5zZXRBdHRyaWJ1dGUoICdyb2xlJywgJ2FwcGxpY2F0aW9uJyApOwoKCQkvLyBUaGVyZSBjYW4gYmUgbXVsdGlwbGUgaW5zdGFuY2VzIG9mIGNvbnRyb2xzIHRocm91Z2hvdXQgdGhlIHBhZ2UKCQlkb20uY29udHJvbHNMZWZ0ID0gdG9BcnJheSggZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCggJy5uYXZpZ2F0ZS1sZWZ0JyApICk7CgkJZG9tLmNvbnRyb2xzUmlnaHQgPSB0b0FycmF5KCBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCAnLm5hdmlnYXRlLXJpZ2h0JyApICk7CgkJZG9tLmNvbnRyb2xzVXAgPSB0b0FycmF5KCBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCAnLm5hdmlnYXRlLXVwJyApICk7CgkJZG9tLmNvbnRyb2xzRG93biA9IHRvQXJyYXkoIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoICcubmF2aWdhdGUtZG93bicgKSApOwoJCWRvbS5jb250cm9sc1ByZXYgPSB0b0FycmF5KCBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCAnLm5hdmlnYXRlLXByZXYnICkgKTsKCQlkb20uY29udHJvbHNOZXh0ID0gdG9BcnJheSggZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCggJy5uYXZpZ2F0ZS1uZXh0JyApICk7CgoJCS8vIFRoZSByaWdodCBhbmQgZG93biBhcnJvd3MgaW4gdGhlIHN0YW5kYXJkIHJldmVhbC5qcyBjb250cm9scwoJCWRvbS5jb250cm9sc1JpZ2h0QXJyb3cgPSBkb20uY29udHJvbHMucXVlcnlTZWxlY3RvciggJy5uYXZpZ2F0ZS1yaWdodCcgKTsKCQlkb20uY29udHJvbHNEb3duQXJyb3cgPSBkb20uY29udHJvbHMucXVlcnlTZWxlY3RvciggJy5uYXZpZ2F0ZS1kb3duJyApOwoKCQlkb20uc3RhdHVzRGl2ID0gY3JlYXRlU3RhdHVzRGl2KCk7Cgl9CgoJLyoqCgkgKiBDcmVhdGVzIGEgaGlkZGVuIGRpdiB3aXRoIHJvbGUgYXJpYS1saXZlIHRvIGFubm91bmNlIHRoZQoJICogY3VycmVudCBzbGlkZSBjb250ZW50LiBIaWRlIHRoZSBkaXYgb2ZmLXNjcmVlbiB0byBtYWtlIGl0CgkgKiBhdmFpbGFibGUgb25seSB0byBBc3Npc3RpdmUgVGVjaG5vbG9naWVzLgoJICoKCSAqIEByZXR1cm4ge0hUTUxFbGVtZW50fQoJICovCglmdW5jdGlvbiBjcmVhdGVTdGF0dXNEaXYoKSB7CgoJCXZhciBzdGF0dXNEaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCggJ2FyaWEtc3RhdHVzLWRpdicgKTsKCQlpZiggIXN0YXR1c0RpdiApIHsKCQkJc3RhdHVzRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggJ2RpdicgKTsKCQkJc3RhdHVzRGl2LnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJzsKCQkJc3RhdHVzRGl2LnN0eWxlLmhlaWdodCA9ICcxcHgnOwoJCQlzdGF0dXNEaXYuc3R5bGUud2lkdGggPSAnMXB4JzsKCQkJc3RhdHVzRGl2LnN0eWxlLm92ZXJmbG93ID0gJ2hpZGRlbic7CgkJCXN0YXR1c0Rpdi5zdHlsZS5jbGlwID0gJ3JlY3QoIDFweCwgMXB4LCAxcHgsIDFweCApJzsKCQkJc3RhdHVzRGl2LnNldEF0dHJpYnV0ZSggJ2lkJywgJ2FyaWEtc3RhdHVzLWRpdicgKTsKCQkJc3RhdHVzRGl2LnNldEF0dHJpYnV0ZSggJ2FyaWEtbGl2ZScsICdwb2xpdGUnICk7CgkJCXN0YXR1c0Rpdi5zZXRBdHRyaWJ1dGUoICdhcmlhLWF0b21pYycsJ3RydWUnICk7CgkJCWRvbS53cmFwcGVyLmFwcGVuZENoaWxkKCBzdGF0dXNEaXYgKTsKCQl9CgkJcmV0dXJuIHN0YXR1c0RpdjsKCgl9CgoJLyoqCgkgKiBDb252ZXJ0cyB0aGUgZ2l2ZW4gSFRNTCBlbGVtZW50IGludG8gYSBzdHJpbmcgb2YgdGV4dAoJICogdGhhdCBjYW4gYmUgYW5ub3VuY2VkIHRvIGEgc2NyZWVuIHJlYWRlci4gSGlkZGVuCgkgKiBlbGVtZW50cyBhcmUgZXhjbHVkZWQuCgkgKi8KCWZ1bmN0aW9uIGdldFN0YXR1c1RleHQoIG5vZGUgKSB7CgoJCXZhciB0ZXh0ID0gJyc7CgoJCS8vIFRleHQgbm9kZQoJCWlmKCBub2RlLm5vZGVUeXBlID09PSAzICkgewoJCQl0ZXh0ICs9IG5vZGUudGV4dENvbnRlbnQ7CgkJfQoJCS8vIEVsZW1lbnQgbm9kZQoJCWVsc2UgaWYoIG5vZGUubm9kZVR5cGUgPT09IDEgKSB7CgoJCQl2YXIgaXNBcmlhSGlkZGVuID0gbm9kZS5nZXRBdHRyaWJ1dGUoICdhcmlhLWhpZGRlbicgKTsKCQkJdmFyIGlzRGlzcGxheUhpZGRlbiA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKCBub2RlIClbJ2Rpc3BsYXknXSA9PT0gJ25vbmUnOwoJCQlpZiggaXNBcmlhSGlkZGVuICE9PSAndHJ1ZScgJiYgIWlzRGlzcGxheUhpZGRlbiApIHsKCgkJCQl0b0FycmF5KCBub2RlLmNoaWxkTm9kZXMgKS5mb3JFYWNoKCBmdW5jdGlvbiggY2hpbGQgKSB7CgkJCQkJdGV4dCArPSBnZXRTdGF0dXNUZXh0KCBjaGlsZCApOwoJCQkJfSApOwoKCQkJfQoKCQl9CgoJCXJldHVybiB0ZXh0OwoKCX0KCgkvKioKCSAqIENvbmZpZ3VyZXMgdGhlIHByZXNlbnRhdGlvbiBmb3IgcHJpbnRpbmcgdG8gYSBzdGF0aWMKCSAqIFBERi4KCSAqLwoJZnVuY3Rpb24gc2V0dXBQREYoKSB7CgoJCXZhciBzbGlkZVNpemUgPSBnZXRDb21wdXRlZFNsaWRlU2l6ZSggd2luZG93LmlubmVyV2lkdGgsIHdpbmRvdy5pbm5lckhlaWdodCApOwoKCQkvLyBEaW1lbnNpb25zIG9mIHRoZSBQREYgcGFnZXMKCQl2YXIgcGFnZVdpZHRoID0gTWF0aC5mbG9vciggc2xpZGVTaXplLndpZHRoICogKCAxICsgY29uZmlnLm1hcmdpbiApICksCgkJCXBhZ2VIZWlnaHQgPSBNYXRoLmZsb29yKCBzbGlkZVNpemUuaGVpZ2h0ICogKCAxICsgY29uZmlnLm1hcmdpbiApICk7CgoJCS8vIERpbWVuc2lvbnMgb2Ygc2xpZGVzIHdpdGhpbiB0aGUgcGFnZXMKCQl2YXIgc2xpZGVXaWR0aCA9IHNsaWRlU2l6ZS53aWR0aCwKCQkJc2xpZGVIZWlnaHQgPSBzbGlkZVNpemUuaGVpZ2h0OwoKCQkvLyBMZXQgdGhlIGJyb3dzZXIga25vdyB3aGF0IHBhZ2Ugc2l6ZSB3ZSB3YW50IHRvIHByaW50CgkJaW5qZWN0U3R5bGVTaGVldCggJ0BwYWdle3NpemU6JysgcGFnZVdpZHRoICsncHggJysgcGFnZUhlaWdodCArJ3B4OyBtYXJnaW46IDBweDt9JyApOwoKCQkvLyBMaW1pdCB0aGUgc2l6ZSBvZiBjZXJ0YWluIGVsZW1lbnRzIHRvIHRoZSBkaW1lbnNpb25zIG9mIHRoZSBzbGlkZQoJCWluamVjdFN0eWxlU2hlZXQoICcucmV2ZWFsIHNlY3Rpb24+aW1nLCAucmV2ZWFsIHNlY3Rpb24+dmlkZW8sIC5yZXZlYWwgc2VjdGlvbj5pZnJhbWV7bWF4LXdpZHRoOiAnKyBzbGlkZVdpZHRoICsncHg7IG1heC1oZWlnaHQ6Jysgc2xpZGVIZWlnaHQgKydweH0nICk7CgoJCWRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LmFkZCggJ3ByaW50LXBkZicgKTsKCQlkb2N1bWVudC5ib2R5LnN0eWxlLndpZHRoID0gcGFnZVdpZHRoICsgJ3B4JzsKCQlkb2N1bWVudC5ib2R5LnN0eWxlLmhlaWdodCA9IHBhZ2VIZWlnaHQgKyAncHgnOwoKCQkvLyBNYWtlIHN1cmUgc3RyZXRjaCBlbGVtZW50cyBmaXQgb24gc2xpZGUKCQlsYXlvdXRTbGlkZUNvbnRlbnRzKCBzbGlkZVdpZHRoLCBzbGlkZUhlaWdodCApOwoKCQkvLyBBZGQgZWFjaCBzbGlkZSdzIGluZGV4IGFzIGF0dHJpYnV0ZXMgb24gaXRzZWxmLCB3ZSBuZWVkIHRoZXNlCgkJLy8gaW5kaWNlcyB0byBnZW5lcmF0ZSBzbGlkZSBudW1iZXJzIGJlbG93CgkJdG9BcnJheSggZG9tLndyYXBwZXIucXVlcnlTZWxlY3RvckFsbCggSE9SSVpPTlRBTF9TTElERVNfU0VMRUNUT1IgKSApLmZvckVhY2goIGZ1bmN0aW9uKCBoc2xpZGUsIGggKSB7CgkJCWhzbGlkZS5zZXRBdHRyaWJ1dGUoICdkYXRhLWluZGV4LWgnLCBoICk7CgoJCQlpZiggaHNsaWRlLmNsYXNzTGlzdC5jb250YWlucyggJ3N0YWNrJyApICkgewoJCQkJdG9BcnJheSggaHNsaWRlLnF1ZXJ5U2VsZWN0b3JBbGwoICdzZWN0aW9uJyApICkuZm9yRWFjaCggZnVuY3Rpb24oIHZzbGlkZSwgdiApIHsKCQkJCQl2c2xpZGUuc2V0QXR0cmlidXRlKCAnZGF0YS1pbmRleC1oJywgaCApOwoJCQkJCXZzbGlkZS5zZXRBdHRyaWJ1dGUoICdkYXRhLWluZGV4LXYnLCB2ICk7CgkJCQl9ICk7CgkJCX0KCQl9ICk7CgoJCS8vIFNsaWRlIGFuZCBzbGlkZSBiYWNrZ3JvdW5kIGxheW91dAoJCXRvQXJyYXkoIGRvbS53cmFwcGVyLnF1ZXJ5U2VsZWN0b3JBbGwoIFNMSURFU19TRUxFQ1RPUiApICkuZm9yRWFjaCggZnVuY3Rpb24oIHNsaWRlICkgewoKCQkJLy8gVmVydGljYWwgc3RhY2tzIGFyZSBub3QgY2VudHJlZCBzaW5jZSB0aGVpciBzZWN0aW9uCgkJCS8vIGNoaWxkcmVuIHdpbGwgYmUKCQkJaWYoIHNsaWRlLmNsYXNzTGlzdC5jb250YWlucyggJ3N0YWNrJyApID09PSBmYWxzZSApIHsKCQkJCS8vIENlbnRlciB0aGUgc2xpZGUgaW5zaWRlIG9mIHRoZSBwYWdlLCBnaXZpbmcgdGhlIHNsaWRlIHNvbWUgbWFyZ2luCgkJCQl2YXIgbGVmdCA9ICggcGFnZVdpZHRoIC0gc2xpZGVXaWR0aCApIC8gMiwKCQkJCQl0b3AgPSAoIHBhZ2VIZWlnaHQgLSBzbGlkZUhlaWdodCApIC8gMjsKCgkJCQl2YXIgY29udGVudEhlaWdodCA9IHNsaWRlLnNjcm9sbEhlaWdodDsKCQkJCXZhciBudW1iZXJPZlBhZ2VzID0gTWF0aC5tYXgoIE1hdGguY2VpbCggY29udGVudEhlaWdodCAvIHBhZ2VIZWlnaHQgKSwgMSApOwoKCQkJCS8vIEFkaGVyZSB0byBjb25maWd1cmVkIHBhZ2VzIHBlciBzbGlkZSBsaW1pdAoJCQkJbnVtYmVyT2ZQYWdlcyA9IE1hdGgubWluKCBudW1iZXJPZlBhZ2VzLCBjb25maWcucGRmTWF4UGFnZXNQZXJTbGlkZSApOwoKCQkJCS8vIENlbnRlciBzbGlkZXMgdmVydGljYWxseQoJCQkJaWYoIG51bWJlck9mUGFnZXMgPT09IDEgJiYgY29uZmlnLmNlbnRlciB8fCBzbGlkZS5jbGFzc0xpc3QuY29udGFpbnMoICdjZW50ZXInICkgKSB7CgkJCQkJdG9wID0gTWF0aC5tYXgoICggcGFnZUhlaWdodCAtIGNvbnRlbnRIZWlnaHQgKSAvIDIsIDAgKTsKCQkJCX0KCgkJCQkvLyBXcmFwIHRoZSBzbGlkZSBpbiBhIHBhZ2UgZWxlbWVudCBhbmQgaGlkZSBpdHMgb3ZlcmZsb3cKCQkJCS8vIHNvIHRoYXQgbm8gcGFnZSBldmVyIGZsb3dzIG9udG8gYW5vdGhlcgoJCQkJdmFyIHBhZ2UgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCAnZGl2JyApOwoJCQkJcGFnZS5jbGFzc05hbWUgPSAncGRmLXBhZ2UnOwoJCQkJcGFnZS5zdHlsZS5oZWlnaHQgPSAoICggcGFnZUhlaWdodCArIGNvbmZpZy5wZGZQYWdlSGVpZ2h0T2Zmc2V0ICkgKiBudW1iZXJPZlBhZ2VzICkgKyAncHgnOwoJCQkJc2xpZGUucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoIHBhZ2UsIHNsaWRlICk7CgkJCQlwYWdlLmFwcGVuZENoaWxkKCBzbGlkZSApOwoKCQkJCS8vIFBvc2l0aW9uIHRoZSBzbGlkZSBpbnNpZGUgb2YgdGhlIHBhZ2UKCQkJCXNsaWRlLnN0eWxlLmxlZnQgPSBsZWZ0ICsgJ3B4JzsKCQkJCXNsaWRlLnN0eWxlLnRvcCA9IHRvcCArICdweCc7CgkJCQlzbGlkZS5zdHlsZS53aWR0aCA9IHNsaWRlV2lkdGggKyAncHgnOwoKCQkJCWlmKCBzbGlkZS5zbGlkZUJhY2tncm91bmRFbGVtZW50ICkgewoJCQkJCXBhZ2UuaW5zZXJ0QmVmb3JlKCBzbGlkZS5zbGlkZUJhY2tncm91bmRFbGVtZW50LCBzbGlkZSApOwoJCQkJfQoKCQkJCS8vIEluamVjdCBub3RlcyBpZiBgc2hvd05vdGVzYCBpcyBlbmFibGVkCgkJCQlpZiggY29uZmlnLnNob3dOb3RlcyApIHsKCgkJCQkJLy8gQXJlIHRoZXJlIG5vdGVzIGZvciB0aGlzIHNsaWRlPwoJCQkJCXZhciBub3RlcyA9IGdldFNsaWRlTm90ZXMoIHNsaWRlICk7CgkJCQkJaWYoIG5vdGVzICkgewoKCQkJCQkJdmFyIG5vdGVzU3BhY2luZyA9IDg7CgkJCQkJCXZhciBub3Rlc0xheW91dCA9IHR5cGVvZiBjb25maWcuc2hvd05vdGVzID09PSAnc3RyaW5nJyA/IGNvbmZpZy5zaG93Tm90ZXMgOiAnaW5saW5lJzsKCQkJCQkJdmFyIG5vdGVzRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoICdkaXYnICk7CgkJCQkJCW5vdGVzRWxlbWVudC5jbGFzc0xpc3QuYWRkKCAnc3BlYWtlci1ub3RlcycgKTsKCQkJCQkJbm90ZXNFbGVtZW50LmNsYXNzTGlzdC5hZGQoICdzcGVha2VyLW5vdGVzLXBkZicgKTsKCQkJCQkJbm90ZXNFbGVtZW50LnNldEF0dHJpYnV0ZSggJ2RhdGEtbGF5b3V0Jywgbm90ZXNMYXlvdXQgKTsKCQkJCQkJbm90ZXNFbGVtZW50LmlubmVySFRNTCA9IG5vdGVzOwoKCQkJCQkJaWYoIG5vdGVzTGF5b3V0ID09PSAnc2VwYXJhdGUtcGFnZScgKSB7CgkJCQkJCQlwYWdlLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKCBub3Rlc0VsZW1lbnQsIHBhZ2UubmV4dFNpYmxpbmcgKTsKCQkJCQkJfQoJCQkJCQllbHNlIHsKCQkJCQkJCW5vdGVzRWxlbWVudC5zdHlsZS5sZWZ0ID0gbm90ZXNTcGFjaW5nICsgJ3B4JzsKCQkJCQkJCW5vdGVzRWxlbWVudC5zdHlsZS5ib3R0b20gPSBub3Rlc1NwYWNpbmcgKyAncHgnOwoJCQkJCQkJbm90ZXNFbGVtZW50LnN0eWxlLndpZHRoID0gKCBwYWdlV2lkdGggLSBub3Rlc1NwYWNpbmcqMiApICsgJ3B4JzsKCQkJCQkJCXBhZ2UuYXBwZW5kQ2hpbGQoIG5vdGVzRWxlbWVudCApOwoJCQkJCQl9CgoJCQkJCX0KCgkJCQl9CgoJCQkJLy8gSW5qZWN0IHNsaWRlIG51bWJlcnMgaWYgYHNsaWRlTnVtYmVyc2AgYXJlIGVuYWJsZWQKCQkJCWlmKCBjb25maWcuc2xpZGVOdW1iZXIgJiYgL2FsbHxwcmludC9pLnRlc3QoIGNvbmZpZy5zaG93U2xpZGVOdW1iZXIgKSApIHsKCQkJCQl2YXIgc2xpZGVOdW1iZXJIID0gcGFyc2VJbnQoIHNsaWRlLmdldEF0dHJpYnV0ZSggJ2RhdGEtaW5kZXgtaCcgKSwgMTAgKSArIDEsCgkJCQkJCXNsaWRlTnVtYmVyViA9IHBhcnNlSW50KCBzbGlkZS5nZXRBdHRyaWJ1dGUoICdkYXRhLWluZGV4LXYnICksIDEwICkgKyAxOwoKCQkJCQl2YXIgbnVtYmVyRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoICdkaXYnICk7CgkJCQkJbnVtYmVyRWxlbWVudC5jbGFzc0xpc3QuYWRkKCAnc2xpZGUtbnVtYmVyJyApOwoJCQkJCW51bWJlckVsZW1lbnQuY2xhc3NMaXN0LmFkZCggJ3NsaWRlLW51bWJlci1wZGYnICk7CgkJCQkJbnVtYmVyRWxlbWVudC5pbm5lckhUTUwgPSBmb3JtYXRTbGlkZU51bWJlciggc2xpZGVOdW1iZXJILCAnLicsIHNsaWRlTnVtYmVyViApOwoJCQkJCXBhZ2UuYXBwZW5kQ2hpbGQoIG51bWJlckVsZW1lbnQgKTsKCQkJCX0KCgkJCQkvLyBDb3B5IHBhZ2UgYW5kIHNob3cgZnJhZ21lbnRzIG9uZSBhZnRlciBhbm90aGVyCgkJCQlpZiggY29uZmlnLnBkZlNlcGFyYXRlRnJhZ21lbnRzICkgewoKCQkJCQkvLyBFYWNoIGZyYWdtZW50ICdncm91cCcgaXMgYW4gYXJyYXkgY29udGFpbmluZyBvbmUgb3IgbW9yZQoJCQkJCS8vIGZyYWdtZW50cy4gTXVsdGlwbGUgZnJhZ21lbnRzIHRoYXQgYXBwZWFyIGF0IHRoZSBzYW1lIHRpbWUKCQkJCQkvLyBhcmUgcGFydCBvZiB0aGUgc2FtZSBncm91cC4KCQkJCQl2YXIgZnJhZ21lbnRHcm91cHMgPSBzb3J0RnJhZ21lbnRzKCBwYWdlLnF1ZXJ5U2VsZWN0b3JBbGwoICcuZnJhZ21lbnQnICksIHRydWUgKTsKCgkJCQkJdmFyIHByZXZpb3VzRnJhZ21lbnRTdGVwOwoJCQkJCXZhciBwcmV2aW91c1BhZ2U7CgoJCQkJCWZyYWdtZW50R3JvdXBzLmZvckVhY2goIGZ1bmN0aW9uKCBmcmFnbWVudHMgKSB7CgoJCQkJCQkvLyBSZW1vdmUgJ2N1cnJlbnQtZnJhZ21lbnQnIGZyb20gdGhlIHByZXZpb3VzIGdyb3VwCgkJCQkJCWlmKCBwcmV2aW91c0ZyYWdtZW50U3RlcCApIHsKCQkJCQkJCXByZXZpb3VzRnJhZ21lbnRTdGVwLmZvckVhY2goIGZ1bmN0aW9uKCBmcmFnbWVudCApIHsKCQkJCQkJCQlmcmFnbWVudC5jbGFzc0xpc3QucmVtb3ZlKCAnY3VycmVudC1mcmFnbWVudCcgKTsKCQkJCQkJCX0gKTsKCQkJCQkJfQoKCQkJCQkJLy8gU2hvdyB0aGUgZnJhZ21lbnRzIGZvciB0aGUgY3VycmVudCBpbmRleAoJCQkJCQlmcmFnbWVudHMuZm9yRWFjaCggZnVuY3Rpb24oIGZyYWdtZW50ICkgewoJCQkJCQkJZnJhZ21lbnQuY2xhc3NMaXN0LmFkZCggJ3Zpc2libGUnLCAnY3VycmVudC1mcmFnbWVudCcgKTsKCQkJCQkJfSApOwoKCQkJCQkJLy8gQ3JlYXRlIGEgc2VwYXJhdGUgcGFnZSBmb3IgdGhlIGN1cnJlbnQgZnJhZ21lbnQgc3RhdGUKCQkJCQkJdmFyIGNsb25lZFBhZ2UgPSBwYWdlLmNsb25lTm9kZSggdHJ1ZSApOwoJCQkJCQlwYWdlLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKCBjbG9uZWRQYWdlLCAoIHByZXZpb3VzUGFnZSB8fCBwYWdlICkubmV4dFNpYmxpbmcgKTsKCgkJCQkJCXByZXZpb3VzRnJhZ21lbnRTdGVwID0gZnJhZ21lbnRzOwoJCQkJCQlwcmV2aW91c1BhZ2UgPSBjbG9uZWRQYWdlOwoKCQkJCQl9ICk7CgoJCQkJCS8vIFJlc2V0IHRoZSBmaXJzdC9vcmlnaW5hbCBwYWdlIHNvIHRoYXQgYWxsIGZyYWdtZW50cyBhcmUgaGlkZGVuCgkJCQkJZnJhZ21lbnRHcm91cHMuZm9yRWFjaCggZnVuY3Rpb24oIGZyYWdtZW50cyApIHsKCQkJCQkJZnJhZ21lbnRzLmZvckVhY2goIGZ1bmN0aW9uKCBmcmFnbWVudCApIHsKCQkJCQkJCWZyYWdtZW50LmNsYXNzTGlzdC5yZW1vdmUoICd2aXNpYmxlJywgJ2N1cnJlbnQtZnJhZ21lbnQnICk7CgkJCQkJCX0gKTsKCQkJCQl9ICk7CgoJCQkJfQoJCQkJLy8gU2hvdyBhbGwgZnJhZ21lbnRzCgkJCQllbHNlIHsKCQkJCQl0b0FycmF5KCBwYWdlLnF1ZXJ5U2VsZWN0b3JBbGwoICcuZnJhZ21lbnQ6bm90KC5mYWRlLW91dCknICkgKS5mb3JFYWNoKCBmdW5jdGlvbiggZnJhZ21lbnQgKSB7CgkJCQkJCWZyYWdtZW50LmNsYXNzTGlzdC5hZGQoICd2aXNpYmxlJyApOwoJCQkJCX0gKTsKCQkJCX0KCgkJCX0KCgkJfSApOwoKCQkvLyBOb3RpZnkgc3Vic2NyaWJlcnMgdGhhdCB0aGUgUERGIGxheW91dCBpcyBnb29kIHRvIGdvCgkJZGlzcGF0Y2hFdmVudCggJ3BkZi1yZWFkeScgKTsKCgl9CgoJLyoqCgkgKiBUaGlzIGlzIGFuIHVuZm9ydHVuYXRlIG5lY2Vzc2l0eS4gU29tZSBhY3Rpb25zIOKAkyBzdWNoIGFzCgkgKiBhbiBpbnB1dCBmaWVsZCBiZWluZyBmb2N1c2VkIGluIGFuIGlmcmFtZSBvciB1c2luZyB0aGUKCSAqIGtleWJvYXJkIHRvIGV4cGFuZCB0ZXh0IHNlbGVjdGlvbiBiZXlvbmQgdGhlIGJvdW5kcyBvZgoJICogYSBzbGlkZSDigJMgY2FuIHRyaWdnZXIgb3VyIGNvbnRlbnQgdG8gYmUgcHVzaGVkIG91dCBvZiB2aWV3LgoJICogVGhpcyBzY3JvbGxpbmcgY2FuIG5vdCBiZSBwcmV2ZW50ZWQgYnkgaGlkaW5nIG92ZXJmbG93IGluCgkgKiBDU1MgKHdlIGFscmVhZHkgZG8pIHNvIHdlIGhhdmUgdG8gcmVzb3J0IHRvIHJlcGVhdGVkbHkKCSAqIGNoZWNraW5nIGlmIHRoZSBzbGlkZXMgaGF2ZSBiZWVuIG9mZnNldCA6KAoJICovCglmdW5jdGlvbiBzZXR1cFNjcm9sbFByZXZlbnRpb24oKSB7CgoJCXNldEludGVydmFsKCBmdW5jdGlvbigpIHsKCQkJaWYoIGRvbS53cmFwcGVyLnNjcm9sbFRvcCAhPT0gMCB8fCBkb20ud3JhcHBlci5zY3JvbGxMZWZ0ICE9PSAwICkgewoJCQkJZG9tLndyYXBwZXIuc2Nyb2xsVG9wID0gMDsKCQkJCWRvbS53cmFwcGVyLnNjcm9sbExlZnQgPSAwOwoJCQl9CgkJfSwgMTAwMCApOwoKCX0KCgkvKioKCSAqIENyZWF0ZXMgYW4gSFRNTCBlbGVtZW50IGFuZCByZXR1cm5zIGEgcmVmZXJlbmNlIHRvIGl0LgoJICogSWYgdGhlIGVsZW1lbnQgYWxyZWFkeSBleGlzdHMgdGhlIGV4aXN0aW5nIGluc3RhbmNlIHdpbGwKCSAqIGJlIHJldHVybmVkLgoJICoKCSAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IGNvbnRhaW5lcgoJICogQHBhcmFtIHtzdHJpbmd9IHRhZ25hbWUKCSAqIEBwYXJhbSB7c3RyaW5nfSBjbGFzc25hbWUKCSAqIEBwYXJhbSB7c3RyaW5nfSBpbm5lckhUTUwKCSAqCgkgKiBAcmV0dXJuIHtIVE1MRWxlbWVudH0KCSAqLwoJZnVuY3Rpb24gY3JlYXRlU2luZ2xldG9uTm9kZSggY29udGFpbmVyLCB0YWduYW1lLCBjbGFzc25hbWUsIGlubmVySFRNTCApIHsKCgkJLy8gRmluZCBhbGwgbm9kZXMgbWF0Y2hpbmcgdGhlIGRlc2NyaXB0aW9uCgkJdmFyIG5vZGVzID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoICcuJyArIGNsYXNzbmFtZSApOwoKCQkvLyBDaGVjayBhbGwgbWF0Y2hlcyB0byBmaW5kIG9uZSB3aGljaCBpcyBhIGRpcmVjdCBjaGlsZCBvZgoJCS8vIHRoZSBzcGVjaWZpZWQgY29udGFpbmVyCgkJZm9yKCB2YXIgaSA9IDA7IGkgPCBub2Rlcy5sZW5ndGg7IGkrKyApIHsKCQkJdmFyIHRlc3ROb2RlID0gbm9kZXNbaV07CgkJCWlmKCB0ZXN0Tm9kZS5wYXJlbnROb2RlID09PSBjb250YWluZXIgKSB7CgkJCQlyZXR1cm4gdGVzdE5vZGU7CgkJCX0KCQl9CgoJCS8vIElmIG5vIG5vZGUgd2FzIGZvdW5kLCBjcmVhdGUgaXQgbm93CgkJdmFyIG5vZGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCB0YWduYW1lICk7CgkJbm9kZS5jbGFzc05hbWUgPSBjbGFzc25hbWU7CgkJaWYoIHR5cGVvZiBpbm5lckhUTUwgPT09ICdzdHJpbmcnICkgewoJCQlub2RlLmlubmVySFRNTCA9IGlubmVySFRNTDsKCQl9CgkJY29udGFpbmVyLmFwcGVuZENoaWxkKCBub2RlICk7CgoJCXJldHVybiBub2RlOwoKCX0KCgkvKioKCSAqIENyZWF0ZXMgdGhlIHNsaWRlIGJhY2tncm91bmQgZWxlbWVudHMgYW5kIGFwcGVuZHMgdGhlbQoJICogdG8gdGhlIGJhY2tncm91bmQgY29udGFpbmVyLiBPbmUgZWxlbWVudCBpcyBjcmVhdGVkIHBlcgoJICogc2xpZGUgbm8gbWF0dGVyIGlmIHRoZSBnaXZlbiBzbGlkZSBoYXMgdmlzaWJsZSBiYWNrZ3JvdW5kLgoJICovCglmdW5jdGlvbiBjcmVhdGVCYWNrZ3JvdW5kcygpIHsKCgkJdmFyIHByaW50TW9kZSA9IGlzUHJpbnRpbmdQREYoKTsKCgkJLy8gQ2xlYXIgcHJpb3IgYmFja2dyb3VuZHMKCQlkb20uYmFja2dyb3VuZC5pbm5lckhUTUwgPSAnJzsKCQlkb20uYmFja2dyb3VuZC5jbGFzc0xpc3QuYWRkKCAnbm8tdHJhbnNpdGlvbicgKTsKCgkJLy8gSXRlcmF0ZSBvdmVyIGFsbCBob3Jpem9udGFsIHNsaWRlcwoJCXRvQXJyYXkoIGRvbS53cmFwcGVyLnF1ZXJ5U2VsZWN0b3JBbGwoIEhPUklaT05UQUxfU0xJREVTX1NFTEVDVE9SICkgKS5mb3JFYWNoKCBmdW5jdGlvbiggc2xpZGVoICkgewoKCQkJdmFyIGJhY2tncm91bmRTdGFjayA9IGNyZWF0ZUJhY2tncm91bmQoIHNsaWRlaCwgZG9tLmJhY2tncm91bmQgKTsKCgkJCS8vIEl0ZXJhdGUgb3ZlciBhbGwgdmVydGljYWwgc2xpZGVzCgkJCXRvQXJyYXkoIHNsaWRlaC5xdWVyeVNlbGVjdG9yQWxsKCAnc2VjdGlvbicgKSApLmZvckVhY2goIGZ1bmN0aW9uKCBzbGlkZXYgKSB7CgoJCQkJY3JlYXRlQmFja2dyb3VuZCggc2xpZGV2LCBiYWNrZ3JvdW5kU3RhY2sgKTsKCgkJCQliYWNrZ3JvdW5kU3RhY2suY2xhc3NMaXN0LmFkZCggJ3N0YWNrJyApOwoKCQkJfSApOwoKCQl9ICk7CgoJCS8vIEFkZCBwYXJhbGxheCBiYWNrZ3JvdW5kIGlmIHNwZWNpZmllZAoJCWlmKCBjb25maWcucGFyYWxsYXhCYWNrZ3JvdW5kSW1hZ2UgKSB7CgoJCQlkb20uYmFja2dyb3VuZC5zdHlsZS5iYWNrZ3JvdW5kSW1hZ2UgPSAndXJsKCInICsgY29uZmlnLnBhcmFsbGF4QmFja2dyb3VuZEltYWdlICsgJyIpJzsKCQkJZG9tLmJhY2tncm91bmQuc3R5bGUuYmFja2dyb3VuZFNpemUgPSBjb25maWcucGFyYWxsYXhCYWNrZ3JvdW5kU2l6ZTsKCQkJZG9tLmJhY2tncm91bmQuc3R5bGUuYmFja2dyb3VuZFJlcGVhdCA9IGNvbmZpZy5wYXJhbGxheEJhY2tncm91bmRSZXBlYXQ7CgkJCWRvbS5iYWNrZ3JvdW5kLnN0eWxlLmJhY2tncm91bmRQb3NpdGlvbiA9IGNvbmZpZy5wYXJhbGxheEJhY2tncm91bmRQb3NpdGlvbjsKCgkJCS8vIE1ha2Ugc3VyZSB0aGUgYmVsb3cgcHJvcGVydGllcyBhcmUgc2V0IG9uIHRoZSBlbGVtZW50IC0gdGhlc2UgcHJvcGVydGllcyBhcmUKCQkJLy8gbmVlZGVkIGZvciBwcm9wZXIgdHJhbnNpdGlvbnMgdG8gYmUgc2V0IG9uIHRoZSBlbGVtZW50IHZpYSBDU1MuIFRvIHJlbW92ZQoJCQkvLyBhbm5veWluZyBiYWNrZ3JvdW5kIHNsaWRlLWluIGVmZmVjdCB3aGVuIHRoZSBwcmVzZW50YXRpb24gc3RhcnRzLCBhcHBseQoJCQkvLyB0aGVzZSBwcm9wZXJ0aWVzIGFmdGVyIHNob3J0IHRpbWUgZGVsYXkKCQkJc2V0VGltZW91dCggZnVuY3Rpb24oKSB7CgkJCQlkb20ud3JhcHBlci5jbGFzc0xpc3QuYWRkKCAnaGFzLXBhcmFsbGF4LWJhY2tncm91bmQnICk7CgkJCX0sIDEgKTsKCgkJfQoJCWVsc2UgewoKCQkJZG9tLmJhY2tncm91bmQuc3R5bGUuYmFja2dyb3VuZEltYWdlID0gJyc7CgkJCWRvbS53cmFwcGVyLmNsYXNzTGlzdC5yZW1vdmUoICdoYXMtcGFyYWxsYXgtYmFja2dyb3VuZCcgKTsKCgkJfQoKCX0KCgkvKioKCSAqIENyZWF0ZXMgYSBiYWNrZ3JvdW5kIGZvciB0aGUgZ2l2ZW4gc2xpZGUuCgkgKgoJICogQHBhcmFtIHtIVE1MRWxlbWVudH0gc2xpZGUKCSAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IGNvbnRhaW5lciBUaGUgZWxlbWVudCB0aGF0IHRoZSBiYWNrZ3JvdW5kCgkgKiBzaG91bGQgYmUgYXBwZW5kZWQgdG8KCSAqIEByZXR1cm4ge0hUTUxFbGVtZW50fSBOZXcgYmFja2dyb3VuZCBkaXYKCSAqLwoJZnVuY3Rpb24gY3JlYXRlQmFja2dyb3VuZCggc2xpZGUsIGNvbnRhaW5lciApIHsKCgoJCS8vIE1haW4gc2xpZGUgYmFja2dyb3VuZCBlbGVtZW50CgkJdmFyIGVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCAnZGl2JyApOwoJCWVsZW1lbnQuY2xhc3NOYW1lID0gJ3NsaWRlLWJhY2tncm91bmQgJyArIHNsaWRlLmNsYXNzTmFtZS5yZXBsYWNlKCAvcHJlc2VudHxwYXN0fGZ1dHVyZS8sICcnICk7CgoJCS8vIElubmVyIGJhY2tncm91bmQgZWxlbWVudCB0aGF0IHdyYXBzIGltYWdlcy92aWRlb3MvaWZyYW1lcwoJCXZhciBjb250ZW50RWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoICdkaXYnICk7CgkJY29udGVudEVsZW1lbnQuY2xhc3NOYW1lID0gJ3NsaWRlLWJhY2tncm91bmQtY29udGVudCc7CgoJCWVsZW1lbnQuYXBwZW5kQ2hpbGQoIGNvbnRlbnRFbGVtZW50ICk7CgkJY29udGFpbmVyLmFwcGVuZENoaWxkKCBlbGVtZW50ICk7CgoJCXNsaWRlLnNsaWRlQmFja2dyb3VuZEVsZW1lbnQgPSBlbGVtZW50OwoJCXNsaWRlLnNsaWRlQmFja2dyb3VuZENvbnRlbnRFbGVtZW50ID0gY29udGVudEVsZW1lbnQ7CgoJCS8vIFN5bmNzIHRoZSBiYWNrZ3JvdW5kIHRvIHJlZmxlY3QgYWxsIGN1cnJlbnQgYmFja2dyb3VuZCBzZXR0aW5ncwoJCXN5bmNCYWNrZ3JvdW5kKCBzbGlkZSApOwoKCQlyZXR1cm4gZWxlbWVudDsKCgl9CgoJLyoqCgkgKiBSZW5kZXJzIGFsbCBvZiB0aGUgdmlzdWFsIHByb3BlcnRpZXMgb2YgYSBzbGlkZSBiYWNrZ3JvdW5kCgkgKiBiYXNlZCBvbiB0aGUgdmFyaW91cyBiYWNrZ3JvdW5kIGF0dHJpYnV0ZXMuCgkgKgoJICogQHBhcmFtIHtIVE1MRWxlbWVudH0gc2xpZGUKCSAqLwoJZnVuY3Rpb24gc3luY0JhY2tncm91bmQoIHNsaWRlICkgewoKCQl2YXIgZWxlbWVudCA9IHNsaWRlLnNsaWRlQmFja2dyb3VuZEVsZW1lbnQsCgkJCWNvbnRlbnRFbGVtZW50ID0gc2xpZGUuc2xpZGVCYWNrZ3JvdW5kQ29udGVudEVsZW1lbnQ7CgoJCS8vIFJlc2V0IHRoZSBwcmlvciBiYWNrZ3JvdW5kIHN0YXRlIGluIGNhc2UgdGhpcyBpcyBub3QgdGhlCgkJLy8gaW5pdGlhbCBzeW5jCgkJc2xpZGUuY2xhc3NMaXN0LnJlbW92ZSggJ2hhcy1kYXJrLWJhY2tncm91bmQnICk7CgkJc2xpZGUuY2xhc3NMaXN0LnJlbW92ZSggJ2hhcy1saWdodC1iYWNrZ3JvdW5kJyApOwoKCQllbGVtZW50LnJlbW92ZUF0dHJpYnV0ZSggJ2RhdGEtbG9hZGVkJyApOwoJCWVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKCAnZGF0YS1iYWNrZ3JvdW5kLWhhc2gnICk7CgkJZWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoICdkYXRhLWJhY2tncm91bmQtc2l6ZScgKTsKCQllbGVtZW50LnJlbW92ZUF0dHJpYnV0ZSggJ2RhdGEtYmFja2dyb3VuZC10cmFuc2l0aW9uJyApOwoJCWVsZW1lbnQuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJyc7CgoJCWNvbnRlbnRFbGVtZW50LnN0eWxlLmJhY2tncm91bmRTaXplID0gJyc7CgkJY29udGVudEVsZW1lbnQuc3R5bGUuYmFja2dyb3VuZFJlcGVhdCA9ICcnOwoJCWNvbnRlbnRFbGVtZW50LnN0eWxlLmJhY2tncm91bmRQb3NpdGlvbiA9ICcnOwoJCWNvbnRlbnRFbGVtZW50LnN0eWxlLmJhY2tncm91bmRJbWFnZSA9ICcnOwoJCWNvbnRlbnRFbGVtZW50LnN0eWxlLm9wYWNpdHkgPSAnJzsKCQljb250ZW50RWxlbWVudC5pbm5lckhUTUwgPSAnJzsKCgkJdmFyIGRhdGEgPSB7CgkJCWJhY2tncm91bmQ6IHNsaWRlLmdldEF0dHJpYnV0ZSggJ2RhdGEtYmFja2dyb3VuZCcgKSwKCQkJYmFja2dyb3VuZFNpemU6IHNsaWRlLmdldEF0dHJpYnV0ZSggJ2RhdGEtYmFja2dyb3VuZC1zaXplJyApLAoJCQliYWNrZ3JvdW5kSW1hZ2U6IHNsaWRlLmdldEF0dHJpYnV0ZSggJ2RhdGEtYmFja2dyb3VuZC1pbWFnZScgKSwKCQkJYmFja2dyb3VuZFZpZGVvOiBzbGlkZS5nZXRBdHRyaWJ1dGUoICdkYXRhLWJhY2tncm91bmQtdmlkZW8nICksCgkJCWJhY2tncm91bmRJZnJhbWU6IHNsaWRlLmdldEF0dHJpYnV0ZSggJ2RhdGEtYmFja2dyb3VuZC1pZnJhbWUnICksCgkJCWJhY2tncm91bmRDb2xvcjogc2xpZGUuZ2V0QXR0cmlidXRlKCAnZGF0YS1iYWNrZ3JvdW5kLWNvbG9yJyApLAoJCQliYWNrZ3JvdW5kUmVwZWF0OiBzbGlkZS5nZXRBdHRyaWJ1dGUoICdkYXRhLWJhY2tncm91bmQtcmVwZWF0JyApLAoJCQliYWNrZ3JvdW5kUG9zaXRpb246IHNsaWRlLmdldEF0dHJpYnV0ZSggJ2RhdGEtYmFja2dyb3VuZC1wb3NpdGlvbicgKSwKCQkJYmFja2dyb3VuZFRyYW5zaXRpb246IHNsaWRlLmdldEF0dHJpYnV0ZSggJ2RhdGEtYmFja2dyb3VuZC10cmFuc2l0aW9uJyApLAoJCQliYWNrZ3JvdW5kT3BhY2l0eTogc2xpZGUuZ2V0QXR0cmlidXRlKCAnZGF0YS1iYWNrZ3JvdW5kLW9wYWNpdHknICkKCQl9OwoKCQlpZiggZGF0YS5iYWNrZ3JvdW5kICkgewoJCQkvLyBBdXRvLXdyYXAgaW1hZ2UgdXJscyBpbiB1cmwoLi4uKQoJCQlpZiggL14oaHR0cHxmaWxlfFwvXC8pL2dpLnRlc3QoIGRhdGEuYmFja2dyb3VuZCApIHx8IC9cLihzdmd8cG5nfGpwZ3xqcGVnfGdpZnxibXApKFs/I1xzXXwkKS9naS50ZXN0KCBkYXRhLmJhY2tncm91bmQgKSApIHsKCQkJCXNsaWRlLnNldEF0dHJpYnV0ZSggJ2RhdGEtYmFja2dyb3VuZC1pbWFnZScsIGRhdGEuYmFja2dyb3VuZCApOwoJCQl9CgkJCWVsc2UgewoJCQkJZWxlbWVudC5zdHlsZS5iYWNrZ3JvdW5kID0gZGF0YS5iYWNrZ3JvdW5kOwoJCQl9CgkJfQoKCQkvLyBDcmVhdGUgYSBoYXNoIGZvciB0aGlzIGNvbWJpbmF0aW9uIG9mIGJhY2tncm91bmQgc2V0dGluZ3MuCgkJLy8gVGhpcyBpcyB1c2VkIHRvIGRldGVybWluZSB3aGVuIHR3byBzbGlkZSBiYWNrZ3JvdW5kcyBhcmUKCQkvLyB0aGUgc2FtZS4KCQlpZiggZGF0YS5iYWNrZ3JvdW5kIHx8IGRhdGEuYmFja2dyb3VuZENvbG9yIHx8IGRhdGEuYmFja2dyb3VuZEltYWdlIHx8IGRhdGEuYmFja2dyb3VuZFZpZGVvIHx8IGRhdGEuYmFja2dyb3VuZElmcmFtZSApIHsKCQkJZWxlbWVudC5zZXRBdHRyaWJ1dGUoICdkYXRhLWJhY2tncm91bmQtaGFzaCcsIGRhdGEuYmFja2dyb3VuZCArCgkJCQkJCQkJCQkJCQkJCWRhdGEuYmFja2dyb3VuZFNpemUgKwoJCQkJCQkJCQkJCQkJCQlkYXRhLmJhY2tncm91bmRJbWFnZSArCgkJCQkJCQkJCQkJCQkJCWRhdGEuYmFja2dyb3VuZFZpZGVvICsKCQkJCQkJCQkJCQkJCQkJZGF0YS5iYWNrZ3JvdW5kSWZyYW1lICsKCQkJCQkJCQkJCQkJCQkJZGF0YS5iYWNrZ3JvdW5kQ29sb3IgKwoJCQkJCQkJCQkJCQkJCQlkYXRhLmJhY2tncm91bmRSZXBlYXQgKwoJCQkJCQkJCQkJCQkJCQlkYXRhLmJhY2tncm91bmRQb3NpdGlvbiArCgkJCQkJCQkJCQkJCQkJCWRhdGEuYmFja2dyb3VuZFRyYW5zaXRpb24gKwoJCQkJCQkJCQkJCQkJCQlkYXRhLmJhY2tncm91bmRPcGFjaXR5ICk7CgkJfQoKCQkvLyBBZGRpdGlvbmFsIGFuZCBvcHRpb25hbCBiYWNrZ3JvdW5kIHByb3BlcnRpZXMKCQlpZiggZGF0YS5iYWNrZ3JvdW5kU2l6ZSApIGVsZW1lbnQuc2V0QXR0cmlidXRlKCAnZGF0YS1iYWNrZ3JvdW5kLXNpemUnLCBkYXRhLmJhY2tncm91bmRTaXplICk7CgkJaWYoIGRhdGEuYmFja2dyb3VuZENvbG9yICkgZWxlbWVudC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBkYXRhLmJhY2tncm91bmRDb2xvcjsKCQlpZiggZGF0YS5iYWNrZ3JvdW5kVHJhbnNpdGlvbiApIGVsZW1lbnQuc2V0QXR0cmlidXRlKCAnZGF0YS1iYWNrZ3JvdW5kLXRyYW5zaXRpb24nLCBkYXRhLmJhY2tncm91bmRUcmFuc2l0aW9uICk7CgoJCWlmKCBzbGlkZS5oYXNBdHRyaWJ1dGUoICdkYXRhLXByZWxvYWQnICkgKSBlbGVtZW50LnNldEF0dHJpYnV0ZSggJ2RhdGEtcHJlbG9hZCcsICcnICk7CgoJCS8vIEJhY2tncm91bmQgaW1hZ2Ugb3B0aW9ucyBhcmUgc2V0IG9uIHRoZSBjb250ZW50IHdyYXBwZXIKCQlpZiggZGF0YS5iYWNrZ3JvdW5kU2l6ZSApIGNvbnRlbnRFbGVtZW50LnN0eWxlLmJhY2tncm91bmRTaXplID0gZGF0YS5iYWNrZ3JvdW5kU2l6ZTsKCQlpZiggZGF0YS5iYWNrZ3JvdW5kUmVwZWF0ICkgY29udGVudEVsZW1lbnQuc3R5bGUuYmFja2dyb3VuZFJlcGVhdCA9IGRhdGEuYmFja2dyb3VuZFJlcGVhdDsKCQlpZiggZGF0YS5iYWNrZ3JvdW5kUG9zaXRpb24gKSBjb250ZW50RWxlbWVudC5zdHlsZS5iYWNrZ3JvdW5kUG9zaXRpb24gPSBkYXRhLmJhY2tncm91bmRQb3NpdGlvbjsKCQlpZiggZGF0YS5iYWNrZ3JvdW5kT3BhY2l0eSApIGNvbnRlbnRFbGVtZW50LnN0eWxlLm9wYWNpdHkgPSBkYXRhLmJhY2tncm91bmRPcGFjaXR5OwoKCQkvLyBJZiB0aGlzIHNsaWRlIGhhcyBhIGJhY2tncm91bmQgY29sb3IsIHdlIGFkZCBhIGNsYXNzIHRoYXQKCQkvLyBzaWduYWxzIGlmIGl0IGlzIGxpZ2h0IG9yIGRhcmsuIElmIHRoZSBzbGlkZSBoYXMgbm8gYmFja2dyb3VuZAoJCS8vIGNvbG9yLCBubyBjbGFzcyB3aWxsIGJlIGFkZGVkCgkJdmFyIGNvbnRyYXN0Q29sb3IgPSBkYXRhLmJhY2tncm91bmRDb2xvcjsKCgkJLy8gSWYgbm8gYmcgY29sb3Igd2FzIGZvdW5kLCBjaGVjayB0aGUgY29tcHV0ZWQgYmFja2dyb3VuZAoJCWlmKCAhY29udHJhc3RDb2xvciApIHsKCQkJdmFyIGNvbXB1dGVkQmFja2dyb3VuZFN0eWxlID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUoIGVsZW1lbnQgKTsKCQkJaWYoIGNvbXB1dGVkQmFja2dyb3VuZFN0eWxlICYmIGNvbXB1dGVkQmFja2dyb3VuZFN0eWxlLmJhY2tncm91bmRDb2xvciApIHsKCQkJCWNvbnRyYXN0Q29sb3IgPSBjb21wdXRlZEJhY2tncm91bmRTdHlsZS5iYWNrZ3JvdW5kQ29sb3I7CgkJCX0KCQl9CgoJCWlmKCBjb250cmFzdENvbG9yICkgewoJCQl2YXIgcmdiID0gY29sb3JUb1JnYiggY29udHJhc3RDb2xvciApOwoKCQkJLy8gSWdub3JlIGZ1bGx5IHRyYW5zcGFyZW50IGJhY2tncm91bmRzLiBTb21lIGJyb3dzZXJzIHJldHVybgoJCQkvLyByZ2JhKDAsMCwwLDApIHdoZW4gcmVhZGluZyB0aGUgY29tcHV0ZWQgYmFja2dyb3VuZCBjb2xvciBvZgoJCQkvLyBhbiBlbGVtZW50IHdpdGggbm8gYmFja2dyb3VuZAoJCQlpZiggcmdiICYmIHJnYi5hICE9PSAwICkgewoJCQkJaWYoIGNvbG9yQnJpZ2h0bmVzcyggY29udHJhc3RDb2xvciApIDwgMTI4ICkgewoJCQkJCXNsaWRlLmNsYXNzTGlzdC5hZGQoICdoYXMtZGFyay1iYWNrZ3JvdW5kJyApOwoJCQkJfQoJCQkJZWxzZSB7CgkJCQkJc2xpZGUuY2xhc3NMaXN0LmFkZCggJ2hhcy1saWdodC1iYWNrZ3JvdW5kJyApOwoJCQkJfQoJCQl9CgkJfQoKCX0KCgkvKioKCSAqIFJlZ2lzdGVycyBhIGxpc3RlbmVyIHRvIHBvc3RNZXNzYWdlIGV2ZW50cywgdGhpcyBtYWtlcyBpdAoJICogcG9zc2libGUgdG8gY2FsbCBhbGwgcmV2ZWFsLmpzIEFQSSBtZXRob2RzIGZyb20gYW5vdGhlcgoJICogd2luZG93LiBGb3IgZXhhbXBsZToKCSAqCgkgKiByZXZlYWxXaW5kb3cucG9zdE1lc3NhZ2UoIEpTT04uc3RyaW5naWZ5KHsKCSAqICAgbWV0aG9kOiAnc2xpZGUnLAoJICogICBhcmdzOiBbIDIgXQoJICogfSksICcqJyApOwoJICovCglmdW5jdGlvbiBzZXR1cFBvc3RNZXNzYWdlKCkgewoKCQlpZiggY29uZmlnLnBvc3RNZXNzYWdlICkgewoJCQl3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lciggJ21lc3NhZ2UnLCBmdW5jdGlvbiAoIGV2ZW50ICkgewoJCQkJdmFyIGRhdGEgPSBldmVudC5kYXRhOwoKCQkJCS8vIE1ha2Ugc3VyZSB3ZSdyZSBkZWFsaW5nIHdpdGggSlNPTgoJCQkJaWYoIHR5cGVvZiBkYXRhID09PSAnc3RyaW5nJyAmJiBkYXRhLmNoYXJBdCggMCApID09PSAneycgJiYgZGF0YS5jaGFyQXQoIGRhdGEubGVuZ3RoIC0gMSApID09PSAnfScgKSB7CgkJCQkJZGF0YSA9IEpTT04ucGFyc2UoIGRhdGEgKTsKCgkJCQkJLy8gQ2hlY2sgaWYgdGhlIHJlcXVlc3RlZCBtZXRob2QgY2FuIGJlIGZvdW5kCgkJCQkJaWYoIGRhdGEubWV0aG9kICYmIHR5cGVvZiBSZXZlYWxbZGF0YS5tZXRob2RdID09PSAnZnVuY3Rpb24nICkgewoJCQkJCQl2YXIgcmVzdWx0ID0gUmV2ZWFsW2RhdGEubWV0aG9kXS5hcHBseSggUmV2ZWFsLCBkYXRhLmFyZ3MgKTsKCgkJCQkJCS8vIERpc3BhdGNoIGEgcG9zdE1lc3NhZ2UgZXZlbnQgd2l0aCB0aGUgcmV0dXJuZWQgdmFsdWUgZnJvbQoJCQkJCQkvLyBvdXIgbWV0aG9kIGludm9jYXRpb24gZm9yIGdldHRlciBmdW5jdGlvbnMKCQkJCQkJZGlzcGF0Y2hQb3N0TWVzc2FnZSggJ2NhbGxiYWNrJywgeyBtZXRob2Q6IGRhdGEubWV0aG9kLCByZXN1bHQ6IHJlc3VsdCB9ICk7CgkJCQkJfQoJCQkJfQoJCQl9LCBmYWxzZSApOwoJCX0KCgl9CgoJLyoqCgkgKiBBcHBsaWVzIHRoZSBjb25maWd1cmF0aW9uIHNldHRpbmdzIGZyb20gdGhlIGNvbmZpZwoJICogb2JqZWN0LiBNYXkgYmUgY2FsbGVkIG11bHRpcGxlIHRpbWVzLgoJICoKCSAqIEBwYXJhbSB7b2JqZWN0fSBvcHRpb25zCgkgKi8KCWZ1bmN0aW9uIGNvbmZpZ3VyZSggb3B0aW9ucyApIHsKCgkJdmFyIG9sZFRyYW5zaXRpb24gPSBjb25maWcudHJhbnNpdGlvbjsKCgkJLy8gTmV3IGNvbmZpZyBvcHRpb25zIG1heSBiZSBwYXNzZWQgd2hlbiB0aGlzIG1ldGhvZAoJCS8vIGlzIGludm9rZWQgdGhyb3VnaCB0aGUgQVBJIGFmdGVyIGluaXRpYWxpemF0aW9uCgkJaWYoIHR5cGVvZiBvcHRpb25zID09PSAnb2JqZWN0JyApIGV4dGVuZCggY29uZmlnLCBvcHRpb25zICk7CgoJCS8vIEFib3J0IGlmIHJldmVhbC5qcyBoYXNuJ3QgZmluaXNoZWQgbG9hZGluZywgY29uZmlnCgkJLy8gY2hhbmdlcyB3aWxsIGJlIGFwcGxpZWQgYXV0b21hdGljYWxseSBvbmNlIGxvYWRpbmcKCQkvLyBmaW5pc2hlcwoJCWlmKCBsb2FkZWQgPT09IGZhbHNlICkgcmV0dXJuOwoKCQl2YXIgbnVtYmVyT2ZTbGlkZXMgPSBkb20ud3JhcHBlci5xdWVyeVNlbGVjdG9yQWxsKCBTTElERVNfU0VMRUNUT1IgKS5sZW5ndGg7CgoJCS8vIFJlbW92ZSB0aGUgcHJldmlvdXNseSBjb25maWd1cmVkIHRyYW5zaXRpb24gY2xhc3MKCQlkb20ud3JhcHBlci5jbGFzc0xpc3QucmVtb3ZlKCBvbGRUcmFuc2l0aW9uICk7CgoJCS8vIEZvcmNlIGxpbmVhciB0cmFuc2l0aW9uIGJhc2VkIG9uIGJyb3dzZXIgY2FwYWJpbGl0aWVzCgkJaWYoIGZlYXR1cmVzLnRyYW5zZm9ybXMzZCA9PT0gZmFsc2UgKSBjb25maWcudHJhbnNpdGlvbiA9ICdsaW5lYXInOwoKCQlkb20ud3JhcHBlci5jbGFzc0xpc3QuYWRkKCBjb25maWcudHJhbnNpdGlvbiApOwoKCQlkb20ud3JhcHBlci5zZXRBdHRyaWJ1dGUoICdkYXRhLXRyYW5zaXRpb24tc3BlZWQnLCBjb25maWcudHJhbnNpdGlvblNwZWVkICk7CgkJZG9tLndyYXBwZXIuc2V0QXR0cmlidXRlKCAnZGF0YS1iYWNrZ3JvdW5kLXRyYW5zaXRpb24nLCBjb25maWcuYmFja2dyb3VuZFRyYW5zaXRpb24gKTsKCgkJZG9tLmNvbnRyb2xzLnN0eWxlLmRpc3BsYXkgPSBjb25maWcuY29udHJvbHMgPyAnYmxvY2snIDogJ25vbmUnOwoJCWRvbS5wcm9ncmVzcy5zdHlsZS5kaXNwbGF5ID0gY29uZmlnLnByb2dyZXNzID8gJ2Jsb2NrJyA6ICdub25lJzsKCgkJZG9tLmNvbnRyb2xzLnNldEF0dHJpYnV0ZSggJ2RhdGEtY29udHJvbHMtbGF5b3V0JywgY29uZmlnLmNvbnRyb2xzTGF5b3V0ICk7CgkJZG9tLmNvbnRyb2xzLnNldEF0dHJpYnV0ZSggJ2RhdGEtY29udHJvbHMtYmFjay1hcnJvd3MnLCBjb25maWcuY29udHJvbHNCYWNrQXJyb3dzICk7CgoJCWlmKCBjb25maWcuc2h1ZmZsZSApIHsKCQkJc2h1ZmZsZSgpOwoJCX0KCgkJaWYoIGNvbmZpZy5ydGwgKSB7CgkJCWRvbS53cmFwcGVyLmNsYXNzTGlzdC5hZGQoICdydGwnICk7CgkJfQoJCWVsc2UgewoJCQlkb20ud3JhcHBlci5jbGFzc0xpc3QucmVtb3ZlKCAncnRsJyApOwoJCX0KCgkJaWYoIGNvbmZpZy5jZW50ZXIgKSB7CgkJCWRvbS53cmFwcGVyLmNsYXNzTGlzdC5hZGQoICdjZW50ZXInICk7CgkJfQoJCWVsc2UgewoJCQlkb20ud3JhcHBlci5jbGFzc0xpc3QucmVtb3ZlKCAnY2VudGVyJyApOwoJCX0KCgkJLy8gRXhpdCB0aGUgcGF1c2VkIG1vZGUgaWYgaXQgd2FzIGNvbmZpZ3VyZWQgb2ZmCgkJaWYoIGNvbmZpZy5wYXVzZSA9PT0gZmFsc2UgKSB7CgkJCXJlc3VtZSgpOwoJCX0KCgkJaWYoIGNvbmZpZy5zaG93Tm90ZXMgKSB7CgkJCWRvbS5zcGVha2VyTm90ZXMuc2V0QXR0cmlidXRlKCAnZGF0YS1sYXlvdXQnLCB0eXBlb2YgY29uZmlnLnNob3dOb3RlcyA9PT0gJ3N0cmluZycgPyBjb25maWcuc2hvd05vdGVzIDogJ2lubGluZScgKTsKCQl9CgoJCWlmKCBjb25maWcubW91c2VXaGVlbCApIHsKCQkJZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lciggJ0RPTU1vdXNlU2Nyb2xsJywgb25Eb2N1bWVudE1vdXNlU2Nyb2xsLCBmYWxzZSApOyAvLyBGRgoJCQlkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCAnbW91c2V3aGVlbCcsIG9uRG9jdW1lbnRNb3VzZVNjcm9sbCwgZmFsc2UgKTsKCQl9CgkJZWxzZSB7CgkJCWRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoICdET01Nb3VzZVNjcm9sbCcsIG9uRG9jdW1lbnRNb3VzZVNjcm9sbCwgZmFsc2UgKTsgLy8gRkYKCQkJZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lciggJ21vdXNld2hlZWwnLCBvbkRvY3VtZW50TW91c2VTY3JvbGwsIGZhbHNlICk7CgkJfQoKCQkvLyBSb2xsaW5nIDNEIGxpbmtzCgkJaWYoIGNvbmZpZy5yb2xsaW5nTGlua3MgKSB7CgkJCWVuYWJsZVJvbGxpbmdMaW5rcygpOwoJCX0KCQllbHNlIHsKCQkJZGlzYWJsZVJvbGxpbmdMaW5rcygpOwoJCX0KCgkJLy8gQXV0by1oaWRlIHRoZSBtb3VzZSBwb2ludGVyIHdoZW4gaXRzIGluYWN0aXZlCgkJaWYoIGNvbmZpZy5oaWRlSW5hY3RpdmVDdXJzb3IgKSB7CgkJCWRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoICdtb3VzZW1vdmUnLCBvbkRvY3VtZW50Q3Vyc29yQWN0aXZlLCBmYWxzZSApOwoJCQlkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCAnbW91c2Vkb3duJywgb25Eb2N1bWVudEN1cnNvckFjdGl2ZSwgZmFsc2UgKTsKCQl9CgkJZWxzZSB7CgkJCXNob3dDdXJzb3IoKTsKCgkJCWRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoICdtb3VzZW1vdmUnLCBvbkRvY3VtZW50Q3Vyc29yQWN0aXZlLCBmYWxzZSApOwoJCQlkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCAnbW91c2Vkb3duJywgb25Eb2N1bWVudEN1cnNvckFjdGl2ZSwgZmFsc2UgKTsKCQl9CgoJCS8vIElmcmFtZSBsaW5rIHByZXZpZXdzCgkJaWYoIGNvbmZpZy5wcmV2aWV3TGlua3MgKSB7CgkJCWVuYWJsZVByZXZpZXdMaW5rcygpOwoJCQlkaXNhYmxlUHJldmlld0xpbmtzKCAnW2RhdGEtcHJldmlldy1saW5rPWZhbHNlXScgKTsKCQl9CgkJZWxzZSB7CgkJCWRpc2FibGVQcmV2aWV3TGlua3MoKTsKCQkJZW5hYmxlUHJldmlld0xpbmtzKCAnW2RhdGEtcHJldmlldy1saW5rXTpub3QoW2RhdGEtcHJldmlldy1saW5rPWZhbHNlXSknICk7CgkJfQoKCQkvLyBSZW1vdmUgZXhpc3RpbmcgYXV0by1zbGlkZSBjb250cm9scwoJCWlmKCBhdXRvU2xpZGVQbGF5ZXIgKSB7CgkJCWF1dG9TbGlkZVBsYXllci5kZXN0cm95KCk7CgkJCWF1dG9TbGlkZVBsYXllciA9IG51bGw7CgkJfQoKCQkvLyBHZW5lcmF0ZSBhdXRvLXNsaWRlIGNvbnRyb2xzIGlmIG5lZWRlZAoJCWlmKCBudW1iZXJPZlNsaWRlcyA+IDEgJiYgY29uZmlnLmF1dG9TbGlkZSAmJiBjb25maWcuYXV0b1NsaWRlU3RvcHBhYmxlICYmIGZlYXR1cmVzLmNhbnZhcyAmJiBmZWF0dXJlcy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUgKSB7CgkJCWF1dG9TbGlkZVBsYXllciA9IG5ldyBQbGF5YmFjayggZG9tLndyYXBwZXIsIGZ1bmN0aW9uKCkgewoJCQkJcmV0dXJuIE1hdGgubWluKCBNYXRoLm1heCggKCBEYXRlLm5vdygpIC0gYXV0b1NsaWRlU3RhcnRUaW1lICkgLyBhdXRvU2xpZGUsIDAgKSwgMSApOwoJCQl9ICk7CgoJCQlhdXRvU2xpZGVQbGF5ZXIub24oICdjbGljaycsIG9uQXV0b1NsaWRlUGxheWVyQ2xpY2sgKTsKCQkJYXV0b1NsaWRlUGF1c2VkID0gZmFsc2U7CgkJfQoKCQkvLyBXaGVuIGZyYWdtZW50cyBhcmUgdHVybmVkIG9mZiB0aGV5IHNob3VsZCBiZSB2aXNpYmxlCgkJaWYoIGNvbmZpZy5mcmFnbWVudHMgPT09IGZhbHNlICkgewoJCQl0b0FycmF5KCBkb20uc2xpZGVzLnF1ZXJ5U2VsZWN0b3JBbGwoICcuZnJhZ21lbnQnICkgKS5mb3JFYWNoKCBmdW5jdGlvbiggZWxlbWVudCApIHsKCQkJCWVsZW1lbnQuY2xhc3NMaXN0LmFkZCggJ3Zpc2libGUnICk7CgkJCQllbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoICdjdXJyZW50LWZyYWdtZW50JyApOwoJCQl9ICk7CgkJfQoKCQkvLyBTbGlkZSBudW1iZXJzCgkJdmFyIHNsaWRlTnVtYmVyRGlzcGxheSA9ICdub25lJzsKCQlpZiggY29uZmlnLnNsaWRlTnVtYmVyICYmICFpc1ByaW50aW5nUERGKCkgKSB7CgkJCWlmKCBjb25maWcuc2hvd1NsaWRlTnVtYmVyID09PSAnYWxsJyApIHsKCQkJCXNsaWRlTnVtYmVyRGlzcGxheSA9ICdibG9jayc7CgkJCX0KCQkJZWxzZSBpZiggY29uZmlnLnNob3dTbGlkZU51bWJlciA9PT0gJ3NwZWFrZXInICYmIGlzU3BlYWtlck5vdGVzKCkgKSB7CgkJCQlzbGlkZU51bWJlckRpc3BsYXkgPSAnYmxvY2snOwoJCQl9CgkJfQoKCQlkb20uc2xpZGVOdW1iZXIuc3R5bGUuZGlzcGxheSA9IHNsaWRlTnVtYmVyRGlzcGxheTsKCgkJLy8gQWRkIHRoZSBuYXZpZ2F0aW9uIG1vZGUgdG8gdGhlIERPTSBzbyB3ZSBjYW4gYWRqdXN0IHN0eWxpbmcKCQlpZiggY29uZmlnLm5hdmlnYXRpb25Nb2RlICE9PSAnZGVmYXVsdCcgKSB7CgkJCWRvbS53cmFwcGVyLnNldEF0dHJpYnV0ZSggJ2RhdGEtbmF2aWdhdGlvbi1tb2RlJywgY29uZmlnLm5hdmlnYXRpb25Nb2RlICk7CgkJfQoJCWVsc2UgewoJCQlkb20ud3JhcHBlci5yZW1vdmVBdHRyaWJ1dGUoICdkYXRhLW5hdmlnYXRpb24tbW9kZScgKTsKCQl9CgoJCS8vIERlZmluZSBvdXIgY29udGV4dHVhbCBsaXN0IG9mIGtleWJvYXJkIHNob3J0Y3V0cwoJCWlmKCBjb25maWcubmF2aWdhdGlvbk1vZGUgPT09ICdsaW5lYXInICkgewoJCQlrZXlib2FyZFNob3J0Y3V0c1snJiM4NTk0OyAgLCAgJiM4NTk1OyAgLCAgU1BBQ0UgICwgIE4gICwgIEwgICwgIEonXSA9ICdOZXh0IHNsaWRlJzsKCQkJa2V5Ym9hcmRTaG9ydGN1dHNbJyYjODU5MjsgICwgICYjODU5MzsgICwgIFAgICwgIEggICwgIEsnXSAgICAgICAgICAgPSAnUHJldmlvdXMgc2xpZGUnOwoJCX0KCQllbHNlIHsKCQkJa2V5Ym9hcmRTaG9ydGN1dHNbJ04gICwgIFNQQUNFJ10gICA9ICdOZXh0IHNsaWRlJzsKCQkJa2V5Ym9hcmRTaG9ydGN1dHNbJ1AnXSAgICAgICAgICAgICA9ICdQcmV2aW91cyBzbGlkZSc7CgkJCWtleWJvYXJkU2hvcnRjdXRzWycmIzg1OTI7ICAsICBIJ10gPSAnTmF2aWdhdGUgbGVmdCc7CgkJCWtleWJvYXJkU2hvcnRjdXRzWycmIzg1OTQ7ICAsICBMJ10gPSAnTmF2aWdhdGUgcmlnaHQnOwoJCQlrZXlib2FyZFNob3J0Y3V0c1snJiM4NTkzOyAgLCAgSyddID0gJ05hdmlnYXRlIHVwJzsKCQkJa2V5Ym9hcmRTaG9ydGN1dHNbJyYjODU5NTsgICwgIEonXSA9ICdOYXZpZ2F0ZSBkb3duJzsKCQl9CgoJCWtleWJvYXJkU2hvcnRjdXRzWydIb21lICAsICBTaGlmdCAmIzg1OTI7J10gICAgICAgID0gJ0ZpcnN0IHNsaWRlJzsKCQlrZXlib2FyZFNob3J0Y3V0c1snRW5kICAsICBTaGlmdCAmIzg1OTQ7J10gICAgICAgICA9ICdMYXN0IHNsaWRlJzsKCQlrZXlib2FyZFNob3J0Y3V0c1snQiAgLCAgLiddICAgICAgICAgICAgICAgICAgICAgICA9ICdQYXVzZSc7CgkJa2V5Ym9hcmRTaG9ydGN1dHNbJ0YnXSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPSAnRnVsbHNjcmVlbic7CgkJa2V5Ym9hcmRTaG9ydGN1dHNbJ0VTQywgTyddICAgICAgICAgICAgICAgICAgICAgICAgPSAnU2xpZGUgb3ZlcnZpZXcnOwoKCQlzeW5jKCk7CgoJfQoKCS8qKgoJICogQmluZHMgYWxsIGV2ZW50IGxpc3RlbmVycy4KCSAqLwoJZnVuY3Rpb24gYWRkRXZlbnRMaXN0ZW5lcnMoKSB7CgoJCWV2ZW50c0FyZUJvdW5kID0gdHJ1ZTsKCgkJd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoICdoYXNoY2hhbmdlJywgb25XaW5kb3dIYXNoQ2hhbmdlLCBmYWxzZSApOwoJCXdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCAncmVzaXplJywgb25XaW5kb3dSZXNpemUsIGZhbHNlICk7CgoJCWlmKCBjb25maWcudG91Y2ggKSB7CgkJCWlmKCAnb25wb2ludGVyZG93bicgaW4gd2luZG93ICkgewoJCQkJLy8gVXNlIFczQyBwb2ludGVyIGV2ZW50cwoJCQkJZG9tLndyYXBwZXIuYWRkRXZlbnRMaXN0ZW5lciggJ3BvaW50ZXJkb3duJywgb25Qb2ludGVyRG93biwgZmFsc2UgKTsKCQkJCWRvbS53cmFwcGVyLmFkZEV2ZW50TGlzdGVuZXIoICdwb2ludGVybW92ZScsIG9uUG9pbnRlck1vdmUsIGZhbHNlICk7CgkJCQlkb20ud3JhcHBlci5hZGRFdmVudExpc3RlbmVyKCAncG9pbnRlcnVwJywgb25Qb2ludGVyVXAsIGZhbHNlICk7CgkJCX0KCQkJZWxzZSBpZiggd2luZG93Lm5hdmlnYXRvci5tc1BvaW50ZXJFbmFibGVkICkgewoJCQkJLy8gSUUgMTAgdXNlcyBwcmVmaXhlZCB2ZXJzaW9uIG9mIHBvaW50ZXIgZXZlbnRzCgkJCQlkb20ud3JhcHBlci5hZGRFdmVudExpc3RlbmVyKCAnTVNQb2ludGVyRG93bicsIG9uUG9pbnRlckRvd24sIGZhbHNlICk7CgkJCQlkb20ud3JhcHBlci5hZGRFdmVudExpc3RlbmVyKCAnTVNQb2ludGVyTW92ZScsIG9uUG9pbnRlck1vdmUsIGZhbHNlICk7CgkJCQlkb20ud3JhcHBlci5hZGRFdmVudExpc3RlbmVyKCAnTVNQb2ludGVyVXAnLCBvblBvaW50ZXJVcCwgZmFsc2UgKTsKCQkJfQoJCQllbHNlIHsKCQkJCS8vIEZhbGwgYmFjayB0byB0b3VjaCBldmVudHMKCQkJCWRvbS53cmFwcGVyLmFkZEV2ZW50TGlzdGVuZXIoICd0b3VjaHN0YXJ0Jywgb25Ub3VjaFN0YXJ0LCBmYWxzZSApOwoJCQkJZG9tLndyYXBwZXIuYWRkRXZlbnRMaXN0ZW5lciggJ3RvdWNobW92ZScsIG9uVG91Y2hNb3ZlLCBmYWxzZSApOwoJCQkJZG9tLndyYXBwZXIuYWRkRXZlbnRMaXN0ZW5lciggJ3RvdWNoZW5kJywgb25Ub3VjaEVuZCwgZmFsc2UgKTsKCQkJfQoJCX0KCgkJaWYoIGNvbmZpZy5rZXlib2FyZCApIHsKCQkJZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lciggJ2tleWRvd24nLCBvbkRvY3VtZW50S2V5RG93biwgZmFsc2UgKTsKCQkJZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lciggJ2tleXByZXNzJywgb25Eb2N1bWVudEtleVByZXNzLCBmYWxzZSApOwoJCX0KCgkJaWYoIGNvbmZpZy5wcm9ncmVzcyAmJiBkb20ucHJvZ3Jlc3MgKSB7CgkJCWRvbS5wcm9ncmVzcy5hZGRFdmVudExpc3RlbmVyKCAnY2xpY2snLCBvblByb2dyZXNzQ2xpY2tlZCwgZmFsc2UgKTsKCQl9CgoJCWRvbS5wYXVzZU92ZXJsYXkuYWRkRXZlbnRMaXN0ZW5lciggJ2NsaWNrJywgcmVzdW1lLCBmYWxzZSApOwoKCQlpZiggY29uZmlnLmZvY3VzQm9keU9uUGFnZVZpc2liaWxpdHlDaGFuZ2UgKSB7CgkJCXZhciB2aXNpYmlsaXR5Q2hhbmdlOwoKCQkJaWYoICdoaWRkZW4nIGluIGRvY3VtZW50ICkgewoJCQkJdmlzaWJpbGl0eUNoYW5nZSA9ICd2aXNpYmlsaXR5Y2hhbmdlJzsKCQkJfQoJCQllbHNlIGlmKCAnbXNIaWRkZW4nIGluIGRvY3VtZW50ICkgewoJCQkJdmlzaWJpbGl0eUNoYW5nZSA9ICdtc3Zpc2liaWxpdHljaGFuZ2UnOwoJCQl9CgkJCWVsc2UgaWYoICd3ZWJraXRIaWRkZW4nIGluIGRvY3VtZW50ICkgewoJCQkJdmlzaWJpbGl0eUNoYW5nZSA9ICd3ZWJraXR2aXNpYmlsaXR5Y2hhbmdlJzsKCQkJfQoKCQkJaWYoIHZpc2liaWxpdHlDaGFuZ2UgKSB7CgkJCQlkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCB2aXNpYmlsaXR5Q2hhbmdlLCBvblBhZ2VWaXNpYmlsaXR5Q2hhbmdlLCBmYWxzZSApOwoJCQl9CgkJfQoKCQkvLyBMaXN0ZW4gdG8gYm90aCB0b3VjaCBhbmQgY2xpY2sgZXZlbnRzLCBpbiBjYXNlIHRoZSBkZXZpY2UKCQkvLyBzdXBwb3J0cyBib3RoCgkJdmFyIHBvaW50ZXJFdmVudHMgPSBbICd0b3VjaHN0YXJ0JywgJ2NsaWNrJyBdOwoKCQkvLyBPbmx5IHN1cHBvcnQgdG91Y2ggZm9yIEFuZHJvaWQsIGZpeGVzIGRvdWJsZSBuYXZpZ2F0aW9ucyBpbgoJCS8vIHN0b2NrIGJyb3dzZXIKCQlpZiggVUEubWF0Y2goIC9hbmRyb2lkL2dpICkgKSB7CgkJCXBvaW50ZXJFdmVudHMgPSBbICd0b3VjaHN0YXJ0JyBdOwoJCX0KCgkJcG9pbnRlckV2ZW50cy5mb3JFYWNoKCBmdW5jdGlvbiggZXZlbnROYW1lICkgewoJCQlkb20uY29udHJvbHNMZWZ0LmZvckVhY2goIGZ1bmN0aW9uKCBlbCApIHsgZWwuYWRkRXZlbnRMaXN0ZW5lciggZXZlbnROYW1lLCBvbk5hdmlnYXRlTGVmdENsaWNrZWQsIGZhbHNlICk7IH0gKTsKCQkJZG9tLmNvbnRyb2xzUmlnaHQuZm9yRWFjaCggZnVuY3Rpb24oIGVsICkgeyBlbC5hZGRFdmVudExpc3RlbmVyKCBldmVudE5hbWUsIG9uTmF2aWdhdGVSaWdodENsaWNrZWQsIGZhbHNlICk7IH0gKTsKCQkJZG9tLmNvbnRyb2xzVXAuZm9yRWFjaCggZnVuY3Rpb24oIGVsICkgeyBlbC5hZGRFdmVudExpc3RlbmVyKCBldmVudE5hbWUsIG9uTmF2aWdhdGVVcENsaWNrZWQsIGZhbHNlICk7IH0gKTsKCQkJZG9tLmNvbnRyb2xzRG93bi5mb3JFYWNoKCBmdW5jdGlvbiggZWwgKSB7IGVsLmFkZEV2ZW50TGlzdGVuZXIoIGV2ZW50TmFtZSwgb25OYXZpZ2F0ZURvd25DbGlja2VkLCBmYWxzZSApOyB9ICk7CgkJCWRvbS5jb250cm9sc1ByZXYuZm9yRWFjaCggZnVuY3Rpb24oIGVsICkgeyBlbC5hZGRFdmVudExpc3RlbmVyKCBldmVudE5hbWUsIG9uTmF2aWdhdGVQcmV2Q2xpY2tlZCwgZmFsc2UgKTsgfSApOwoJCQlkb20uY29udHJvbHNOZXh0LmZvckVhY2goIGZ1bmN0aW9uKCBlbCApIHsgZWwuYWRkRXZlbnRMaXN0ZW5lciggZXZlbnROYW1lLCBvbk5hdmlnYXRlTmV4dENsaWNrZWQsIGZhbHNlICk7IH0gKTsKCQl9ICk7CgoJfQoKCS8qKgoJICogVW5iaW5kcyBhbGwgZXZlbnQgbGlzdGVuZXJzLgoJICovCglmdW5jdGlvbiByZW1vdmVFdmVudExpc3RlbmVycygpIHsKCgkJZXZlbnRzQXJlQm91bmQgPSBmYWxzZTsKCgkJZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lciggJ2tleWRvd24nLCBvbkRvY3VtZW50S2V5RG93biwgZmFsc2UgKTsKCQlkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCAna2V5cHJlc3MnLCBvbkRvY3VtZW50S2V5UHJlc3MsIGZhbHNlICk7CgkJd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoICdoYXNoY2hhbmdlJywgb25XaW5kb3dIYXNoQ2hhbmdlLCBmYWxzZSApOwoJCXdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCAncmVzaXplJywgb25XaW5kb3dSZXNpemUsIGZhbHNlICk7CgoJCWRvbS53cmFwcGVyLnJlbW92ZUV2ZW50TGlzdGVuZXIoICdwb2ludGVyZG93bicsIG9uUG9pbnRlckRvd24sIGZhbHNlICk7CgkJZG9tLndyYXBwZXIucmVtb3ZlRXZlbnRMaXN0ZW5lciggJ3BvaW50ZXJtb3ZlJywgb25Qb2ludGVyTW92ZSwgZmFsc2UgKTsKCQlkb20ud3JhcHBlci5yZW1vdmVFdmVudExpc3RlbmVyKCAncG9pbnRlcnVwJywgb25Qb2ludGVyVXAsIGZhbHNlICk7CgoJCWRvbS53cmFwcGVyLnJlbW92ZUV2ZW50TGlzdGVuZXIoICdNU1BvaW50ZXJEb3duJywgb25Qb2ludGVyRG93biwgZmFsc2UgKTsKCQlkb20ud3JhcHBlci5yZW1vdmVFdmVudExpc3RlbmVyKCAnTVNQb2ludGVyTW92ZScsIG9uUG9pbnRlck1vdmUsIGZhbHNlICk7CgkJZG9tLndyYXBwZXIucmVtb3ZlRXZlbnRMaXN0ZW5lciggJ01TUG9pbnRlclVwJywgb25Qb2ludGVyVXAsIGZhbHNlICk7CgoJCWRvbS53cmFwcGVyLnJlbW92ZUV2ZW50TGlzdGVuZXIoICd0b3VjaHN0YXJ0Jywgb25Ub3VjaFN0YXJ0LCBmYWxzZSApOwoJCWRvbS53cmFwcGVyLnJlbW92ZUV2ZW50TGlzdGVuZXIoICd0b3VjaG1vdmUnLCBvblRvdWNoTW92ZSwgZmFsc2UgKTsKCQlkb20ud3JhcHBlci5yZW1vdmVFdmVudExpc3RlbmVyKCAndG91Y2hlbmQnLCBvblRvdWNoRW5kLCBmYWxzZSApOwoKCQlkb20ucGF1c2VPdmVybGF5LnJlbW92ZUV2ZW50TGlzdGVuZXIoICdjbGljaycsIHJlc3VtZSwgZmFsc2UgKTsKCgkJaWYgKCBjb25maWcucHJvZ3Jlc3MgJiYgZG9tLnByb2dyZXNzICkgewoJCQlkb20ucHJvZ3Jlc3MucmVtb3ZlRXZlbnRMaXN0ZW5lciggJ2NsaWNrJywgb25Qcm9ncmVzc0NsaWNrZWQsIGZhbHNlICk7CgkJfQoKCQlbICd0b3VjaHN0YXJ0JywgJ2NsaWNrJyBdLmZvckVhY2goIGZ1bmN0aW9uKCBldmVudE5hbWUgKSB7CgkJCWRvbS5jb250cm9sc0xlZnQuZm9yRWFjaCggZnVuY3Rpb24oIGVsICkgeyBlbC5yZW1vdmVFdmVudExpc3RlbmVyKCBldmVudE5hbWUsIG9uTmF2aWdhdGVMZWZ0Q2xpY2tlZCwgZmFsc2UgKTsgfSApOwoJCQlkb20uY29udHJvbHNSaWdodC5mb3JFYWNoKCBmdW5jdGlvbiggZWwgKSB7IGVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoIGV2ZW50TmFtZSwgb25OYXZpZ2F0ZVJpZ2h0Q2xpY2tlZCwgZmFsc2UgKTsgfSApOwoJCQlkb20uY29udHJvbHNVcC5mb3JFYWNoKCBmdW5jdGlvbiggZWwgKSB7IGVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoIGV2ZW50TmFtZSwgb25OYXZpZ2F0ZVVwQ2xpY2tlZCwgZmFsc2UgKTsgfSApOwoJCQlkb20uY29udHJvbHNEb3duLmZvckVhY2goIGZ1bmN0aW9uKCBlbCApIHsgZWwucmVtb3ZlRXZlbnRMaXN0ZW5lciggZXZlbnROYW1lLCBvbk5hdmlnYXRlRG93bkNsaWNrZWQsIGZhbHNlICk7IH0gKTsKCQkJZG9tLmNvbnRyb2xzUHJldi5mb3JFYWNoKCBmdW5jdGlvbiggZWwgKSB7IGVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoIGV2ZW50TmFtZSwgb25OYXZpZ2F0ZVByZXZDbGlja2VkLCBmYWxzZSApOyB9ICk7CgkJCWRvbS5jb250cm9sc05leHQuZm9yRWFjaCggZnVuY3Rpb24oIGVsICkgeyBlbC5yZW1vdmVFdmVudExpc3RlbmVyKCBldmVudE5hbWUsIG9uTmF2aWdhdGVOZXh0Q2xpY2tlZCwgZmFsc2UgKTsgfSApOwoJCX0gKTsKCgl9CgoJLyoqCgkgKiBSZWdpc3RlcnMgYSBuZXcgcGx1Z2luIHdpdGggdGhpcyByZXZlYWwuanMgaW5zdGFuY2UuCgkgKgoJICogcmV2ZWFsLmpzIHdhaXRzIGZvciBhbGwgcmVnaXNlcmVkIHBsdWdpbnMgdG8gaW5pdGlhbGl6ZQoJICogYmVmb3JlIGNvbnNpZGVyaW5nIGl0c2VsZiByZWFkeSwgYXMgbG9uZyBhcyB0aGUgcGx1Z2luCgkgKiBpcyByZWdpc3RlcmVkIGJlZm9yZSBjYWxsaW5nIGBSZXZlYWwuaW5pdGlhbGl6ZSgpYC4KCSAqLwoJZnVuY3Rpb24gcmVnaXN0ZXJQbHVnaW4oIGlkLCBwbHVnaW4gKSB7CgoJCWlmKCBwbHVnaW5zW2lkXSA9PT0gdW5kZWZpbmVkICkgewoJCQlwbHVnaW5zW2lkXSA9IHBsdWdpbjsKCgkJCS8vIElmIGEgcGx1Z2luIGlzIHJlZ2lzdGVyZWQgYWZ0ZXIgcmV2ZWFsLmpzIGlzIGxvYWRlZCwKCQkJLy8gaW5pdGlhbGl6ZSBpdCByaWdodCBhd2F5CgkJCWlmKCBsb2FkZWQgJiYgdHlwZW9mIHBsdWdpbi5pbml0ID09PSAnZnVuY3Rpb24nICkgewoJCQkJcGx1Z2luLmluaXQoKTsKCQkJfQoJCX0KCQllbHNlIHsKCQkJY29uc29sZS53YXJuKCAncmV2ZWFsLmpzOiAiJysgaWQgKyciIHBsdWdpbiBoYXMgYWxyZWFkeSBiZWVuIHJlZ2lzdGVyZWQnICk7CgkJfQoKCX0KCgkvKioKCSAqIENoZWNrcyBpZiBhIHNwZWNpZmljIHBsdWdpbiBoYXMgYmVlbiByZWdpc3RlcmVkLgoJICoKCSAqIEBwYXJhbSB7U3RyaW5nfSBpZCBVbmlxdWUgcGx1Z2luIGlkZW50aWZpZXIKCSAqLwoJZnVuY3Rpb24gaGFzUGx1Z2luKCBpZCApIHsKCgkJcmV0dXJuICEhcGx1Z2luc1tpZF07CgoJfQoKCS8qKgoJICogUmV0dXJucyB0aGUgc3BlY2lmaWMgcGx1Z2luIGluc3RhbmNlLCBpZiBhIHBsdWdpbgoJICogd2l0aCB0aGUgZ2l2ZW4gSUQgaGFzIGJlZW4gcmVnaXN0ZXJlZC4KCSAqCgkgKiBAcGFyYW0ge1N0cmluZ30gaWQgVW5pcXVlIHBsdWdpbiBpZGVudGlmaWVyCgkgKi8KCWZ1bmN0aW9uIGdldFBsdWdpbiggaWQgKSB7CgoJCXJldHVybiBwbHVnaW5zW2lkXTsKCgl9CgoJLyoqCgkgKiBBZGQgYSBjdXN0b20ga2V5IGJpbmRpbmcgd2l0aCBvcHRpb25hbCBkZXNjcmlwdGlvbiB0bwoJICogYmUgYWRkZWQgdG8gdGhlIGhlbHAgc2NyZWVuLgoJICovCglmdW5jdGlvbiBhZGRLZXlCaW5kaW5nKCBiaW5kaW5nLCBjYWxsYmFjayApIHsKCgkJaWYoIHR5cGVvZiBiaW5kaW5nID09PSAnb2JqZWN0JyAmJiBiaW5kaW5nLmtleUNvZGUgKSB7CgkJCXJlZ2lzdGVyZWRLZXlCaW5kaW5nc1tiaW5kaW5nLmtleUNvZGVdID0gewoJCQkJY2FsbGJhY2s6IGNhbGxiYWNrLAoJCQkJa2V5OiBiaW5kaW5nLmtleSwKCQkJCWRlc2NyaXB0aW9uOiBiaW5kaW5nLmRlc2NyaXB0aW9uCgkJCX07CgkJfQoJCWVsc2UgewoJCQlyZWdpc3RlcmVkS2V5QmluZGluZ3NbYmluZGluZ10gPSB7CgkJCQljYWxsYmFjazogY2FsbGJhY2ssCgkJCQlrZXk6IG51bGwsCgkJCQlkZXNjcmlwdGlvbjogbnVsbAoJCQl9OwoJCX0KCgl9CgoJLyoqCgkgKiBSZW1vdmVzIHRoZSBzcGVjaWZpZWQgY3VzdG9tIGtleSBiaW5kaW5nLgoJICovCglmdW5jdGlvbiByZW1vdmVLZXlCaW5kaW5nKCBrZXlDb2RlICkgewoKCQlkZWxldGUgcmVnaXN0ZXJlZEtleUJpbmRpbmdzW2tleUNvZGVdOwoKCX0KCgkvKioKCSAqIEV4dGVuZCBvYmplY3QgYSB3aXRoIHRoZSBwcm9wZXJ0aWVzIG9mIG9iamVjdCBiLgoJICogSWYgdGhlcmUncyBhIGNvbmZsaWN0LCBvYmplY3QgYiB0YWtlcyBwcmVjZWRlbmNlLgoJICoKCSAqIEBwYXJhbSB7b2JqZWN0fSBhCgkgKiBAcGFyYW0ge29iamVjdH0gYgoJICovCglmdW5jdGlvbiBleHRlbmQoIGEsIGIgKSB7CgoJCWZvciggdmFyIGkgaW4gYiApIHsKCQkJYVsgaSBdID0gYlsgaSBdOwoJCX0KCgkJcmV0dXJuIGE7CgoJfQoKCS8qKgoJICogQ29udmVydHMgdGhlIHRhcmdldCBvYmplY3QgdG8gYW4gYXJyYXkuCgkgKgoJICogQHBhcmFtIHtvYmplY3R9IG8KCSAqIEByZXR1cm4ge29iamVjdFtdfQoJICovCglmdW5jdGlvbiB0b0FycmF5KCBvICkgewoKCQlyZXR1cm4gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoIG8gKTsKCgl9CgoJLyoqCgkgKiBVdGlsaXR5IGZvciBkZXNlcmlhbGl6aW5nIGEgdmFsdWUuCgkgKgoJICogQHBhcmFtIHsqfSB2YWx1ZQoJICogQHJldHVybiB7Kn0KCSAqLwoJZnVuY3Rpb24gZGVzZXJpYWxpemUoIHZhbHVlICkgewoKCQlpZiggdHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJyApIHsKCQkJaWYoIHZhbHVlID09PSAnbnVsbCcgKSByZXR1cm4gbnVsbDsKCQkJZWxzZSBpZiggdmFsdWUgPT09ICd0cnVlJyApIHJldHVybiB0cnVlOwoJCQllbHNlIGlmKCB2YWx1ZSA9PT0gJ2ZhbHNlJyApIHJldHVybiBmYWxzZTsKCQkJZWxzZSBpZiggdmFsdWUubWF0Y2goIC9eLT9bXGRcLl0rJC8gKSApIHJldHVybiBwYXJzZUZsb2F0KCB2YWx1ZSApOwoJCX0KCgkJcmV0dXJuIHZhbHVlOwoKCX0KCgkvKioKCSAqIE1lYXN1cmVzIHRoZSBkaXN0YW5jZSBpbiBwaXhlbHMgYmV0d2VlbiBwb2ludCBhCgkgKiBhbmQgcG9pbnQgYi4KCSAqCgkgKiBAcGFyYW0ge29iamVjdH0gYSBwb2ludCB3aXRoIHgveSBwcm9wZXJ0aWVzCgkgKiBAcGFyYW0ge29iamVjdH0gYiBwb2ludCB3aXRoIHgveSBwcm9wZXJ0aWVzCgkgKgoJICogQHJldHVybiB7bnVtYmVyfQoJICovCglmdW5jdGlvbiBkaXN0YW5jZUJldHdlZW4oIGEsIGIgKSB7CgoJCXZhciBkeCA9IGEueCAtIGIueCwKCQkJZHkgPSBhLnkgLSBiLnk7CgoJCXJldHVybiBNYXRoLnNxcnQoIGR4KmR4ICsgZHkqZHkgKTsKCgl9CgoJLyoqCgkgKiBBcHBsaWVzIGEgQ1NTIHRyYW5zZm9ybSB0byB0aGUgdGFyZ2V0IGVsZW1lbnQuCgkgKgoJICogQHBhcmFtIHtIVE1MRWxlbWVudH0gZWxlbWVudAoJICogQHBhcmFtIHtzdHJpbmd9IHRyYW5zZm9ybQoJICovCglmdW5jdGlvbiB0cmFuc2Zvcm1FbGVtZW50KCBlbGVtZW50LCB0cmFuc2Zvcm0gKSB7CgoJCWVsZW1lbnQuc3R5bGUuV2Via2l0VHJhbnNmb3JtID0gdHJhbnNmb3JtOwoJCWVsZW1lbnQuc3R5bGUuTW96VHJhbnNmb3JtID0gdHJhbnNmb3JtOwoJCWVsZW1lbnQuc3R5bGUubXNUcmFuc2Zvcm0gPSB0cmFuc2Zvcm07CgkJZWxlbWVudC5zdHlsZS50cmFuc2Zvcm0gPSB0cmFuc2Zvcm07CgoJfQoKCS8qKgoJICogQXBwbGllcyBDU1MgdHJhbnNmb3JtcyB0byB0aGUgc2xpZGVzIGNvbnRhaW5lci4gVGhlIGNvbnRhaW5lcgoJICogaXMgdHJhbnNmb3JtZWQgZnJvbSB0d28gc2VwYXJhdGUgc291cmNlczogbGF5b3V0IGFuZCB0aGUgb3ZlcnZpZXcKCSAqIG1vZGUuCgkgKgoJICogQHBhcmFtIHtvYmplY3R9IHRyYW5zZm9ybXMKCSAqLwoJZnVuY3Rpb24gdHJhbnNmb3JtU2xpZGVzKCB0cmFuc2Zvcm1zICkgewoKCQkvLyBQaWNrIHVwIG5ldyB0cmFuc2Zvcm1zIGZyb20gYXJndW1lbnRzCgkJaWYoIHR5cGVvZiB0cmFuc2Zvcm1zLmxheW91dCA9PT0gJ3N0cmluZycgKSBzbGlkZXNUcmFuc2Zvcm0ubGF5b3V0ID0gdHJhbnNmb3Jtcy5sYXlvdXQ7CgkJaWYoIHR5cGVvZiB0cmFuc2Zvcm1zLm92ZXJ2aWV3ID09PSAnc3RyaW5nJyApIHNsaWRlc1RyYW5zZm9ybS5vdmVydmlldyA9IHRyYW5zZm9ybXMub3ZlcnZpZXc7CgoJCS8vIEFwcGx5IHRoZSB0cmFuc2Zvcm1zIHRvIHRoZSBzbGlkZXMgY29udGFpbmVyCgkJaWYoIHNsaWRlc1RyYW5zZm9ybS5sYXlvdXQgKSB7CgkJCXRyYW5zZm9ybUVsZW1lbnQoIGRvbS5zbGlkZXMsIHNsaWRlc1RyYW5zZm9ybS5sYXlvdXQgKyAnICcgKyBzbGlkZXNUcmFuc2Zvcm0ub3ZlcnZpZXcgKTsKCQl9CgkJZWxzZSB7CgkJCXRyYW5zZm9ybUVsZW1lbnQoIGRvbS5zbGlkZXMsIHNsaWRlc1RyYW5zZm9ybS5vdmVydmlldyApOwoJCX0KCgl9CgoJLyoqCgkgKiBJbmplY3RzIHRoZSBnaXZlbiBDU1Mgc3R5bGVzIGludG8gdGhlIERPTS4KCSAqCgkgKiBAcGFyYW0ge3N0cmluZ30gdmFsdWUKCSAqLwoJZnVuY3Rpb24gaW5qZWN0U3R5bGVTaGVldCggdmFsdWUgKSB7CgoJCXZhciB0YWcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCAnc3R5bGUnICk7CgkJdGFnLnR5cGUgPSAndGV4dC9jc3MnOwoJCWlmKCB0YWcuc3R5bGVTaGVldCApIHsKCQkJdGFnLnN0eWxlU2hlZXQuY3NzVGV4dCA9IHZhbHVlOwoJCX0KCQllbHNlIHsKCQkJdGFnLmFwcGVuZENoaWxkKCBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSggdmFsdWUgKSApOwoJCX0KCQlkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSggJ2hlYWQnIClbMF0uYXBwZW5kQ2hpbGQoIHRhZyApOwoKCX0KCgkvKioKCSAqIEZpbmQgdGhlIGNsb3Nlc3QgcGFyZW50IHRoYXQgbWF0Y2hlcyB0aGUgZ2l2ZW4KCSAqIHNlbGVjdG9yLgoJICoKCSAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IHRhcmdldCBUaGUgY2hpbGQgZWxlbWVudAoJICogQHBhcmFtIHtTdHJpbmd9IHNlbGVjdG9yIFRoZSBDU1Mgc2VsZWN0b3IgdG8gbWF0Y2gKCSAqIHRoZSBwYXJlbnRzIGFnYWluc3QKCSAqCgkgKiBAcmV0dXJuIHtIVE1MRWxlbWVudH0gVGhlIG1hdGNoZWQgcGFyZW50IG9yIG51bGwKCSAqIGlmIG5vIG1hdGNoaW5nIHBhcmVudCB3YXMgZm91bmQKCSAqLwoJZnVuY3Rpb24gY2xvc2VzdFBhcmVudCggdGFyZ2V0LCBzZWxlY3RvciApIHsKCgkJdmFyIHBhcmVudCA9IHRhcmdldC5wYXJlbnROb2RlOwoKCQl3aGlsZSggcGFyZW50ICkgewoKCQkJLy8gVGhlcmUncyBzb21lIG92ZXJoZWFkIGRvaW5nIHRoaXMgZWFjaCB0aW1lLCB3ZSBkb24ndAoJCQkvLyB3YW50IHRvIHJld3JpdGUgdGhlIGVsZW1lbnQgcHJvdG90eXBlIGJ1dCBzaG91bGQgc3RpbGwKCQkJLy8gYmUgZW5vdWdoIHRvIGZlYXR1cmUgZGV0ZWN0IG9uY2UgYXQgc3RhcnR1cC4uLgoJCQl2YXIgbWF0Y2hlc01ldGhvZCA9IHBhcmVudC5tYXRjaGVzIHx8IHBhcmVudC5tYXRjaGVzU2VsZWN0b3IgfHwgcGFyZW50Lm1zTWF0Y2hlc1NlbGVjdG9yOwoKCQkJLy8gSWYgd2UgZmluZCBhIG1hdGNoLCB3ZSdyZSBhbGwgc2V0CgkJCWlmKCBtYXRjaGVzTWV0aG9kICYmIG1hdGNoZXNNZXRob2QuY2FsbCggcGFyZW50LCBzZWxlY3RvciApICkgewoJCQkJcmV0dXJuIHBhcmVudDsKCQkJfQoKCQkJLy8gS2VlcCBzZWFyY2hpbmcKCQkJcGFyZW50ID0gcGFyZW50LnBhcmVudE5vZGU7CgoJCX0KCgkJcmV0dXJuIG51bGw7CgoJfQoKCS8qKgoJICogQ29udmVydHMgdmFyaW91cyBjb2xvciBpbnB1dCBmb3JtYXRzIHRvIGFuIHtyOjAsZzowLGI6MH0gb2JqZWN0LgoJICoKCSAqIEBwYXJhbSB7c3RyaW5nfSBjb2xvciBUaGUgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIGEgY29sb3IKCSAqIEBleGFtcGxlCgkgKiBjb2xvclRvUmdiKCcjMDAwJyk7CgkgKiBAZXhhbXBsZQoJICogY29sb3JUb1JnYignIzAwMDAwMCcpOwoJICogQGV4YW1wbGUKCSAqIGNvbG9yVG9SZ2IoJ3JnYigwLDAsMCknKTsKCSAqIEBleGFtcGxlCgkgKiBjb2xvclRvUmdiKCdyZ2JhKDAsMCwwKScpOwoJICoKCSAqIEByZXR1cm4ge3tyOiBudW1iZXIsIGc6IG51bWJlciwgYjogbnVtYmVyLCBbYV06IG51bWJlcn18bnVsbH0KCSAqLwoJZnVuY3Rpb24gY29sb3JUb1JnYiggY29sb3IgKSB7CgoJCXZhciBoZXgzID0gY29sb3IubWF0Y2goIC9eIyhbMC05YS1mXXszfSkkL2kgKTsKCQlpZiggaGV4MyAmJiBoZXgzWzFdICkgewoJCQloZXgzID0gaGV4M1sxXTsKCQkJcmV0dXJuIHsKCQkJCXI6IHBhcnNlSW50KCBoZXgzLmNoYXJBdCggMCApLCAxNiApICogMHgxMSwKCQkJCWc6IHBhcnNlSW50KCBoZXgzLmNoYXJBdCggMSApLCAxNiApICogMHgxMSwKCQkJCWI6IHBhcnNlSW50KCBoZXgzLmNoYXJBdCggMiApLCAxNiApICogMHgxMQoJCQl9OwoJCX0KCgkJdmFyIGhleDYgPSBjb2xvci5tYXRjaCggL14jKFswLTlhLWZdezZ9KSQvaSApOwoJCWlmKCBoZXg2ICYmIGhleDZbMV0gKSB7CgkJCWhleDYgPSBoZXg2WzFdOwoJCQlyZXR1cm4gewoJCQkJcjogcGFyc2VJbnQoIGhleDYuc3Vic3RyKCAwLCAyICksIDE2ICksCgkJCQlnOiBwYXJzZUludCggaGV4Ni5zdWJzdHIoIDIsIDIgKSwgMTYgKSwKCQkJCWI6IHBhcnNlSW50KCBoZXg2LnN1YnN0ciggNCwgMiApLCAxNiApCgkJCX07CgkJfQoKCQl2YXIgcmdiID0gY29sb3IubWF0Y2goIC9ecmdiXHMqXChccyooXGQrKVxzKixccyooXGQrKVxzKixccyooXGQrKVxzKlwpJC9pICk7CgkJaWYoIHJnYiApIHsKCQkJcmV0dXJuIHsKCQkJCXI6IHBhcnNlSW50KCByZ2JbMV0sIDEwICksCgkJCQlnOiBwYXJzZUludCggcmdiWzJdLCAxMCApLAoJCQkJYjogcGFyc2VJbnQoIHJnYlszXSwgMTAgKQoJCQl9OwoJCX0KCgkJdmFyIHJnYmEgPSBjb2xvci5tYXRjaCggL15yZ2JhXHMqXChccyooXGQrKVxzKixccyooXGQrKVxzKixccyooXGQrKVxzKlwsXHMqKFtcZF0rfFtcZF0qLltcZF0rKVxzKlwpJC9pICk7CgkJaWYoIHJnYmEgKSB7CgkJCXJldHVybiB7CgkJCQlyOiBwYXJzZUludCggcmdiYVsxXSwgMTAgKSwKCQkJCWc6IHBhcnNlSW50KCByZ2JhWzJdLCAxMCApLAoJCQkJYjogcGFyc2VJbnQoIHJnYmFbM10sIDEwICksCgkJCQlhOiBwYXJzZUZsb2F0KCByZ2JhWzRdICkKCQkJfTsKCQl9CgoJCXJldHVybiBudWxsOwoKCX0KCgkvKioKCSAqIENhbGN1bGF0ZXMgYnJpZ2h0bmVzcyBvbiBhIHNjYWxlIG9mIDAtMjU1LgoJICoKCSAqIEBwYXJhbSB7c3RyaW5nfSBjb2xvciBTZWUgY29sb3JUb1JnYiBmb3Igc3VwcG9ydGVkIGZvcm1hdHMuCgkgKiBAc2VlIHtAbGluayBjb2xvclRvUmdifQoJICovCglmdW5jdGlvbiBjb2xvckJyaWdodG5lc3MoIGNvbG9yICkgewoKCQlpZiggdHlwZW9mIGNvbG9yID09PSAnc3RyaW5nJyApIGNvbG9yID0gY29sb3JUb1JnYiggY29sb3IgKTsKCgkJaWYoIGNvbG9yICkgewoJCQlyZXR1cm4gKCBjb2xvci5yICogMjk5ICsgY29sb3IuZyAqIDU4NyArIGNvbG9yLmIgKiAxMTQgKSAvIDEwMDA7CgkJfQoKCQlyZXR1cm4gbnVsbDsKCgl9CgoJLyoqCgkgKiBSZXR1cm5zIHRoZSByZW1haW5pbmcgaGVpZ2h0IHdpdGhpbiB0aGUgcGFyZW50IG9mIHRoZQoJICogdGFyZ2V0IGVsZW1lbnQuCgkgKgoJICogcmVtYWluaW5nIGhlaWdodCA9IFsgY29uZmlndXJlZCBwYXJlbnQgaGVpZ2h0IF0gLSBbIGN1cnJlbnQgcGFyZW50IGhlaWdodCBdCgkgKgoJICogQHBhcmFtIHtIVE1MRWxlbWVudH0gZWxlbWVudAoJICogQHBhcmFtIHtudW1iZXJ9IFtoZWlnaHRdCgkgKi8KCWZ1bmN0aW9uIGdldFJlbWFpbmluZ0hlaWdodCggZWxlbWVudCwgaGVpZ2h0ICkgewoKCQloZWlnaHQgPSBoZWlnaHQgfHwgMDsKCgkJaWYoIGVsZW1lbnQgKSB7CgkJCXZhciBuZXdIZWlnaHQsIG9sZEhlaWdodCA9IGVsZW1lbnQuc3R5bGUuaGVpZ2h0OwoKCQkJLy8gQ2hhbmdlIHRoZSAuc3RyZXRjaCBlbGVtZW50IGhlaWdodCB0byAwIGluIG9yZGVyIGZpbmQgdGhlIGhlaWdodCBvZiBhbGwKCQkJLy8gdGhlIG90aGVyIGVsZW1lbnRzCgkJCWVsZW1lbnQuc3R5bGUuaGVpZ2h0ID0gJzBweCc7CgoJCQkvLyBJbiBPdmVydmlldyBtb2RlLCB0aGUgcGFyZW50ICguc2xpZGUpIGhlaWdodCBpcyBzZXQgb2YgNzAwcHguCgkJCS8vIFJlc3RvcmUgaXQgdGVtcG9yYXJpbHkgdG8gaXRzIG5hdHVyYWwgaGVpZ2h0LgoJCQllbGVtZW50LnBhcmVudE5vZGUuc3R5bGUuaGVpZ2h0ID0gJ2F1dG8nOwoKCQkJbmV3SGVpZ2h0ID0gaGVpZ2h0IC0gZWxlbWVudC5wYXJlbnROb2RlLm9mZnNldEhlaWdodDsKCgkJCS8vIFJlc3RvcmUgdGhlIG9sZCBoZWlnaHQsIGp1c3QgaW4gY2FzZQoJCQllbGVtZW50LnN0eWxlLmhlaWdodCA9IG9sZEhlaWdodCArICdweCc7CgoJCQkvLyBDbGVhciB0aGUgcGFyZW50ICguc2xpZGUpIGhlaWdodC4gLnJlbW92ZVByb3BlcnR5IHdvcmtzIGluIElFOSsKCQkJZWxlbWVudC5wYXJlbnROb2RlLnN0eWxlLnJlbW92ZVByb3BlcnR5KCdoZWlnaHQnKTsKCgkJCXJldHVybiBuZXdIZWlnaHQ7CgkJfQoKCQlyZXR1cm4gaGVpZ2h0OwoKCX0KCgkvKioKCSAqIENoZWNrcyBpZiB0aGlzIGluc3RhbmNlIGlzIGJlaW5nIHVzZWQgdG8gcHJpbnQgYSBQREYuCgkgKi8KCWZ1bmN0aW9uIGlzUHJpbnRpbmdQREYoKSB7CgoJCXJldHVybiAoIC9wcmludC1wZGYvZ2kgKS50ZXN0KCB3aW5kb3cubG9jYXRpb24uc2VhcmNoICk7CgoJfQoKCS8qKgoJICogSGlkZXMgdGhlIGFkZHJlc3MgYmFyIGlmIHdlJ3JlIG9uIGEgbW9iaWxlIGRldmljZS4KCSAqLwoJZnVuY3Rpb24gaGlkZUFkZHJlc3NCYXIoKSB7CgoJCWlmKCBjb25maWcuaGlkZUFkZHJlc3NCYXIgJiYgaXNNb2JpbGVEZXZpY2UgKSB7CgkJCS8vIEV2ZW50cyB0aGF0IHNob3VsZCB0cmlnZ2VyIHRoZSBhZGRyZXNzIGJhciB0byBoaWRlCgkJCXdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCAnbG9hZCcsIHJlbW92ZUFkZHJlc3NCYXIsIGZhbHNlICk7CgkJCXdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCAnb3JpZW50YXRpb25jaGFuZ2UnLCByZW1vdmVBZGRyZXNzQmFyLCBmYWxzZSApOwoJCX0KCgl9CgoJLyoqCgkgKiBDYXVzZXMgdGhlIGFkZHJlc3MgYmFyIHRvIGhpZGUgb24gbW9iaWxlIGRldmljZXMsCgkgKiBtb3JlIHZlcnRpY2FsIHNwYWNlIGZ0dy4KCSAqLwoJZnVuY3Rpb24gcmVtb3ZlQWRkcmVzc0JhcigpIHsKCgkJc2V0VGltZW91dCggZnVuY3Rpb24oKSB7CgkJCXdpbmRvdy5zY3JvbGxUbyggMCwgMSApOwoJCX0sIDEwICk7CgoJfQoKCS8qKgoJICogRGlzcGF0Y2hlcyBhbiBldmVudCBvZiB0aGUgc3BlY2lmaWVkIHR5cGUgZnJvbSB0aGUKCSAqIHJldmVhbCBET00gZWxlbWVudC4KCSAqLwoJZnVuY3Rpb24gZGlzcGF0Y2hFdmVudCggdHlwZSwgYXJncyApIHsKCgkJdmFyIGV2ZW50ID0gZG9jdW1lbnQuY3JlYXRlRXZlbnQoICdIVE1MRXZlbnRzJywgMSwgMiApOwoJCWV2ZW50LmluaXRFdmVudCggdHlwZSwgdHJ1ZSwgdHJ1ZSApOwoJCWV4dGVuZCggZXZlbnQsIGFyZ3MgKTsKCQlkb20ud3JhcHBlci5kaXNwYXRjaEV2ZW50KCBldmVudCApOwoKCQkvLyBJZiB3ZSdyZSBpbiBhbiBpZnJhbWUsIHBvc3QgZWFjaCByZXZlYWwuanMgZXZlbnQgdG8gdGhlCgkJLy8gcGFyZW50IHdpbmRvdy4gVXNlZCBieSB0aGUgbm90ZXMgcGx1Z2luCgkJZGlzcGF0Y2hQb3N0TWVzc2FnZSggdHlwZSApOwoKCX0KCgkvKioKCSAqIERpc3BhdGNoZWQgYSBwb3N0TWVzc2FnZSBvZiB0aGUgZ2l2ZW4gdHlwZSBmcm9tIG91ciB3aW5kb3cuCgkgKi8KCWZ1bmN0aW9uIGRpc3BhdGNoUG9zdE1lc3NhZ2UoIHR5cGUsIGRhdGEgKSB7CgoJCWlmKCBjb25maWcucG9zdE1lc3NhZ2VFdmVudHMgJiYgd2luZG93LnBhcmVudCAhPT0gd2luZG93LnNlbGYgKSB7CgkJCXZhciBtZXNzYWdlID0gewoJCQkJbmFtZXNwYWNlOiAncmV2ZWFsJywKCQkJCWV2ZW50TmFtZTogdHlwZSwKCQkJCXN0YXRlOiBnZXRTdGF0ZSgpCgkJCX07CgoJCQlleHRlbmQoIG1lc3NhZ2UsIGRhdGEgKTsKCgkJCXdpbmRvdy5wYXJlbnQucG9zdE1lc3NhZ2UoIEpTT04uc3RyaW5naWZ5KCBtZXNzYWdlICksICcqJyApOwoJCX0KCgl9CgoJLyoqCgkgKiBXcmFwIGFsbCBsaW5rcyBpbiAzRCBnb29kbmVzcy4KCSAqLwoJZnVuY3Rpb24gZW5hYmxlUm9sbGluZ0xpbmtzKCkgewoKCQlpZiggZmVhdHVyZXMudHJhbnNmb3JtczNkICYmICEoICdtc1BlcnNwZWN0aXZlJyBpbiBkb2N1bWVudC5ib2R5LnN0eWxlICkgKSB7CgkJCXZhciBhbmNob3JzID0gZG9tLndyYXBwZXIucXVlcnlTZWxlY3RvckFsbCggU0xJREVTX1NFTEVDVE9SICsgJyBhJyApOwoKCQkJZm9yKCB2YXIgaSA9IDAsIGxlbiA9IGFuY2hvcnMubGVuZ3RoOyBpIDwgbGVuOyBpKysgKSB7CgkJCQl2YXIgYW5jaG9yID0gYW5jaG9yc1tpXTsKCgkJCQlpZiggYW5jaG9yLnRleHRDb250ZW50ICYmICFhbmNob3IucXVlcnlTZWxlY3RvciggJyonICkgJiYgKCAhYW5jaG9yLmNsYXNzTmFtZSB8fCAhYW5jaG9yLmNsYXNzTGlzdC5jb250YWlucyggYW5jaG9yLCAncm9sbCcgKSApICkgewoJCQkJCXZhciBzcGFuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpOwoJCQkJCXNwYW4uc2V0QXR0cmlidXRlKCdkYXRhLXRpdGxlJywgYW5jaG9yLnRleHQpOwoJCQkJCXNwYW4uaW5uZXJIVE1MID0gYW5jaG9yLmlubmVySFRNTDsKCgkJCQkJYW5jaG9yLmNsYXNzTGlzdC5hZGQoICdyb2xsJyApOwoJCQkJCWFuY2hvci5pbm5lckhUTUwgPSAnJzsKCQkJCQlhbmNob3IuYXBwZW5kQ2hpbGQoc3Bhbik7CgkJCQl9CgkJCX0KCQl9CgoJfQoKCS8qKgoJICogVW53cmFwIGFsbCAzRCBsaW5rcy4KCSAqLwoJZnVuY3Rpb24gZGlzYWJsZVJvbGxpbmdMaW5rcygpIHsKCgkJdmFyIGFuY2hvcnMgPSBkb20ud3JhcHBlci5xdWVyeVNlbGVjdG9yQWxsKCBTTElERVNfU0VMRUNUT1IgKyAnIGEucm9sbCcgKTsKCgkJZm9yKCB2YXIgaSA9IDAsIGxlbiA9IGFuY2hvcnMubGVuZ3RoOyBpIDwgbGVuOyBpKysgKSB7CgkJCXZhciBhbmNob3IgPSBhbmNob3JzW2ldOwoJCQl2YXIgc3BhbiA9IGFuY2hvci5xdWVyeVNlbGVjdG9yKCAnc3BhbicgKTsKCgkJCWlmKCBzcGFuICkgewoJCQkJYW5jaG9yLmNsYXNzTGlzdC5yZW1vdmUoICdyb2xsJyApOwoJCQkJYW5jaG9yLmlubmVySFRNTCA9IHNwYW4uaW5uZXJIVE1MOwoJCQl9CgkJfQoKCX0KCgkvKioKCSAqIEJpbmQgcHJldmlldyBmcmFtZSBsaW5rcy4KCSAqCgkgKiBAcGFyYW0ge3N0cmluZ30gW3NlbGVjdG9yPWFdIC0gc2VsZWN0b3IgZm9yIGFuY2hvcnMKCSAqLwoJZnVuY3Rpb24gZW5hYmxlUHJldmlld0xpbmtzKCBzZWxlY3RvciApIHsKCgkJdmFyIGFuY2hvcnMgPSB0b0FycmF5KCBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCBzZWxlY3RvciA/IHNlbGVjdG9yIDogJ2EnICkgKTsKCgkJYW5jaG9ycy5mb3JFYWNoKCBmdW5jdGlvbiggZWxlbWVudCApIHsKCQkJaWYoIC9eKGh0dHB8d3d3KS9naS50ZXN0KCBlbGVtZW50LmdldEF0dHJpYnV0ZSggJ2hyZWYnICkgKSApIHsKCQkJCWVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lciggJ2NsaWNrJywgb25QcmV2aWV3TGlua0NsaWNrZWQsIGZhbHNlICk7CgkJCX0KCQl9ICk7CgoJfQoKCS8qKgoJICogVW5iaW5kIHByZXZpZXcgZnJhbWUgbGlua3MuCgkgKi8KCWZ1bmN0aW9uIGRpc2FibGVQcmV2aWV3TGlua3MoIHNlbGVjdG9yICkgewoKCQl2YXIgYW5jaG9ycyA9IHRvQXJyYXkoIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoIHNlbGVjdG9yID8gc2VsZWN0b3IgOiAnYScgKSApOwoKCQlhbmNob3JzLmZvckVhY2goIGZ1bmN0aW9uKCBlbGVtZW50ICkgewoJCQlpZiggL14oaHR0cHx3d3cpL2dpLnRlc3QoIGVsZW1lbnQuZ2V0QXR0cmlidXRlKCAnaHJlZicgKSApICkgewoJCQkJZWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCAnY2xpY2snLCBvblByZXZpZXdMaW5rQ2xpY2tlZCwgZmFsc2UgKTsKCQkJfQoJCX0gKTsKCgl9CgoJLyoqCgkgKiBPcGVucyBhIHByZXZpZXcgd2luZG93IGZvciB0aGUgdGFyZ2V0IFVSTC4KCSAqCgkgKiBAcGFyYW0ge3N0cmluZ30gdXJsIC0gdXJsIGZvciBwcmV2aWV3IGlmcmFtZSBzcmMKCSAqLwoJZnVuY3Rpb24gc2hvd1ByZXZpZXcoIHVybCApIHsKCgkJY2xvc2VPdmVybGF5KCk7CgoJCWRvbS5vdmVybGF5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggJ2RpdicgKTsKCQlkb20ub3ZlcmxheS5jbGFzc0xpc3QuYWRkKCAnb3ZlcmxheScgKTsKCQlkb20ub3ZlcmxheS5jbGFzc0xpc3QuYWRkKCAnb3ZlcmxheS1wcmV2aWV3JyApOwoJCWRvbS53cmFwcGVyLmFwcGVuZENoaWxkKCBkb20ub3ZlcmxheSApOwoKCQlkb20ub3ZlcmxheS5pbm5lckhUTUwgPSBbCgkJCSc8aGVhZGVyPicsCgkJCQknPGEgY2xhc3M9ImNsb3NlIiBocmVmPSIjIj48c3BhbiBjbGFzcz0iaWNvbiI+PC9zcGFuPjwvYT4nLAoJCQkJJzxhIGNsYXNzPSJleHRlcm5hbCIgaHJlZj0iJysgdXJsICsnIiB0YXJnZXQ9Il9ibGFuayI+PHNwYW4gY2xhc3M9Imljb24iPjwvc3Bhbj48L2E+JywKCQkJJzwvaGVhZGVyPicsCgkJCSc8ZGl2IGNsYXNzPSJzcGlubmVyIj48L2Rpdj4nLAoJCQknPGRpdiBjbGFzcz0idmlld3BvcnQiPicsCgkJCQknPGlmcmFtZSBzcmM9IicrIHVybCArJyI+PC9pZnJhbWU+JywKCQkJCSc8c21hbGwgY2xhc3M9InZpZXdwb3J0LWlubmVyIj4nLAoJCQkJCSc8c3BhbiBjbGFzcz0ieC1mcmFtZS1lcnJvciI+VW5hYmxlIHRvIGxvYWQgaWZyYW1lLiBUaGlzIGlzIGxpa2VseSBkdWUgdG8gdGhlIHNpdGVcJ3MgcG9saWN5ICh4LWZyYW1lLW9wdGlvbnMpLjwvc3Bhbj4nLAoJCQkJJzwvc21hbGw+JywKCQkJJzwvZGl2PicKCQldLmpvaW4oJycpOwoKCQlkb20ub3ZlcmxheS5xdWVyeVNlbGVjdG9yKCAnaWZyYW1lJyApLmFkZEV2ZW50TGlzdGVuZXIoICdsb2FkJywgZnVuY3Rpb24oIGV2ZW50ICkgewoJCQlkb20ub3ZlcmxheS5jbGFzc0xpc3QuYWRkKCAnbG9hZGVkJyApOwoJCX0sIGZhbHNlICk7CgoJCWRvbS5vdmVybGF5LnF1ZXJ5U2VsZWN0b3IoICcuY2xvc2UnICkuYWRkRXZlbnRMaXN0ZW5lciggJ2NsaWNrJywgZnVuY3Rpb24oIGV2ZW50ICkgewoJCQljbG9zZU92ZXJsYXkoKTsKCQkJZXZlbnQucHJldmVudERlZmF1bHQoKTsKCQl9LCBmYWxzZSApOwoKCQlkb20ub3ZlcmxheS5xdWVyeVNlbGVjdG9yKCAnLmV4dGVybmFsJyApLmFkZEV2ZW50TGlzdGVuZXIoICdjbGljaycsIGZ1bmN0aW9uKCBldmVudCApIHsKCQkJY2xvc2VPdmVybGF5KCk7CgkJfSwgZmFsc2UgKTsKCgkJc2V0VGltZW91dCggZnVuY3Rpb24oKSB7CgkJCWRvbS5vdmVybGF5LmNsYXNzTGlzdC5hZGQoICd2aXNpYmxlJyApOwoJCX0sIDEgKTsKCgl9CgoJLyoqCgkgKiBPcGVuIG9yIGNsb3NlIGhlbHAgb3ZlcmxheSB3aW5kb3cuCgkgKgoJICogQHBhcmFtIHtCb29sZWFufSBbb3ZlcnJpZGVdIEZsYWcgd2hpY2ggb3ZlcnJpZGVzIHRoZQoJICogdG9nZ2xlIGxvZ2ljIGFuZCBmb3JjaWJseSBzZXRzIHRoZSBkZXNpcmVkIHN0YXRlLiBUcnVlIG1lYW5zCgkgKiBoZWxwIGlzIG9wZW4sIGZhbHNlIG1lYW5zIGl0J3MgY2xvc2VkLgoJICovCglmdW5jdGlvbiB0b2dnbGVIZWxwKCBvdmVycmlkZSApewoKCQlpZiggdHlwZW9mIG92ZXJyaWRlID09PSAnYm9vbGVhbicgKSB7CgkJCW92ZXJyaWRlID8gc2hvd0hlbHAoKSA6IGNsb3NlT3ZlcmxheSgpOwoJCX0KCQllbHNlIHsKCQkJaWYoIGRvbS5vdmVybGF5ICkgewoJCQkJY2xvc2VPdmVybGF5KCk7CgkJCX0KCQkJZWxzZSB7CgkJCQlzaG93SGVscCgpOwoJCQl9CgkJfQoJfQoKCS8qKgoJICogT3BlbnMgYW4gb3ZlcmxheSB3aW5kb3cgd2l0aCBoZWxwIG1hdGVyaWFsLgoJICovCglmdW5jdGlvbiBzaG93SGVscCgpIHsKCgkJaWYoIGNvbmZpZy5oZWxwICkgewoKCQkJY2xvc2VPdmVybGF5KCk7CgoJCQlkb20ub3ZlcmxheSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoICdkaXYnICk7CgkJCWRvbS5vdmVybGF5LmNsYXNzTGlzdC5hZGQoICdvdmVybGF5JyApOwoJCQlkb20ub3ZlcmxheS5jbGFzc0xpc3QuYWRkKCAnb3ZlcmxheS1oZWxwJyApOwoJCQlkb20ud3JhcHBlci5hcHBlbmRDaGlsZCggZG9tLm92ZXJsYXkgKTsKCgkJCXZhciBodG1sID0gJzxwIGNsYXNzPSJ0aXRsZSI+S2V5Ym9hcmQgU2hvcnRjdXRzPC9wPjxici8+JzsKCgkJCWh0bWwgKz0gJzx0YWJsZT48dGg+S0VZPC90aD48dGg+QUNUSU9OPC90aD4nOwoJCQlmb3IoIHZhciBrZXkgaW4ga2V5Ym9hcmRTaG9ydGN1dHMgKSB7CgkJCQlodG1sICs9ICc8dHI+PHRkPicgKyBrZXkgKyAnPC90ZD48dGQ+JyArIGtleWJvYXJkU2hvcnRjdXRzWyBrZXkgXSArICc8L3RkPjwvdHI+JzsKCQkJfQoKCQkJLy8gQWRkIGN1c3RvbSBrZXkgYmluZGluZ3MgdGhhdCBoYXZlIGFzc29jaWF0ZWQgZGVzY3JpcHRpb25zCgkJCWZvciggdmFyIGJpbmRpbmcgaW4gcmVnaXN0ZXJlZEtleUJpbmRpbmdzICkgewoJCQkJaWYoIHJlZ2lzdGVyZWRLZXlCaW5kaW5nc1tiaW5kaW5nXS5rZXkgJiYgcmVnaXN0ZXJlZEtleUJpbmRpbmdzW2JpbmRpbmddLmRlc2NyaXB0aW9uICkgewoJCQkJCWh0bWwgKz0gJzx0cj48dGQ+JyArIHJlZ2lzdGVyZWRLZXlCaW5kaW5nc1tiaW5kaW5nXS5rZXkgKyAnPC90ZD48dGQ+JyArIHJlZ2lzdGVyZWRLZXlCaW5kaW5nc1tiaW5kaW5nXS5kZXNjcmlwdGlvbiArICc8L3RkPjwvdHI+JzsKCQkJCX0KCQkJfQoKCQkJaHRtbCArPSAnPC90YWJsZT4nOwoKCQkJZG9tLm92ZXJsYXkuaW5uZXJIVE1MID0gWwoJCQkJJzxoZWFkZXI+JywKCQkJCQknPGEgY2xhc3M9ImNsb3NlIiBocmVmPSIjIj48c3BhbiBjbGFzcz0iaWNvbiI+PC9zcGFuPjwvYT4nLAoJCQkJJzwvaGVhZGVyPicsCgkJCQknPGRpdiBjbGFzcz0idmlld3BvcnQiPicsCgkJCQkJJzxkaXYgY2xhc3M9InZpZXdwb3J0LWlubmVyIj4nKyBodG1sICsnPC9kaXY+JywKCQkJCSc8L2Rpdj4nCgkJCV0uam9pbignJyk7CgoJCQlkb20ub3ZlcmxheS5xdWVyeVNlbGVjdG9yKCAnLmNsb3NlJyApLmFkZEV2ZW50TGlzdGVuZXIoICdjbGljaycsIGZ1bmN0aW9uKCBldmVudCApIHsKCQkJCWNsb3NlT3ZlcmxheSgpOwoJCQkJZXZlbnQucHJldmVudERlZmF1bHQoKTsKCQkJfSwgZmFsc2UgKTsKCgkJCXNldFRpbWVvdXQoIGZ1bmN0aW9uKCkgewoJCQkJZG9tLm92ZXJsYXkuY2xhc3NMaXN0LmFkZCggJ3Zpc2libGUnICk7CgkJCX0sIDEgKTsKCgkJfQoKCX0KCgkvKioKCSAqIENsb3NlcyBhbnkgY3VycmVudGx5IG9wZW4gb3ZlcmxheS4KCSAqLwoJZnVuY3Rpb24gY2xvc2VPdmVybGF5KCkgewoKCQlpZiggZG9tLm92ZXJsYXkgKSB7CgkJCWRvbS5vdmVybGF5LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoIGRvbS5vdmVybGF5ICk7CgkJCWRvbS5vdmVybGF5ID0gbnVsbDsKCQl9CgoJfQoKCS8qKgoJICogQXBwbGllcyBKYXZhU2NyaXB0LWNvbnRyb2xsZWQgbGF5b3V0IHJ1bGVzIHRvIHRoZQoJICogcHJlc2VudGF0aW9uLgoJICovCglmdW5jdGlvbiBsYXlvdXQoKSB7CgoJCWlmKCBkb20ud3JhcHBlciAmJiAhaXNQcmludGluZ1BERigpICkgewoKCQkJaWYoICFjb25maWcuZGlzYWJsZUxheW91dCApIHsKCgkJCQkvLyBPbiBzb21lIG1vYmlsZSBkZXZpY2VzICcxMDB2aCcgaXMgdGFsbGVyIHRoYW4gdGhlIHZpc2libGUKCQkJCS8vIHZpZXdwb3J0IHdoaWNoIGxlYWRzIHRvIHBhcnQgb2YgdGhlIHByZXNlbnRhdGlvbiBiZWluZwoJCQkJLy8gY3V0IG9mZi4gVG8gd29yayBhcm91bmQgdGhpcyB3ZSBkZWZpbmUgb3VyIG93biAnLS12aCcgY3VzdG9tCgkJCQkvLyBwcm9wZXJ0eSB3aGVyZSAxMDB4IGFkZHMgdXAgdG8gdGhlIGNvcnJlY3QgaGVpZ2h0LgoJCQkJLy8KCQkJCS8vIGh0dHBzOi8vY3NzLXRyaWNrcy5jb20vdGhlLXRyaWNrLXRvLXZpZXdwb3J0LXVuaXRzLW9uLW1vYmlsZS8KCQkJCWlmKCBpc01vYmlsZURldmljZSApIHsKCQkJCQlkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc3R5bGUuc2V0UHJvcGVydHkoICctLXZoJywgKCB3aW5kb3cuaW5uZXJIZWlnaHQgKiAwLjAxICkgKyAncHgnICk7CgkJCQl9CgoJCQkJdmFyIHNpemUgPSBnZXRDb21wdXRlZFNsaWRlU2l6ZSgpOwoKCQkJCXZhciBvbGRTY2FsZSA9IHNjYWxlOwoKCQkJCS8vIExheW91dCB0aGUgY29udGVudHMgb2YgdGhlIHNsaWRlcwoJCQkJbGF5b3V0U2xpZGVDb250ZW50cyggY29uZmlnLndpZHRoLCBjb25maWcuaGVpZ2h0ICk7CgoJCQkJZG9tLnNsaWRlcy5zdHlsZS53aWR0aCA9IHNpemUud2lkdGggKyAncHgnOwoJCQkJZG9tLnNsaWRlcy5zdHlsZS5oZWlnaHQgPSBzaXplLmhlaWdodCArICdweCc7CgoJCQkJLy8gRGV0ZXJtaW5lIHNjYWxlIG9mIGNvbnRlbnQgdG8gZml0IHdpdGhpbiBhdmFpbGFibGUgc3BhY2UKCQkJCXNjYWxlID0gTWF0aC5taW4oIHNpemUucHJlc2VudGF0aW9uV2lkdGggLyBzaXplLndpZHRoLCBzaXplLnByZXNlbnRhdGlvbkhlaWdodCAvIHNpemUuaGVpZ2h0ICk7CgoJCQkJLy8gUmVzcGVjdCBtYXgvbWluIHNjYWxlIHNldHRpbmdzCgkJCQlzY2FsZSA9IE1hdGgubWF4KCBzY2FsZSwgY29uZmlnLm1pblNjYWxlICk7CgkJCQlzY2FsZSA9IE1hdGgubWluKCBzY2FsZSwgY29uZmlnLm1heFNjYWxlICk7CgoJCQkJLy8gRG9uJ3QgYXBwbHkgYW55IHNjYWxpbmcgc3R5bGVzIGlmIHNjYWxlIGlzIDEKCQkJCWlmKCBzY2FsZSA9PT0gMSApIHsKCQkJCQlkb20uc2xpZGVzLnN0eWxlLnpvb20gPSAnJzsKCQkJCQlkb20uc2xpZGVzLnN0eWxlLmxlZnQgPSAnJzsKCQkJCQlkb20uc2xpZGVzLnN0eWxlLnRvcCA9ICcnOwoJCQkJCWRvbS5zbGlkZXMuc3R5bGUuYm90dG9tID0gJyc7CgkJCQkJZG9tLnNsaWRlcy5zdHlsZS5yaWdodCA9ICcnOwoJCQkJCXRyYW5zZm9ybVNsaWRlcyggeyBsYXlvdXQ6ICcnIH0gKTsKCQkJCX0KCQkJCWVsc2UgewoJCQkJCS8vIFpvb20gU2NhbGluZwoJCQkJCS8vIENvbnRlbnQgcmVtYWlucyBjcmlzcCBubyBtYXR0ZXIgaG93IG11Y2ggd2Ugc2NhbGUuIFNpZGUKCQkJCQkvLyBlZmZlY3RzIGFyZSBtaW5vciBkaWZmZXJlbmNlcyBpbiB0ZXh0IGxheW91dCBhbmQgaWZyYW1lCgkJCQkJLy8gdmlld3BvcnRzIGNoYW5naW5nIHNpemUuIEEgMjAweDIwMCBpZnJhbWUgdmlld3BvcnQgaW4gYQoJCQkJCS8vIDJ4IHpvb21lZCBwcmVzZW50YXRpb24gZW5kcyB1cCBoYXZpbmcgYSA0MDB4NDAwIHZpZXdwb3J0LgoJCQkJCWlmKCBzY2FsZSA+IDEgJiYgZmVhdHVyZXMuem9vbSAmJiB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyA8IDIgKSB7CgkJCQkJCWRvbS5zbGlkZXMuc3R5bGUuem9vbSA9IHNjYWxlOwoJCQkJCQlkb20uc2xpZGVzLnN0eWxlLmxlZnQgPSAnJzsKCQkJCQkJZG9tLnNsaWRlcy5zdHlsZS50b3AgPSAnJzsKCQkJCQkJZG9tLnNsaWRlcy5zdHlsZS5ib3R0b20gPSAnJzsKCQkJCQkJZG9tLnNsaWRlcy5zdHlsZS5yaWdodCA9ICcnOwoJCQkJCQl0cmFuc2Zvcm1TbGlkZXMoIHsgbGF5b3V0OiAnJyB9ICk7CgkJCQkJfQoJCQkJCS8vIFRyYW5zZm9ybSBTY2FsaW5nCgkJCQkJLy8gQ29udGVudCBsYXlvdXQgcmVtYWlucyB0aGUgZXhhY3Qgc2FtZSB3aGVuIHNjYWxlZCB1cC4KCQkJCQkvLyBTaWRlIGVmZmVjdCBpcyBjb250ZW50IGJlY29taW5nIGJsdXJyZWQsIGVzcGVjaWFsbHkgd2l0aAoJCQkJCS8vIGhpZ2ggc2NhbGUgdmFsdWVzIG9uIGxkcGkgc2NyZWVucy4KCQkJCQllbHNlIHsKCQkJCQkJZG9tLnNsaWRlcy5zdHlsZS56b29tID0gJyc7CgkJCQkJCWRvbS5zbGlkZXMuc3R5bGUubGVmdCA9ICc1MCUnOwoJCQkJCQlkb20uc2xpZGVzLnN0eWxlLnRvcCA9ICc1MCUnOwoJCQkJCQlkb20uc2xpZGVzLnN0eWxlLmJvdHRvbSA9ICdhdXRvJzsKCQkJCQkJZG9tLnNsaWRlcy5zdHlsZS5yaWdodCA9ICdhdXRvJzsKCQkJCQkJdHJhbnNmb3JtU2xpZGVzKCB7IGxheW91dDogJ3RyYW5zbGF0ZSgtNTAlLCAtNTAlKSBzY2FsZSgnKyBzY2FsZSArJyknIH0gKTsKCQkJCQl9CgkJCQl9CgoJCQkJLy8gU2VsZWN0IGFsbCBzbGlkZXMsIHZlcnRpY2FsIGFuZCBob3Jpem9udGFsCgkJCQl2YXIgc2xpZGVzID0gdG9BcnJheSggZG9tLndyYXBwZXIucXVlcnlTZWxlY3RvckFsbCggU0xJREVTX1NFTEVDVE9SICkgKTsKCgkJCQlmb3IoIHZhciBpID0gMCwgbGVuID0gc2xpZGVzLmxlbmd0aDsgaSA8IGxlbjsgaSsrICkgewoJCQkJCXZhciBzbGlkZSA9IHNsaWRlc1sgaSBdOwoKCQkJCQkvLyBEb24ndCBib3RoZXIgdXBkYXRpbmcgaW52aXNpYmxlIHNsaWRlcwoJCQkJCWlmKCBzbGlkZS5zdHlsZS5kaXNwbGF5ID09PSAnbm9uZScgKSB7CgkJCQkJCWNvbnRpbnVlOwoJCQkJCX0KCgkJCQkJaWYoIGNvbmZpZy5jZW50ZXIgfHwgc2xpZGUuY2xhc3NMaXN0LmNvbnRhaW5zKCAnY2VudGVyJyApICkgewoJCQkJCQkvLyBWZXJ0aWNhbCBzdGFja3MgYXJlIG5vdCBjZW50cmVkIHNpbmNlIHRoZWlyIHNlY3Rpb24KCQkJCQkJLy8gY2hpbGRyZW4gd2lsbCBiZQoJCQkJCQlpZiggc2xpZGUuY2xhc3NMaXN0LmNvbnRhaW5zKCAnc3RhY2snICkgKSB7CgkJCQkJCQlzbGlkZS5zdHlsZS50b3AgPSAwOwoJCQkJCQl9CgkJCQkJCWVsc2UgewoJCQkJCQkJc2xpZGUuc3R5bGUudG9wID0gTWF0aC5tYXgoICggc2l6ZS5oZWlnaHQgLSBzbGlkZS5zY3JvbGxIZWlnaHQgKSAvIDIsIDAgKSArICdweCc7CgkJCQkJCX0KCQkJCQl9CgkJCQkJZWxzZSB7CgkJCQkJCXNsaWRlLnN0eWxlLnRvcCA9ICcnOwoJCQkJCX0KCgkJCQl9CgoJCQkJaWYoIG9sZFNjYWxlICE9PSBzY2FsZSApIHsKCQkJCQlkaXNwYXRjaEV2ZW50KCAncmVzaXplJywgewoJCQkJCQknb2xkU2NhbGUnOiBvbGRTY2FsZSwKCQkJCQkJJ3NjYWxlJzogc2NhbGUsCgkJCQkJCSdzaXplJzogc2l6ZQoJCQkJCX0gKTsKCQkJCX0KCQkJfQoKCQkJdXBkYXRlUHJvZ3Jlc3MoKTsKCQkJdXBkYXRlUGFyYWxsYXgoKTsKCgkJCWlmKCBpc092ZXJ2aWV3KCkgKSB7CgkJCQl1cGRhdGVPdmVydmlldygpOwoJCQl9CgoJCX0KCgl9CgoJLyoqCgkgKiBBcHBsaWVzIGxheW91dCBsb2dpYyB0byB0aGUgY29udGVudHMgb2YgYWxsIHNsaWRlcyBpbgoJICogdGhlIHByZXNlbnRhdGlvbi4KCSAqCgkgKiBAcGFyYW0ge3N0cmluZ3xudW1iZXJ9IHdpZHRoCgkgKiBAcGFyYW0ge3N0cmluZ3xudW1iZXJ9IGhlaWdodAoJICovCglmdW5jdGlvbiBsYXlvdXRTbGlkZUNvbnRlbnRzKCB3aWR0aCwgaGVpZ2h0ICkgewoKCQkvLyBIYW5kbGUgc2l6aW5nIG9mIGVsZW1lbnRzIHdpdGggdGhlICdzdHJldGNoJyBjbGFzcwoJCXRvQXJyYXkoIGRvbS5zbGlkZXMucXVlcnlTZWxlY3RvckFsbCggJ3NlY3Rpb24gPiAuc3RyZXRjaCcgKSApLmZvckVhY2goIGZ1bmN0aW9uKCBlbGVtZW50ICkgewoKCQkJLy8gRGV0ZXJtaW5lIGhvdyBtdWNoIHZlcnRpY2FsIHNwYWNlIHdlIGNhbiB1c2UKCQkJdmFyIHJlbWFpbmluZ0hlaWdodCA9IGdldFJlbWFpbmluZ0hlaWdodCggZWxlbWVudCwgaGVpZ2h0ICk7CgoJCQkvLyBDb25zaWRlciB0aGUgYXNwZWN0IHJhdGlvIG9mIG1lZGlhIGVsZW1lbnRzCgkJCWlmKCAvKGltZ3x2aWRlbykvZ2kudGVzdCggZWxlbWVudC5ub2RlTmFtZSApICkgewoJCQkJdmFyIG53ID0gZWxlbWVudC5uYXR1cmFsV2lkdGggfHwgZWxlbWVudC52aWRlb1dpZHRoLAoJCQkJCW5oID0gZWxlbWVudC5uYXR1cmFsSGVpZ2h0IHx8IGVsZW1lbnQudmlkZW9IZWlnaHQ7CgoJCQkJdmFyIGVzID0gTWF0aC5taW4oIHdpZHRoIC8gbncsIHJlbWFpbmluZ0hlaWdodCAvIG5oICk7CgoJCQkJZWxlbWVudC5zdHlsZS53aWR0aCA9ICggbncgKiBlcyApICsgJ3B4JzsKCQkJCWVsZW1lbnQuc3R5bGUuaGVpZ2h0ID0gKCBuaCAqIGVzICkgKyAncHgnOwoKCQkJfQoJCQllbHNlIHsKCQkJCWVsZW1lbnQuc3R5bGUud2lkdGggPSB3aWR0aCArICdweCc7CgkJCQllbGVtZW50LnN0eWxlLmhlaWdodCA9IHJlbWFpbmluZ0hlaWdodCArICdweCc7CgkJCX0KCgkJfSApOwoKCX0KCgkvKioKCSAqIENhbGN1bGF0ZXMgdGhlIGNvbXB1dGVkIHBpeGVsIHNpemUgb2Ygb3VyIHNsaWRlcy4gVGhlc2UKCSAqIHZhbHVlcyBhcmUgYmFzZWQgb24gdGhlIHdpZHRoIGFuZCBoZWlnaHQgY29uZmlndXJhdGlvbgoJICogb3B0aW9ucy4KCSAqCgkgKiBAcGFyYW0ge251bWJlcn0gW3ByZXNlbnRhdGlvbldpZHRoPWRvbS53cmFwcGVyLm9mZnNldFdpZHRoXQoJICogQHBhcmFtIHtudW1iZXJ9IFtwcmVzZW50YXRpb25IZWlnaHQ9ZG9tLndyYXBwZXIub2Zmc2V0SGVpZ2h0XQoJICovCglmdW5jdGlvbiBnZXRDb21wdXRlZFNsaWRlU2l6ZSggcHJlc2VudGF0aW9uV2lkdGgsIHByZXNlbnRhdGlvbkhlaWdodCApIHsKCgkJdmFyIHNpemUgPSB7CgkJCS8vIFNsaWRlIHNpemUKCQkJd2lkdGg6IGNvbmZpZy53aWR0aCwKCQkJaGVpZ2h0OiBjb25maWcuaGVpZ2h0LAoKCQkJLy8gUHJlc2VudGF0aW9uIHNpemUKCQkJcHJlc2VudGF0aW9uV2lkdGg6IHByZXNlbnRhdGlvbldpZHRoIHx8IGRvbS53cmFwcGVyLm9mZnNldFdpZHRoLAoJCQlwcmVzZW50YXRpb25IZWlnaHQ6IHByZXNlbnRhdGlvbkhlaWdodCB8fCBkb20ud3JhcHBlci5vZmZzZXRIZWlnaHQKCQl9OwoKCQkvLyBSZWR1Y2UgYXZhaWxhYmxlIHNwYWNlIGJ5IG1hcmdpbgoJCXNpemUucHJlc2VudGF0aW9uV2lkdGggLT0gKCBzaXplLnByZXNlbnRhdGlvbldpZHRoICogY29uZmlnLm1hcmdpbiApOwoJCXNpemUucHJlc2VudGF0aW9uSGVpZ2h0IC09ICggc2l6ZS5wcmVzZW50YXRpb25IZWlnaHQgKiBjb25maWcubWFyZ2luICk7CgoJCS8vIFNsaWRlIHdpZHRoIG1heSBiZSBhIHBlcmNlbnRhZ2Ugb2YgYXZhaWxhYmxlIHdpZHRoCgkJaWYoIHR5cGVvZiBzaXplLndpZHRoID09PSAnc3RyaW5nJyAmJiAvJSQvLnRlc3QoIHNpemUud2lkdGggKSApIHsKCQkJc2l6ZS53aWR0aCA9IHBhcnNlSW50KCBzaXplLndpZHRoLCAxMCApIC8gMTAwICogc2l6ZS5wcmVzZW50YXRpb25XaWR0aDsKCQl9CgoJCS8vIFNsaWRlIGhlaWdodCBtYXkgYmUgYSBwZXJjZW50YWdlIG9mIGF2YWlsYWJsZSBoZWlnaHQKCQlpZiggdHlwZW9mIHNpemUuaGVpZ2h0ID09PSAnc3RyaW5nJyAmJiAvJSQvLnRlc3QoIHNpemUuaGVpZ2h0ICkgKSB7CgkJCXNpemUuaGVpZ2h0ID0gcGFyc2VJbnQoIHNpemUuaGVpZ2h0LCAxMCApIC8gMTAwICogc2l6ZS5wcmVzZW50YXRpb25IZWlnaHQ7CgkJfQoKCQlyZXR1cm4gc2l6ZTsKCgl9CgoJLyoqCgkgKiBTdG9yZXMgdGhlIHZlcnRpY2FsIGluZGV4IG9mIGEgc3RhY2sgc28gdGhhdCB0aGUgc2FtZQoJICogdmVydGljYWwgc2xpZGUgY2FuIGJlIHNlbGVjdGVkIHdoZW4gbmF2aWdhdGluZyB0byBhbmQKCSAqIGZyb20gdGhlIHN0YWNrLgoJICoKCSAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IHN0YWNrIFRoZSB2ZXJ0aWNhbCBzdGFjayBlbGVtZW50CgkgKiBAcGFyYW0ge3N0cmluZ3xudW1iZXJ9IFt2PTBdIEluZGV4IHRvIG1lbW9yaXplCgkgKi8KCWZ1bmN0aW9uIHNldFByZXZpb3VzVmVydGljYWxJbmRleCggc3RhY2ssIHYgKSB7CgoJCWlmKCB0eXBlb2Ygc3RhY2sgPT09ICdvYmplY3QnICYmIHR5cGVvZiBzdGFjay5zZXRBdHRyaWJ1dGUgPT09ICdmdW5jdGlvbicgKSB7CgkJCXN0YWNrLnNldEF0dHJpYnV0ZSggJ2RhdGEtcHJldmlvdXMtaW5kZXh2JywgdiB8fCAwICk7CgkJfQoKCX0KCgkvKioKCSAqIFJldHJpZXZlcyB0aGUgdmVydGljYWwgaW5kZXggd2hpY2ggd2FzIHN0b3JlZCB1c2luZwoJICogI3NldFByZXZpb3VzVmVydGljYWxJbmRleCgpIG9yIDAgaWYgbm8gcHJldmlvdXMgaW5kZXgKCSAqIGV4aXN0cy4KCSAqCgkgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBzdGFjayBUaGUgdmVydGljYWwgc3RhY2sgZWxlbWVudAoJICovCglmdW5jdGlvbiBnZXRQcmV2aW91c1ZlcnRpY2FsSW5kZXgoIHN0YWNrICkgewoKCQlpZiggdHlwZW9mIHN0YWNrID09PSAnb2JqZWN0JyAmJiB0eXBlb2Ygc3RhY2suc2V0QXR0cmlidXRlID09PSAnZnVuY3Rpb24nICYmIHN0YWNrLmNsYXNzTGlzdC5jb250YWlucyggJ3N0YWNrJyApICkgewoJCQkvLyBQcmVmZXIgbWFudWFsbHkgZGVmaW5lZCBzdGFydC1pbmRleHYKCQkJdmFyIGF0dHJpYnV0ZU5hbWUgPSBzdGFjay5oYXNBdHRyaWJ1dGUoICdkYXRhLXN0YXJ0LWluZGV4dicgKSA/ICdkYXRhLXN0YXJ0LWluZGV4dicgOiAnZGF0YS1wcmV2aW91cy1pbmRleHYnOwoKCQkJcmV0dXJuIHBhcnNlSW50KCBzdGFjay5nZXRBdHRyaWJ1dGUoIGF0dHJpYnV0ZU5hbWUgKSB8fCAwLCAxMCApOwoJCX0KCgkJcmV0dXJuIDA7CgoJfQoKCS8qKgoJICogRGlzcGxheXMgdGhlIG92ZXJ2aWV3IG9mIHNsaWRlcyAocXVpY2sgbmF2KSBieSBzY2FsaW5nCgkgKiBkb3duIGFuZCBhcnJhbmdpbmcgYWxsIHNsaWRlIGVsZW1lbnRzLgoJICovCglmdW5jdGlvbiBhY3RpdmF0ZU92ZXJ2aWV3KCkgewoKCQkvLyBPbmx5IHByb2NlZWQgaWYgZW5hYmxlZCBpbiBjb25maWcKCQlpZiggY29uZmlnLm92ZXJ2aWV3ICYmICFpc092ZXJ2aWV3KCkgKSB7CgoJCQlvdmVydmlldyA9IHRydWU7CgoJCQlkb20ud3JhcHBlci5jbGFzc0xpc3QuYWRkKCAnb3ZlcnZpZXcnICk7CgkJCWRvbS53cmFwcGVyLmNsYXNzTGlzdC5yZW1vdmUoICdvdmVydmlldy1kZWFjdGl2YXRpbmcnICk7CgoJCQlpZiggZmVhdHVyZXMub3ZlcnZpZXdUcmFuc2l0aW9ucyApIHsKCQkJCXNldFRpbWVvdXQoIGZ1bmN0aW9uKCkgewoJCQkJCWRvbS53cmFwcGVyLmNsYXNzTGlzdC5hZGQoICdvdmVydmlldy1hbmltYXRlZCcgKTsKCQkJCX0sIDEgKTsKCQkJfQoKCQkJLy8gRG9uJ3QgYXV0by1zbGlkZSB3aGlsZSBpbiBvdmVydmlldyBtb2RlCgkJCWNhbmNlbEF1dG9TbGlkZSgpOwoKCQkJLy8gTW92ZSB0aGUgYmFja2dyb3VuZHMgZWxlbWVudCBpbnRvIHRoZSBzbGlkZSBjb250YWluZXIgdG8KCQkJLy8gdGhhdCB0aGUgc2FtZSBzY2FsaW5nIGlzIGFwcGxpZWQKCQkJZG9tLnNsaWRlcy5hcHBlbmRDaGlsZCggZG9tLmJhY2tncm91bmQgKTsKCgkJCS8vIENsaWNraW5nIG9uIGFuIG92ZXJ2aWV3IHNsaWRlIG5hdmlnYXRlcyB0byBpdAoJCQl0b0FycmF5KCBkb20ud3JhcHBlci5xdWVyeVNlbGVjdG9yQWxsKCBTTElERVNfU0VMRUNUT1IgKSApLmZvckVhY2goIGZ1bmN0aW9uKCBzbGlkZSApIHsKCQkJCWlmKCAhc2xpZGUuY2xhc3NMaXN0LmNvbnRhaW5zKCAnc3RhY2snICkgKSB7CgkJCQkJc2xpZGUuYWRkRXZlbnRMaXN0ZW5lciggJ2NsaWNrJywgb25PdmVydmlld1NsaWRlQ2xpY2tlZCwgdHJ1ZSApOwoJCQkJfQoJCQl9ICk7CgoJCQkvLyBDYWxjdWxhdGUgc2xpZGUgc2l6ZXMKCQkJdmFyIG1hcmdpbiA9IDcwOwoJCQl2YXIgc2xpZGVTaXplID0gZ2V0Q29tcHV0ZWRTbGlkZVNpemUoKTsKCQkJb3ZlcnZpZXdTbGlkZVdpZHRoID0gc2xpZGVTaXplLndpZHRoICsgbWFyZ2luOwoJCQlvdmVydmlld1NsaWRlSGVpZ2h0ID0gc2xpZGVTaXplLmhlaWdodCArIG1hcmdpbjsKCgkJCS8vIFJldmVyc2UgaW4gUlRMIG1vZGUKCQkJaWYoIGNvbmZpZy5ydGwgKSB7CgkJCQlvdmVydmlld1NsaWRlV2lkdGggPSAtb3ZlcnZpZXdTbGlkZVdpZHRoOwoJCQl9CgoJCQl1cGRhdGVTbGlkZXNWaXNpYmlsaXR5KCk7CgkJCWxheW91dE92ZXJ2aWV3KCk7CgkJCXVwZGF0ZU92ZXJ2aWV3KCk7CgoJCQlsYXlvdXQoKTsKCgkJCS8vIE5vdGlmeSBvYnNlcnZlcnMgb2YgdGhlIG92ZXJ2aWV3IHNob3dpbmcKCQkJZGlzcGF0Y2hFdmVudCggJ292ZXJ2aWV3c2hvd24nLCB7CgkJCQknaW5kZXhoJzogaW5kZXhoLAoJCQkJJ2luZGV4dic6IGluZGV4diwKCQkJCSdjdXJyZW50U2xpZGUnOiBjdXJyZW50U2xpZGUKCQkJfSApOwoKCQl9CgoJfQoKCS8qKgoJICogVXNlcyBDU1MgdHJhbnNmb3JtcyB0byBwb3NpdGlvbiBhbGwgc2xpZGVzIGluIGEgZ3JpZCBmb3IKCSAqIGRpc3BsYXkgaW5zaWRlIG9mIHRoZSBvdmVydmlldyBtb2RlLgoJICovCglmdW5jdGlvbiBsYXlvdXRPdmVydmlldygpIHsKCgkJLy8gTGF5b3V0IHNsaWRlcwoJCXRvQXJyYXkoIGRvbS53cmFwcGVyLnF1ZXJ5U2VsZWN0b3JBbGwoIEhPUklaT05UQUxfU0xJREVTX1NFTEVDVE9SICkgKS5mb3JFYWNoKCBmdW5jdGlvbiggaHNsaWRlLCBoICkgewoJCQloc2xpZGUuc2V0QXR0cmlidXRlKCAnZGF0YS1pbmRleC1oJywgaCApOwoJCQl0cmFuc2Zvcm1FbGVtZW50KCBoc2xpZGUsICd0cmFuc2xhdGUzZCgnICsgKCBoICogb3ZlcnZpZXdTbGlkZVdpZHRoICkgKyAncHgsIDAsIDApJyApOwoKCQkJaWYoIGhzbGlkZS5jbGFzc0xpc3QuY29udGFpbnMoICdzdGFjaycgKSApIHsKCgkJCQl0b0FycmF5KCBoc2xpZGUucXVlcnlTZWxlY3RvckFsbCggJ3NlY3Rpb24nICkgKS5mb3JFYWNoKCBmdW5jdGlvbiggdnNsaWRlLCB2ICkgewoJCQkJCXZzbGlkZS5zZXRBdHRyaWJ1dGUoICdkYXRhLWluZGV4LWgnLCBoICk7CgkJCQkJdnNsaWRlLnNldEF0dHJpYnV0ZSggJ2RhdGEtaW5kZXgtdicsIHYgKTsKCgkJCQkJdHJhbnNmb3JtRWxlbWVudCggdnNsaWRlLCAndHJhbnNsYXRlM2QoMCwgJyArICggdiAqIG92ZXJ2aWV3U2xpZGVIZWlnaHQgKSArICdweCwgMCknICk7CgkJCQl9ICk7CgoJCQl9CgkJfSApOwoKCQkvLyBMYXlvdXQgc2xpZGUgYmFja2dyb3VuZHMKCQl0b0FycmF5KCBkb20uYmFja2dyb3VuZC5jaGlsZE5vZGVzICkuZm9yRWFjaCggZnVuY3Rpb24oIGhiYWNrZ3JvdW5kLCBoICkgewoJCQl0cmFuc2Zvcm1FbGVtZW50KCBoYmFja2dyb3VuZCwgJ3RyYW5zbGF0ZTNkKCcgKyAoIGggKiBvdmVydmlld1NsaWRlV2lkdGggKSArICdweCwgMCwgMCknICk7CgoJCQl0b0FycmF5KCBoYmFja2dyb3VuZC5xdWVyeVNlbGVjdG9yQWxsKCAnLnNsaWRlLWJhY2tncm91bmQnICkgKS5mb3JFYWNoKCBmdW5jdGlvbiggdmJhY2tncm91bmQsIHYgKSB7CgkJCQl0cmFuc2Zvcm1FbGVtZW50KCB2YmFja2dyb3VuZCwgJ3RyYW5zbGF0ZTNkKDAsICcgKyAoIHYgKiBvdmVydmlld1NsaWRlSGVpZ2h0ICkgKyAncHgsIDApJyApOwoJCQl9ICk7CgkJfSApOwoKCX0KCgkvKioKCSAqIE1vdmVzIHRoZSBvdmVydmlldyB2aWV3cG9ydCB0byB0aGUgY3VycmVudCBzbGlkZXMuCgkgKiBDYWxsZWQgZWFjaCB0aW1lIHRoZSBjdXJyZW50IHNsaWRlIGNoYW5nZXMuCgkgKi8KCWZ1bmN0aW9uIHVwZGF0ZU92ZXJ2aWV3KCkgewoKCQl2YXIgdm1pbiA9IE1hdGgubWluKCB3aW5kb3cuaW5uZXJXaWR0aCwgd2luZG93LmlubmVySGVpZ2h0ICk7CgkJdmFyIHNjYWxlID0gTWF0aC5tYXgoIHZtaW4gLyA1LCAxNTAgKSAvIHZtaW47CgoJCXRyYW5zZm9ybVNsaWRlcyggewoJCQlvdmVydmlldzogWwoJCQkJJ3NjYWxlKCcrIHNjYWxlICsnKScsCgkJCQkndHJhbnNsYXRlWCgnKyAoIC1pbmRleGggKiBvdmVydmlld1NsaWRlV2lkdGggKSArJ3B4KScsCgkJCQkndHJhbnNsYXRlWSgnKyAoIC1pbmRleHYgKiBvdmVydmlld1NsaWRlSGVpZ2h0ICkgKydweCknCgkJCV0uam9pbiggJyAnICkKCQl9ICk7CgoJfQoKCS8qKgoJICogRXhpdHMgdGhlIHNsaWRlIG92ZXJ2aWV3IGFuZCBlbnRlcnMgdGhlIGN1cnJlbnRseQoJICogYWN0aXZlIHNsaWRlLgoJICovCglmdW5jdGlvbiBkZWFjdGl2YXRlT3ZlcnZpZXcoKSB7CgoJCS8vIE9ubHkgcHJvY2VlZCBpZiBlbmFibGVkIGluIGNvbmZpZwoJCWlmKCBjb25maWcub3ZlcnZpZXcgKSB7CgoJCQlvdmVydmlldyA9IGZhbHNlOwoKCQkJZG9tLndyYXBwZXIuY2xhc3NMaXN0LnJlbW92ZSggJ292ZXJ2aWV3JyApOwoJCQlkb20ud3JhcHBlci5jbGFzc0xpc3QucmVtb3ZlKCAnb3ZlcnZpZXctYW5pbWF0ZWQnICk7CgoJCQkvLyBUZW1wb3JhcmlseSBhZGQgYSBjbGFzcyBzbyB0aGF0IHRyYW5zaXRpb25zIGNhbiBkbyBkaWZmZXJlbnQgdGhpbmdzCgkJCS8vIGRlcGVuZGluZyBvbiB3aGV0aGVyIHRoZXkgYXJlIGV4aXRpbmcvZW50ZXJpbmcgb3ZlcnZpZXcsIG9yIGp1c3QKCQkJLy8gbW92aW5nIGZyb20gc2xpZGUgdG8gc2xpZGUKCQkJZG9tLndyYXBwZXIuY2xhc3NMaXN0LmFkZCggJ292ZXJ2aWV3LWRlYWN0aXZhdGluZycgKTsKCgkJCXNldFRpbWVvdXQoIGZ1bmN0aW9uICgpIHsKCQkJCWRvbS53cmFwcGVyLmNsYXNzTGlzdC5yZW1vdmUoICdvdmVydmlldy1kZWFjdGl2YXRpbmcnICk7CgkJCX0sIDEgKTsKCgkJCS8vIE1vdmUgdGhlIGJhY2tncm91bmQgZWxlbWVudCBiYWNrIG91dAoJCQlkb20ud3JhcHBlci5hcHBlbmRDaGlsZCggZG9tLmJhY2tncm91bmQgKTsKCgkJCS8vIENsZWFuIHVwIGNoYW5nZXMgbWFkZSB0byBzbGlkZXMKCQkJdG9BcnJheSggZG9tLndyYXBwZXIucXVlcnlTZWxlY3RvckFsbCggU0xJREVTX1NFTEVDVE9SICkgKS5mb3JFYWNoKCBmdW5jdGlvbiggc2xpZGUgKSB7CgkJCQl0cmFuc2Zvcm1FbGVtZW50KCBzbGlkZSwgJycgKTsKCgkJCQlzbGlkZS5yZW1vdmVFdmVudExpc3RlbmVyKCAnY2xpY2snLCBvbk92ZXJ2aWV3U2xpZGVDbGlja2VkLCB0cnVlICk7CgkJCX0gKTsKCgkJCS8vIENsZWFuIHVwIGNoYW5nZXMgbWFkZSB0byBiYWNrZ3JvdW5kcwoJCQl0b0FycmF5KCBkb20uYmFja2dyb3VuZC5xdWVyeVNlbGVjdG9yQWxsKCAnLnNsaWRlLWJhY2tncm91bmQnICkgKS5mb3JFYWNoKCBmdW5jdGlvbiggYmFja2dyb3VuZCApIHsKCQkJCXRyYW5zZm9ybUVsZW1lbnQoIGJhY2tncm91bmQsICcnICk7CgkJCX0gKTsKCgkJCXRyYW5zZm9ybVNsaWRlcyggeyBvdmVydmlldzogJycgfSApOwoKCQkJc2xpZGUoIGluZGV4aCwgaW5kZXh2ICk7CgoJCQlsYXlvdXQoKTsKCgkJCWN1ZUF1dG9TbGlkZSgpOwoKCQkJLy8gTm90aWZ5IG9ic2VydmVycyBvZiB0aGUgb3ZlcnZpZXcgaGlkaW5nCgkJCWRpc3BhdGNoRXZlbnQoICdvdmVydmlld2hpZGRlbicsIHsKCQkJCSdpbmRleGgnOiBpbmRleGgsCgkJCQknaW5kZXh2JzogaW5kZXh2LAoJCQkJJ2N1cnJlbnRTbGlkZSc6IGN1cnJlbnRTbGlkZQoJCQl9ICk7CgoJCX0KCX0KCgkvKioKCSAqIFRvZ2dsZXMgdGhlIHNsaWRlIG92ZXJ2aWV3IG1vZGUgb24gYW5kIG9mZi4KCSAqCgkgKiBAcGFyYW0ge0Jvb2xlYW59IFtvdmVycmlkZV0gRmxhZyB3aGljaCBvdmVycmlkZXMgdGhlCgkgKiB0b2dnbGUgbG9naWMgYW5kIGZvcmNpYmx5IHNldHMgdGhlIGRlc2lyZWQgc3RhdGUuIFRydWUgbWVhbnMKCSAqIG92ZXJ2aWV3IGlzIG9wZW4sIGZhbHNlIG1lYW5zIGl0J3MgY2xvc2VkLgoJICovCglmdW5jdGlvbiB0b2dnbGVPdmVydmlldyggb3ZlcnJpZGUgKSB7CgoJCWlmKCB0eXBlb2Ygb3ZlcnJpZGUgPT09ICdib29sZWFuJyApIHsKCQkJb3ZlcnJpZGUgPyBhY3RpdmF0ZU92ZXJ2aWV3KCkgOiBkZWFjdGl2YXRlT3ZlcnZpZXcoKTsKCQl9CgkJZWxzZSB7CgkJCWlzT3ZlcnZpZXcoKSA/IGRlYWN0aXZhdGVPdmVydmlldygpIDogYWN0aXZhdGVPdmVydmlldygpOwoJCX0KCgl9CgoJLyoqCgkgKiBDaGVja3MgaWYgdGhlIG92ZXJ2aWV3IGlzIGN1cnJlbnRseSBhY3RpdmUuCgkgKgoJICogQHJldHVybiB7Qm9vbGVhbn0gdHJ1ZSBpZiB0aGUgb3ZlcnZpZXcgaXMgYWN0aXZlLAoJICogZmFsc2Ugb3RoZXJ3aXNlCgkgKi8KCWZ1bmN0aW9uIGlzT3ZlcnZpZXcoKSB7CgoJCXJldHVybiBvdmVydmlldzsKCgl9CgoJLyoqCgkgKiBSZXR1cm4gYSBoYXNoIFVSTCB0aGF0IHdpbGwgcmVzb2x2ZSB0byB0aGUgY3VycmVudCBzbGlkZSBsb2NhdGlvbi4KCSAqLwoJZnVuY3Rpb24gbG9jYXRpb25IYXNoKCkgewoKCQl2YXIgdXJsID0gJy8nOwoKCQkvLyBBdHRlbXB0IHRvIGNyZWF0ZSBhIG5hbWVkIGxpbmsgYmFzZWQgb24gdGhlIHNsaWRlJ3MgSUQKCQl2YXIgaWQgPSBjdXJyZW50U2xpZGUgPyBjdXJyZW50U2xpZGUuZ2V0QXR0cmlidXRlKCAnaWQnICkgOiBudWxsOwoJCWlmKCBpZCApIHsKCQkJaWQgPSBlbmNvZGVVUklDb21wb25lbnQoIGlkICk7CgkJfQoKCQl2YXIgaW5kZXhmOwoJCWlmKCBjb25maWcuZnJhZ21lbnRJblVSTCApIHsKCQkJaW5kZXhmID0gZ2V0SW5kaWNlcygpLmY7CgkJfQoKCQkvLyBJZiB0aGUgY3VycmVudCBzbGlkZSBoYXMgYW4gSUQsIHVzZSB0aGF0IGFzIGEgbmFtZWQgbGluaywKCQkvLyBidXQgd2UgZG9uJ3Qgc3VwcG9ydCBuYW1lZCBsaW5rcyB3aXRoIGEgZnJhZ21lbnQgaW5kZXgKCQlpZiggdHlwZW9mIGlkID09PSAnc3RyaW5nJyAmJiBpZC5sZW5ndGggJiYgaW5kZXhmID09PSB1bmRlZmluZWQgKSB7CgkJCXVybCA9ICcvJyArIGlkOwoJCX0KCQkvLyBPdGhlcndpc2UgdXNlIHRoZSAvaC92IGluZGV4CgkJZWxzZSB7CgkJCXZhciBoYXNoSW5kZXhCYXNlID0gY29uZmlnLmhhc2hPbmVCYXNlZEluZGV4ID8gMSA6IDA7CgkJCWlmKCBpbmRleGggPiAwIHx8IGluZGV4diA+IDAgfHwgaW5kZXhmICE9PSB1bmRlZmluZWQgKSB1cmwgKz0gaW5kZXhoICsgaGFzaEluZGV4QmFzZTsKCQkJaWYoIGluZGV4diA+IDAgfHwgaW5kZXhmICE9PSB1bmRlZmluZWQgKSB1cmwgKz0gJy8nICsgKGluZGV4diArIGhhc2hJbmRleEJhc2UgKTsKCQkJaWYoIGluZGV4ZiAhPT0gdW5kZWZpbmVkICkgdXJsICs9ICcvJyArIGluZGV4ZjsKCQl9CgoJCXJldHVybiB1cmw7CgoJfQoKCS8qKgoJICogQ2hlY2tzIGlmIHRoZSBjdXJyZW50IG9yIHNwZWNpZmllZCBzbGlkZSBpcyB2ZXJ0aWNhbAoJICogKG5lc3RlZCB3aXRoaW4gYW5vdGhlciBzbGlkZSkuCgkgKgoJICogQHBhcmFtIHtIVE1MRWxlbWVudH0gW3NsaWRlPWN1cnJlbnRTbGlkZV0gVGhlIHNsaWRlIHRvIGNoZWNrCgkgKiBvcmllbnRhdGlvbiBvZgoJICogQHJldHVybiB7Qm9vbGVhbn0KCSAqLwoJZnVuY3Rpb24gaXNWZXJ0aWNhbFNsaWRlKCBzbGlkZSApIHsKCgkJLy8gUHJlZmVyIHNsaWRlIGFyZ3VtZW50LCBvdGhlcndpc2UgdXNlIGN1cnJlbnQgc2xpZGUKCQlzbGlkZSA9IHNsaWRlID8gc2xpZGUgOiBjdXJyZW50U2xpZGU7CgoJCXJldHVybiBzbGlkZSAmJiBzbGlkZS5wYXJlbnROb2RlICYmICEhc2xpZGUucGFyZW50Tm9kZS5ub2RlTmFtZS5tYXRjaCggL3NlY3Rpb24vaSApOwoKCX0KCgkvKioKCSAqIEhhbmRsaW5nIHRoZSBmdWxsc2NyZWVuIGZ1bmN0aW9uYWxpdHkgdmlhIHRoZSBmdWxsc2NyZWVuIEFQSQoJICoKCSAqIEBzZWUgaHR0cDovL2Z1bGxzY3JlZW4uc3BlYy53aGF0d2cub3JnLwoJICogQHNlZSBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL0RPTS9Vc2luZ19mdWxsc2NyZWVuX21vZGUKCSAqLwoJZnVuY3Rpb24gZW50ZXJGdWxsc2NyZWVuKCkgewoKCQl2YXIgZWxlbWVudCA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudDsKCgkJLy8gQ2hlY2sgd2hpY2ggaW1wbGVtZW50YXRpb24gaXMgYXZhaWxhYmxlCgkJdmFyIHJlcXVlc3RNZXRob2QgPSBlbGVtZW50LnJlcXVlc3RGdWxsc2NyZWVuIHx8CgkJCQkJCQllbGVtZW50LndlYmtpdFJlcXVlc3RGdWxsc2NyZWVuIHx8CgkJCQkJCQllbGVtZW50LndlYmtpdFJlcXVlc3RGdWxsU2NyZWVuIHx8CgkJCQkJCQllbGVtZW50Lm1velJlcXVlc3RGdWxsU2NyZWVuIHx8CgkJCQkJCQllbGVtZW50Lm1zUmVxdWVzdEZ1bGxzY3JlZW47CgoJCWlmKCByZXF1ZXN0TWV0aG9kICkgewoJCQlyZXF1ZXN0TWV0aG9kLmFwcGx5KCBlbGVtZW50ICk7CgkJfQoKCX0KCgkvKioKCSAqIFNob3dzIHRoZSBtb3VzZSBwb2ludGVyIGFmdGVyIGl0IGhhcyBiZWVuIGhpZGRlbiB3aXRoCgkgKiAjaGlkZUN1cnNvci4KCSAqLwoJZnVuY3Rpb24gc2hvd0N1cnNvcigpIHsKCgkJaWYoIGN1cnNvckhpZGRlbiApIHsKCQkJY3Vyc29ySGlkZGVuID0gZmFsc2U7CgkJCWRvbS53cmFwcGVyLnN0eWxlLmN1cnNvciA9ICcnOwoJCX0KCgl9CgoJLyoqCgkgKiBIaWRlcyB0aGUgbW91c2UgcG9pbnRlciB3aGVuIGl0J3Mgb24gdG9wIG9mIHRoZSAucmV2ZWFsCgkgKiBjb250YWluZXIuCgkgKi8KCWZ1bmN0aW9uIGhpZGVDdXJzb3IoKSB7CgoJCWlmKCBjdXJzb3JIaWRkZW4gPT09IGZhbHNlICkgewoJCQljdXJzb3JIaWRkZW4gPSB0cnVlOwoJCQlkb20ud3JhcHBlci5zdHlsZS5jdXJzb3IgPSAnbm9uZSc7CgkJfQoKCX0KCgkvKioKCSAqIEVudGVycyB0aGUgcGF1c2VkIG1vZGUgd2hpY2ggZmFkZXMgZXZlcnl0aGluZyBvbiBzY3JlZW4gdG8KCSAqIGJsYWNrLgoJICovCglmdW5jdGlvbiBwYXVzZSgpIHsKCgkJaWYoIGNvbmZpZy5wYXVzZSApIHsKCQkJdmFyIHdhc1BhdXNlZCA9IGRvbS53cmFwcGVyLmNsYXNzTGlzdC5jb250YWlucyggJ3BhdXNlZCcgKTsKCgkJCWNhbmNlbEF1dG9TbGlkZSgpOwoJCQlkb20ud3JhcHBlci5jbGFzc0xpc3QuYWRkKCAncGF1c2VkJyApOwoKCQkJaWYoIHdhc1BhdXNlZCA9PT0gZmFsc2UgKSB7CgkJCQlkaXNwYXRjaEV2ZW50KCAncGF1c2VkJyApOwoJCQl9CgkJfQoKCX0KCgkvKioKCSAqIEV4aXRzIGZyb20gdGhlIHBhdXNlZCBtb2RlLgoJICovCglmdW5jdGlvbiByZXN1bWUoKSB7CgoJCXZhciB3YXNQYXVzZWQgPSBkb20ud3JhcHBlci5jbGFzc0xpc3QuY29udGFpbnMoICdwYXVzZWQnICk7CgkJZG9tLndyYXBwZXIuY2xhc3NMaXN0LnJlbW92ZSggJ3BhdXNlZCcgKTsKCgkJY3VlQXV0b1NsaWRlKCk7CgoJCWlmKCB3YXNQYXVzZWQgKSB7CgkJCWRpc3BhdGNoRXZlbnQoICdyZXN1bWVkJyApOwoJCX0KCgl9CgoJLyoqCgkgKiBUb2dnbGVzIHRoZSBwYXVzZWQgbW9kZSBvbiBhbmQgb2ZmLgoJICovCglmdW5jdGlvbiB0b2dnbGVQYXVzZSggb3ZlcnJpZGUgKSB7CgoJCWlmKCB0eXBlb2Ygb3ZlcnJpZGUgPT09ICdib29sZWFuJyApIHsKCQkJb3ZlcnJpZGUgPyBwYXVzZSgpIDogcmVzdW1lKCk7CgkJfQoJCWVsc2UgewoJCQlpc1BhdXNlZCgpID8gcmVzdW1lKCkgOiBwYXVzZSgpOwoJCX0KCgl9CgoJLyoqCgkgKiBDaGVja3MgaWYgd2UgYXJlIGN1cnJlbnRseSBpbiB0aGUgcGF1c2VkIG1vZGUuCgkgKgoJICogQHJldHVybiB7Qm9vbGVhbn0KCSAqLwoJZnVuY3Rpb24gaXNQYXVzZWQoKSB7CgoJCXJldHVybiBkb20ud3JhcHBlci5jbGFzc0xpc3QuY29udGFpbnMoICdwYXVzZWQnICk7CgoJfQoKCS8qKgoJICogVG9nZ2xlcyB0aGUgYXV0byBzbGlkZSBtb2RlIG9uIGFuZCBvZmYuCgkgKgoJICogQHBhcmFtIHtCb29sZWFufSBbb3ZlcnJpZGVdIEZsYWcgd2hpY2ggc2V0cyB0aGUgZGVzaXJlZCBzdGF0ZS4KCSAqIFRydWUgbWVhbnMgYXV0b3BsYXkgc3RhcnRzLCBmYWxzZSBtZWFucyBpdCBzdG9wcy4KCSAqLwoKCWZ1bmN0aW9uIHRvZ2dsZUF1dG9TbGlkZSggb3ZlcnJpZGUgKSB7CgoJCWlmKCB0eXBlb2Ygb3ZlcnJpZGUgPT09ICdib29sZWFuJyApIHsKCQkJb3ZlcnJpZGUgPyByZXN1bWVBdXRvU2xpZGUoKSA6IHBhdXNlQXV0b1NsaWRlKCk7CgkJfQoKCQllbHNlIHsKCQkJYXV0b1NsaWRlUGF1c2VkID8gcmVzdW1lQXV0b1NsaWRlKCkgOiBwYXVzZUF1dG9TbGlkZSgpOwoJCX0KCgl9CgoJLyoqCgkgKiBDaGVja3MgaWYgdGhlIGF1dG8gc2xpZGUgbW9kZSBpcyBjdXJyZW50bHkgb24uCgkgKgoJICogQHJldHVybiB7Qm9vbGVhbn0KCSAqLwoJZnVuY3Rpb24gaXNBdXRvU2xpZGluZygpIHsKCgkJcmV0dXJuICEhKCBhdXRvU2xpZGUgJiYgIWF1dG9TbGlkZVBhdXNlZCApOwoKCX0KCgkvKioKCSAqIFN0ZXBzIGZyb20gdGhlIGN1cnJlbnQgcG9pbnQgaW4gdGhlIHByZXNlbnRhdGlvbiB0byB0aGUKCSAqIHNsaWRlIHdoaWNoIG1hdGNoZXMgdGhlIHNwZWNpZmllZCBob3Jpem9udGFsIGFuZCB2ZXJ0aWNhbAoJICogaW5kaWNlcy4KCSAqCgkgKiBAcGFyYW0ge251bWJlcn0gW2g9aW5kZXhoXSBIb3Jpem9udGFsIGluZGV4IG9mIHRoZSB0YXJnZXQgc2xpZGUKCSAqIEBwYXJhbSB7bnVtYmVyfSBbdj1pbmRleHZdIFZlcnRpY2FsIGluZGV4IG9mIHRoZSB0YXJnZXQgc2xpZGUKCSAqIEBwYXJhbSB7bnVtYmVyfSBbZl0gSW5kZXggb2YgYSBmcmFnbWVudCB3aXRoaW4gdGhlCgkgKiB0YXJnZXQgc2xpZGUgdG8gYWN0aXZhdGUKCSAqIEBwYXJhbSB7bnVtYmVyfSBbb10gT3JpZ2luIGZvciB1c2UgaW4gbXVsdGltYXN0ZXIgZW52aXJvbm1lbnRzCgkgKi8KCWZ1bmN0aW9uIHNsaWRlKCBoLCB2LCBmLCBvICkgewoKCQkvLyBSZW1lbWJlciB3aGVyZSB3ZSB3ZXJlIGF0IGJlZm9yZQoJCXByZXZpb3VzU2xpZGUgPSBjdXJyZW50U2xpZGU7CgoJCS8vIFF1ZXJ5IGFsbCBob3Jpem9udGFsIHNsaWRlcyBpbiB0aGUgZGVjawoJCXZhciBob3Jpem9udGFsU2xpZGVzID0gZG9tLndyYXBwZXIucXVlcnlTZWxlY3RvckFsbCggSE9SSVpPTlRBTF9TTElERVNfU0VMRUNUT1IgKTsKCgkJLy8gQWJvcnQgaWYgdGhlcmUgYXJlIG5vIHNsaWRlcwoJCWlmKCBob3Jpem9udGFsU2xpZGVzLmxlbmd0aCA9PT0gMCApIHJldHVybjsKCgkJLy8gSWYgbm8gdmVydGljYWwgaW5kZXggaXMgc3BlY2lmaWVkIGFuZCB0aGUgdXBjb21pbmcgc2xpZGUgaXMgYQoJCS8vIHN0YWNrLCByZXN1bWUgYXQgaXRzIHByZXZpb3VzIHZlcnRpY2FsIGluZGV4CgkJaWYoIHYgPT09IHVuZGVmaW5lZCAmJiAhaXNPdmVydmlldygpICkgewoJCQl2ID0gZ2V0UHJldmlvdXNWZXJ0aWNhbEluZGV4KCBob3Jpem9udGFsU2xpZGVzWyBoIF0gKTsKCQl9CgoJCS8vIElmIHdlIHdlcmUgb24gYSB2ZXJ0aWNhbCBzdGFjaywgcmVtZW1iZXIgd2hhdCB2ZXJ0aWNhbCBpbmRleAoJCS8vIGl0IHdhcyBvbiBzbyB3ZSBjYW4gcmVzdW1lIGF0IHRoZSBzYW1lIHBvc2l0aW9uIHdoZW4gcmV0dXJuaW5nCgkJaWYoIHByZXZpb3VzU2xpZGUgJiYgcHJldmlvdXNTbGlkZS5wYXJlbnROb2RlICYmIHByZXZpb3VzU2xpZGUucGFyZW50Tm9kZS5jbGFzc0xpc3QuY29udGFpbnMoICdzdGFjaycgKSApIHsKCQkJc2V0UHJldmlvdXNWZXJ0aWNhbEluZGV4KCBwcmV2aW91c1NsaWRlLnBhcmVudE5vZGUsIGluZGV4diApOwoJCX0KCgkJLy8gUmVtZW1iZXIgdGhlIHN0YXRlIGJlZm9yZSB0aGlzIHNsaWRlCgkJdmFyIHN0YXRlQmVmb3JlID0gc3RhdGUuY29uY2F0KCk7CgoJCS8vIFJlc2V0IHRoZSBzdGF0ZSBhcnJheQoJCXN0YXRlLmxlbmd0aCA9IDA7CgoJCXZhciBpbmRleGhCZWZvcmUgPSBpbmRleGggfHwgMCwKCQkJaW5kZXh2QmVmb3JlID0gaW5kZXh2IHx8IDA7CgoJCS8vIEFjdGl2YXRlIGFuZCB0cmFuc2l0aW9uIHRvIHRoZSBuZXcgc2xpZGUKCQlpbmRleGggPSB1cGRhdGVTbGlkZXMoIEhPUklaT05UQUxfU0xJREVTX1NFTEVDVE9SLCBoID09PSB1bmRlZmluZWQgPyBpbmRleGggOiBoICk7CgkJaW5kZXh2ID0gdXBkYXRlU2xpZGVzKCBWRVJUSUNBTF9TTElERVNfU0VMRUNUT1IsIHYgPT09IHVuZGVmaW5lZCA/IGluZGV4diA6IHYgKTsKCgkJLy8gVXBkYXRlIHRoZSB2aXNpYmlsaXR5IG9mIHNsaWRlcyBub3cgdGhhdCB0aGUgaW5kaWNlcyBoYXZlIGNoYW5nZWQKCQl1cGRhdGVTbGlkZXNWaXNpYmlsaXR5KCk7CgoJCWxheW91dCgpOwoKCQkvLyBVcGRhdGUgdGhlIG92ZXJ2aWV3IGlmIGl0J3MgY3VycmVudGx5IGFjdGl2ZQoJCWlmKCBpc092ZXJ2aWV3KCkgKSB7CgkJCXVwZGF0ZU92ZXJ2aWV3KCk7CgkJfQoKCQkvLyBGaW5kIHRoZSBjdXJyZW50IGhvcml6b250YWwgc2xpZGUgYW5kIGFueSBwb3NzaWJsZSB2ZXJ0aWNhbCBzbGlkZXMKCQkvLyB3aXRoaW4gaXQKCQl2YXIgY3VycmVudEhvcml6b250YWxTbGlkZSA9IGhvcml6b250YWxTbGlkZXNbIGluZGV4aCBdLAoJCQljdXJyZW50VmVydGljYWxTbGlkZXMgPSBjdXJyZW50SG9yaXpvbnRhbFNsaWRlLnF1ZXJ5U2VsZWN0b3JBbGwoICdzZWN0aW9uJyApOwoKCQkvLyBTdG9yZSByZWZlcmVuY2VzIHRvIHRoZSBwcmV2aW91cyBhbmQgY3VycmVudCBzbGlkZXMKCQljdXJyZW50U2xpZGUgPSBjdXJyZW50VmVydGljYWxTbGlkZXNbIGluZGV4diBdIHx8IGN1cnJlbnRIb3Jpem9udGFsU2xpZGU7CgoJCS8vIFNob3cgZnJhZ21lbnQsIGlmIHNwZWNpZmllZAoJCWlmKCB0eXBlb2YgZiAhPT0gJ3VuZGVmaW5lZCcgKSB7CgkJCW5hdmlnYXRlRnJhZ21lbnQoIGYgKTsKCQl9CgoJCS8vIERpc3BhdGNoIGFuIGV2ZW50IGlmIHRoZSBzbGlkZSBjaGFuZ2VkCgkJdmFyIHNsaWRlQ2hhbmdlZCA9ICggaW5kZXhoICE9PSBpbmRleGhCZWZvcmUgfHwgaW5kZXh2ICE9PSBpbmRleHZCZWZvcmUgKTsKCQlpZiAoIXNsaWRlQ2hhbmdlZCkgewoJCQkvLyBFbnN1cmUgdGhhdCB0aGUgcHJldmlvdXMgc2xpZGUgaXMgbmV2ZXIgdGhlIHNhbWUgYXMgdGhlIGN1cnJlbnQKCQkJcHJldmlvdXNTbGlkZSA9IG51bGw7CgkJfQoKCQkvLyBTb2x2ZXMgYW4gZWRnZSBjYXNlIHdoZXJlIHRoZSBwcmV2aW91cyBzbGlkZSBtYWludGFpbnMgdGhlCgkJLy8gJ3ByZXNlbnQnIGNsYXNzIHdoZW4gbmF2aWdhdGluZyBiZXR3ZWVuIGFkamFjZW50IHZlcnRpY2FsCgkJLy8gc3RhY2tzCgkJaWYoIHByZXZpb3VzU2xpZGUgJiYgcHJldmlvdXNTbGlkZSAhPT0gY3VycmVudFNsaWRlICkgewoJCQlwcmV2aW91c1NsaWRlLmNsYXNzTGlzdC5yZW1vdmUoICdwcmVzZW50JyApOwoJCQlwcmV2aW91c1NsaWRlLnNldEF0dHJpYnV0ZSggJ2FyaWEtaGlkZGVuJywgJ3RydWUnICk7CgoJCQkvLyBSZXNldCBhbGwgc2xpZGVzIHVwb24gbmF2aWdhdGUgdG8gaG9tZQoJCQkvLyBJc3N1ZTogIzI4NQoJCQlpZiAoIGRvbS53cmFwcGVyLnF1ZXJ5U2VsZWN0b3IoIEhPTUVfU0xJREVfU0VMRUNUT1IgKS5jbGFzc0xpc3QuY29udGFpbnMoICdwcmVzZW50JyApICkgewoJCQkJLy8gTGF1bmNoIGFzeW5jIHRhc2sKCQkJCXNldFRpbWVvdXQoIGZ1bmN0aW9uICgpIHsKCQkJCQl2YXIgc2xpZGVzID0gdG9BcnJheSggZG9tLndyYXBwZXIucXVlcnlTZWxlY3RvckFsbCggSE9SSVpPTlRBTF9TTElERVNfU0VMRUNUT1IgKyAnLnN0YWNrJykgKSwgaTsKCQkJCQlmb3IoIGkgaW4gc2xpZGVzICkgewoJCQkJCQlpZiggc2xpZGVzW2ldICkgewoJCQkJCQkJLy8gUmVzZXQgc3RhY2sKCQkJCQkJCXNldFByZXZpb3VzVmVydGljYWxJbmRleCggc2xpZGVzW2ldLCAwICk7CgkJCQkJCX0KCQkJCQl9CgkJCQl9LCAwICk7CgkJCX0KCQl9CgoJCS8vIEFwcGx5IHRoZSBuZXcgc3RhdGUKCQlzdGF0ZUxvb3A6IGZvciggdmFyIGkgPSAwLCBsZW4gPSBzdGF0ZS5sZW5ndGg7IGkgPCBsZW47IGkrKyApIHsKCQkJLy8gQ2hlY2sgaWYgdGhpcyBzdGF0ZSBleGlzdGVkIG9uIHRoZSBwcmV2aW91cyBzbGlkZS4gSWYgaXQKCQkJLy8gZGlkLCB3ZSB3aWxsIGF2b2lkIGFkZGluZyBpdCByZXBlYXRlZGx5CgkJCWZvciggdmFyIGogPSAwOyBqIDwgc3RhdGVCZWZvcmUubGVuZ3RoOyBqKysgKSB7CgkJCQlpZiggc3RhdGVCZWZvcmVbal0gPT09IHN0YXRlW2ldICkgewoJCQkJCXN0YXRlQmVmb3JlLnNwbGljZSggaiwgMSApOwoJCQkJCWNvbnRpbnVlIHN0YXRlTG9vcDsKCQkJCX0KCQkJfQoKCQkJZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsYXNzTGlzdC5hZGQoIHN0YXRlW2ldICk7CgoJCQkvLyBEaXNwYXRjaCBjdXN0b20gZXZlbnQgbWF0Y2hpbmcgdGhlIHN0YXRlJ3MgbmFtZQoJCQlkaXNwYXRjaEV2ZW50KCBzdGF0ZVtpXSApOwoJCX0KCgkJLy8gQ2xlYW4gdXAgdGhlIHJlbWFpbnMgb2YgdGhlIHByZXZpb3VzIHN0YXRlCgkJd2hpbGUoIHN0YXRlQmVmb3JlLmxlbmd0aCApIHsKCQkJZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoIHN0YXRlQmVmb3JlLnBvcCgpICk7CgkJfQoKCQlpZiggc2xpZGVDaGFuZ2VkICkgewoJCQlkaXNwYXRjaEV2ZW50KCAnc2xpZGVjaGFuZ2VkJywgewoJCQkJJ2luZGV4aCc6IGluZGV4aCwKCQkJCSdpbmRleHYnOiBpbmRleHYsCgkJCQkncHJldmlvdXNTbGlkZSc6IHByZXZpb3VzU2xpZGUsCgkJCQknY3VycmVudFNsaWRlJzogY3VycmVudFNsaWRlLAoJCQkJJ29yaWdpbic6IG8KCQkJfSApOwoJCX0KCgkJLy8gSGFuZGxlIGVtYmVkZGVkIGNvbnRlbnQKCQlpZiggc2xpZGVDaGFuZ2VkIHx8ICFwcmV2aW91c1NsaWRlICkgewoJCQlzdG9wRW1iZWRkZWRDb250ZW50KCBwcmV2aW91c1NsaWRlICk7CgkJCXN0YXJ0RW1iZWRkZWRDb250ZW50KCBjdXJyZW50U2xpZGUgKTsKCQl9CgoJCS8vIEFubm91bmNlIHRoZSBjdXJyZW50IHNsaWRlIGNvbnRlbnRzLCBmb3Igc2NyZWVuIHJlYWRlcnMKCQlkb20uc3RhdHVzRGl2LnRleHRDb250ZW50ID0gZ2V0U3RhdHVzVGV4dCggY3VycmVudFNsaWRlICk7CgoJCXVwZGF0ZUNvbnRyb2xzKCk7CgkJdXBkYXRlUHJvZ3Jlc3MoKTsKCQl1cGRhdGVCYWNrZ3JvdW5kKCk7CgkJdXBkYXRlUGFyYWxsYXgoKTsKCQl1cGRhdGVTbGlkZU51bWJlcigpOwoJCXVwZGF0ZU5vdGVzKCk7CgkJdXBkYXRlRnJhZ21lbnRzKCk7CgoJCS8vIFVwZGF0ZSB0aGUgVVJMIGhhc2gKCQl3cml0ZVVSTCgpOwoKCQljdWVBdXRvU2xpZGUoKTsKCgl9CgoJLyoqCgkgKiBTeW5jcyB0aGUgcHJlc2VudGF0aW9uIHdpdGggdGhlIGN1cnJlbnQgRE9NLiBVc2VmdWwKCSAqIHdoZW4gbmV3IHNsaWRlcyBvciBjb250cm9sIGVsZW1lbnRzIGFyZSBhZGRlZCBvciB3aGVuCgkgKiB0aGUgY29uZmlndXJhdGlvbiBoYXMgY2hhbmdlZC4KCSAqLwoJZnVuY3Rpb24gc3luYygpIHsKCgkJLy8gU3Vic2NyaWJlIHRvIGlucHV0CgkJcmVtb3ZlRXZlbnRMaXN0ZW5lcnMoKTsKCQlhZGRFdmVudExpc3RlbmVycygpOwoKCQkvLyBGb3JjZSBhIGxheW91dCB0byBtYWtlIHN1cmUgdGhlIGN1cnJlbnQgY29uZmlnIGlzIGFjY291bnRlZCBmb3IKCQlsYXlvdXQoKTsKCgkJLy8gUmVmbGVjdCB0aGUgY3VycmVudCBhdXRvU2xpZGUgdmFsdWUKCQlhdXRvU2xpZGUgPSBjb25maWcuYXV0b1NsaWRlOwoKCQkvLyBTdGFydCBhdXRvLXNsaWRpbmcgaWYgaXQncyBlbmFibGVkCgkJY3VlQXV0b1NsaWRlKCk7CgoJCS8vIFJlLWNyZWF0ZSB0aGUgc2xpZGUgYmFja2dyb3VuZHMKCQljcmVhdGVCYWNrZ3JvdW5kcygpOwoKCQkvLyBXcml0ZSB0aGUgY3VycmVudCBoYXNoIHRvIHRoZSBVUkwKCQl3cml0ZVVSTCgpOwoKCQlzb3J0QWxsRnJhZ21lbnRzKCk7CgoJCXVwZGF0ZUNvbnRyb2xzKCk7CgkJdXBkYXRlUHJvZ3Jlc3MoKTsKCQl1cGRhdGVTbGlkZU51bWJlcigpOwoJCXVwZGF0ZVNsaWRlc1Zpc2liaWxpdHkoKTsKCQl1cGRhdGVCYWNrZ3JvdW5kKCB0cnVlICk7CgkJdXBkYXRlTm90ZXNWaXNpYmlsaXR5KCk7CgkJdXBkYXRlTm90ZXMoKTsKCgkJZm9ybWF0RW1iZWRkZWRDb250ZW50KCk7CgoJCS8vIFN0YXJ0IG9yIHN0b3AgZW1iZWRkZWQgY29udGVudCBkZXBlbmRpbmcgb24gZ2xvYmFsIGNvbmZpZwoJCWlmKCBjb25maWcuYXV0b1BsYXlNZWRpYSA9PT0gZmFsc2UgKSB7CgkJCXN0b3BFbWJlZGRlZENvbnRlbnQoIGN1cnJlbnRTbGlkZSwgeyB1bmxvYWRJZnJhbWVzOiBmYWxzZSB9ICk7CgkJfQoJCWVsc2UgewoJCQlzdGFydEVtYmVkZGVkQ29udGVudCggY3VycmVudFNsaWRlICk7CgkJfQoKCQlpZiggaXNPdmVydmlldygpICkgewoJCQlsYXlvdXRPdmVydmlldygpOwoJCX0KCgl9CgoJLyoqCgkgKiBVcGRhdGVzIHJldmVhbC5qcyB0byBrZWVwIGluIHN5bmMgd2l0aCBuZXcgc2xpZGUgYXR0cmlidXRlcy4gRm9yCgkgKiBleGFtcGxlLCBpZiB5b3UgYWRkIGEgbmV3IGBkYXRhLWJhY2tncm91bmQtaW1hZ2VgIHlvdSBjYW4gY2FsbAoJICogdGhpcyB0byBoYXZlIHJldmVhbC5qcyByZW5kZXIgdGhlIG5ldyBiYWNrZ3JvdW5kIGltYWdlLgoJICoKCSAqIFNpbWlsYXIgdG8gI3N5bmMoKSBidXQgbW9yZSBlZmZpY2llbnQgd2hlbiB5b3Ugb25seSBuZWVkIHRvCgkgKiByZWZyZXNoIGEgc3BlY2lmaWMgc2xpZGUuCgkgKgoJICogQHBhcmFtIHtIVE1MRWxlbWVudH0gc2xpZGUKCSAqLwoJZnVuY3Rpb24gc3luY1NsaWRlKCBzbGlkZSApIHsKCgkJLy8gRGVmYXVsdCB0byB0aGUgY3VycmVudCBzbGlkZQoJCXNsaWRlID0gc2xpZGUgfHwgY3VycmVudFNsaWRlOwoKCQlzeW5jQmFja2dyb3VuZCggc2xpZGUgKTsKCQlzeW5jRnJhZ21lbnRzKCBzbGlkZSApOwoKCQlsb2FkU2xpZGUoIHNsaWRlICk7CgoJCXVwZGF0ZUJhY2tncm91bmQoKTsKCQl1cGRhdGVOb3RlcygpOwoKCX0KCgkvKioKCSAqIEZvcm1hdHMgdGhlIGZyYWdtZW50cyBvbiB0aGUgZ2l2ZW4gc2xpZGUgc28gdGhhdCB0aGV5IGhhdmUKCSAqIHZhbGlkIGluZGljZXMuIENhbGwgdGhpcyBpZiBmcmFnbWVudHMgYXJlIGNoYW5nZWQgaW4gdGhlIERPTQoJICogYWZ0ZXIgcmV2ZWFsLmpzIGhhcyBhbHJlYWR5IGluaXRpYWxpemVkLgoJICoKCSAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IHNsaWRlCgkgKiBAcmV0dXJuIHtBcnJheX0gYSBsaXN0IG9mIHRoZSBIVE1MIGZyYWdtZW50cyB0aGF0IHdlcmUgc3luY2VkCgkgKi8KCWZ1bmN0aW9uIHN5bmNGcmFnbWVudHMoIHNsaWRlICkgewoKCQkvLyBEZWZhdWx0IHRvIHRoZSBjdXJyZW50IHNsaWRlCgkJc2xpZGUgPSBzbGlkZSB8fCBjdXJyZW50U2xpZGU7CgoJCXJldHVybiBzb3J0RnJhZ21lbnRzKCBzbGlkZS5xdWVyeVNlbGVjdG9yQWxsKCAnLmZyYWdtZW50JyApICk7CgoJfQoKCS8qKgoJICogUmVzZXRzIGFsbCB2ZXJ0aWNhbCBzbGlkZXMgc28gdGhhdCBvbmx5IHRoZSBmaXJzdAoJICogaXMgdmlzaWJsZS4KCSAqLwoJZnVuY3Rpb24gcmVzZXRWZXJ0aWNhbFNsaWRlcygpIHsKCgkJdmFyIGhvcml6b250YWxTbGlkZXMgPSB0b0FycmF5KCBkb20ud3JhcHBlci5xdWVyeVNlbGVjdG9yQWxsKCBIT1JJWk9OVEFMX1NMSURFU19TRUxFQ1RPUiApICk7CgkJaG9yaXpvbnRhbFNsaWRlcy5mb3JFYWNoKCBmdW5jdGlvbiggaG9yaXpvbnRhbFNsaWRlICkgewoKCQkJdmFyIHZlcnRpY2FsU2xpZGVzID0gdG9BcnJheSggaG9yaXpvbnRhbFNsaWRlLnF1ZXJ5U2VsZWN0b3JBbGwoICdzZWN0aW9uJyApICk7CgkJCXZlcnRpY2FsU2xpZGVzLmZvckVhY2goIGZ1bmN0aW9uKCB2ZXJ0aWNhbFNsaWRlLCB5ICkgewoKCQkJCWlmKCB5ID4gMCApIHsKCQkJCQl2ZXJ0aWNhbFNsaWRlLmNsYXNzTGlzdC5yZW1vdmUoICdwcmVzZW50JyApOwoJCQkJCXZlcnRpY2FsU2xpZGUuY2xhc3NMaXN0LnJlbW92ZSggJ3Bhc3QnICk7CgkJCQkJdmVydGljYWxTbGlkZS5jbGFzc0xpc3QuYWRkKCAnZnV0dXJlJyApOwoJCQkJCXZlcnRpY2FsU2xpZGUuc2V0QXR0cmlidXRlKCAnYXJpYS1oaWRkZW4nLCAndHJ1ZScgKTsKCQkJCX0KCgkJCX0gKTsKCgkJfSApOwoKCX0KCgkvKioKCSAqIFNvcnRzIGFuZCBmb3JtYXRzIGFsbCBvZiBmcmFnbWVudHMgaW4gdGhlCgkgKiBwcmVzZW50YXRpb24uCgkgKi8KCWZ1bmN0aW9uIHNvcnRBbGxGcmFnbWVudHMoKSB7CgoJCXZhciBob3Jpem9udGFsU2xpZGVzID0gdG9BcnJheSggZG9tLndyYXBwZXIucXVlcnlTZWxlY3RvckFsbCggSE9SSVpPTlRBTF9TTElERVNfU0VMRUNUT1IgKSApOwoJCWhvcml6b250YWxTbGlkZXMuZm9yRWFjaCggZnVuY3Rpb24oIGhvcml6b250YWxTbGlkZSApIHsKCgkJCXZhciB2ZXJ0aWNhbFNsaWRlcyA9IHRvQXJyYXkoIGhvcml6b250YWxTbGlkZS5xdWVyeVNlbGVjdG9yQWxsKCAnc2VjdGlvbicgKSApOwoJCQl2ZXJ0aWNhbFNsaWRlcy5mb3JFYWNoKCBmdW5jdGlvbiggdmVydGljYWxTbGlkZSwgeSApIHsKCgkJCQlzb3J0RnJhZ21lbnRzKCB2ZXJ0aWNhbFNsaWRlLnF1ZXJ5U2VsZWN0b3JBbGwoICcuZnJhZ21lbnQnICkgKTsKCgkJCX0gKTsKCgkJCWlmKCB2ZXJ0aWNhbFNsaWRlcy5sZW5ndGggPT09IDAgKSBzb3J0RnJhZ21lbnRzKCBob3Jpem9udGFsU2xpZGUucXVlcnlTZWxlY3RvckFsbCggJy5mcmFnbWVudCcgKSApOwoKCQl9ICk7CgoJfQoKCS8qKgoJICogUmFuZG9tbHkgc2h1ZmZsZXMgYWxsIHNsaWRlcyBpbiB0aGUgZGVjay4KCSAqLwoJZnVuY3Rpb24gc2h1ZmZsZSgpIHsKCgkJdmFyIHNsaWRlcyA9IHRvQXJyYXkoIGRvbS53cmFwcGVyLnF1ZXJ5U2VsZWN0b3JBbGwoIEhPUklaT05UQUxfU0xJREVTX1NFTEVDVE9SICkgKTsKCgkJc2xpZGVzLmZvckVhY2goIGZ1bmN0aW9uKCBzbGlkZSApIHsKCgkJCS8vIEluc2VydCB0aGlzIHNsaWRlIG5leHQgdG8gYW5vdGhlciByYW5kb20gc2xpZGUuIFRoaXMgbWF5CgkJCS8vIGNhdXNlIHRoZSBzbGlkZSB0byBpbnNlcnQgYmVmb3JlIGl0c2VsZiBidXQgdGhhdCdzIGZpbmUuCgkJCWRvbS5zbGlkZXMuaW5zZXJ0QmVmb3JlKCBzbGlkZSwgc2xpZGVzWyBNYXRoLmZsb29yKCBNYXRoLnJhbmRvbSgpICogc2xpZGVzLmxlbmd0aCApIF0gKTsKCgkJfSApOwoKCX0KCgkvKioKCSAqIFVwZGF0ZXMgb25lIGRpbWVuc2lvbiBvZiBzbGlkZXMgYnkgc2hvd2luZyB0aGUgc2xpZGUKCSAqIHdpdGggdGhlIHNwZWNpZmllZCBpbmRleC4KCSAqCgkgKiBAcGFyYW0ge3N0cmluZ30gc2VsZWN0b3IgQSBDU1Mgc2VsZWN0b3IgdGhhdCB3aWxsIGZldGNoCgkgKiB0aGUgZ3JvdXAgb2Ygc2xpZGVzIHdlIGFyZSB3b3JraW5nIHdpdGgKCSAqIEBwYXJhbSB7bnVtYmVyfSBpbmRleCBUaGUgaW5kZXggb2YgdGhlIHNsaWRlIHRoYXQgc2hvdWxkIGJlCgkgKiBzaG93bgoJICoKCSAqIEByZXR1cm4ge251bWJlcn0gVGhlIGluZGV4IG9mIHRoZSBzbGlkZSB0aGF0IGlzIG5vdyBzaG93biwKCSAqIG1pZ2h0IGRpZmZlciBmcm9tIHRoZSBwYXNzZWQgaW4gaW5kZXggaWYgaXQgd2FzIG91dCBvZgoJICogYm91bmRzLgoJICovCglmdW5jdGlvbiB1cGRhdGVTbGlkZXMoIHNlbGVjdG9yLCBpbmRleCApIHsKCgkJLy8gU2VsZWN0IGFsbCBzbGlkZXMgYW5kIGNvbnZlcnQgdGhlIE5vZGVMaXN0IHJlc3VsdCB0bwoJCS8vIGFuIGFycmF5CgkJdmFyIHNsaWRlcyA9IHRvQXJyYXkoIGRvbS53cmFwcGVyLnF1ZXJ5U2VsZWN0b3JBbGwoIHNlbGVjdG9yICkgKSwKCQkJc2xpZGVzTGVuZ3RoID0gc2xpZGVzLmxlbmd0aDsKCgkJdmFyIHByaW50TW9kZSA9IGlzUHJpbnRpbmdQREYoKTsKCgkJaWYoIHNsaWRlc0xlbmd0aCApIHsKCgkJCS8vIFNob3VsZCB0aGUgaW5kZXggbG9vcD8KCQkJaWYoIGNvbmZpZy5sb29wICkgewoJCQkJaW5kZXggJT0gc2xpZGVzTGVuZ3RoOwoKCQkJCWlmKCBpbmRleCA8IDAgKSB7CgkJCQkJaW5kZXggPSBzbGlkZXNMZW5ndGggKyBpbmRleDsKCQkJCX0KCQkJfQoKCQkJLy8gRW5mb3JjZSBtYXggYW5kIG1pbmltdW0gaW5kZXggYm91bmRzCgkJCWluZGV4ID0gTWF0aC5tYXgoIE1hdGgubWluKCBpbmRleCwgc2xpZGVzTGVuZ3RoIC0gMSApLCAwICk7CgoJCQlmb3IoIHZhciBpID0gMDsgaSA8IHNsaWRlc0xlbmd0aDsgaSsrICkgewoJCQkJdmFyIGVsZW1lbnQgPSBzbGlkZXNbaV07CgoJCQkJdmFyIHJldmVyc2UgPSBjb25maWcucnRsICYmICFpc1ZlcnRpY2FsU2xpZGUoIGVsZW1lbnQgKTsKCgkJCQllbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoICdwYXN0JyApOwoJCQkJZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCAncHJlc2VudCcgKTsKCQkJCWVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSggJ2Z1dHVyZScgKTsKCgkJCQkvLyBodHRwOi8vd3d3LnczLm9yZy9odG1sL3dnL2RyYWZ0cy9odG1sL21hc3Rlci9lZGl0aW5nLmh0bWwjdGhlLWhpZGRlbi1hdHRyaWJ1dGUKCQkJCWVsZW1lbnQuc2V0QXR0cmlidXRlKCAnaGlkZGVuJywgJycgKTsKCQkJCWVsZW1lbnQuc2V0QXR0cmlidXRlKCAnYXJpYS1oaWRkZW4nLCAndHJ1ZScgKTsKCgkJCQkvLyBJZiB0aGlzIGVsZW1lbnQgY29udGFpbnMgdmVydGljYWwgc2xpZGVzCgkJCQlpZiggZWxlbWVudC5xdWVyeVNlbGVjdG9yKCAnc2VjdGlvbicgKSApIHsKCQkJCQllbGVtZW50LmNsYXNzTGlzdC5hZGQoICdzdGFjaycgKTsKCQkJCX0KCgkJCQkvLyBJZiB3ZSdyZSBwcmludGluZyBzdGF0aWMgc2xpZGVzLCBhbGwgc2xpZGVzIGFyZSAicHJlc2VudCIKCQkJCWlmKCBwcmludE1vZGUgKSB7CgkJCQkJZWxlbWVudC5jbGFzc0xpc3QuYWRkKCAncHJlc2VudCcgKTsKCQkJCQljb250aW51ZTsKCQkJCX0KCgkJCQlpZiggaSA8IGluZGV4ICkgewoJCQkJCS8vIEFueSBlbGVtZW50IHByZXZpb3VzIHRvIGluZGV4IGlzIGdpdmVuIHRoZSAncGFzdCcgY2xhc3MKCQkJCQllbGVtZW50LmNsYXNzTGlzdC5hZGQoIHJldmVyc2UgPyAnZnV0dXJlJyA6ICdwYXN0JyApOwoKCQkJCQlpZiggY29uZmlnLmZyYWdtZW50cyApIHsKCQkJCQkJLy8gU2hvdyBhbGwgZnJhZ21lbnRzIGluIHByaW9yIHNsaWRlcwoJCQkJCQl0b0FycmF5KCBlbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoICcuZnJhZ21lbnQnICkgKS5mb3JFYWNoKCBmdW5jdGlvbiggZnJhZ21lbnQgKSB7CgkJCQkJCQlmcmFnbWVudC5jbGFzc0xpc3QuYWRkKCAndmlzaWJsZScgKTsKCQkJCQkJCWZyYWdtZW50LmNsYXNzTGlzdC5yZW1vdmUoICdjdXJyZW50LWZyYWdtZW50JyApOwoJCQkJCQl9ICk7CgkJCQkJfQoJCQkJfQoJCQkJZWxzZSBpZiggaSA+IGluZGV4ICkgewoJCQkJCS8vIEFueSBlbGVtZW50IHN1YnNlcXVlbnQgdG8gaW5kZXggaXMgZ2l2ZW4gdGhlICdmdXR1cmUnIGNsYXNzCgkJCQkJZWxlbWVudC5jbGFzc0xpc3QuYWRkKCByZXZlcnNlID8gJ3Bhc3QnIDogJ2Z1dHVyZScgKTsKCgkJCQkJaWYoIGNvbmZpZy5mcmFnbWVudHMgKSB7CgkJCQkJCS8vIEhpZGUgYWxsIGZyYWdtZW50cyBpbiBmdXR1cmUgc2xpZGVzCgkJCQkJCXRvQXJyYXkoIGVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCggJy5mcmFnbWVudC52aXNpYmxlJyApICkuZm9yRWFjaCggZnVuY3Rpb24oIGZyYWdtZW50ICkgewoJCQkJCQkJZnJhZ21lbnQuY2xhc3NMaXN0LnJlbW92ZSggJ3Zpc2libGUnICk7CgkJCQkJCQlmcmFnbWVudC5jbGFzc0xpc3QucmVtb3ZlKCAnY3VycmVudC1mcmFnbWVudCcgKTsKCQkJCQkJfSApOwoJCQkJCX0KCQkJCX0KCQkJfQoKCQkJLy8gTWFyayB0aGUgY3VycmVudCBzbGlkZSBhcyBwcmVzZW50CgkJCXNsaWRlc1tpbmRleF0uY2xhc3NMaXN0LmFkZCggJ3ByZXNlbnQnICk7CgkJCXNsaWRlc1tpbmRleF0ucmVtb3ZlQXR0cmlidXRlKCAnaGlkZGVuJyApOwoJCQlzbGlkZXNbaW5kZXhdLnJlbW92ZUF0dHJpYnV0ZSggJ2FyaWEtaGlkZGVuJyApOwoKCQkJLy8gSWYgdGhpcyBzbGlkZSBoYXMgYSBzdGF0ZSBhc3NvY2lhdGVkIHdpdGggaXQsIGFkZCBpdAoJCQkvLyBvbnRvIHRoZSBjdXJyZW50IHN0YXRlIG9mIHRoZSBkZWNrCgkJCXZhciBzbGlkZVN0YXRlID0gc2xpZGVzW2luZGV4XS5nZXRBdHRyaWJ1dGUoICdkYXRhLXN0YXRlJyApOwoJCQlpZiggc2xpZGVTdGF0ZSApIHsKCQkJCXN0YXRlID0gc3RhdGUuY29uY2F0KCBzbGlkZVN0YXRlLnNwbGl0KCAnICcgKSApOwoJCQl9CgoJCX0KCQllbHNlIHsKCQkJLy8gU2luY2UgdGhlcmUgYXJlIG5vIHNsaWRlcyB3ZSBjYW4ndCBiZSBhbnl3aGVyZSBiZXlvbmQgdGhlCgkJCS8vIHplcm90aCBpbmRleAoJCQlpbmRleCA9IDA7CgkJfQoKCQlyZXR1cm4gaW5kZXg7CgoJfQoKCS8qKgoJICogT3B0aW1pemF0aW9uIG1ldGhvZDsgaGlkZSBhbGwgc2xpZGVzIHRoYXQgYXJlIGZhciBhd2F5CgkgKiBmcm9tIHRoZSBwcmVzZW50IHNsaWRlLgoJICovCglmdW5jdGlvbiB1cGRhdGVTbGlkZXNWaXNpYmlsaXR5KCkgewoKCQkvLyBTZWxlY3QgYWxsIHNsaWRlcyBhbmQgY29udmVydCB0aGUgTm9kZUxpc3QgcmVzdWx0IHRvCgkJLy8gYW4gYXJyYXkKCQl2YXIgaG9yaXpvbnRhbFNsaWRlcyA9IHRvQXJyYXkoIGRvbS53cmFwcGVyLnF1ZXJ5U2VsZWN0b3JBbGwoIEhPUklaT05UQUxfU0xJREVTX1NFTEVDVE9SICkgKSwKCQkJaG9yaXpvbnRhbFNsaWRlc0xlbmd0aCA9IGhvcml6b250YWxTbGlkZXMubGVuZ3RoLAoJCQlkaXN0YW5jZVgsCgkJCWRpc3RhbmNlWTsKCgkJaWYoIGhvcml6b250YWxTbGlkZXNMZW5ndGggJiYgdHlwZW9mIGluZGV4aCAhPT0gJ3VuZGVmaW5lZCcgKSB7CgoJCQkvLyBUaGUgbnVtYmVyIG9mIHN0ZXBzIGF3YXkgZnJvbSB0aGUgcHJlc2VudCBzbGlkZSB0aGF0IHdpbGwKCQkJLy8gYmUgdmlzaWJsZQoJCQl2YXIgdmlld0Rpc3RhbmNlID0gaXNPdmVydmlldygpID8gMTAgOiBjb25maWcudmlld0Rpc3RhbmNlOwoKCQkJLy8gTGltaXQgdmlldyBkaXN0YW5jZSBvbiB3ZWFrZXIgZGV2aWNlcwoJCQlpZiggaXNNb2JpbGVEZXZpY2UgKSB7CgkJCQl2aWV3RGlzdGFuY2UgPSBpc092ZXJ2aWV3KCkgPyA2IDogMjsKCQkJfQoKCQkJLy8gQWxsIHNsaWRlcyBuZWVkIHRvIGJlIHZpc2libGUgd2hlbiBleHBvcnRpbmcgdG8gUERGCgkJCWlmKCBpc1ByaW50aW5nUERGKCkgKSB7CgkJCQl2aWV3RGlzdGFuY2UgPSBOdW1iZXIuTUFYX1ZBTFVFOwoJCQl9CgoJCQlmb3IoIHZhciB4ID0gMDsgeCA8IGhvcml6b250YWxTbGlkZXNMZW5ndGg7IHgrKyApIHsKCQkJCXZhciBob3Jpem9udGFsU2xpZGUgPSBob3Jpem9udGFsU2xpZGVzW3hdOwoKCQkJCXZhciB2ZXJ0aWNhbFNsaWRlcyA9IHRvQXJyYXkoIGhvcml6b250YWxTbGlkZS5xdWVyeVNlbGVjdG9yQWxsKCAnc2VjdGlvbicgKSApLAoJCQkJCXZlcnRpY2FsU2xpZGVzTGVuZ3RoID0gdmVydGljYWxTbGlkZXMubGVuZ3RoOwoKCQkJCS8vIERldGVybWluZSBob3cgZmFyIGF3YXkgdGhpcyBzbGlkZSBpcyBmcm9tIHRoZSBwcmVzZW50CgkJCQlkaXN0YW5jZVggPSBNYXRoLmFicyggKCBpbmRleGggfHwgMCApIC0geCApIHx8IDA7CgoJCQkJLy8gSWYgdGhlIHByZXNlbnRhdGlvbiBpcyBsb29wZWQsIGRpc3RhbmNlIHNob3VsZCBtZWFzdXJlCgkJCQkvLyAxIGJldHdlZW4gdGhlIGZpcnN0IGFuZCBsYXN0IHNsaWRlcwoJCQkJaWYoIGNvbmZpZy5sb29wICkgewoJCQkJCWRpc3RhbmNlWCA9IE1hdGguYWJzKCAoICggaW5kZXhoIHx8IDAgKSAtIHggKSAlICggaG9yaXpvbnRhbFNsaWRlc0xlbmd0aCAtIHZpZXdEaXN0YW5jZSApICkgfHwgMDsKCQkJCX0KCgkJCQkvLyBTaG93IHRoZSBob3Jpem9udGFsIHNsaWRlIGlmIGl0J3Mgd2l0aGluIHRoZSB2aWV3IGRpc3RhbmNlCgkJCQlpZiggZGlzdGFuY2VYIDwgdmlld0Rpc3RhbmNlICkgewoJCQkJCWxvYWRTbGlkZSggaG9yaXpvbnRhbFNsaWRlICk7CgkJCQl9CgkJCQllbHNlIHsKCQkJCQl1bmxvYWRTbGlkZSggaG9yaXpvbnRhbFNsaWRlICk7CgkJCQl9CgoJCQkJaWYoIHZlcnRpY2FsU2xpZGVzTGVuZ3RoICkgewoKCQkJCQl2YXIgb3kgPSBnZXRQcmV2aW91c1ZlcnRpY2FsSW5kZXgoIGhvcml6b250YWxTbGlkZSApOwoKCQkJCQlmb3IoIHZhciB5ID0gMDsgeSA8IHZlcnRpY2FsU2xpZGVzTGVuZ3RoOyB5KysgKSB7CgkJCQkJCXZhciB2ZXJ0aWNhbFNsaWRlID0gdmVydGljYWxTbGlkZXNbeV07CgoJCQkJCQlkaXN0YW5jZVkgPSB4ID09PSAoIGluZGV4aCB8fCAwICkgPyBNYXRoLmFicyggKCBpbmRleHYgfHwgMCApIC0geSApIDogTWF0aC5hYnMoIHkgLSBveSApOwoKCQkJCQkJaWYoIGRpc3RhbmNlWCArIGRpc3RhbmNlWSA8IHZpZXdEaXN0YW5jZSApIHsKCQkJCQkJCWxvYWRTbGlkZSggdmVydGljYWxTbGlkZSApOwoJCQkJCQl9CgkJCQkJCWVsc2UgewoJCQkJCQkJdW5sb2FkU2xpZGUoIHZlcnRpY2FsU2xpZGUgKTsKCQkJCQkJfQoJCQkJCX0KCgkJCQl9CgkJCX0KCgkJCS8vIEZsYWcgaWYgdGhlcmUgYXJlIEFOWSB2ZXJ0aWNhbCBzbGlkZXMsIGFueXdoZXJlIGluIHRoZSBkZWNrCgkJCWlmKCBoYXNWZXJ0aWNhbFNsaWRlcygpICkgewoJCQkJZG9tLndyYXBwZXIuY2xhc3NMaXN0LmFkZCggJ2hhcy12ZXJ0aWNhbC1zbGlkZXMnICk7CgkJCX0KCQkJZWxzZSB7CgkJCQlkb20ud3JhcHBlci5jbGFzc0xpc3QucmVtb3ZlKCAnaGFzLXZlcnRpY2FsLXNsaWRlcycgKTsKCQkJfQoKCQkJLy8gRmxhZyBpZiB0aGVyZSBhcmUgQU5ZIGhvcml6b250YWwgc2xpZGVzLCBhbnl3aGVyZSBpbiB0aGUgZGVjawoJCQlpZiggaGFzSG9yaXpvbnRhbFNsaWRlcygpICkgewoJCQkJZG9tLndyYXBwZXIuY2xhc3NMaXN0LmFkZCggJ2hhcy1ob3Jpem9udGFsLXNsaWRlcycgKTsKCQkJfQoJCQllbHNlIHsKCQkJCWRvbS53cmFwcGVyLmNsYXNzTGlzdC5yZW1vdmUoICdoYXMtaG9yaXpvbnRhbC1zbGlkZXMnICk7CgkJCX0KCgkJfQoKCX0KCgkvKioKCSAqIFBpY2sgdXAgbm90ZXMgZnJvbSB0aGUgY3VycmVudCBzbGlkZSBhbmQgZGlzcGxheSB0aGVtCgkgKiB0byB0aGUgdmlld2VyLgoJICoKCSAqIEBzZWUge0BsaW5rIGNvbmZpZy5zaG93Tm90ZXN9CgkgKi8KCWZ1bmN0aW9uIHVwZGF0ZU5vdGVzKCkgewoKCQlpZiggY29uZmlnLnNob3dOb3RlcyAmJiBkb20uc3BlYWtlck5vdGVzICYmIGN1cnJlbnRTbGlkZSAmJiAhaXNQcmludGluZ1BERigpICkgewoKCQkJZG9tLnNwZWFrZXJOb3Rlcy5pbm5lckhUTUwgPSBnZXRTbGlkZU5vdGVzKCkgfHwgJzxzcGFuIGNsYXNzPSJub3Rlcy1wbGFjZWhvbGRlciI+Tm8gbm90ZXMgb24gdGhpcyBzbGlkZS48L3NwYW4+JzsKCgkJfQoKCX0KCgkvKioKCSAqIFVwZGF0ZXMgdGhlIHZpc2liaWxpdHkgb2YgdGhlIHNwZWFrZXIgbm90ZXMgc2lkZWJhciB0aGF0CgkgKiBpcyB1c2VkIHRvIHNoYXJlIGFubm90YXRlZCBzbGlkZXMuIFRoZSBub3RlcyBzaWRlYmFyIGlzCgkgKiBvbmx5IHZpc2libGUgaWYgc2hvd05vdGVzIGlzIHRydWUgYW5kIHRoZXJlIGFyZSBub3RlcyBvbgoJICogb25lIG9yIG1vcmUgc2xpZGVzIGluIHRoZSBkZWNrLgoJICovCglmdW5jdGlvbiB1cGRhdGVOb3Rlc1Zpc2liaWxpdHkoKSB7CgoJCWlmKCBjb25maWcuc2hvd05vdGVzICYmIGhhc05vdGVzKCkgKSB7CgkJCWRvbS53cmFwcGVyLmNsYXNzTGlzdC5hZGQoICdzaG93LW5vdGVzJyApOwoJCX0KCQllbHNlIHsKCQkJZG9tLndyYXBwZXIuY2xhc3NMaXN0LnJlbW92ZSggJ3Nob3ctbm90ZXMnICk7CgkJfQoKCX0KCgkvKioKCSAqIENoZWNrcyBpZiB0aGVyZSBhcmUgc3BlYWtlciBub3RlcyBmb3IgQU5ZIHNsaWRlIGluIHRoZQoJICogcHJlc2VudGF0aW9uLgoJICovCglmdW5jdGlvbiBoYXNOb3RlcygpIHsKCgkJcmV0dXJuIGRvbS5zbGlkZXMucXVlcnlTZWxlY3RvckFsbCggJ1tkYXRhLW5vdGVzXSwgYXNpZGUubm90ZXMnICkubGVuZ3RoID4gMDsKCgl9CgoJLyoqCgkgKiBVcGRhdGVzIHRoZSBwcm9ncmVzcyBiYXIgdG8gcmVmbGVjdCB0aGUgY3VycmVudCBzbGlkZS4KCSAqLwoJZnVuY3Rpb24gdXBkYXRlUHJvZ3Jlc3MoKSB7CgoJCS8vIFVwZGF0ZSBwcm9ncmVzcyBpZiBlbmFibGVkCgkJaWYoIGNvbmZpZy5wcm9ncmVzcyAmJiBkb20ucHJvZ3Jlc3NiYXIgKSB7CgoJCQlkb20ucHJvZ3Jlc3NiYXIuc3R5bGUud2lkdGggPSBnZXRQcm9ncmVzcygpICogZG9tLndyYXBwZXIub2Zmc2V0V2lkdGggKyAncHgnOwoKCQl9CgoJfQoKCgkvKioKCSAqIFVwZGF0ZXMgdGhlIHNsaWRlIG51bWJlciB0byBtYXRjaCB0aGUgY3VycmVudCBzbGlkZS4KCSAqLwoJZnVuY3Rpb24gdXBkYXRlU2xpZGVOdW1iZXIoKSB7CgoJCS8vIFVwZGF0ZSBzbGlkZSBudW1iZXIgaWYgZW5hYmxlZAoJCWlmKCBjb25maWcuc2xpZGVOdW1iZXIgJiYgZG9tLnNsaWRlTnVtYmVyICkgewoKCQkJdmFyIHZhbHVlOwoJCQl2YXIgZm9ybWF0ID0gJ2gudic7CgoJCQlpZiggdHlwZW9mIGNvbmZpZy5zbGlkZU51bWJlciA9PT0gJ2Z1bmN0aW9uJyApIHsKCQkJCXZhbHVlID0gY29uZmlnLnNsaWRlTnVtYmVyKCk7CgkJCX0KCQkJZWxzZSB7CgkJCQkvLyBDaGVjayBpZiBhIGN1c3RvbSBudW1iZXIgZm9ybWF0IGlzIGF2YWlsYWJsZQoJCQkJaWYoIHR5cGVvZiBjb25maWcuc2xpZGVOdW1iZXIgPT09ICdzdHJpbmcnICkgewoJCQkJCWZvcm1hdCA9IGNvbmZpZy5zbGlkZU51bWJlcjsKCQkJCX0KCgkJCQkvLyBJZiB0aGVyZSBhcmUgT05MWSB2ZXJ0aWNhbCBzbGlkZXMgaW4gdGhpcyBkZWNrLCBhbHdheXMgdXNlCgkJCQkvLyBhIGZsYXR0ZW5lZCBzbGlkZSBudW1iZXIKCQkJCWlmKCAhL2MvLnRlc3QoIGZvcm1hdCApICYmIGRvbS53cmFwcGVyLnF1ZXJ5U2VsZWN0b3JBbGwoIEhPUklaT05UQUxfU0xJREVTX1NFTEVDVE9SICkubGVuZ3RoID09PSAxICkgewoJCQkJCWZvcm1hdCA9ICdjJzsKCQkJCX0KCgkJCQl2YWx1ZSA9IFtdOwoJCQkJc3dpdGNoKCBmb3JtYXQgKSB7CgkJCQkJY2FzZSAnYyc6CgkJCQkJCXZhbHVlLnB1c2goIGdldFNsaWRlUGFzdENvdW50KCkgKyAxICk7CgkJCQkJCWJyZWFrOwoJCQkJCWNhc2UgJ2MvdCc6CgkJCQkJCXZhbHVlLnB1c2goIGdldFNsaWRlUGFzdENvdW50KCkgKyAxLCAnLycsIGdldFRvdGFsU2xpZGVzKCkgKTsKCQkJCQkJYnJlYWs7CgkJCQkJY2FzZSAnaC92JzoKCQkJCQkJdmFsdWUucHVzaCggaW5kZXhoICsgMSApOwoJCQkJCQlpZiggaXNWZXJ0aWNhbFNsaWRlKCkgKSB2YWx1ZS5wdXNoKCAnLycsIGluZGV4diArIDEgKTsKCQkJCQkJYnJlYWs7CgkJCQkJZGVmYXVsdDoKCQkJCQkJdmFsdWUucHVzaCggaW5kZXhoICsgMSApOwoJCQkJCQlpZiggaXNWZXJ0aWNhbFNsaWRlKCkgKSB2YWx1ZS5wdXNoKCAnLicsIGluZGV4diArIDEgKTsKCQkJCX0KCQkJfQoKCQkJZG9tLnNsaWRlTnVtYmVyLmlubmVySFRNTCA9IGZvcm1hdFNsaWRlTnVtYmVyKCB2YWx1ZVswXSwgdmFsdWVbMV0sIHZhbHVlWzJdICk7CgkJfQoKCX0KCgkvKioKCSAqIEFwcGxpZXMgSFRNTCBmb3JtYXR0aW5nIHRvIGEgc2xpZGUgbnVtYmVyIGJlZm9yZSBpdCdzCgkgKiB3cml0dGVuIHRvIHRoZSBET00uCgkgKgoJICogQHBhcmFtIHtudW1iZXJ9IGEgQ3VycmVudCBzbGlkZQoJICogQHBhcmFtIHtzdHJpbmd9IGRlbGltaXRlciBDaGFyYWN0ZXIgdG8gc2VwYXJhdGUgc2xpZGUgbnVtYmVycwoJICogQHBhcmFtIHsobnVtYmVyfCopfSBiIFRvdGFsIHNsaWRlcwoJICogQHJldHVybiB7c3RyaW5nfSBIVE1MIHN0cmluZyBmcmFnbWVudAoJICovCglmdW5jdGlvbiBmb3JtYXRTbGlkZU51bWJlciggYSwgZGVsaW1pdGVyLCBiICkgewoKCQl2YXIgdXJsID0gJyMnICsgbG9jYXRpb25IYXNoKCk7CgkJaWYoIHR5cGVvZiBiID09PSAnbnVtYmVyJyAmJiAhaXNOYU4oIGIgKSApIHsKCQkJcmV0dXJuICAnPGEgaHJlZj0iJyArIHVybCArICciPicgKwoJCQkJCSc8c3BhbiBjbGFzcz0ic2xpZGUtbnVtYmVyLWEiPicrIGEgKyc8L3NwYW4+JyArCgkJCQkJJzxzcGFuIGNsYXNzPSJzbGlkZS1udW1iZXItZGVsaW1pdGVyIj4nKyBkZWxpbWl0ZXIgKyc8L3NwYW4+JyArCgkJCQkJJzxzcGFuIGNsYXNzPSJzbGlkZS1udW1iZXItYiI+JysgYiArJzwvc3Bhbj4nICsKCQkJCQknPC9hPic7CgkJfQoJCWVsc2UgewoJCQlyZXR1cm4gJzxhIGhyZWY9IicgKyB1cmwgKyAnIj4nICsKCQkJICAgICAgICc8c3BhbiBjbGFzcz0ic2xpZGUtbnVtYmVyLWEiPicrIGEgKyc8L3NwYW4+JyArCgkJCSAgICAgICAnPC9hPic7CgkJfQoKCX0KCgkvKioKCSAqIFVwZGF0ZXMgdGhlIHN0YXRlIG9mIGFsbCBjb250cm9sL25hdmlnYXRpb24gYXJyb3dzLgoJICovCglmdW5jdGlvbiB1cGRhdGVDb250cm9scygpIHsKCgkJdmFyIHJvdXRlcyA9IGF2YWlsYWJsZVJvdXRlcygpOwoJCXZhciBmcmFnbWVudHMgPSBhdmFpbGFibGVGcmFnbWVudHMoKTsKCgkJLy8gUmVtb3ZlIHRoZSAnZW5hYmxlZCcgY2xhc3MgZnJvbSBhbGwgZGlyZWN0aW9ucwoJCWRvbS5jb250cm9sc0xlZnQuY29uY2F0KCBkb20uY29udHJvbHNSaWdodCApCgkJCQkJCS5jb25jYXQoIGRvbS5jb250cm9sc1VwICkKCQkJCQkJLmNvbmNhdCggZG9tLmNvbnRyb2xzRG93biApCgkJCQkJCS5jb25jYXQoIGRvbS5jb250cm9sc1ByZXYgKQoJCQkJCQkuY29uY2F0KCBkb20uY29udHJvbHNOZXh0ICkuZm9yRWFjaCggZnVuY3Rpb24oIG5vZGUgKSB7CgkJCW5vZGUuY2xhc3NMaXN0LnJlbW92ZSggJ2VuYWJsZWQnICk7CgkJCW5vZGUuY2xhc3NMaXN0LnJlbW92ZSggJ2ZyYWdtZW50ZWQnICk7CgoJCQkvLyBTZXQgJ2Rpc2FibGVkJyBhdHRyaWJ1dGUgb24gYWxsIGRpcmVjdGlvbnMKCQkJbm9kZS5zZXRBdHRyaWJ1dGUoICdkaXNhYmxlZCcsICdkaXNhYmxlZCcgKTsKCQl9ICk7CgoJCS8vIEFkZCB0aGUgJ2VuYWJsZWQnIGNsYXNzIHRvIHRoZSBhdmFpbGFibGUgcm91dGVzOyByZW1vdmUgJ2Rpc2FibGVkJyBhdHRyaWJ1dGUgdG8gZW5hYmxlIGJ1dHRvbnMKCQlpZiggcm91dGVzLmxlZnQgKSBkb20uY29udHJvbHNMZWZ0LmZvckVhY2goIGZ1bmN0aW9uKCBlbCApIHsgZWwuY2xhc3NMaXN0LmFkZCggJ2VuYWJsZWQnICk7IGVsLnJlbW92ZUF0dHJpYnV0ZSggJ2Rpc2FibGVkJyApOyB9ICk7CgkJaWYoIHJvdXRlcy5yaWdodCApIGRvbS5jb250cm9sc1JpZ2h0LmZvckVhY2goIGZ1bmN0aW9uKCBlbCApIHsgZWwuY2xhc3NMaXN0LmFkZCggJ2VuYWJsZWQnICk7IGVsLnJlbW92ZUF0dHJpYnV0ZSggJ2Rpc2FibGVkJyApOyB9ICk7CgkJaWYoIHJvdXRlcy51cCApIGRvbS5jb250cm9sc1VwLmZvckVhY2goIGZ1bmN0aW9uKCBlbCApIHsgZWwuY2xhc3NMaXN0LmFkZCggJ2VuYWJsZWQnICk7IGVsLnJlbW92ZUF0dHJpYnV0ZSggJ2Rpc2FibGVkJyApOyB9ICk7CgkJaWYoIHJvdXRlcy5kb3duICkgZG9tLmNvbnRyb2xzRG93bi5mb3JFYWNoKCBmdW5jdGlvbiggZWwgKSB7IGVsLmNsYXNzTGlzdC5hZGQoICdlbmFibGVkJyApOyBlbC5yZW1vdmVBdHRyaWJ1dGUoICdkaXNhYmxlZCcgKTsgfSApOwoKCQkvLyBQcmV2L25leHQgYnV0dG9ucwoJCWlmKCByb3V0ZXMubGVmdCB8fCByb3V0ZXMudXAgKSBkb20uY29udHJvbHNQcmV2LmZvckVhY2goIGZ1bmN0aW9uKCBlbCApIHsgZWwuY2xhc3NMaXN0LmFkZCggJ2VuYWJsZWQnICk7IGVsLnJlbW92ZUF0dHJpYnV0ZSggJ2Rpc2FibGVkJyApOyB9ICk7CgkJaWYoIHJvdXRlcy5yaWdodCB8fCByb3V0ZXMuZG93biApIGRvbS5jb250cm9sc05leHQuZm9yRWFjaCggZnVuY3Rpb24oIGVsICkgeyBlbC5jbGFzc0xpc3QuYWRkKCAnZW5hYmxlZCcgKTsgZWwucmVtb3ZlQXR0cmlidXRlKCAnZGlzYWJsZWQnICk7IH0gKTsKCgkJLy8gSGlnaGxpZ2h0IGZyYWdtZW50IGRpcmVjdGlvbnMKCQlpZiggY3VycmVudFNsaWRlICkgewoKCQkJLy8gQWx3YXlzIGFwcGx5IGZyYWdtZW50IGRlY29yYXRvciB0byBwcmV2L25leHQgYnV0dG9ucwoJCQlpZiggZnJhZ21lbnRzLnByZXYgKSBkb20uY29udHJvbHNQcmV2LmZvckVhY2goIGZ1bmN0aW9uKCBlbCApIHsgZWwuY2xhc3NMaXN0LmFkZCggJ2ZyYWdtZW50ZWQnLCAnZW5hYmxlZCcgKTsgZWwucmVtb3ZlQXR0cmlidXRlKCAnZGlzYWJsZWQnICk7IH0gKTsKCQkJaWYoIGZyYWdtZW50cy5uZXh0ICkgZG9tLmNvbnRyb2xzTmV4dC5mb3JFYWNoKCBmdW5jdGlvbiggZWwgKSB7IGVsLmNsYXNzTGlzdC5hZGQoICdmcmFnbWVudGVkJywgJ2VuYWJsZWQnICk7IGVsLnJlbW92ZUF0dHJpYnV0ZSggJ2Rpc2FibGVkJyApOyB9ICk7CgoJCQkvLyBBcHBseSBmcmFnbWVudCBkZWNvcmF0b3JzIHRvIGRpcmVjdGlvbmFsIGJ1dHRvbnMgYmFzZWQgb24KCQkJLy8gd2hhdCBzbGlkZSBheGlzIHRoZXkgYXJlIGluCgkJCWlmKCBpc1ZlcnRpY2FsU2xpZGUoIGN1cnJlbnRTbGlkZSApICkgewoJCQkJaWYoIGZyYWdtZW50cy5wcmV2ICkgZG9tLmNvbnRyb2xzVXAuZm9yRWFjaCggZnVuY3Rpb24oIGVsICkgeyBlbC5jbGFzc0xpc3QuYWRkKCAnZnJhZ21lbnRlZCcsICdlbmFibGVkJyApOyBlbC5yZW1vdmVBdHRyaWJ1dGUoICdkaXNhYmxlZCcgKTsgfSApOwoJCQkJaWYoIGZyYWdtZW50cy5uZXh0ICkgZG9tLmNvbnRyb2xzRG93bi5mb3JFYWNoKCBmdW5jdGlvbiggZWwgKSB7IGVsLmNsYXNzTGlzdC5hZGQoICdmcmFnbWVudGVkJywgJ2VuYWJsZWQnICk7IGVsLnJlbW92ZUF0dHJpYnV0ZSggJ2Rpc2FibGVkJyApOyB9ICk7CgkJCX0KCQkJZWxzZSB7CgkJCQlpZiggZnJhZ21lbnRzLnByZXYgKSBkb20uY29udHJvbHNMZWZ0LmZvckVhY2goIGZ1bmN0aW9uKCBlbCApIHsgZWwuY2xhc3NMaXN0LmFkZCggJ2ZyYWdtZW50ZWQnLCAnZW5hYmxlZCcgKTsgZWwucmVtb3ZlQXR0cmlidXRlKCAnZGlzYWJsZWQnICk7IH0gKTsKCQkJCWlmKCBmcmFnbWVudHMubmV4dCApIGRvbS5jb250cm9sc1JpZ2h0LmZvckVhY2goIGZ1bmN0aW9uKCBlbCApIHsgZWwuY2xhc3NMaXN0LmFkZCggJ2ZyYWdtZW50ZWQnLCAnZW5hYmxlZCcgKTsgZWwucmVtb3ZlQXR0cmlidXRlKCAnZGlzYWJsZWQnICk7IH0gKTsKCQkJfQoKCQl9CgoJCWlmKCBjb25maWcuY29udHJvbHNUdXRvcmlhbCApIHsKCgkJCS8vIEhpZ2hsaWdodCBjb250cm9sIGFycm93cyB3aXRoIGFuIGFuaW1hdGlvbiB0byBlbnN1cmUKCQkJLy8gdGhhdCB0aGUgdmlld2VyIGtub3dzIGhvdyB0byBuYXZpZ2F0ZQoJCQlpZiggIWhhc05hdmlnYXRlZERvd24gJiYgcm91dGVzLmRvd24gKSB7CgkJCQlkb20uY29udHJvbHNEb3duQXJyb3cuY2xhc3NMaXN0LmFkZCggJ2hpZ2hsaWdodCcgKTsKCQkJfQoJCQllbHNlIHsKCQkJCWRvbS5jb250cm9sc0Rvd25BcnJvdy5jbGFzc0xpc3QucmVtb3ZlKCAnaGlnaGxpZ2h0JyApOwoKCQkJCWlmKCAhaGFzTmF2aWdhdGVkUmlnaHQgJiYgcm91dGVzLnJpZ2h0ICYmIGluZGV4diA9PT0gMCApIHsKCQkJCQlkb20uY29udHJvbHNSaWdodEFycm93LmNsYXNzTGlzdC5hZGQoICdoaWdobGlnaHQnICk7CgkJCQl9CgkJCQllbHNlIHsKCQkJCQlkb20uY29udHJvbHNSaWdodEFycm93LmNsYXNzTGlzdC5yZW1vdmUoICdoaWdobGlnaHQnICk7CgkJCQl9CgkJCX0KCgkJfQoKCX0KCgkvKioKCSAqIFVwZGF0ZXMgdGhlIGJhY2tncm91bmQgZWxlbWVudHMgdG8gcmVmbGVjdCB0aGUgY3VycmVudAoJICogc2xpZGUuCgkgKgoJICogQHBhcmFtIHtib29sZWFufSBpbmNsdWRlQWxsIElmIHRydWUsIHRoZSBiYWNrZ3JvdW5kcyBvZgoJICogYWxsIHZlcnRpY2FsIHNsaWRlcyAobm90IGp1c3QgdGhlIHByZXNlbnQpIHdpbGwgYmUgdXBkYXRlZC4KCSAqLwoJZnVuY3Rpb24gdXBkYXRlQmFja2dyb3VuZCggaW5jbHVkZUFsbCApIHsKCgkJdmFyIGN1cnJlbnRCYWNrZ3JvdW5kID0gbnVsbDsKCgkJLy8gUmV2ZXJzZSBwYXN0L2Z1dHVyZSBjbGFzc2VzIHdoZW4gaW4gUlRMIG1vZGUKCQl2YXIgaG9yaXpvbnRhbFBhc3QgPSBjb25maWcucnRsID8gJ2Z1dHVyZScgOiAncGFzdCcsCgkJCWhvcml6b250YWxGdXR1cmUgPSBjb25maWcucnRsID8gJ3Bhc3QnIDogJ2Z1dHVyZSc7CgoJCS8vIFVwZGF0ZSB0aGUgY2xhc3NlcyBvZiBhbGwgYmFja2dyb3VuZHMgdG8gbWF0Y2ggdGhlCgkJLy8gc3RhdGVzIG9mIHRoZWlyIHNsaWRlcyAocGFzdC9wcmVzZW50L2Z1dHVyZSkKCQl0b0FycmF5KCBkb20uYmFja2dyb3VuZC5jaGlsZE5vZGVzICkuZm9yRWFjaCggZnVuY3Rpb24oIGJhY2tncm91bmRoLCBoICkgewoKCQkJYmFja2dyb3VuZGguY2xhc3NMaXN0LnJlbW92ZSggJ3Bhc3QnICk7CgkJCWJhY2tncm91bmRoLmNsYXNzTGlzdC5yZW1vdmUoICdwcmVzZW50JyApOwoJCQliYWNrZ3JvdW5kaC5jbGFzc0xpc3QucmVtb3ZlKCAnZnV0dXJlJyApOwoKCQkJaWYoIGggPCBpbmRleGggKSB7CgkJCQliYWNrZ3JvdW5kaC5jbGFzc0xpc3QuYWRkKCBob3Jpem9udGFsUGFzdCApOwoJCQl9CgkJCWVsc2UgaWYgKCBoID4gaW5kZXhoICkgewoJCQkJYmFja2dyb3VuZGguY2xhc3NMaXN0LmFkZCggaG9yaXpvbnRhbEZ1dHVyZSApOwoJCQl9CgkJCWVsc2UgewoJCQkJYmFja2dyb3VuZGguY2xhc3NMaXN0LmFkZCggJ3ByZXNlbnQnICk7CgoJCQkJLy8gU3RvcmUgYSByZWZlcmVuY2UgdG8gdGhlIGN1cnJlbnQgYmFja2dyb3VuZCBlbGVtZW50CgkJCQljdXJyZW50QmFja2dyb3VuZCA9IGJhY2tncm91bmRoOwoJCQl9CgoJCQlpZiggaW5jbHVkZUFsbCB8fCBoID09PSBpbmRleGggKSB7CgkJCQl0b0FycmF5KCBiYWNrZ3JvdW5kaC5xdWVyeVNlbGVjdG9yQWxsKCAnLnNsaWRlLWJhY2tncm91bmQnICkgKS5mb3JFYWNoKCBmdW5jdGlvbiggYmFja2dyb3VuZHYsIHYgKSB7CgoJCQkJCWJhY2tncm91bmR2LmNsYXNzTGlzdC5yZW1vdmUoICdwYXN0JyApOwoJCQkJCWJhY2tncm91bmR2LmNsYXNzTGlzdC5yZW1vdmUoICdwcmVzZW50JyApOwoJCQkJCWJhY2tncm91bmR2LmNsYXNzTGlzdC5yZW1vdmUoICdmdXR1cmUnICk7CgoJCQkJCWlmKCB2IDwgaW5kZXh2ICkgewoJCQkJCQliYWNrZ3JvdW5kdi5jbGFzc0xpc3QuYWRkKCAncGFzdCcgKTsKCQkJCQl9CgkJCQkJZWxzZSBpZiAoIHYgPiBpbmRleHYgKSB7CgkJCQkJCWJhY2tncm91bmR2LmNsYXNzTGlzdC5hZGQoICdmdXR1cmUnICk7CgkJCQkJfQoJCQkJCWVsc2UgewoJCQkJCQliYWNrZ3JvdW5kdi5jbGFzc0xpc3QuYWRkKCAncHJlc2VudCcgKTsKCgkJCQkJCS8vIE9ubHkgaWYgdGhpcyBpcyB0aGUgcHJlc2VudCBob3Jpem9udGFsIGFuZCB2ZXJ0aWNhbCBzbGlkZQoJCQkJCQlpZiggaCA9PT0gaW5kZXhoICkgY3VycmVudEJhY2tncm91bmQgPSBiYWNrZ3JvdW5kdjsKCQkJCQl9CgoJCQkJfSApOwoJCQl9CgoJCX0gKTsKCgkJLy8gU3RvcCBjb250ZW50IGluc2lkZSBvZiBwcmV2aW91cyBiYWNrZ3JvdW5kcwoJCWlmKCBwcmV2aW91c0JhY2tncm91bmQgKSB7CgoJCQlzdG9wRW1iZWRkZWRDb250ZW50KCBwcmV2aW91c0JhY2tncm91bmQsIHsgdW5sb2FkSWZyYW1lczogIXNob3VsZFByZWxvYWQoIHByZXZpb3VzQmFja2dyb3VuZCApIH0gKTsKCgkJfQoKCQkvLyBTdGFydCBjb250ZW50IGluIHRoZSBjdXJyZW50IGJhY2tncm91bmQKCQlpZiggY3VycmVudEJhY2tncm91bmQgKSB7CgoJCQlzdGFydEVtYmVkZGVkQ29udGVudCggY3VycmVudEJhY2tncm91bmQgKTsKCgkJCXZhciBjdXJyZW50QmFja2dyb3VuZENvbnRlbnQgPSBjdXJyZW50QmFja2dyb3VuZC5xdWVyeVNlbGVjdG9yKCAnLnNsaWRlLWJhY2tncm91bmQtY29udGVudCcgKTsKCQkJaWYoIGN1cnJlbnRCYWNrZ3JvdW5kQ29udGVudCApIHsKCgkJCQl2YXIgYmFja2dyb3VuZEltYWdlVVJMID0gY3VycmVudEJhY2tncm91bmRDb250ZW50LnN0eWxlLmJhY2tncm91bmRJbWFnZSB8fCAnJzsKCgkJCQkvLyBSZXN0YXJ0IEdJRnMgKGRvZXNuJ3Qgd29yayBpbiBGaXJlZm94KQoJCQkJaWYoIC9cLmdpZi9pLnRlc3QoIGJhY2tncm91bmRJbWFnZVVSTCApICkgewoJCQkJCWN1cnJlbnRCYWNrZ3JvdW5kQ29udGVudC5zdHlsZS5iYWNrZ3JvdW5kSW1hZ2UgPSAnJzsKCQkJCQl3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSggY3VycmVudEJhY2tncm91bmRDb250ZW50ICkub3BhY2l0eTsKCQkJCQljdXJyZW50QmFja2dyb3VuZENvbnRlbnQuc3R5bGUuYmFja2dyb3VuZEltYWdlID0gYmFja2dyb3VuZEltYWdlVVJMOwoJCQkJfQoKCQkJfQoKCQkJLy8gRG9uJ3QgdHJhbnNpdGlvbiBiZXR3ZWVuIGlkZW50aWNhbCBiYWNrZ3JvdW5kcy4gVGhpcwoJCQkvLyBwcmV2ZW50cyB1bndhbnRlZCBmbGlja2VyLgoJCQl2YXIgcHJldmlvdXNCYWNrZ3JvdW5kSGFzaCA9IHByZXZpb3VzQmFja2dyb3VuZCA/IHByZXZpb3VzQmFja2dyb3VuZC5nZXRBdHRyaWJ1dGUoICdkYXRhLWJhY2tncm91bmQtaGFzaCcgKSA6IG51bGw7CgkJCXZhciBjdXJyZW50QmFja2dyb3VuZEhhc2ggPSBjdXJyZW50QmFja2dyb3VuZC5nZXRBdHRyaWJ1dGUoICdkYXRhLWJhY2tncm91bmQtaGFzaCcgKTsKCQkJaWYoIGN1cnJlbnRCYWNrZ3JvdW5kSGFzaCAmJiBjdXJyZW50QmFja2dyb3VuZEhhc2ggPT09IHByZXZpb3VzQmFja2dyb3VuZEhhc2ggJiYgY3VycmVudEJhY2tncm91bmQgIT09IHByZXZpb3VzQmFja2dyb3VuZCApIHsKCQkJCWRvbS5iYWNrZ3JvdW5kLmNsYXNzTGlzdC5hZGQoICduby10cmFuc2l0aW9uJyApOwoJCQl9CgoJCQlwcmV2aW91c0JhY2tncm91bmQgPSBjdXJyZW50QmFja2dyb3VuZDsKCgkJfQoKCQkvLyBJZiB0aGVyZSdzIGEgYmFja2dyb3VuZCBicmlnaHRuZXNzIGZsYWcgZm9yIHRoaXMgc2xpZGUsCgkJLy8gYnViYmxlIGl0IHRvIHRoZSAucmV2ZWFsIGNvbnRhaW5lcgoJCWlmKCBjdXJyZW50U2xpZGUgKSB7CgkJCVsgJ2hhcy1saWdodC1iYWNrZ3JvdW5kJywgJ2hhcy1kYXJrLWJhY2tncm91bmQnIF0uZm9yRWFjaCggZnVuY3Rpb24oIGNsYXNzVG9CdWJibGUgKSB7CgkJCQlpZiggY3VycmVudFNsaWRlLmNsYXNzTGlzdC5jb250YWlucyggY2xhc3NUb0J1YmJsZSApICkgewoJCQkJCWRvbS53cmFwcGVyLmNsYXNzTGlzdC5hZGQoIGNsYXNzVG9CdWJibGUgKTsKCQkJCX0KCQkJCWVsc2UgewoJCQkJCWRvbS53cmFwcGVyLmNsYXNzTGlzdC5yZW1vdmUoIGNsYXNzVG9CdWJibGUgKTsKCQkJCX0KCQkJfSApOwoJCX0KCgkJLy8gQWxsb3cgdGhlIGZpcnN0IGJhY2tncm91bmQgdG8gYXBwbHkgd2l0aG91dCB0cmFuc2l0aW9uCgkJc2V0VGltZW91dCggZnVuY3Rpb24oKSB7CgkJCWRvbS5iYWNrZ3JvdW5kLmNsYXNzTGlzdC5yZW1vdmUoICduby10cmFuc2l0aW9uJyApOwoJCX0sIDEgKTsKCgl9CgoJLyoqCgkgKiBVcGRhdGVzIHRoZSBwb3NpdGlvbiBvZiB0aGUgcGFyYWxsYXggYmFja2dyb3VuZCBiYXNlZAoJICogb24gdGhlIGN1cnJlbnQgc2xpZGUgaW5kZXguCgkgKi8KCWZ1bmN0aW9uIHVwZGF0ZVBhcmFsbGF4KCkgewoKCQlpZiggY29uZmlnLnBhcmFsbGF4QmFja2dyb3VuZEltYWdlICkgewoKCQkJdmFyIGhvcml6b250YWxTbGlkZXMgPSBkb20ud3JhcHBlci5xdWVyeVNlbGVjdG9yQWxsKCBIT1JJWk9OVEFMX1NMSURFU19TRUxFQ1RPUiApLAoJCQkJdmVydGljYWxTbGlkZXMgPSBkb20ud3JhcHBlci5xdWVyeVNlbGVjdG9yQWxsKCBWRVJUSUNBTF9TTElERVNfU0VMRUNUT1IgKTsKCgkJCXZhciBiYWNrZ3JvdW5kU2l6ZSA9IGRvbS5iYWNrZ3JvdW5kLnN0eWxlLmJhY2tncm91bmRTaXplLnNwbGl0KCAnICcgKSwKCQkJCWJhY2tncm91bmRXaWR0aCwgYmFja2dyb3VuZEhlaWdodDsKCgkJCWlmKCBiYWNrZ3JvdW5kU2l6ZS5sZW5ndGggPT09IDEgKSB7CgkJCQliYWNrZ3JvdW5kV2lkdGggPSBiYWNrZ3JvdW5kSGVpZ2h0ID0gcGFyc2VJbnQoIGJhY2tncm91bmRTaXplWzBdLCAxMCApOwoJCQl9CgkJCWVsc2UgewoJCQkJYmFja2dyb3VuZFdpZHRoID0gcGFyc2VJbnQoIGJhY2tncm91bmRTaXplWzBdLCAxMCApOwoJCQkJYmFja2dyb3VuZEhlaWdodCA9IHBhcnNlSW50KCBiYWNrZ3JvdW5kU2l6ZVsxXSwgMTAgKTsKCQkJfQoKCQkJdmFyIHNsaWRlV2lkdGggPSBkb20uYmFja2dyb3VuZC5vZmZzZXRXaWR0aCwKCQkJCWhvcml6b250YWxTbGlkZUNvdW50ID0gaG9yaXpvbnRhbFNsaWRlcy5sZW5ndGgsCgkJCQlob3Jpem9udGFsT2Zmc2V0TXVsdGlwbGllciwKCQkJCWhvcml6b250YWxPZmZzZXQ7CgoJCQlpZiggdHlwZW9mIGNvbmZpZy5wYXJhbGxheEJhY2tncm91bmRIb3Jpem9udGFsID09PSAnbnVtYmVyJyApIHsKCQkJCWhvcml6b250YWxPZmZzZXRNdWx0aXBsaWVyID0gY29uZmlnLnBhcmFsbGF4QmFja2dyb3VuZEhvcml6b250YWw7CgkJCX0KCQkJZWxzZSB7CgkJCQlob3Jpem9udGFsT2Zmc2V0TXVsdGlwbGllciA9IGhvcml6b250YWxTbGlkZUNvdW50ID4gMSA/ICggYmFja2dyb3VuZFdpZHRoIC0gc2xpZGVXaWR0aCApIC8gKCBob3Jpem9udGFsU2xpZGVDb3VudC0xICkgOiAwOwoJCQl9CgoJCQlob3Jpem9udGFsT2Zmc2V0ID0gaG9yaXpvbnRhbE9mZnNldE11bHRpcGxpZXIgKiBpbmRleGggKiAtMTsKCgkJCXZhciBzbGlkZUhlaWdodCA9IGRvbS5iYWNrZ3JvdW5kLm9mZnNldEhlaWdodCwKCQkJCXZlcnRpY2FsU2xpZGVDb3VudCA9IHZlcnRpY2FsU2xpZGVzLmxlbmd0aCwKCQkJCXZlcnRpY2FsT2Zmc2V0TXVsdGlwbGllciwKCQkJCXZlcnRpY2FsT2Zmc2V0OwoKCQkJaWYoIHR5cGVvZiBjb25maWcucGFyYWxsYXhCYWNrZ3JvdW5kVmVydGljYWwgPT09ICdudW1iZXInICkgewoJCQkJdmVydGljYWxPZmZzZXRNdWx0aXBsaWVyID0gY29uZmlnLnBhcmFsbGF4QmFja2dyb3VuZFZlcnRpY2FsOwoJCQl9CgkJCWVsc2UgewoJCQkJdmVydGljYWxPZmZzZXRNdWx0aXBsaWVyID0gKCBiYWNrZ3JvdW5kSGVpZ2h0IC0gc2xpZGVIZWlnaHQgKSAvICggdmVydGljYWxTbGlkZUNvdW50LTEgKTsKCQkJfQoKCQkJdmVydGljYWxPZmZzZXQgPSB2ZXJ0aWNhbFNsaWRlQ291bnQgPiAwID8gIHZlcnRpY2FsT2Zmc2V0TXVsdGlwbGllciAqIGluZGV4diA6IDA7CgoJCQlkb20uYmFja2dyb3VuZC5zdHlsZS5iYWNrZ3JvdW5kUG9zaXRpb24gPSBob3Jpem9udGFsT2Zmc2V0ICsgJ3B4ICcgKyAtdmVydGljYWxPZmZzZXQgKyAncHgnOwoKCQl9CgoJfQoKCS8qKgoJICogU2hvdWxkIHRoZSBnaXZlbiBlbGVtZW50IGJlIHByZWxvYWRlZD8KCSAqIERlY2lkZXMgYmFzZWQgb24gbG9jYWwgZWxlbWVudCBhdHRyaWJ1dGVzIGFuZCBnbG9iYWwgY29uZmlnLgoJICoKCSAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IGVsZW1lbnQKCSAqLwoJZnVuY3Rpb24gc2hvdWxkUHJlbG9hZCggZWxlbWVudCApIHsKCgkJLy8gUHJlZmVyIGFuIGV4cGxpY2l0IGdsb2JhbCBwcmVsb2FkIHNldHRpbmcKCQl2YXIgcHJlbG9hZCA9IGNvbmZpZy5wcmVsb2FkSWZyYW1lczsKCgkJLy8gSWYgbm8gZ2xvYmFsIHNldHRpbmcgaXMgYXZhaWxhYmxlLCBmYWxsIGJhY2sgb24gdGhlIGVsZW1lbnQncwoJCS8vIG93biBwcmVsb2FkIHNldHRpbmcKCQlpZiggdHlwZW9mIHByZWxvYWQgIT09ICdib29sZWFuJyApIHsKCQkJcHJlbG9hZCA9IGVsZW1lbnQuaGFzQXR0cmlidXRlKCAnZGF0YS1wcmVsb2FkJyApOwoJCX0KCgkJcmV0dXJuIHByZWxvYWQ7Cgl9CgoJLyoqCgkgKiBDYWxsZWQgd2hlbiB0aGUgZ2l2ZW4gc2xpZGUgaXMgd2l0aGluIHRoZSBjb25maWd1cmVkIHZpZXcKCSAqIGRpc3RhbmNlLiBTaG93cyB0aGUgc2xpZGUgZWxlbWVudCBhbmQgbG9hZHMgYW55IGNvbnRlbnQKCSAqIHRoYXQgaXMgc2V0IHRvIGxvYWQgbGF6aWx5IChkYXRhLXNyYykuCgkgKgoJICogQHBhcmFtIHtIVE1MRWxlbWVudH0gc2xpZGUgU2xpZGUgdG8gc2hvdwoJICovCglmdW5jdGlvbiBsb2FkU2xpZGUoIHNsaWRlLCBvcHRpb25zICkgewoKCQlvcHRpb25zID0gb3B0aW9ucyB8fCB7fTsKCgkJLy8gU2hvdyB0aGUgc2xpZGUgZWxlbWVudAoJCXNsaWRlLnN0eWxlLmRpc3BsYXkgPSBjb25maWcuZGlzcGxheTsKCgkJLy8gTWVkaWEgZWxlbWVudHMgd2l0aCBkYXRhLXNyYyBhdHRyaWJ1dGVzCgkJdG9BcnJheSggc2xpZGUucXVlcnlTZWxlY3RvckFsbCggJ2ltZ1tkYXRhLXNyY10sIHZpZGVvW2RhdGEtc3JjXSwgYXVkaW9bZGF0YS1zcmNdLCBpZnJhbWVbZGF0YS1zcmNdJyApICkuZm9yRWFjaCggZnVuY3Rpb24oIGVsZW1lbnQgKSB7CgkJCWlmKCBlbGVtZW50LnRhZ05hbWUgIT09ICdJRlJBTUUnIHx8IHNob3VsZFByZWxvYWQoIGVsZW1lbnQgKSApIHsKCQkJCWVsZW1lbnQuc2V0QXR0cmlidXRlKCAnc3JjJywgZWxlbWVudC5nZXRBdHRyaWJ1dGUoICdkYXRhLXNyYycgKSApOwoJCQkJZWxlbWVudC5zZXRBdHRyaWJ1dGUoICdkYXRhLWxhenktbG9hZGVkJywgJycgKTsKCQkJCWVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKCAnZGF0YS1zcmMnICk7CgkJCX0KCQl9ICk7CgoJCS8vIE1lZGlhIGVsZW1lbnRzIHdpdGggPHNvdXJjZT4gY2hpbGRyZW4KCQl0b0FycmF5KCBzbGlkZS5xdWVyeVNlbGVjdG9yQWxsKCAndmlkZW8sIGF1ZGlvJyApICkuZm9yRWFjaCggZnVuY3Rpb24oIG1lZGlhICkgewoJCQl2YXIgc291cmNlcyA9IDA7CgoJCQl0b0FycmF5KCBtZWRpYS5xdWVyeVNlbGVjdG9yQWxsKCAnc291cmNlW2RhdGEtc3JjXScgKSApLmZvckVhY2goIGZ1bmN0aW9uKCBzb3VyY2UgKSB7CgkJCQlzb3VyY2Uuc2V0QXR0cmlidXRlKCAnc3JjJywgc291cmNlLmdldEF0dHJpYnV0ZSggJ2RhdGEtc3JjJyApICk7CgkJCQlzb3VyY2UucmVtb3ZlQXR0cmlidXRlKCAnZGF0YS1zcmMnICk7CgkJCQlzb3VyY2Uuc2V0QXR0cmlidXRlKCAnZGF0YS1sYXp5LWxvYWRlZCcsICcnICk7CgkJCQlzb3VyY2VzICs9IDE7CgkJCX0gKTsKCgkJCS8vIElmIHdlIHJld3JvdGUgc291cmNlcyBmb3IgdGhpcyB2aWRlby9hdWRpbyBlbGVtZW50LCB3ZSBuZWVkCgkJCS8vIHRvIG1hbnVhbGx5IHRlbGwgaXQgdG8gbG9hZCBmcm9tIGl0cyBuZXcgb3JpZ2luCgkJCWlmKCBzb3VyY2VzID4gMCApIHsKCQkJCW1lZGlhLmxvYWQoKTsKCQkJfQoJCX0gKTsKCgoJCS8vIFNob3cgdGhlIGNvcnJlc3BvbmRpbmcgYmFja2dyb3VuZCBlbGVtZW50CgkJdmFyIGJhY2tncm91bmQgPSBzbGlkZS5zbGlkZUJhY2tncm91bmRFbGVtZW50OwoJCWlmKCBiYWNrZ3JvdW5kICkgewoJCQliYWNrZ3JvdW5kLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snOwoKCQkJdmFyIGJhY2tncm91bmRDb250ZW50ID0gc2xpZGUuc2xpZGVCYWNrZ3JvdW5kQ29udGVudEVsZW1lbnQ7CgkJCXZhciBiYWNrZ3JvdW5kSWZyYW1lID0gc2xpZGUuZ2V0QXR0cmlidXRlKCAnZGF0YS1iYWNrZ3JvdW5kLWlmcmFtZScgKTsKCgkJCS8vIElmIHRoZSBiYWNrZ3JvdW5kIGNvbnRhaW5zIG1lZGlhLCBsb2FkIGl0CgkJCWlmKCBiYWNrZ3JvdW5kLmhhc0F0dHJpYnV0ZSggJ2RhdGEtbG9hZGVkJyApID09PSBmYWxzZSApIHsKCQkJCWJhY2tncm91bmQuc2V0QXR0cmlidXRlKCAnZGF0YS1sb2FkZWQnLCAndHJ1ZScgKTsKCgkJCQl2YXIgYmFja2dyb3VuZEltYWdlID0gc2xpZGUuZ2V0QXR0cmlidXRlKCAnZGF0YS1iYWNrZ3JvdW5kLWltYWdlJyApLAoJCQkJCWJhY2tncm91bmRWaWRlbyA9IHNsaWRlLmdldEF0dHJpYnV0ZSggJ2RhdGEtYmFja2dyb3VuZC12aWRlbycgKSwKCQkJCQliYWNrZ3JvdW5kVmlkZW9Mb29wID0gc2xpZGUuaGFzQXR0cmlidXRlKCAnZGF0YS1iYWNrZ3JvdW5kLXZpZGVvLWxvb3AnICksCgkJCQkJYmFja2dyb3VuZFZpZGVvTXV0ZWQgPSBzbGlkZS5oYXNBdHRyaWJ1dGUoICdkYXRhLWJhY2tncm91bmQtdmlkZW8tbXV0ZWQnICk7CgoJCQkJLy8gSW1hZ2VzCgkJCQlpZiggYmFja2dyb3VuZEltYWdlICkgewoJCQkJCWJhY2tncm91bmRDb250ZW50LnN0eWxlLmJhY2tncm91bmRJbWFnZSA9ICd1cmwoJysgZW5jb2RlVVJJKCBiYWNrZ3JvdW5kSW1hZ2UgKSArJyknOwoJCQkJfQoJCQkJLy8gVmlkZW9zCgkJCQllbHNlIGlmICggYmFja2dyb3VuZFZpZGVvICYmICFpc1NwZWFrZXJOb3RlcygpICkgewoJCQkJCXZhciB2aWRlbyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoICd2aWRlbycgKTsKCgkJCQkJaWYoIGJhY2tncm91bmRWaWRlb0xvb3AgKSB7CgkJCQkJCXZpZGVvLnNldEF0dHJpYnV0ZSggJ2xvb3AnLCAnJyApOwoJCQkJCX0KCgkJCQkJaWYoIGJhY2tncm91bmRWaWRlb011dGVkICkgewoJCQkJCQl2aWRlby5tdXRlZCA9IHRydWU7CgkJCQkJfQoKCQkJCQkvLyBJbmxpbmUgdmlkZW8gcGxheWJhY2sgd29ya3MgKGF0IGxlYXN0IGluIE1vYmlsZSBTYWZhcmkpIGFzCgkJCQkJLy8gbG9uZyBhcyB0aGUgdmlkZW8gaXMgbXV0ZWQgYW5kIHRoZSBgcGxheXNpbmxpbmVgIGF0dHJpYnV0ZSBpcwoJCQkJCS8vIHByZXNlbnQKCQkJCQlpZiggaXNNb2JpbGVEZXZpY2UgKSB7CgkJCQkJCXZpZGVvLm11dGVkID0gdHJ1ZTsKCQkJCQkJdmlkZW8uYXV0b3BsYXkgPSB0cnVlOwoJCQkJCQl2aWRlby5zZXRBdHRyaWJ1dGUoICdwbGF5c2lubGluZScsICcnICk7CgkJCQkJfQoKCQkJCQkvLyBTdXBwb3J0IGNvbW1hIHNlcGFyYXRlZCBsaXN0cyBvZiB2aWRlbyBzb3VyY2VzCgkJCQkJYmFja2dyb3VuZFZpZGVvLnNwbGl0KCAnLCcgKS5mb3JFYWNoKCBmdW5jdGlvbiggc291cmNlICkgewoJCQkJCQl2aWRlby5pbm5lckhUTUwgKz0gJzxzb3VyY2Ugc3JjPSInKyBzb3VyY2UgKyciPic7CgkJCQkJfSApOwoKCQkJCQliYWNrZ3JvdW5kQ29udGVudC5hcHBlbmRDaGlsZCggdmlkZW8gKTsKCQkJCX0KCQkJCS8vIElmcmFtZXMKCQkJCWVsc2UgaWYoIGJhY2tncm91bmRJZnJhbWUgJiYgb3B0aW9ucy5leGNsdWRlSWZyYW1lcyAhPT0gdHJ1ZSApIHsKCQkJCQl2YXIgaWZyYW1lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggJ2lmcmFtZScgKTsKCQkJCQlpZnJhbWUuc2V0QXR0cmlidXRlKCAnYWxsb3dmdWxsc2NyZWVuJywgJycgKTsKCQkJCQlpZnJhbWUuc2V0QXR0cmlidXRlKCAnbW96YWxsb3dmdWxsc2NyZWVuJywgJycgKTsKCQkJCQlpZnJhbWUuc2V0QXR0cmlidXRlKCAnd2Via2l0YWxsb3dmdWxsc2NyZWVuJywgJycgKTsKCgkJCQkJaWZyYW1lLnNldEF0dHJpYnV0ZSggJ2RhdGEtc3JjJywgYmFja2dyb3VuZElmcmFtZSApOwoKCQkJCQlpZnJhbWUuc3R5bGUud2lkdGggID0gJzEwMCUnOwoJCQkJCWlmcmFtZS5zdHlsZS5oZWlnaHQgPSAnMTAwJSc7CgkJCQkJaWZyYW1lLnN0eWxlLm1heEhlaWdodCA9ICcxMDAlJzsKCQkJCQlpZnJhbWUuc3R5bGUubWF4V2lkdGggPSAnMTAwJSc7CgoJCQkJCWJhY2tncm91bmRDb250ZW50LmFwcGVuZENoaWxkKCBpZnJhbWUgKTsKCQkJCX0KCQkJfQoKCQkJLy8gU3RhcnQgbG9hZGluZyBwcmVsb2FkYWJsZSBpZnJhbWVzCgkJCXZhciBiYWNrZ3JvdW5kSWZyYW1lRWxlbWVudCA9IGJhY2tncm91bmRDb250ZW50LnF1ZXJ5U2VsZWN0b3IoICdpZnJhbWVbZGF0YS1zcmNdJyApOwoJCQlpZiggYmFja2dyb3VuZElmcmFtZUVsZW1lbnQgKSB7CgoJCQkJLy8gQ2hlY2sgaWYgdGhpcyBpZnJhbWUgaXMgZWxpZ2libGUgdG8gYmUgcHJlbG9hZGVkCgkJCQlpZiggc2hvdWxkUHJlbG9hZCggYmFja2dyb3VuZCApICYmICEvYXV0b3BsYXk9KDF8dHJ1ZXx5ZXMpL2dpLnRlc3QoIGJhY2tncm91bmRJZnJhbWUgKSApIHsKCQkJCQlpZiggYmFja2dyb3VuZElmcmFtZUVsZW1lbnQuZ2V0QXR0cmlidXRlKCAnc3JjJyApICE9PSBiYWNrZ3JvdW5kSWZyYW1lICkgewoJCQkJCQliYWNrZ3JvdW5kSWZyYW1lRWxlbWVudC5zZXRBdHRyaWJ1dGUoICdzcmMnLCBiYWNrZ3JvdW5kSWZyYW1lICk7CgkJCQkJfQoJCQkJfQoKCQkJfQoKCQl9CgoJfQoKCS8qKgoJICogVW5sb2FkcyBhbmQgaGlkZXMgdGhlIGdpdmVuIHNsaWRlLiBUaGlzIGlzIGNhbGxlZCB3aGVuIHRoZQoJICogc2xpZGUgaXMgbW92ZWQgb3V0c2lkZSBvZiB0aGUgY29uZmlndXJlZCB2aWV3IGRpc3RhbmNlLgoJICoKCSAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IHNsaWRlCgkgKi8KCWZ1bmN0aW9uIHVubG9hZFNsaWRlKCBzbGlkZSApIHsKCgkJLy8gSGlkZSB0aGUgc2xpZGUgZWxlbWVudAoJCXNsaWRlLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7CgoJCS8vIEhpZGUgdGhlIGNvcnJlc3BvbmRpbmcgYmFja2dyb3VuZCBlbGVtZW50CgkJdmFyIGJhY2tncm91bmQgPSBnZXRTbGlkZUJhY2tncm91bmQoIHNsaWRlICk7CgkJaWYoIGJhY2tncm91bmQgKSB7CgkJCWJhY2tncm91bmQuc3R5bGUuZGlzcGxheSA9ICdub25lJzsKCgkJCS8vIFVubG9hZCBhbnkgYmFja2dyb3VuZCBpZnJhbWVzCgkJCXRvQXJyYXkoIGJhY2tncm91bmQucXVlcnlTZWxlY3RvckFsbCggJ2lmcmFtZVtzcmNdJyApICkuZm9yRWFjaCggZnVuY3Rpb24oIGVsZW1lbnQgKSB7CgkJCQllbGVtZW50LnJlbW92ZUF0dHJpYnV0ZSggJ3NyYycgKTsKCQkJfSApOwoJCX0KCgkJLy8gUmVzZXQgbGF6eS1sb2FkZWQgbWVkaWEgZWxlbWVudHMgd2l0aCBzcmMgYXR0cmlidXRlcwoJCXRvQXJyYXkoIHNsaWRlLnF1ZXJ5U2VsZWN0b3JBbGwoICd2aWRlb1tkYXRhLWxhenktbG9hZGVkXVtzcmNdLCBhdWRpb1tkYXRhLWxhenktbG9hZGVkXVtzcmNdLCBpZnJhbWVbZGF0YS1sYXp5LWxvYWRlZF1bc3JjXScgKSApLmZvckVhY2goIGZ1bmN0aW9uKCBlbGVtZW50ICkgewoJCQllbGVtZW50LnNldEF0dHJpYnV0ZSggJ2RhdGEtc3JjJywgZWxlbWVudC5nZXRBdHRyaWJ1dGUoICdzcmMnICkgKTsKCQkJZWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoICdzcmMnICk7CgkJfSApOwoKCQkvLyBSZXNldCBsYXp5LWxvYWRlZCBtZWRpYSBlbGVtZW50cyB3aXRoIDxzb3VyY2U+IGNoaWxkcmVuCgkJdG9BcnJheSggc2xpZGUucXVlcnlTZWxlY3RvckFsbCggJ3ZpZGVvW2RhdGEtbGF6eS1sb2FkZWRdIHNvdXJjZVtzcmNdLCBhdWRpbyBzb3VyY2Vbc3JjXScgKSApLmZvckVhY2goIGZ1bmN0aW9uKCBzb3VyY2UgKSB7CgkJCXNvdXJjZS5zZXRBdHRyaWJ1dGUoICdkYXRhLXNyYycsIHNvdXJjZS5nZXRBdHRyaWJ1dGUoICdzcmMnICkgKTsKCQkJc291cmNlLnJlbW92ZUF0dHJpYnV0ZSggJ3NyYycgKTsKCQl9ICk7CgoJfQoKCS8qKgoJICogRGV0ZXJtaW5lIHdoYXQgYXZhaWxhYmxlIHJvdXRlcyB0aGVyZSBhcmUgZm9yIG5hdmlnYXRpb24uCgkgKgoJICogQHJldHVybiB7e2xlZnQ6IGJvb2xlYW4sIHJpZ2h0OiBib29sZWFuLCB1cDogYm9vbGVhbiwgZG93bjogYm9vbGVhbn19CgkgKi8KCWZ1bmN0aW9uIGF2YWlsYWJsZVJvdXRlcygpIHsKCgkJdmFyIGhvcml6b250YWxTbGlkZXMgPSBkb20ud3JhcHBlci5xdWVyeVNlbGVjdG9yQWxsKCBIT1JJWk9OVEFMX1NMSURFU19TRUxFQ1RPUiApLAoJCQl2ZXJ0aWNhbFNsaWRlcyA9IGRvbS53cmFwcGVyLnF1ZXJ5U2VsZWN0b3JBbGwoIFZFUlRJQ0FMX1NMSURFU19TRUxFQ1RPUiApOwoKCQl2YXIgcm91dGVzID0gewoJCQlsZWZ0OiBpbmRleGggPiAwLAoJCQlyaWdodDogaW5kZXhoIDwgaG9yaXpvbnRhbFNsaWRlcy5sZW5ndGggLSAxLAoJCQl1cDogaW5kZXh2ID4gMCwKCQkJZG93bjogaW5kZXh2IDwgdmVydGljYWxTbGlkZXMubGVuZ3RoIC0gMQoJCX07CgoJCS8vIExvb3BlZCBwcmVzZW50YXRpb25zIGNhbiBhbHdheXMgYmUgbmF2aWdhdGVkIGFzIGxvbmcgYXMKCQkvLyB0aGVyZSBhcmUgc2xpZGVzIGF2YWlsYWJsZQoJCWlmKCBjb25maWcubG9vcCApIHsKCQkJaWYoIGhvcml6b250YWxTbGlkZXMubGVuZ3RoID4gMSApIHsKCQkJCXJvdXRlcy5sZWZ0ID0gdHJ1ZTsKCQkJCXJvdXRlcy5yaWdodCA9IHRydWU7CgkJCX0KCgkJCWlmKCB2ZXJ0aWNhbFNsaWRlcy5sZW5ndGggPiAxICkgewoJCQkJcm91dGVzLnVwID0gdHJ1ZTsKCQkJCXJvdXRlcy5kb3duID0gdHJ1ZTsKCQkJfQoJCX0KCgkJLy8gUmV2ZXJzZSBob3Jpem9udGFsIGNvbnRyb2xzIGZvciBydGwKCQlpZiggY29uZmlnLnJ0bCApIHsKCQkJdmFyIGxlZnQgPSByb3V0ZXMubGVmdDsKCQkJcm91dGVzLmxlZnQgPSByb3V0ZXMucmlnaHQ7CgkJCXJvdXRlcy5yaWdodCA9IGxlZnQ7CgkJfQoKCQlyZXR1cm4gcm91dGVzOwoKCX0KCgkvKioKCSAqIFJldHVybnMgYW4gb2JqZWN0IGRlc2NyaWJpbmcgdGhlIGF2YWlsYWJsZSBmcmFnbWVudAoJICogZGlyZWN0aW9ucy4KCSAqCgkgKiBAcmV0dXJuIHt7cHJldjogYm9vbGVhbiwgbmV4dDogYm9vbGVhbn19CgkgKi8KCWZ1bmN0aW9uIGF2YWlsYWJsZUZyYWdtZW50cygpIHsKCgkJaWYoIGN1cnJlbnRTbGlkZSAmJiBjb25maWcuZnJhZ21lbnRzICkgewoJCQl2YXIgZnJhZ21lbnRzID0gY3VycmVudFNsaWRlLnF1ZXJ5U2VsZWN0b3JBbGwoICcuZnJhZ21lbnQnICk7CgkJCXZhciBoaWRkZW5GcmFnbWVudHMgPSBjdXJyZW50U2xpZGUucXVlcnlTZWxlY3RvckFsbCggJy5mcmFnbWVudDpub3QoLnZpc2libGUpJyApOwoKCQkJcmV0dXJuIHsKCQkJCXByZXY6IGZyYWdtZW50cy5sZW5ndGggLSBoaWRkZW5GcmFnbWVudHMubGVuZ3RoID4gMCwKCQkJCW5leHQ6ICEhaGlkZGVuRnJhZ21lbnRzLmxlbmd0aAoJCQl9OwoJCX0KCQllbHNlIHsKCQkJcmV0dXJuIHsgcHJldjogZmFsc2UsIG5leHQ6IGZhbHNlIH07CgkJfQoKCX0KCgkvKioKCSAqIEVuZm9yY2VzIG9yaWdpbi1zcGVjaWZpYyBmb3JtYXQgcnVsZXMgZm9yIGVtYmVkZGVkIG1lZGlhLgoJICovCglmdW5jdGlvbiBmb3JtYXRFbWJlZGRlZENvbnRlbnQoKSB7CgoJCXZhciBfYXBwZW5kUGFyYW1Ub0lmcmFtZVNvdXJjZSA9IGZ1bmN0aW9uKCBzb3VyY2VBdHRyaWJ1dGUsIHNvdXJjZVVSTCwgcGFyYW0gKSB7CgkJCXRvQXJyYXkoIGRvbS5zbGlkZXMucXVlcnlTZWxlY3RvckFsbCggJ2lmcmFtZVsnKyBzb3VyY2VBdHRyaWJ1dGUgKycqPSInKyBzb3VyY2VVUkwgKyciXScgKSApLmZvckVhY2goIGZ1bmN0aW9uKCBlbCApIHsKCQkJCXZhciBzcmMgPSBlbC5nZXRBdHRyaWJ1dGUoIHNvdXJjZUF0dHJpYnV0ZSApOwoJCQkJaWYoIHNyYyAmJiBzcmMuaW5kZXhPZiggcGFyYW0gKSA9PT0gLTEgKSB7CgkJCQkJZWwuc2V0QXR0cmlidXRlKCBzb3VyY2VBdHRyaWJ1dGUsIHNyYyArICggIS9cPy8udGVzdCggc3JjICkgPyAnPycgOiAnJicgKSArIHBhcmFtICk7CgkJCQl9CgkJCX0pOwoJCX07CgoJCS8vIFlvdVR1YmUgZnJhbWVzIG11c3QgaW5jbHVkZSAiP2VuYWJsZWpzYXBpPTEiCgkJX2FwcGVuZFBhcmFtVG9JZnJhbWVTb3VyY2UoICdzcmMnLCAneW91dHViZS5jb20vZW1iZWQvJywgJ2VuYWJsZWpzYXBpPTEnICk7CgkJX2FwcGVuZFBhcmFtVG9JZnJhbWVTb3VyY2UoICdkYXRhLXNyYycsICd5b3V0dWJlLmNvbS9lbWJlZC8nLCAnZW5hYmxlanNhcGk9MScgKTsKCgkJLy8gVmltZW8gZnJhbWVzIG11c3QgaW5jbHVkZSAiP2FwaT0xIgoJCV9hcHBlbmRQYXJhbVRvSWZyYW1lU291cmNlKCAnc3JjJywgJ3BsYXllci52aW1lby5jb20vJywgJ2FwaT0xJyApOwoJCV9hcHBlbmRQYXJhbVRvSWZyYW1lU291cmNlKCAnZGF0YS1zcmMnLCAncGxheWVyLnZpbWVvLmNvbS8nLCAnYXBpPTEnICk7CgoJfQoKCS8qKgoJICogU3RhcnQgcGxheWJhY2sgb2YgYW55IGVtYmVkZGVkIGNvbnRlbnQgaW5zaWRlIG9mCgkgKiB0aGUgZ2l2ZW4gZWxlbWVudC4KCSAqCgkgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBlbGVtZW50CgkgKi8KCWZ1bmN0aW9uIHN0YXJ0RW1iZWRkZWRDb250ZW50KCBlbGVtZW50ICkgewoKCQlpZiggZWxlbWVudCAmJiAhaXNTcGVha2VyTm90ZXMoKSApIHsKCgkJCS8vIFJlc3RhcnQgR0lGcwoJCQl0b0FycmF5KCBlbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoICdpbWdbc3JjJD0iLmdpZiJdJyApICkuZm9yRWFjaCggZnVuY3Rpb24oIGVsICkgewoJCQkJLy8gU2V0dGluZyB0aGUgc2FtZSB1bmNoYW5nZWQgc291cmNlIGxpa2UgdGhpcyB3YXMgY29uZmlybWVkCgkJCQkvLyB0byB3b3JrIGluIENocm9tZSwgRkYgJiBTYWZhcmkKCQkJCWVsLnNldEF0dHJpYnV0ZSggJ3NyYycsIGVsLmdldEF0dHJpYnV0ZSggJ3NyYycgKSApOwoJCQl9ICk7CgoJCQkvLyBIVE1MNSBtZWRpYSBlbGVtZW50cwoJCQl0b0FycmF5KCBlbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoICd2aWRlbywgYXVkaW8nICkgKS5mb3JFYWNoKCBmdW5jdGlvbiggZWwgKSB7CgkJCQlpZiggY2xvc2VzdFBhcmVudCggZWwsICcuZnJhZ21lbnQnICkgJiYgIWNsb3Nlc3RQYXJlbnQoIGVsLCAnLmZyYWdtZW50LnZpc2libGUnICkgKSB7CgkJCQkJcmV0dXJuOwoJCQkJfQoKCQkJCS8vIFByZWZlciBhbiBleHBsaWNpdCBnbG9iYWwgYXV0b3BsYXkgc2V0dGluZwoJCQkJdmFyIGF1dG9wbGF5ID0gY29uZmlnLmF1dG9QbGF5TWVkaWE7CgoJCQkJLy8gSWYgbm8gZ2xvYmFsIHNldHRpbmcgaXMgYXZhaWxhYmxlLCBmYWxsIGJhY2sgb24gdGhlIGVsZW1lbnQncwoJCQkJLy8gb3duIGF1dG9wbGF5IHNldHRpbmcKCQkJCWlmKCB0eXBlb2YgYXV0b3BsYXkgIT09ICdib29sZWFuJyApIHsKCQkJCQlhdXRvcGxheSA9IGVsLmhhc0F0dHJpYnV0ZSggJ2RhdGEtYXV0b3BsYXknICkgfHwgISFjbG9zZXN0UGFyZW50KCBlbCwgJy5zbGlkZS1iYWNrZ3JvdW5kJyApOwoJCQkJfQoKCQkJCWlmKCBhdXRvcGxheSAmJiB0eXBlb2YgZWwucGxheSA9PT0gJ2Z1bmN0aW9uJyApIHsKCgkJCQkJLy8gSWYgdGhlIG1lZGlhIGlzIHJlYWR5LCBzdGFydCBwbGF5YmFjawoJCQkJCWlmKCBlbC5yZWFkeVN0YXRlID4gMSApIHsKCQkJCQkJc3RhcnRFbWJlZGRlZE1lZGlhKCB7IHRhcmdldDogZWwgfSApOwoJCQkJCX0KCQkJCQkvLyBNb2JpbGUgZGV2aWNlcyBuZXZlciBmaXJlIGEgbG9hZGVkIGV2ZW50IHNvIGluc3RlYWQKCQkJCQkvLyBvZiB3YWl0aW5nLCB3ZSBpbml0aWF0ZSBwbGF5YmFjawoJCQkJCWVsc2UgaWYoIGlzTW9iaWxlRGV2aWNlICkgewoJCQkJCQl2YXIgcHJvbWlzZSA9IGVsLnBsYXkoKTsKCgkJCQkJCS8vIElmIGF1dG9wbGF5IGRvZXMgbm90IHdvcmssIGVuc3VyZSB0aGF0IHRoZSBjb250cm9scyBhcmUgdmlzaWJsZSBzbwoJCQkJCQkvLyB0aGF0IHRoZSB2aWV3ZXIgY2FuIHN0YXJ0IHRoZSBtZWRpYSBvbiB0aGVpciBvd24KCQkJCQkJaWYoIHByb21pc2UgJiYgdHlwZW9mIHByb21pc2UuY2F0Y2ggPT09ICdmdW5jdGlvbicgJiYgZWwuY29udHJvbHMgPT09IGZhbHNlICkgewoJCQkJCQkJcHJvbWlzZS5jYXRjaCggZnVuY3Rpb24oKSB7CgkJCQkJCQkJZWwuY29udHJvbHMgPSB0cnVlOwoKCQkJCQkJCQkvLyBPbmNlIHRoZSB2aWRlbyBkb2VzIHN0YXJ0IHBsYXlpbmcsIGhpZGUgdGhlIGNvbnRyb2xzIGFnYWluCgkJCQkJCQkJZWwuYWRkRXZlbnRMaXN0ZW5lciggJ3BsYXknLCBmdW5jdGlvbigpIHsKCQkJCQkJCQkJZWwuY29udHJvbHMgPSBmYWxzZTsKCQkJCQkJCQl9ICk7CgkJCQkJCQl9ICk7CgkJCQkJCX0KCQkJCQl9CgkJCQkJLy8gSWYgdGhlIG1lZGlhIGlzbid0IGxvYWRlZCwgd2FpdCBiZWZvcmUgcGxheWluZwoJCQkJCWVsc2UgewoJCQkJCQllbC5yZW1vdmVFdmVudExpc3RlbmVyKCAnbG9hZGVkZGF0YScsIHN0YXJ0RW1iZWRkZWRNZWRpYSApOyAvLyByZW1vdmUgZmlyc3QgdG8gYXZvaWQgZHVwZXMKCQkJCQkJZWwuYWRkRXZlbnRMaXN0ZW5lciggJ2xvYWRlZGRhdGEnLCBzdGFydEVtYmVkZGVkTWVkaWEgKTsKCQkJCQl9CgoJCQkJfQoJCQl9ICk7CgoJCQkvLyBOb3JtYWwgaWZyYW1lcwoJCQl0b0FycmF5KCBlbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoICdpZnJhbWVbc3JjXScgKSApLmZvckVhY2goIGZ1bmN0aW9uKCBlbCApIHsKCQkJCWlmKCBjbG9zZXN0UGFyZW50KCBlbCwgJy5mcmFnbWVudCcgKSAmJiAhY2xvc2VzdFBhcmVudCggZWwsICcuZnJhZ21lbnQudmlzaWJsZScgKSApIHsKCQkJCQlyZXR1cm47CgkJCQl9CgoJCQkJc3RhcnRFbWJlZGRlZElmcmFtZSggeyB0YXJnZXQ6IGVsIH0gKTsKCQkJfSApOwoKCQkJLy8gTGF6eSBsb2FkaW5nIGlmcmFtZXMKCQkJdG9BcnJheSggZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCAnaWZyYW1lW2RhdGEtc3JjXScgKSApLmZvckVhY2goIGZ1bmN0aW9uKCBlbCApIHsKCQkJCWlmKCBjbG9zZXN0UGFyZW50KCBlbCwgJy5mcmFnbWVudCcgKSAmJiAhY2xvc2VzdFBhcmVudCggZWwsICcuZnJhZ21lbnQudmlzaWJsZScgKSApIHsKCQkJCQlyZXR1cm47CgkJCQl9CgoJCQkJaWYoIGVsLmdldEF0dHJpYnV0ZSggJ3NyYycgKSAhPT0gZWwuZ2V0QXR0cmlidXRlKCAnZGF0YS1zcmMnICkgKSB7CgkJCQkJZWwucmVtb3ZlRXZlbnRMaXN0ZW5lciggJ2xvYWQnLCBzdGFydEVtYmVkZGVkSWZyYW1lICk7IC8vIHJlbW92ZSBmaXJzdCB0byBhdm9pZCBkdXBlcwoJCQkJCWVsLmFkZEV2ZW50TGlzdGVuZXIoICdsb2FkJywgc3RhcnRFbWJlZGRlZElmcmFtZSApOwoJCQkJCWVsLnNldEF0dHJpYnV0ZSggJ3NyYycsIGVsLmdldEF0dHJpYnV0ZSggJ2RhdGEtc3JjJyApICk7CgkJCQl9CgkJCX0gKTsKCgkJfQoKCX0KCgkvKioKCSAqIFN0YXJ0cyBwbGF5aW5nIGFuIGVtYmVkZGVkIHZpZGVvL2F1ZGlvIGVsZW1lbnQgYWZ0ZXIKCSAqIGl0IGhhcyBmaW5pc2hlZCBsb2FkaW5nLgoJICoKCSAqIEBwYXJhbSB7b2JqZWN0fSBldmVudAoJICovCglmdW5jdGlvbiBzdGFydEVtYmVkZGVkTWVkaWEoIGV2ZW50ICkgewoKCQl2YXIgaXNBdHRhY2hlZFRvRE9NID0gISFjbG9zZXN0UGFyZW50KCBldmVudC50YXJnZXQsICdodG1sJyApLAoJCQlpc1Zpc2libGUgIAkJPSAhIWNsb3Nlc3RQYXJlbnQoIGV2ZW50LnRhcmdldCwgJy5wcmVzZW50JyApOwoKCQlpZiggaXNBdHRhY2hlZFRvRE9NICYmIGlzVmlzaWJsZSApIHsKCQkJZXZlbnQudGFyZ2V0LmN1cnJlbnRUaW1lID0gMDsKCQkJZXZlbnQudGFyZ2V0LnBsYXkoKTsKCQl9CgoJCWV2ZW50LnRhcmdldC5yZW1vdmVFdmVudExpc3RlbmVyKCAnbG9hZGVkZGF0YScsIHN0YXJ0RW1iZWRkZWRNZWRpYSApOwoKCX0KCgkvKioKCSAqICJTdGFydHMiIHRoZSBjb250ZW50IG9mIGFuIGVtYmVkZGVkIGlmcmFtZSB1c2luZyB0aGUKCSAqIHBvc3RNZXNzYWdlIEFQSS4KCSAqCgkgKiBAcGFyYW0ge29iamVjdH0gZXZlbnQKCSAqLwoJZnVuY3Rpb24gc3RhcnRFbWJlZGRlZElmcmFtZSggZXZlbnQgKSB7CgoJCXZhciBpZnJhbWUgPSBldmVudC50YXJnZXQ7CgoJCWlmKCBpZnJhbWUgJiYgaWZyYW1lLmNvbnRlbnRXaW5kb3cgKSB7CgoJCQl2YXIgaXNBdHRhY2hlZFRvRE9NID0gISFjbG9zZXN0UGFyZW50KCBldmVudC50YXJnZXQsICdodG1sJyApLAoJCQkJaXNWaXNpYmxlICAJCT0gISFjbG9zZXN0UGFyZW50KCBldmVudC50YXJnZXQsICcucHJlc2VudCcgKTsKCgkJCWlmKCBpc0F0dGFjaGVkVG9ET00gJiYgaXNWaXNpYmxlICkgewoKCQkJCS8vIFByZWZlciBhbiBleHBsaWNpdCBnbG9iYWwgYXV0b3BsYXkgc2V0dGluZwoJCQkJdmFyIGF1dG9wbGF5ID0gY29uZmlnLmF1dG9QbGF5TWVkaWE7CgoJCQkJLy8gSWYgbm8gZ2xvYmFsIHNldHRpbmcgaXMgYXZhaWxhYmxlLCBmYWxsIGJhY2sgb24gdGhlIGVsZW1lbnQncwoJCQkJLy8gb3duIGF1dG9wbGF5IHNldHRpbmcKCQkJCWlmKCB0eXBlb2YgYXV0b3BsYXkgIT09ICdib29sZWFuJyApIHsKCQkJCQlhdXRvcGxheSA9IGlmcmFtZS5oYXNBdHRyaWJ1dGUoICdkYXRhLWF1dG9wbGF5JyApIHx8ICEhY2xvc2VzdFBhcmVudCggaWZyYW1lLCAnLnNsaWRlLWJhY2tncm91bmQnICk7CgkJCQl9CgoJCQkJLy8gWW91VHViZSBwb3N0TWVzc2FnZSBBUEkKCQkJCWlmKCAveW91dHViZVwuY29tXC9lbWJlZFwvLy50ZXN0KCBpZnJhbWUuZ2V0QXR0cmlidXRlKCAnc3JjJyApICkgJiYgYXV0b3BsYXkgKSB7CgkJCQkJaWZyYW1lLmNvbnRlbnRXaW5kb3cucG9zdE1lc3NhZ2UoICd7ImV2ZW50IjoiY29tbWFuZCIsImZ1bmMiOiJwbGF5VmlkZW8iLCJhcmdzIjoiIn0nLCAnKicgKTsKCQkJCX0KCQkJCS8vIFZpbWVvIHBvc3RNZXNzYWdlIEFQSQoJCQkJZWxzZSBpZiggL3BsYXllclwudmltZW9cLmNvbVwvLy50ZXN0KCBpZnJhbWUuZ2V0QXR0cmlidXRlKCAnc3JjJyApICkgJiYgYXV0b3BsYXkgKSB7CgkJCQkJaWZyYW1lLmNvbnRlbnRXaW5kb3cucG9zdE1lc3NhZ2UoICd7Im1ldGhvZCI6InBsYXkifScsICcqJyApOwoJCQkJfQoJCQkJLy8gR2VuZXJpYyBwb3N0TWVzc2FnZSBBUEkKCQkJCWVsc2UgewoJCQkJCWlmcmFtZS5jb250ZW50V2luZG93LnBvc3RNZXNzYWdlKCAnc2xpZGU6c3RhcnQnLCAnKicgKTsKCQkJCX0KCgkJCX0KCgkJfQoKCX0KCgkvKioKCSAqIFN0b3AgcGxheWJhY2sgb2YgYW55IGVtYmVkZGVkIGNvbnRlbnQgaW5zaWRlIG9mCgkgKiB0aGUgdGFyZ2V0ZWQgc2xpZGUuCgkgKgoJICogQHBhcmFtIHtIVE1MRWxlbWVudH0gZWxlbWVudAoJICovCglmdW5jdGlvbiBzdG9wRW1iZWRkZWRDb250ZW50KCBlbGVtZW50LCBvcHRpb25zICkgewoKCQlvcHRpb25zID0gZXh0ZW5kKCB7CgkJCS8vIERlZmF1bHRzCgkJCXVubG9hZElmcmFtZXM6IHRydWUKCQl9LCBvcHRpb25zIHx8IHt9ICk7CgoJCWlmKCBlbGVtZW50ICYmIGVsZW1lbnQucGFyZW50Tm9kZSApIHsKCQkJLy8gSFRNTDUgbWVkaWEgZWxlbWVudHMKCQkJdG9BcnJheSggZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCAndmlkZW8sIGF1ZGlvJyApICkuZm9yRWFjaCggZnVuY3Rpb24oIGVsICkgewoJCQkJaWYoICFlbC5oYXNBdHRyaWJ1dGUoICdkYXRhLWlnbm9yZScgKSAmJiB0eXBlb2YgZWwucGF1c2UgPT09ICdmdW5jdGlvbicgKSB7CgkJCQkJZWwuc2V0QXR0cmlidXRlKCdkYXRhLXBhdXNlZC1ieS1yZXZlYWwnLCAnJyk7CgkJCQkJZWwucGF1c2UoKTsKCQkJCX0KCQkJfSApOwoKCQkJLy8gR2VuZXJpYyBwb3N0TWVzc2FnZSBBUEkgZm9yIG5vbi1sYXp5IGxvYWRlZCBpZnJhbWVzCgkJCXRvQXJyYXkoIGVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCggJ2lmcmFtZScgKSApLmZvckVhY2goIGZ1bmN0aW9uKCBlbCApIHsKCQkJCWlmKCBlbC5jb250ZW50V2luZG93ICkgZWwuY29udGVudFdpbmRvdy5wb3N0TWVzc2FnZSggJ3NsaWRlOnN0b3AnLCAnKicgKTsKCQkJCWVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoICdsb2FkJywgc3RhcnRFbWJlZGRlZElmcmFtZSApOwoJCQl9KTsKCgkJCS8vIFlvdVR1YmUgcG9zdE1lc3NhZ2UgQVBJCgkJCXRvQXJyYXkoIGVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCggJ2lmcmFtZVtzcmMqPSJ5b3V0dWJlLmNvbS9lbWJlZC8iXScgKSApLmZvckVhY2goIGZ1bmN0aW9uKCBlbCApIHsKCQkJCWlmKCAhZWwuaGFzQXR0cmlidXRlKCAnZGF0YS1pZ25vcmUnICkgJiYgZWwuY29udGVudFdpbmRvdyAmJiB0eXBlb2YgZWwuY29udGVudFdpbmRvdy5wb3N0TWVzc2FnZSA9PT0gJ2Z1bmN0aW9uJyApIHsKCQkJCQllbC5jb250ZW50V2luZG93LnBvc3RNZXNzYWdlKCAneyJldmVudCI6ImNvbW1hbmQiLCJmdW5jIjoicGF1c2VWaWRlbyIsImFyZ3MiOiIifScsICcqJyApOwoJCQkJfQoJCQl9KTsKCgkJCS8vIFZpbWVvIHBvc3RNZXNzYWdlIEFQSQoJCQl0b0FycmF5KCBlbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoICdpZnJhbWVbc3JjKj0icGxheWVyLnZpbWVvLmNvbS8iXScgKSApLmZvckVhY2goIGZ1bmN0aW9uKCBlbCApIHsKCQkJCWlmKCAhZWwuaGFzQXR0cmlidXRlKCAnZGF0YS1pZ25vcmUnICkgJiYgZWwuY29udGVudFdpbmRvdyAmJiB0eXBlb2YgZWwuY29udGVudFdpbmRvdy5wb3N0TWVzc2FnZSA9PT0gJ2Z1bmN0aW9uJyApIHsKCQkJCQllbC5jb250ZW50V2luZG93LnBvc3RNZXNzYWdlKCAneyJtZXRob2QiOiJwYXVzZSJ9JywgJyonICk7CgkJCQl9CgkJCX0pOwoKCQkJaWYoIG9wdGlvbnMudW5sb2FkSWZyYW1lcyA9PT0gdHJ1ZSApIHsKCQkJCS8vIFVubG9hZCBsYXp5LWxvYWRlZCBpZnJhbWVzCgkJCQl0b0FycmF5KCBlbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoICdpZnJhbWVbZGF0YS1zcmNdJyApICkuZm9yRWFjaCggZnVuY3Rpb24oIGVsICkgewoJCQkJCS8vIE9ubHkgcmVtb3ZpbmcgdGhlIHNyYyBkb2Vzbid0IGFjdHVhbGx5IHVubG9hZCB0aGUgZnJhbWUKCQkJCQkvLyBpbiBhbGwgYnJvd3NlcnMgKEZpcmVmb3gpIHNvIHdlIHNldCBpdCB0byBibGFuayBmaXJzdAoJCQkJCWVsLnNldEF0dHJpYnV0ZSggJ3NyYycsICdhYm91dDpibGFuaycgKTsKCQkJCQllbC5yZW1vdmVBdHRyaWJ1dGUoICdzcmMnICk7CgkJCQl9ICk7CgkJCX0KCQl9CgoJfQoKCS8qKgoJICogUmV0dXJucyB0aGUgbnVtYmVyIG9mIHBhc3Qgc2xpZGVzLiBUaGlzIGNhbiBiZSB1c2VkIGFzIGEgZ2xvYmFsCgkgKiBmbGF0dGVuZWQgaW5kZXggZm9yIHNsaWRlcy4KCSAqCgkgKiBAcmV0dXJuIHtudW1iZXJ9IFBhc3Qgc2xpZGUgY291bnQKCSAqLwoJZnVuY3Rpb24gZ2V0U2xpZGVQYXN0Q291bnQoKSB7CgoJCXZhciBob3Jpem9udGFsU2xpZGVzID0gdG9BcnJheSggZG9tLndyYXBwZXIucXVlcnlTZWxlY3RvckFsbCggSE9SSVpPTlRBTF9TTElERVNfU0VMRUNUT1IgKSApOwoKCQkvLyBUaGUgbnVtYmVyIG9mIHBhc3Qgc2xpZGVzCgkJdmFyIHBhc3RDb3VudCA9IDA7CgoJCS8vIFN0ZXAgdGhyb3VnaCBhbGwgc2xpZGVzIGFuZCBjb3VudCB0aGUgcGFzdCBvbmVzCgkJbWFpbkxvb3A6IGZvciggdmFyIGkgPSAwOyBpIDwgaG9yaXpvbnRhbFNsaWRlcy5sZW5ndGg7IGkrKyApIHsKCgkJCXZhciBob3Jpem9udGFsU2xpZGUgPSBob3Jpem9udGFsU2xpZGVzW2ldOwoJCQl2YXIgdmVydGljYWxTbGlkZXMgPSB0b0FycmF5KCBob3Jpem9udGFsU2xpZGUucXVlcnlTZWxlY3RvckFsbCggJ3NlY3Rpb24nICkgKTsKCgkJCWZvciggdmFyIGogPSAwOyBqIDwgdmVydGljYWxTbGlkZXMubGVuZ3RoOyBqKysgKSB7CgoJCQkJLy8gU3RvcCBhcyBzb29uIGFzIHdlIGFycml2ZSBhdCB0aGUgcHJlc2VudAoJCQkJaWYoIHZlcnRpY2FsU2xpZGVzW2pdLmNsYXNzTGlzdC5jb250YWlucyggJ3ByZXNlbnQnICkgKSB7CgkJCQkJYnJlYWsgbWFpbkxvb3A7CgkJCQl9CgoJCQkJcGFzdENvdW50Kys7CgoJCQl9CgoJCQkvLyBTdG9wIGFzIHNvb24gYXMgd2UgYXJyaXZlIGF0IHRoZSBwcmVzZW50CgkJCWlmKCBob3Jpem9udGFsU2xpZGUuY2xhc3NMaXN0LmNvbnRhaW5zKCAncHJlc2VudCcgKSApIHsKCQkJCWJyZWFrOwoJCQl9CgoJCQkvLyBEb24ndCBjb3VudCB0aGUgd3JhcHBpbmcgc2VjdGlvbiBmb3IgdmVydGljYWwgc2xpZGVzCgkJCWlmKCBob3Jpem9udGFsU2xpZGUuY2xhc3NMaXN0LmNvbnRhaW5zKCAnc3RhY2snICkgPT09IGZhbHNlICkgewoJCQkJcGFzdENvdW50Kys7CgkJCX0KCgkJfQoKCQlyZXR1cm4gcGFzdENvdW50OwoKCX0KCgkvKioKCSAqIFJldHVybnMgYSB2YWx1ZSByYW5naW5nIGZyb20gMC0xIHRoYXQgcmVwcmVzZW50cwoJICogaG93IGZhciBpbnRvIHRoZSBwcmVzZW50YXRpb24gd2UgaGF2ZSBuYXZpZ2F0ZWQuCgkgKgoJICogQHJldHVybiB7bnVtYmVyfQoJICovCglmdW5jdGlvbiBnZXRQcm9ncmVzcygpIHsKCgkJLy8gVGhlIG51bWJlciBvZiBwYXN0IGFuZCB0b3RhbCBzbGlkZXMKCQl2YXIgdG90YWxDb3VudCA9IGdldFRvdGFsU2xpZGVzKCk7CgkJdmFyIHBhc3RDb3VudCA9IGdldFNsaWRlUGFzdENvdW50KCk7CgoJCWlmKCBjdXJyZW50U2xpZGUgKSB7CgoJCQl2YXIgYWxsRnJhZ21lbnRzID0gY3VycmVudFNsaWRlLnF1ZXJ5U2VsZWN0b3JBbGwoICcuZnJhZ21lbnQnICk7CgoJCQkvLyBJZiB0aGVyZSBhcmUgZnJhZ21lbnRzIGluIHRoZSBjdXJyZW50IHNsaWRlIHRob3NlIHNob3VsZCBiZQoJCQkvLyBhY2NvdW50ZWQgZm9yIGluIHRoZSBwcm9ncmVzcy4KCQkJaWYoIGFsbEZyYWdtZW50cy5sZW5ndGggPiAwICkgewoJCQkJdmFyIHZpc2libGVGcmFnbWVudHMgPSBjdXJyZW50U2xpZGUucXVlcnlTZWxlY3RvckFsbCggJy5mcmFnbWVudC52aXNpYmxlJyApOwoKCQkJCS8vIFRoaXMgdmFsdWUgcmVwcmVzZW50cyBob3cgYmlnIGEgcG9ydGlvbiBvZiB0aGUgc2xpZGUgcHJvZ3Jlc3MKCQkJCS8vIHRoYXQgaXMgbWFkZSB1cCBieSBpdHMgZnJhZ21lbnRzICgwLTEpCgkJCQl2YXIgZnJhZ21lbnRXZWlnaHQgPSAwLjk7CgoJCQkJLy8gQWRkIGZyYWdtZW50IHByb2dyZXNzIHRvIHRoZSBwYXN0IHNsaWRlIGNvdW50CgkJCQlwYXN0Q291bnQgKz0gKCB2aXNpYmxlRnJhZ21lbnRzLmxlbmd0aCAvIGFsbEZyYWdtZW50cy5sZW5ndGggKSAqIGZyYWdtZW50V2VpZ2h0OwoJCQl9CgoJCX0KCgkJcmV0dXJuIE1hdGgubWluKCBwYXN0Q291bnQgLyAoIHRvdGFsQ291bnQgLSAxICksIDEgKTsKCgl9CgoJLyoqCgkgKiBDaGVja3MgaWYgdGhpcyBwcmVzZW50YXRpb24gaXMgcnVubmluZyBpbnNpZGUgb2YgdGhlCgkgKiBzcGVha2VyIG5vdGVzIHdpbmRvdy4KCSAqCgkgKiBAcmV0dXJuIHtib29sZWFufQoJICovCglmdW5jdGlvbiBpc1NwZWFrZXJOb3RlcygpIHsKCgkJcmV0dXJuICEhd2luZG93LmxvY2F0aW9uLnNlYXJjaC5tYXRjaCggL3JlY2VpdmVyL2dpICk7CgoJfQoKCS8qKgoJICogUmVhZHMgdGhlIGN1cnJlbnQgVVJMIChoYXNoKSBhbmQgbmF2aWdhdGVzIGFjY29yZGluZ2x5LgoJICovCglmdW5jdGlvbiByZWFkVVJMKCkgewoKCQl2YXIgaGFzaCA9IHdpbmRvdy5sb2NhdGlvbi5oYXNoOwoKCQkvLyBBdHRlbXB0IHRvIHBhcnNlIHRoZSBoYXNoIGFzIGVpdGhlciBhbiBpbmRleCBvciBuYW1lCgkJdmFyIGJpdHMgPSBoYXNoLnNsaWNlKCAyICkuc3BsaXQoICcvJyApLAoJCQluYW1lID0gaGFzaC5yZXBsYWNlKCAvI3xcLy9naSwgJycgKTsKCgkJLy8gSWYgdGhlIGZpcnN0IGJpdCBpcyBub3QgZnVsbHkgbnVtZXJpYyBhbmQgdGhlcmUgaXMgYSBuYW1lIHdlCgkJLy8gY2FuIGFzc3VtZSB0aGF0IHRoaXMgaXMgYSBuYW1lZCBsaW5rCgkJaWYoICEvXlswLTldKiQvLnRlc3QoIGJpdHNbMF0gKSAmJiBuYW1lLmxlbmd0aCApIHsKCQkJdmFyIGVsZW1lbnQ7CgoJCQkvLyBFbnN1cmUgdGhlIG5hbWVkIGxpbmsgaXMgYSB2YWxpZCBIVE1MIElEIGF0dHJpYnV0ZQoJCQl0cnkgewoJCQkJZWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCBkZWNvZGVVUklDb21wb25lbnQoIG5hbWUgKSApOwoJCQl9CgkJCWNhdGNoICggZXJyb3IgKSB7IH0KCgkJCS8vIEVuc3VyZSB0aGF0IHdlJ3JlIG5vdCBhbHJlYWR5IG9uIGEgc2xpZGUgd2l0aCB0aGUgc2FtZSBuYW1lCgkJCXZhciBpc1NhbWVOYW1lQXNDdXJyZW50U2xpZGUgPSBjdXJyZW50U2xpZGUgPyBjdXJyZW50U2xpZGUuZ2V0QXR0cmlidXRlKCAnaWQnICkgPT09IG5hbWUgOiBmYWxzZTsKCgkJCWlmKCBlbGVtZW50ICkgewoJCQkJLy8gSWYgdGhlIHNsaWRlIGV4aXN0cyBhbmQgaXMgbm90IHRoZSBjdXJyZW50IHNsaWRlLi4uCgkJCQlpZiAoICFpc1NhbWVOYW1lQXNDdXJyZW50U2xpZGUgKSB7CgkJCQkJLy8gLi4uZmluZCB0aGUgcG9zaXRpb24gb2YgdGhlIG5hbWVkIHNsaWRlIGFuZCBuYXZpZ2F0ZSB0byBpdAoJCQkJCXZhciBpbmRpY2VzID0gUmV2ZWFsLmdldEluZGljZXMoZWxlbWVudCk7CgkJCQkJc2xpZGUoaW5kaWNlcy5oLCBpbmRpY2VzLnYpOwoJCQkJfQoJCQl9CgkJCS8vIElmIHRoZSBzbGlkZSBkb2Vzbid0IGV4aXN0LCBuYXZpZ2F0ZSB0byB0aGUgY3VycmVudCBzbGlkZQoJCQllbHNlIHsKCQkJCXNsaWRlKCBpbmRleGggfHwgMCwgaW5kZXh2IHx8IDAgKTsKCQkJfQoJCX0KCQllbHNlIHsKCQkJdmFyIGhhc2hJbmRleEJhc2UgPSBjb25maWcuaGFzaE9uZUJhc2VkSW5kZXggPyAxIDogMDsKCgkJCS8vIFJlYWQgdGhlIGluZGV4IGNvbXBvbmVudHMgb2YgdGhlIGhhc2gKCQkJdmFyIGggPSAoIHBhcnNlSW50KCBiaXRzWzBdLCAxMCApIC0gaGFzaEluZGV4QmFzZSApIHx8IDAsCgkJCQl2ID0gKCBwYXJzZUludCggYml0c1sxXSwgMTAgKSAtIGhhc2hJbmRleEJhc2UgKSB8fCAwLAoJCQkJZjsKCgkJCWlmKCBjb25maWcuZnJhZ21lbnRJblVSTCApIHsKCQkJCWYgPSBwYXJzZUludCggYml0c1syXSwgMTAgKTsKCQkJCWlmKCBpc05hTiggZiApICkgewoJCQkJCWYgPSB1bmRlZmluZWQ7CgkJCQl9CgkJCX0KCgkJCWlmKCBoICE9PSBpbmRleGggfHwgdiAhPT0gaW5kZXh2IHx8IGYgIT09IHVuZGVmaW5lZCApIHsKCQkJCXNsaWRlKCBoLCB2LCBmICk7CgkJCX0KCQl9CgoJfQoKCS8qKgoJICogVXBkYXRlcyB0aGUgcGFnZSBVUkwgKGhhc2gpIHRvIHJlZmxlY3QgdGhlIGN1cnJlbnQKCSAqIHN0YXRlLgoJICoKCSAqIEBwYXJhbSB7bnVtYmVyfSBkZWxheSBUaGUgdGltZSBpbiBtcyB0byB3YWl0IGJlZm9yZQoJICogd3JpdGluZyB0aGUgaGFzaAoJICovCglmdW5jdGlvbiB3cml0ZVVSTCggZGVsYXkgKSB7CgoJCS8vIE1ha2Ugc3VyZSB0aGVyZSdzIG5ldmVyIG1vcmUgdGhhbiBvbmUgdGltZW91dCBydW5uaW5nCgkJY2xlYXJUaW1lb3V0KCB3cml0ZVVSTFRpbWVvdXQgKTsKCgkJLy8gSWYgYSBkZWxheSBpcyBzcGVjaWZpZWQsIHRpbWVvdXQgdGhpcyBjYWxsCgkJaWYoIHR5cGVvZiBkZWxheSA9PT0gJ251bWJlcicgKSB7CgkJCXdyaXRlVVJMVGltZW91dCA9IHNldFRpbWVvdXQoIHdyaXRlVVJMLCBkZWxheSApOwoJCX0KCQllbHNlIGlmKCBjdXJyZW50U2xpZGUgKSB7CgkJCS8vIElmIHdlJ3JlIGNvbmZpZ3VyZWQgdG8gcHVzaCB0byBoaXN0b3J5IE9SIHRoZSBoaXN0b3J5CgkJCS8vIEFQSSBpcyBub3QgYXZhaWFsYmxlLgoJCQlpZiggY29uZmlnLmhpc3RvcnkgfHwgIXdpbmRvdy5oaXN0b3J5ICkgewoJCQkJd2luZG93LmxvY2F0aW9uLmhhc2ggPSBsb2NhdGlvbkhhc2goKTsKCQkJfQoJCQkvLyBJZiB3ZSdyZSBjb25maWd1cmVkIHRvIHJlZmxlY3QgdGhlIGN1cnJlbnQgc2xpZGUgaW4gdGhlCgkJCS8vIFVSTCB3aXRob3V0IHB1c2hpbmcgdG8gaGlzdG9yeS4KCQkJZWxzZSBpZiggY29uZmlnLmhhc2ggKSB7CgkJCQl3aW5kb3cuaGlzdG9yeS5yZXBsYWNlU3RhdGUoIG51bGwsIG51bGwsICcjJyArIGxvY2F0aW9uSGFzaCgpICk7CgkJCX0KCQkJLy8gSWYgaGlzdG9yeSBhbmQgaGFzaCBhcmUgYm90aCBkaXNhYmxlZCwgYSBoYXNoIG1heSBzdGlsbAoJCQkvLyBiZSBhZGRlZCB0byB0aGUgVVJMIGJ5IGNsaWNraW5nIG9uIGEgaHJlZiB3aXRoIGEgaGFzaAoJCQkvLyB0YXJnZXQuIENvdW50ZXIgdGhpcyBieSBhbHdheXMgcmVtb3ZpbmcgdGhlIGhhc2guCgkJCWVsc2UgewoJCQkJd2luZG93Lmhpc3RvcnkucmVwbGFjZVN0YXRlKCBudWxsLCBudWxsLCB3aW5kb3cubG9jYXRpb24ucGF0aG5hbWUgKyB3aW5kb3cubG9jYXRpb24uc2VhcmNoICk7CgkJCX0KCQl9CgoJfQoJLyoqCgkgKiBSZXRyaWV2ZXMgdGhlIGgvdiBsb2NhdGlvbiBhbmQgZnJhZ21lbnQgb2YgdGhlIGN1cnJlbnQsCgkgKiBvciBzcGVjaWZpZWQsIHNsaWRlLgoJICoKCSAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IFtzbGlkZV0gSWYgc3BlY2lmaWVkLCB0aGUgcmV0dXJuZWQKCSAqIGluZGV4IHdpbGwgYmUgZm9yIHRoaXMgc2xpZGUgcmF0aGVyIHRoYW4gdGhlIGN1cnJlbnRseQoJICogYWN0aXZlIG9uZQoJICoKCSAqIEByZXR1cm4ge3toOiBudW1iZXIsIHY6IG51bWJlciwgZjogbnVtYmVyfX0KCSAqLwoJZnVuY3Rpb24gZ2V0SW5kaWNlcyggc2xpZGUgKSB7CgoJCS8vIEJ5IGRlZmF1bHQsIHJldHVybiB0aGUgY3VycmVudCBpbmRpY2VzCgkJdmFyIGggPSBpbmRleGgsCgkJCXYgPSBpbmRleHYsCgkJCWY7CgoJCS8vIElmIGEgc2xpZGUgaXMgc3BlY2lmaWVkLCByZXR1cm4gdGhlIGluZGljZXMgb2YgdGhhdCBzbGlkZQoJCWlmKCBzbGlkZSApIHsKCQkJdmFyIGlzVmVydGljYWwgPSBpc1ZlcnRpY2FsU2xpZGUoIHNsaWRlICk7CgkJCXZhciBzbGlkZWggPSBpc1ZlcnRpY2FsID8gc2xpZGUucGFyZW50Tm9kZSA6IHNsaWRlOwoKCQkJLy8gU2VsZWN0IGFsbCBob3Jpem9udGFsIHNsaWRlcwoJCQl2YXIgaG9yaXpvbnRhbFNsaWRlcyA9IHRvQXJyYXkoIGRvbS53cmFwcGVyLnF1ZXJ5U2VsZWN0b3JBbGwoIEhPUklaT05UQUxfU0xJREVTX1NFTEVDVE9SICkgKTsKCgkJCS8vIE5vdyB0aGF0IHdlIGtub3cgd2hpY2ggdGhlIGhvcml6b250YWwgc2xpZGUgaXMsIGdldCBpdHMgaW5kZXgKCQkJaCA9IE1hdGgubWF4KCBob3Jpem9udGFsU2xpZGVzLmluZGV4T2YoIHNsaWRlaCApLCAwICk7CgoJCQkvLyBBc3N1bWUgd2UncmUgbm90IHZlcnRpY2FsCgkJCXYgPSB1bmRlZmluZWQ7CgoJCQkvLyBJZiB0aGlzIGlzIGEgdmVydGljYWwgc2xpZGUsIGdyYWIgdGhlIHZlcnRpY2FsIGluZGV4CgkJCWlmKCBpc1ZlcnRpY2FsICkgewoJCQkJdiA9IE1hdGgubWF4KCB0b0FycmF5KCBzbGlkZS5wYXJlbnROb2RlLnF1ZXJ5U2VsZWN0b3JBbGwoICdzZWN0aW9uJyApICkuaW5kZXhPZiggc2xpZGUgKSwgMCApOwoJCQl9CgkJfQoKCQlpZiggIXNsaWRlICYmIGN1cnJlbnRTbGlkZSApIHsKCQkJdmFyIGhhc0ZyYWdtZW50cyA9IGN1cnJlbnRTbGlkZS5xdWVyeVNlbGVjdG9yQWxsKCAnLmZyYWdtZW50JyApLmxlbmd0aCA+IDA7CgkJCWlmKCBoYXNGcmFnbWVudHMgKSB7CgkJCQl2YXIgY3VycmVudEZyYWdtZW50ID0gY3VycmVudFNsaWRlLnF1ZXJ5U2VsZWN0b3IoICcuY3VycmVudC1mcmFnbWVudCcgKTsKCQkJCWlmKCBjdXJyZW50RnJhZ21lbnQgJiYgY3VycmVudEZyYWdtZW50Lmhhc0F0dHJpYnV0ZSggJ2RhdGEtZnJhZ21lbnQtaW5kZXgnICkgKSB7CgkJCQkJZiA9IHBhcnNlSW50KCBjdXJyZW50RnJhZ21lbnQuZ2V0QXR0cmlidXRlKCAnZGF0YS1mcmFnbWVudC1pbmRleCcgKSwgMTAgKTsKCQkJCX0KCQkJCWVsc2UgewoJCQkJCWYgPSBjdXJyZW50U2xpZGUucXVlcnlTZWxlY3RvckFsbCggJy5mcmFnbWVudC52aXNpYmxlJyApLmxlbmd0aCAtIDE7CgkJCQl9CgkJCX0KCQl9CgoJCXJldHVybiB7IGg6IGgsIHY6IHYsIGY6IGYgfTsKCgl9CgoJLyoqCgkgKiBSZXRyaWV2ZXMgYWxsIHNsaWRlcyBpbiB0aGlzIHByZXNlbnRhdGlvbi4KCSAqLwoJZnVuY3Rpb24gZ2V0U2xpZGVzKCkgewoKCQlyZXR1cm4gdG9BcnJheSggZG9tLndyYXBwZXIucXVlcnlTZWxlY3RvckFsbCggU0xJREVTX1NFTEVDVE9SICsgJzpub3QoLnN0YWNrKScgKSApOwoKCX0KCgkvKioKCSAqIFJldHVybnMgYSBsaXN0IG9mIGFsbCBob3Jpem9udGFsIHNsaWRlcyBpbiB0aGUgZGVjay4gRWFjaAoJICogdmVydGljYWwgc3RhY2sgaXMgaW5jbHVkZWQgYXMgb25lIGhvcml6b250YWwgc2xpZGUgaW4gdGhlCgkgKiByZXN1bHRpbmcgYXJyYXkuCgkgKi8KCWZ1bmN0aW9uIGdldEhvcml6b250YWxTbGlkZXMoKSB7CgoJCXJldHVybiB0b0FycmF5KCBkb20ud3JhcHBlci5xdWVyeVNlbGVjdG9yQWxsKCBIT1JJWk9OVEFMX1NMSURFU19TRUxFQ1RPUiApICk7CgoJfQoKCS8qKgoJICogUmV0dXJucyBhbGwgdmVydGljYWwgc2xpZGVzIHRoYXQgZXhpc3Qgd2l0aGluIHRoaXMgZGVjay4KCSAqLwoJZnVuY3Rpb24gZ2V0VmVydGljYWxTbGlkZXMoKSB7CgoJCXJldHVybiB0b0FycmF5KCBkb20ud3JhcHBlci5xdWVyeVNlbGVjdG9yQWxsKCAnLnNsaWRlcz5zZWN0aW9uPnNlY3Rpb24nICkgKTsKCgl9CgoJLyoqCgkgKiBSZXR1cm5zIHRydWUgaWYgdGhlcmUgYXJlIGF0IGxlYXN0IHR3byBob3Jpem9udGFsIHNsaWRlcy4KCSAqLwoJZnVuY3Rpb24gaGFzSG9yaXpvbnRhbFNsaWRlcygpIHsKCgkJcmV0dXJuIGdldEhvcml6b250YWxTbGlkZXMoKS5sZW5ndGggPiAxOwoJfQoKCS8qKgoJICogUmV0dXJucyB0cnVlIGlmIHRoZXJlIGFyZSBhdCBsZWFzdCB0d28gdmVydGljYWwgc2xpZGVzLgoJICovCglmdW5jdGlvbiBoYXNWZXJ0aWNhbFNsaWRlcygpIHsKCgkJcmV0dXJuIGdldFZlcnRpY2FsU2xpZGVzKCkubGVuZ3RoID4gMTsKCgl9CgoJLyoqCgkgKiBSZXR1cm5zIGFuIGFycmF5IG9mIG9iamVjdHMgd2hlcmUgZWFjaCBvYmplY3QgcmVwcmVzZW50cyB0aGUKCSAqIGF0dHJpYnV0ZXMgb24gaXRzIHJlc3BlY3RpdmUgc2xpZGUuCgkgKi8KCWZ1bmN0aW9uIGdldFNsaWRlc0F0dHJpYnV0ZXMoKSB7CgoJCXJldHVybiBnZXRTbGlkZXMoKS5tYXAoIGZ1bmN0aW9uKCBzbGlkZSApIHsKCgkJCXZhciBhdHRyaWJ1dGVzID0ge307CgkJCWZvciggdmFyIGkgPSAwOyBpIDwgc2xpZGUuYXR0cmlidXRlcy5sZW5ndGg7IGkrKyApIHsKCQkJCXZhciBhdHRyaWJ1dGUgPSBzbGlkZS5hdHRyaWJ1dGVzWyBpIF07CgkJCQlhdHRyaWJ1dGVzWyBhdHRyaWJ1dGUubmFtZSBdID0gYXR0cmlidXRlLnZhbHVlOwoJCQl9CgkJCXJldHVybiBhdHRyaWJ1dGVzOwoKCQl9ICk7CgoJfQoKCS8qKgoJICogUmV0cmlldmVzIHRoZSB0b3RhbCBudW1iZXIgb2Ygc2xpZGVzIGluIHRoaXMgcHJlc2VudGF0aW9uLgoJICoKCSAqIEByZXR1cm4ge251bWJlcn0KCSAqLwoJZnVuY3Rpb24gZ2V0VG90YWxTbGlkZXMoKSB7CgoJCXJldHVybiBnZXRTbGlkZXMoKS5sZW5ndGg7CgoJfQoKCS8qKgoJICogUmV0dXJucyB0aGUgc2xpZGUgZWxlbWVudCBtYXRjaGluZyB0aGUgc3BlY2lmaWVkIGluZGV4LgoJICoKCSAqIEByZXR1cm4ge0hUTUxFbGVtZW50fQoJICovCglmdW5jdGlvbiBnZXRTbGlkZSggeCwgeSApIHsKCgkJdmFyIGhvcml6b250YWxTbGlkZSA9IGRvbS53cmFwcGVyLnF1ZXJ5U2VsZWN0b3JBbGwoIEhPUklaT05UQUxfU0xJREVTX1NFTEVDVE9SIClbIHggXTsKCQl2YXIgdmVydGljYWxTbGlkZXMgPSBob3Jpem9udGFsU2xpZGUgJiYgaG9yaXpvbnRhbFNsaWRlLnF1ZXJ5U2VsZWN0b3JBbGwoICdzZWN0aW9uJyApOwoKCQlpZiggdmVydGljYWxTbGlkZXMgJiYgdmVydGljYWxTbGlkZXMubGVuZ3RoICYmIHR5cGVvZiB5ID09PSAnbnVtYmVyJyApIHsKCQkJcmV0dXJuIHZlcnRpY2FsU2xpZGVzID8gdmVydGljYWxTbGlkZXNbIHkgXSA6IHVuZGVmaW5lZDsKCQl9CgoJCXJldHVybiBob3Jpem9udGFsU2xpZGU7CgoJfQoKCS8qKgoJICogUmV0dXJucyB0aGUgYmFja2dyb3VuZCBlbGVtZW50IGZvciB0aGUgZ2l2ZW4gc2xpZGUuCgkgKiBBbGwgc2xpZGVzLCBldmVuIHRoZSBvbmVzIHdpdGggbm8gYmFja2dyb3VuZCBwcm9wZXJ0aWVzCgkgKiBkZWZpbmVkLCBoYXZlIGEgYmFja2dyb3VuZCBlbGVtZW50IHNvIGFzIGxvbmcgYXMgdGhlCgkgKiBpbmRleCBpcyB2YWxpZCBhbiBlbGVtZW50IHdpbGwgYmUgcmV0dXJuZWQuCgkgKgoJICogQHBhcmFtIHttaXhlZH0geCBIb3Jpem9udGFsIGJhY2tncm91bmQgaW5kZXggT1IgYSBzbGlkZQoJICogSFRNTCBlbGVtZW50CgkgKiBAcGFyYW0ge251bWJlcn0geSBWZXJ0aWNhbCBiYWNrZ3JvdW5kIGluZGV4CgkgKiBAcmV0dXJuIHsoSFRNTEVsZW1lbnRbXXwqKX0KCSAqLwoJZnVuY3Rpb24gZ2V0U2xpZGVCYWNrZ3JvdW5kKCB4LCB5ICkgewoKCQl2YXIgc2xpZGUgPSB0eXBlb2YgeCA9PT0gJ251bWJlcicgPyBnZXRTbGlkZSggeCwgeSApIDogeDsKCQlpZiggc2xpZGUgKSB7CgkJCXJldHVybiBzbGlkZS5zbGlkZUJhY2tncm91bmRFbGVtZW50OwoJCX0KCgkJcmV0dXJuIHVuZGVmaW5lZDsKCgl9CgoJLyoqCgkgKiBSZXRyaWV2ZXMgdGhlIHNwZWFrZXIgbm90ZXMgZnJvbSBhIHNsaWRlLiBOb3RlcyBjYW4gYmUKCSAqIGRlZmluZWQgaW4gdHdvIHdheXM6CgkgKiAxLiBBcyBhIGRhdGEtbm90ZXMgYXR0cmlidXRlIG9uIHRoZSBzbGlkZSA8c2VjdGlvbj4KCSAqIDIuIEFzIGFuIDxhc2lkZSBjbGFzcz0ibm90ZXMiPiBpbnNpZGUgb2YgdGhlIHNsaWRlCgkgKgoJICogQHBhcmFtIHtIVE1MRWxlbWVudH0gW3NsaWRlPWN1cnJlbnRTbGlkZV0KCSAqIEByZXR1cm4geyhzdHJpbmd8bnVsbCl9CgkgKi8KCWZ1bmN0aW9uIGdldFNsaWRlTm90ZXMoIHNsaWRlICkgewoKCQkvLyBEZWZhdWx0IHRvIHRoZSBjdXJyZW50IHNsaWRlCgkJc2xpZGUgPSBzbGlkZSB8fCBjdXJyZW50U2xpZGU7CgoJCS8vIE5vdGVzIGNhbiBiZSBzcGVjaWZpZWQgdmlhIHRoZSBkYXRhLW5vdGVzIGF0dHJpYnV0ZS4uLgoJCWlmKCBzbGlkZS5oYXNBdHRyaWJ1dGUoICdkYXRhLW5vdGVzJyApICkgewoJCQlyZXR1cm4gc2xpZGUuZ2V0QXR0cmlidXRlKCAnZGF0YS1ub3RlcycgKTsKCQl9CgoJCS8vIC4uLiBvciB1c2luZyBhbiA8YXNpZGUgY2xhc3M9Im5vdGVzIj4gZWxlbWVudAoJCXZhciBub3Rlc0VsZW1lbnQgPSBzbGlkZS5xdWVyeVNlbGVjdG9yKCAnYXNpZGUubm90ZXMnICk7CgkJaWYoIG5vdGVzRWxlbWVudCApIHsKCQkJcmV0dXJuIG5vdGVzRWxlbWVudC5pbm5lckhUTUw7CgkJfQoKCQlyZXR1cm4gbnVsbDsKCgl9CgoJLyoqCgkgKiBSZXRyaWV2ZXMgdGhlIGN1cnJlbnQgc3RhdGUgb2YgdGhlIHByZXNlbnRhdGlvbiBhcwoJICogYW4gb2JqZWN0LiBUaGlzIHN0YXRlIGNhbiB0aGVuIGJlIHJlc3RvcmVkIGF0IGFueQoJICogdGltZS4KCSAqCgkgKiBAcmV0dXJuIHt7aW5kZXhoOiBudW1iZXIsIGluZGV4djogbnVtYmVyLCBpbmRleGY6IG51bWJlciwgcGF1c2VkOiBib29sZWFuLCBvdmVydmlldzogYm9vbGVhbn19CgkgKi8KCWZ1bmN0aW9uIGdldFN0YXRlKCkgewoKCQl2YXIgaW5kaWNlcyA9IGdldEluZGljZXMoKTsKCgkJcmV0dXJuIHsKCQkJaW5kZXhoOiBpbmRpY2VzLmgsCgkJCWluZGV4djogaW5kaWNlcy52LAoJCQlpbmRleGY6IGluZGljZXMuZiwKCQkJcGF1c2VkOiBpc1BhdXNlZCgpLAoJCQlvdmVydmlldzogaXNPdmVydmlldygpCgkJfTsKCgl9CgoJLyoqCgkgKiBSZXN0b3JlcyB0aGUgcHJlc2VudGF0aW9uIHRvIHRoZSBnaXZlbiBzdGF0ZS4KCSAqCgkgKiBAcGFyYW0ge29iamVjdH0gc3RhdGUgQXMgZ2VuZXJhdGVkIGJ5IGdldFN0YXRlKCkKCSAqIEBzZWUge0BsaW5rIGdldFN0YXRlfSBnZW5lcmF0ZXMgdGhlIHBhcmFtZXRlciBgc3RhdGVgCgkgKi8KCWZ1bmN0aW9uIHNldFN0YXRlKCBzdGF0ZSApIHsKCgkJaWYoIHR5cGVvZiBzdGF0ZSA9PT0gJ29iamVjdCcgKSB7CgkJCXNsaWRlKCBkZXNlcmlhbGl6ZSggc3RhdGUuaW5kZXhoICksIGRlc2VyaWFsaXplKCBzdGF0ZS5pbmRleHYgKSwgZGVzZXJpYWxpemUoIHN0YXRlLmluZGV4ZiApICk7CgoJCQl2YXIgcGF1c2VkRmxhZyA9IGRlc2VyaWFsaXplKCBzdGF0ZS5wYXVzZWQgKSwKCQkJCW92ZXJ2aWV3RmxhZyA9IGRlc2VyaWFsaXplKCBzdGF0ZS5vdmVydmlldyApOwoKCQkJaWYoIHR5cGVvZiBwYXVzZWRGbGFnID09PSAnYm9vbGVhbicgJiYgcGF1c2VkRmxhZyAhPT0gaXNQYXVzZWQoKSApIHsKCQkJCXRvZ2dsZVBhdXNlKCBwYXVzZWRGbGFnICk7CgkJCX0KCgkJCWlmKCB0eXBlb2Ygb3ZlcnZpZXdGbGFnID09PSAnYm9vbGVhbicgJiYgb3ZlcnZpZXdGbGFnICE9PSBpc092ZXJ2aWV3KCkgKSB7CgkJCQl0b2dnbGVPdmVydmlldyggb3ZlcnZpZXdGbGFnICk7CgkJCX0KCQl9CgoJfQoKCS8qKgoJICogUmV0dXJuIGEgc29ydGVkIGZyYWdtZW50cyBsaXN0LCBvcmRlcmVkIGJ5IGFuIGluY3JlYXNpbmcKCSAqICJkYXRhLWZyYWdtZW50LWluZGV4IiBhdHRyaWJ1dGUuCgkgKgoJICogRnJhZ21lbnRzIHdpbGwgYmUgcmV2ZWFsZWQgaW4gdGhlIG9yZGVyIHRoYXQgdGhleSBhcmUgcmV0dXJuZWQgYnkKCSAqIHRoaXMgZnVuY3Rpb24sIHNvIHlvdSBjYW4gdXNlIHRoZSBpbmRleCBhdHRyaWJ1dGVzIHRvIGNvbnRyb2wgdGhlCgkgKiBvcmRlciBvZiBmcmFnbWVudCBhcHBlYXJhbmNlLgoJICoKCSAqIFRvIG1haW50YWluIGEgc2Vuc2libGUgZGVmYXVsdCBmcmFnbWVudCBvcmRlciwgZnJhZ21lbnRzIGFyZSBwcmVzdW1lZAoJICogdG8gYmUgcGFzc2VkIGluIGRvY3VtZW50IG9yZGVyLiBUaGlzIGZ1bmN0aW9uIGFkZHMgYSAiZnJhZ21lbnQtaW5kZXgiCgkgKiBhdHRyaWJ1dGUgdG8gZWFjaCBub2RlIGlmIHN1Y2ggYW4gYXR0cmlidXRlIGlzIG5vdCBhbHJlYWR5IHByZXNlbnQsCgkgKiBhbmQgc2V0cyB0aGF0IGF0dHJpYnV0ZSB0byBhbiBpbnRlZ2VyIHZhbHVlIHdoaWNoIGlzIHRoZSBwb3NpdGlvbiBvZgoJICogdGhlIGZyYWdtZW50IHdpdGhpbiB0aGUgZnJhZ21lbnRzIGxpc3QuCgkgKgoJICogQHBhcmFtIHtvYmplY3RbXXwqfSBmcmFnbWVudHMKCSAqIEBwYXJhbSB7Ym9vbGVhbn0gZ3JvdXBlZCBJZiB0cnVlIHRoZSByZXR1cm5lZCBhcnJheSB3aWxsIGNvbnRhaW4KCSAqIG5lc3RlZCBhcnJheXMgZm9yIGFsbCBmcmFnbWVudHMgd2l0aCB0aGUgc2FtZSBpbmRleAoJICogQHJldHVybiB7b2JqZWN0W119IHNvcnRlZCBTb3J0ZWQgYXJyYXkgb2YgZnJhZ21lbnRzCgkgKi8KCWZ1bmN0aW9uIHNvcnRGcmFnbWVudHMoIGZyYWdtZW50cywgZ3JvdXBlZCApIHsKCgkJZnJhZ21lbnRzID0gdG9BcnJheSggZnJhZ21lbnRzICk7CgoJCXZhciBvcmRlcmVkID0gW10sCgkJCXVub3JkZXJlZCA9IFtdLAoJCQlzb3J0ZWQgPSBbXTsKCgkJLy8gR3JvdXAgb3JkZXJlZCBhbmQgdW5vcmRlcmVkIGVsZW1lbnRzCgkJZnJhZ21lbnRzLmZvckVhY2goIGZ1bmN0aW9uKCBmcmFnbWVudCwgaSApIHsKCQkJaWYoIGZyYWdtZW50Lmhhc0F0dHJpYnV0ZSggJ2RhdGEtZnJhZ21lbnQtaW5kZXgnICkgKSB7CgkJCQl2YXIgaW5kZXggPSBwYXJzZUludCggZnJhZ21lbnQuZ2V0QXR0cmlidXRlKCAnZGF0YS1mcmFnbWVudC1pbmRleCcgKSwgMTAgKTsKCgkJCQlpZiggIW9yZGVyZWRbaW5kZXhdICkgewoJCQkJCW9yZGVyZWRbaW5kZXhdID0gW107CgkJCQl9CgoJCQkJb3JkZXJlZFtpbmRleF0ucHVzaCggZnJhZ21lbnQgKTsKCQkJfQoJCQllbHNlIHsKCQkJCXVub3JkZXJlZC5wdXNoKCBbIGZyYWdtZW50IF0gKTsKCQkJfQoJCX0gKTsKCgkJLy8gQXBwZW5kIGZyYWdtZW50cyB3aXRob3V0IGV4cGxpY2l0IGluZGljZXMgaW4gdGhlaXIKCQkvLyBET00gb3JkZXIKCQlvcmRlcmVkID0gb3JkZXJlZC5jb25jYXQoIHVub3JkZXJlZCApOwoKCQkvLyBNYW51YWxseSBjb3VudCB0aGUgaW5kZXggdXAgcGVyIGdyb3VwIHRvIGVuc3VyZSB0aGVyZQoJCS8vIGFyZSBubyBnYXBzCgkJdmFyIGluZGV4ID0gMDsKCgkJLy8gUHVzaCBhbGwgZnJhZ21lbnRzIGluIHRoZWlyIHNvcnRlZCBvcmRlciB0byBhbiBhcnJheSwKCQkvLyB0aGlzIGZsYXR0ZW5zIHRoZSBncm91cHMKCQlvcmRlcmVkLmZvckVhY2goIGZ1bmN0aW9uKCBncm91cCApIHsKCQkJZ3JvdXAuZm9yRWFjaCggZnVuY3Rpb24oIGZyYWdtZW50ICkgewoJCQkJc29ydGVkLnB1c2goIGZyYWdtZW50ICk7CgkJCQlmcmFnbWVudC5zZXRBdHRyaWJ1dGUoICdkYXRhLWZyYWdtZW50LWluZGV4JywgaW5kZXggKTsKCQkJfSApOwoKCQkJaW5kZXggKys7CgkJfSApOwoKCQlyZXR1cm4gZ3JvdXBlZCA9PT0gdHJ1ZSA/IG9yZGVyZWQgOiBzb3J0ZWQ7CgoJfQoKCS8qKgoJICogUmVmcmVzaGVzIHRoZSBmcmFnbWVudHMgb24gdGhlIGN1cnJlbnQgc2xpZGUgc28gdGhhdCB0aGV5CgkgKiBoYXZlIHRoZSBhcHByb3ByaWF0ZSBjbGFzc2VzICgudmlzaWJsZSArIC5jdXJyZW50LWZyYWdtZW50KS4KCSAqCgkgKiBAcGFyYW0ge251bWJlcn0gW2luZGV4XSBUaGUgaW5kZXggb2YgdGhlIGN1cnJlbnQgZnJhZ21lbnQKCSAqIEBwYXJhbSB7YXJyYXl9IFtmcmFnbWVudHNdIEFycmF5IGNvbnRhaW5pbmcgYWxsIGZyYWdtZW50cwoJICogaW4gdGhlIGN1cnJlbnQgc2xpZGUKCSAqCgkgKiBAcmV0dXJuIHt7c2hvd246IGFycmF5LCBoaWRkZW46IGFycmF5fX0KCSAqLwoJZnVuY3Rpb24gdXBkYXRlRnJhZ21lbnRzKCBpbmRleCwgZnJhZ21lbnRzICkgewoKCQl2YXIgY2hhbmdlZEZyYWdtZW50cyA9IHsKCQkJc2hvd246IFtdLAoJCQloaWRkZW46IFtdCgkJfTsKCgkJaWYoIGN1cnJlbnRTbGlkZSAmJiBjb25maWcuZnJhZ21lbnRzICkgewoKCQkJZnJhZ21lbnRzID0gZnJhZ21lbnRzIHx8IHNvcnRGcmFnbWVudHMoIGN1cnJlbnRTbGlkZS5xdWVyeVNlbGVjdG9yQWxsKCAnLmZyYWdtZW50JyApICk7CgoJCQlpZiggZnJhZ21lbnRzLmxlbmd0aCApIHsKCgkJCQlpZiggdHlwZW9mIGluZGV4ICE9PSAnbnVtYmVyJyApIHsKCQkJCQl2YXIgY3VycmVudEZyYWdtZW50ID0gc29ydEZyYWdtZW50cyggY3VycmVudFNsaWRlLnF1ZXJ5U2VsZWN0b3JBbGwoICcuZnJhZ21lbnQudmlzaWJsZScgKSApLnBvcCgpOwoJCQkJCWlmKCBjdXJyZW50RnJhZ21lbnQgKSB7CgkJCQkJCWluZGV4ID0gcGFyc2VJbnQoIGN1cnJlbnRGcmFnbWVudC5nZXRBdHRyaWJ1dGUoICdkYXRhLWZyYWdtZW50LWluZGV4JyApIHx8IDAsIDEwICk7CgkJCQkJfQoJCQkJfQoKCQkJCXRvQXJyYXkoIGZyYWdtZW50cyApLmZvckVhY2goIGZ1bmN0aW9uKCBlbCwgaSApIHsKCgkJCQkJaWYoIGVsLmhhc0F0dHJpYnV0ZSggJ2RhdGEtZnJhZ21lbnQtaW5kZXgnICkgKSB7CgkJCQkJCWkgPSBwYXJzZUludCggZWwuZ2V0QXR0cmlidXRlKCAnZGF0YS1mcmFnbWVudC1pbmRleCcgKSwgMTAgKTsKCQkJCQl9CgoJCQkJCS8vIFZpc2libGUgZnJhZ21lbnRzCgkJCQkJaWYoIGkgPD0gaW5kZXggKSB7CgkJCQkJCWlmKCAhZWwuY2xhc3NMaXN0LmNvbnRhaW5zKCAndmlzaWJsZScgKSApIGNoYW5nZWRGcmFnbWVudHMuc2hvd24ucHVzaCggZWwgKTsKCQkJCQkJZWwuY2xhc3NMaXN0LmFkZCggJ3Zpc2libGUnICk7CgkJCQkJCWVsLmNsYXNzTGlzdC5yZW1vdmUoICdjdXJyZW50LWZyYWdtZW50JyApOwoKCQkJCQkJLy8gQW5ub3VuY2UgdGhlIGZyYWdtZW50cyBvbmUgYnkgb25lIHRvIHRoZSBTY3JlZW4gUmVhZGVyCgkJCQkJCWRvbS5zdGF0dXNEaXYudGV4dENvbnRlbnQgPSBnZXRTdGF0dXNUZXh0KCBlbCApOwoKCQkJCQkJaWYoIGkgPT09IGluZGV4ICkgewoJCQkJCQkJZWwuY2xhc3NMaXN0LmFkZCggJ2N1cnJlbnQtZnJhZ21lbnQnICk7CgkJCQkJCQlzdGFydEVtYmVkZGVkQ29udGVudCggZWwgKTsKCQkJCQkJfQoJCQkJCX0KCQkJCQkvLyBIaWRkZW4gZnJhZ21lbnRzCgkJCQkJZWxzZSB7CgkJCQkJCWlmKCBlbC5jbGFzc0xpc3QuY29udGFpbnMoICd2aXNpYmxlJyApICkgY2hhbmdlZEZyYWdtZW50cy5oaWRkZW4ucHVzaCggZWwgKTsKCQkJCQkJZWwuY2xhc3NMaXN0LnJlbW92ZSggJ3Zpc2libGUnICk7CgkJCQkJCWVsLmNsYXNzTGlzdC5yZW1vdmUoICdjdXJyZW50LWZyYWdtZW50JyApOwoJCQkJCX0KCgkJCQl9ICk7CgoJCQl9CgoJCX0KCgkJcmV0dXJuIGNoYW5nZWRGcmFnbWVudHM7CgoJfQoKCS8qKgoJICogTmF2aWdhdGUgdG8gdGhlIHNwZWNpZmllZCBzbGlkZSBmcmFnbWVudC4KCSAqCgkgKiBAcGFyYW0gez9udW1iZXJ9IGluZGV4IFRoZSBpbmRleCBvZiB0aGUgZnJhZ21lbnQgdGhhdAoJICogc2hvdWxkIGJlIHNob3duLCAtMSBtZWFucyBhbGwgYXJlIGludmlzaWJsZQoJICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBJbnRlZ2VyIG9mZnNldCB0byBhcHBseSB0byB0aGUKCSAqIGZyYWdtZW50IGluZGV4CgkgKgoJICogQHJldHVybiB7Ym9vbGVhbn0gdHJ1ZSBpZiBhIGNoYW5nZSB3YXMgbWFkZSBpbiBhbnkKCSAqIGZyYWdtZW50cyB2aXNpYmlsaXR5IGFzIHBhcnQgb2YgdGhpcyBjYWxsCgkgKi8KCWZ1bmN0aW9uIG5hdmlnYXRlRnJhZ21lbnQoIGluZGV4LCBvZmZzZXQgKSB7CgoJCWlmKCBjdXJyZW50U2xpZGUgJiYgY29uZmlnLmZyYWdtZW50cyApIHsKCgkJCXZhciBmcmFnbWVudHMgPSBzb3J0RnJhZ21lbnRzKCBjdXJyZW50U2xpZGUucXVlcnlTZWxlY3RvckFsbCggJy5mcmFnbWVudCcgKSApOwoJCQlpZiggZnJhZ21lbnRzLmxlbmd0aCApIHsKCgkJCQkvLyBJZiBubyBpbmRleCBpcyBzcGVjaWZpZWQsIGZpbmQgdGhlIGN1cnJlbnQKCQkJCWlmKCB0eXBlb2YgaW5kZXggIT09ICdudW1iZXInICkgewoJCQkJCXZhciBsYXN0VmlzaWJsZUZyYWdtZW50ID0gc29ydEZyYWdtZW50cyggY3VycmVudFNsaWRlLnF1ZXJ5U2VsZWN0b3JBbGwoICcuZnJhZ21lbnQudmlzaWJsZScgKSApLnBvcCgpOwoKCQkJCQlpZiggbGFzdFZpc2libGVGcmFnbWVudCApIHsKCQkJCQkJaW5kZXggPSBwYXJzZUludCggbGFzdFZpc2libGVGcmFnbWVudC5nZXRBdHRyaWJ1dGUoICdkYXRhLWZyYWdtZW50LWluZGV4JyApIHx8IDAsIDEwICk7CgkJCQkJfQoJCQkJCWVsc2UgewoJCQkJCQlpbmRleCA9IC0xOwoJCQkJCX0KCQkJCX0KCgkJCQkvLyBJZiBhbiBvZmZzZXQgaXMgc3BlY2lmaWVkLCBhcHBseSBpdCB0byB0aGUgaW5kZXgKCQkJCWlmKCB0eXBlb2Ygb2Zmc2V0ID09PSAnbnVtYmVyJyApIHsKCQkJCQlpbmRleCArPSBvZmZzZXQ7CgkJCQl9CgoJCQkJdmFyIGNoYW5nZWRGcmFnbWVudHMgPSB1cGRhdGVGcmFnbWVudHMoIGluZGV4LCBmcmFnbWVudHMgKTsKCgkJCQlpZiggY2hhbmdlZEZyYWdtZW50cy5oaWRkZW4ubGVuZ3RoICkgewoJCQkJCWRpc3BhdGNoRXZlbnQoICdmcmFnbWVudGhpZGRlbicsIHsgZnJhZ21lbnQ6IGNoYW5nZWRGcmFnbWVudHMuaGlkZGVuWzBdLCBmcmFnbWVudHM6IGNoYW5nZWRGcmFnbWVudHMuaGlkZGVuIH0gKTsKCQkJCX0KCgkJCQlpZiggY2hhbmdlZEZyYWdtZW50cy5zaG93bi5sZW5ndGggKSB7CgkJCQkJZGlzcGF0Y2hFdmVudCggJ2ZyYWdtZW50c2hvd24nLCB7IGZyYWdtZW50OiBjaGFuZ2VkRnJhZ21lbnRzLnNob3duWzBdLCBmcmFnbWVudHM6IGNoYW5nZWRGcmFnbWVudHMuc2hvd24gfSApOwoJCQkJfQoKCQkJCXVwZGF0ZUNvbnRyb2xzKCk7CgkJCQl1cGRhdGVQcm9ncmVzcygpOwoKCQkJCWlmKCBjb25maWcuZnJhZ21lbnRJblVSTCApIHsKCQkJCQl3cml0ZVVSTCgpOwoJCQkJfQoKCQkJCXJldHVybiAhISggY2hhbmdlZEZyYWdtZW50cy5zaG93bi5sZW5ndGggfHwgY2hhbmdlZEZyYWdtZW50cy5oaWRkZW4ubGVuZ3RoICk7CgoJCQl9CgoJCX0KCgkJcmV0dXJuIGZhbHNlOwoKCX0KCgkvKioKCSAqIE5hdmlnYXRlIHRvIHRoZSBuZXh0IHNsaWRlIGZyYWdtZW50LgoJICoKCSAqIEByZXR1cm4ge2Jvb2xlYW59IHRydWUgaWYgdGhlcmUgd2FzIGEgbmV4dCBmcmFnbWVudCwKCSAqIGZhbHNlIG90aGVyd2lzZQoJICovCglmdW5jdGlvbiBuZXh0RnJhZ21lbnQoKSB7CgoJCXJldHVybiBuYXZpZ2F0ZUZyYWdtZW50KCBudWxsLCAxICk7CgoJfQoKCS8qKgoJICogTmF2aWdhdGUgdG8gdGhlIHByZXZpb3VzIHNsaWRlIGZyYWdtZW50LgoJICoKCSAqIEByZXR1cm4ge2Jvb2xlYW59IHRydWUgaWYgdGhlcmUgd2FzIGEgcHJldmlvdXMgZnJhZ21lbnQsCgkgKiBmYWxzZSBvdGhlcndpc2UKCSAqLwoJZnVuY3Rpb24gcHJldmlvdXNGcmFnbWVudCgpIHsKCgkJcmV0dXJuIG5hdmlnYXRlRnJhZ21lbnQoIG51bGwsIC0xICk7CgoJfQoKCS8qKgoJICogQ3VlcyBhIG5ldyBhdXRvbWF0ZWQgc2xpZGUgaWYgZW5hYmxlZCBpbiB0aGUgY29uZmlnLgoJICovCglmdW5jdGlvbiBjdWVBdXRvU2xpZGUoKSB7CgoJCWNhbmNlbEF1dG9TbGlkZSgpOwoKCQlpZiggY3VycmVudFNsaWRlICYmIGNvbmZpZy5hdXRvU2xpZGUgIT09IGZhbHNlICkgewoKCQkJdmFyIGZyYWdtZW50ID0gY3VycmVudFNsaWRlLnF1ZXJ5U2VsZWN0b3IoICcuY3VycmVudC1mcmFnbWVudCcgKTsKCgkJCS8vIFdoZW4gdGhlIHNsaWRlIGZpcnN0IGFwcGVhcnMgdGhlcmUgaXMgbm8gImN1cnJlbnQiIGZyYWdtZW50IHNvCgkJCS8vIHdlIGxvb2sgZm9yIGEgZGF0YS1hdXRvc2xpZGUgdGltaW5nIG9uIHRoZSBmaXJzdCBmcmFnbWVudAoJCQlpZiggIWZyYWdtZW50ICkgZnJhZ21lbnQgPSBjdXJyZW50U2xpZGUucXVlcnlTZWxlY3RvciggJy5mcmFnbWVudCcgKTsKCgkJCXZhciBmcmFnbWVudEF1dG9TbGlkZSA9IGZyYWdtZW50ID8gZnJhZ21lbnQuZ2V0QXR0cmlidXRlKCAnZGF0YS1hdXRvc2xpZGUnICkgOiBudWxsOwoJCQl2YXIgcGFyZW50QXV0b1NsaWRlID0gY3VycmVudFNsaWRlLnBhcmVudE5vZGUgPyBjdXJyZW50U2xpZGUucGFyZW50Tm9kZS5nZXRBdHRyaWJ1dGUoICdkYXRhLWF1dG9zbGlkZScgKSA6IG51bGw7CgkJCXZhciBzbGlkZUF1dG9TbGlkZSA9IGN1cnJlbnRTbGlkZS5nZXRBdHRyaWJ1dGUoICdkYXRhLWF1dG9zbGlkZScgKTsKCgkJCS8vIFBpY2sgdmFsdWUgaW4gdGhlIGZvbGxvd2luZyBwcmlvcml0eSBvcmRlcjoKCQkJLy8gMS4gQ3VycmVudCBmcmFnbWVudCdzIGRhdGEtYXV0b3NsaWRlCgkJCS8vIDIuIEN1cnJlbnQgc2xpZGUncyBkYXRhLWF1dG9zbGlkZQoJCQkvLyAzLiBQYXJlbnQgc2xpZGUncyBkYXRhLWF1dG9zbGlkZQoJCQkvLyA0LiBHbG9iYWwgYXV0b1NsaWRlIHNldHRpbmcKCQkJaWYoIGZyYWdtZW50QXV0b1NsaWRlICkgewoJCQkJYXV0b1NsaWRlID0gcGFyc2VJbnQoIGZyYWdtZW50QXV0b1NsaWRlLCAxMCApOwoJCQl9CgkJCWVsc2UgaWYoIHNsaWRlQXV0b1NsaWRlICkgewoJCQkJYXV0b1NsaWRlID0gcGFyc2VJbnQoIHNsaWRlQXV0b1NsaWRlLCAxMCApOwoJCQl9CgkJCWVsc2UgaWYoIHBhcmVudEF1dG9TbGlkZSApIHsKCQkJCWF1dG9TbGlkZSA9IHBhcnNlSW50KCBwYXJlbnRBdXRvU2xpZGUsIDEwICk7CgkJCX0KCQkJZWxzZSB7CgkJCQlhdXRvU2xpZGUgPSBjb25maWcuYXV0b1NsaWRlOwoJCQl9CgoJCQkvLyBJZiB0aGVyZSBhcmUgbWVkaWEgZWxlbWVudHMgd2l0aCBkYXRhLWF1dG9wbGF5LAoJCQkvLyBhdXRvbWF0aWNhbGx5IHNldCB0aGUgYXV0b1NsaWRlIGR1cmF0aW9uIHRvIHRoZQoJCQkvLyBsZW5ndGggb2YgdGhhdCBtZWRpYS4gTm90IGFwcGxpY2FibGUgaWYgdGhlIHNsaWRlCgkJCS8vIGlzIGRpdmlkZWQgdXAgaW50byBmcmFnbWVudHMuCgkJCS8vIHBsYXliYWNrUmF0ZSBpcyBhY2NvdW50ZWQgZm9yIGluIHRoZSBkdXJhdGlvbi4KCQkJaWYoIGN1cnJlbnRTbGlkZS5xdWVyeVNlbGVjdG9yQWxsKCAnLmZyYWdtZW50JyApLmxlbmd0aCA9PT0gMCApIHsKCQkJCXRvQXJyYXkoIGN1cnJlbnRTbGlkZS5xdWVyeVNlbGVjdG9yQWxsKCAndmlkZW8sIGF1ZGlvJyApICkuZm9yRWFjaCggZnVuY3Rpb24oIGVsICkgewoJCQkJCWlmKCBlbC5oYXNBdHRyaWJ1dGUoICdkYXRhLWF1dG9wbGF5JyApICkgewoJCQkJCQlpZiggYXV0b1NsaWRlICYmIChlbC5kdXJhdGlvbiAqIDEwMDAgLyBlbC5wbGF5YmFja1JhdGUgKSA+IGF1dG9TbGlkZSApIHsKCQkJCQkJCWF1dG9TbGlkZSA9ICggZWwuZHVyYXRpb24gKiAxMDAwIC8gZWwucGxheWJhY2tSYXRlICkgKyAxMDAwOwoJCQkJCQl9CgkJCQkJfQoJCQkJfSApOwoJCQl9CgoJCQkvLyBDdWUgdGhlIG5leHQgYXV0by1zbGlkZSBpZjoKCQkJLy8gLSBUaGVyZSBpcyBhbiBhdXRvU2xpZGUgdmFsdWUKCQkJLy8gLSBBdXRvLXNsaWRpbmcgaXNuJ3QgcGF1c2VkIGJ5IHRoZSB1c2VyCgkJCS8vIC0gVGhlIHByZXNlbnRhdGlvbiBpc24ndCBwYXVzZWQKCQkJLy8gLSBUaGUgb3ZlcnZpZXcgaXNuJ3QgYWN0aXZlCgkJCS8vIC0gVGhlIHByZXNlbnRhdGlvbiBpc24ndCBvdmVyCgkJCWlmKCBhdXRvU2xpZGUgJiYgIWF1dG9TbGlkZVBhdXNlZCAmJiAhaXNQYXVzZWQoKSAmJiAhaXNPdmVydmlldygpICYmICggIVJldmVhbC5pc0xhc3RTbGlkZSgpIHx8IGF2YWlsYWJsZUZyYWdtZW50cygpLm5leHQgfHwgY29uZmlnLmxvb3AgPT09IHRydWUgKSApIHsKCQkJCWF1dG9TbGlkZVRpbWVvdXQgPSBzZXRUaW1lb3V0KCBmdW5jdGlvbigpIHsKCQkJCQl0eXBlb2YgY29uZmlnLmF1dG9TbGlkZU1ldGhvZCA9PT0gJ2Z1bmN0aW9uJyA/IGNvbmZpZy5hdXRvU2xpZGVNZXRob2QoKSA6IG5hdmlnYXRlTmV4dCgpOwoJCQkJCWN1ZUF1dG9TbGlkZSgpOwoJCQkJfSwgYXV0b1NsaWRlICk7CgkJCQlhdXRvU2xpZGVTdGFydFRpbWUgPSBEYXRlLm5vdygpOwoJCQl9CgoJCQlpZiggYXV0b1NsaWRlUGxheWVyICkgewoJCQkJYXV0b1NsaWRlUGxheWVyLnNldFBsYXlpbmcoIGF1dG9TbGlkZVRpbWVvdXQgIT09IC0xICk7CgkJCX0KCgkJfQoKCX0KCgkvKioKCSAqIENhbmNlbHMgYW55IG9uZ29pbmcgcmVxdWVzdCB0byBhdXRvLXNsaWRlLgoJICovCglmdW5jdGlvbiBjYW5jZWxBdXRvU2xpZGUoKSB7CgoJCWNsZWFyVGltZW91dCggYXV0b1NsaWRlVGltZW91dCApOwoJCWF1dG9TbGlkZVRpbWVvdXQgPSAtMTsKCgl9CgoJZnVuY3Rpb24gcGF1c2VBdXRvU2xpZGUoKSB7CgoJCWlmKCBhdXRvU2xpZGUgJiYgIWF1dG9TbGlkZVBhdXNlZCApIHsKCQkJYXV0b1NsaWRlUGF1c2VkID0gdHJ1ZTsKCQkJZGlzcGF0Y2hFdmVudCggJ2F1dG9zbGlkZXBhdXNlZCcgKTsKCQkJY2xlYXJUaW1lb3V0KCBhdXRvU2xpZGVUaW1lb3V0ICk7CgoJCQlpZiggYXV0b1NsaWRlUGxheWVyICkgewoJCQkJYXV0b1NsaWRlUGxheWVyLnNldFBsYXlpbmcoIGZhbHNlICk7CgkJCX0KCQl9CgoJfQoKCWZ1bmN0aW9uIHJlc3VtZUF1dG9TbGlkZSgpIHsKCgkJaWYoIGF1dG9TbGlkZSAmJiBhdXRvU2xpZGVQYXVzZWQgKSB7CgkJCWF1dG9TbGlkZVBhdXNlZCA9IGZhbHNlOwoJCQlkaXNwYXRjaEV2ZW50KCAnYXV0b3NsaWRlcmVzdW1lZCcgKTsKCQkJY3VlQXV0b1NsaWRlKCk7CgkJfQoKCX0KCglmdW5jdGlvbiBuYXZpZ2F0ZUxlZnQoKSB7CgoJCS8vIFJldmVyc2UgZm9yIFJUTAoJCWlmKCBjb25maWcucnRsICkgewoJCQlpZiggKCBpc092ZXJ2aWV3KCkgfHwgbmV4dEZyYWdtZW50KCkgPT09IGZhbHNlICkgJiYgYXZhaWxhYmxlUm91dGVzKCkubGVmdCApIHsKCQkJCXNsaWRlKCBpbmRleGggKyAxLCBjb25maWcubmF2aWdhdGlvbk1vZGUgPT09ICdncmlkJyA/IGluZGV4diA6IHVuZGVmaW5lZCApOwoJCQl9CgkJfQoJCS8vIE5vcm1hbCBuYXZpZ2F0aW9uCgkJZWxzZSBpZiggKCBpc092ZXJ2aWV3KCkgfHwgcHJldmlvdXNGcmFnbWVudCgpID09PSBmYWxzZSApICYmIGF2YWlsYWJsZVJvdXRlcygpLmxlZnQgKSB7CgkJCXNsaWRlKCBpbmRleGggLSAxLCBjb25maWcubmF2aWdhdGlvbk1vZGUgPT09ICdncmlkJyA/IGluZGV4diA6IHVuZGVmaW5lZCApOwoJCX0KCgl9CgoJZnVuY3Rpb24gbmF2aWdhdGVSaWdodCgpIHsKCgkJaGFzTmF2aWdhdGVkUmlnaHQgPSB0cnVlOwoKCQkvLyBSZXZlcnNlIGZvciBSVEwKCQlpZiggY29uZmlnLnJ0bCApIHsKCQkJaWYoICggaXNPdmVydmlldygpIHx8IHByZXZpb3VzRnJhZ21lbnQoKSA9PT0gZmFsc2UgKSAmJiBhdmFpbGFibGVSb3V0ZXMoKS5yaWdodCApIHsKCQkJCXNsaWRlKCBpbmRleGggLSAxLCBjb25maWcubmF2aWdhdGlvbk1vZGUgPT09ICdncmlkJyA/IGluZGV4diA6IHVuZGVmaW5lZCApOwoJCQl9CgkJfQoJCS8vIE5vcm1hbCBuYXZpZ2F0aW9uCgkJZWxzZSBpZiggKCBpc092ZXJ2aWV3KCkgfHwgbmV4dEZyYWdtZW50KCkgPT09IGZhbHNlICkgJiYgYXZhaWxhYmxlUm91dGVzKCkucmlnaHQgKSB7CgkJCXNsaWRlKCBpbmRleGggKyAxLCBjb25maWcubmF2aWdhdGlvbk1vZGUgPT09ICdncmlkJyA/IGluZGV4diA6IHVuZGVmaW5lZCApOwoJCX0KCgl9CgoJZnVuY3Rpb24gbmF2aWdhdGVVcCgpIHsKCgkJLy8gUHJpb3JpdGl6ZSBoaWRpbmcgZnJhZ21lbnRzCgkJaWYoICggaXNPdmVydmlldygpIHx8IHByZXZpb3VzRnJhZ21lbnQoKSA9PT0gZmFsc2UgKSAmJiBhdmFpbGFibGVSb3V0ZXMoKS51cCApIHsKCQkJc2xpZGUoIGluZGV4aCwgaW5kZXh2IC0gMSApOwoJCX0KCgl9CgoJZnVuY3Rpb24gbmF2aWdhdGVEb3duKCkgewoKCQloYXNOYXZpZ2F0ZWREb3duID0gdHJ1ZTsKCgkJLy8gUHJpb3JpdGl6ZSByZXZlYWxpbmcgZnJhZ21lbnRzCgkJaWYoICggaXNPdmVydmlldygpIHx8IG5leHRGcmFnbWVudCgpID09PSBmYWxzZSApICYmIGF2YWlsYWJsZVJvdXRlcygpLmRvd24gKSB7CgkJCXNsaWRlKCBpbmRleGgsIGluZGV4diArIDEgKTsKCQl9CgoJfQoKCS8qKgoJICogTmF2aWdhdGVzIGJhY2t3YXJkcywgcHJpb3JpdGl6ZWQgaW4gdGhlIGZvbGxvd2luZyBvcmRlcjoKCSAqIDEpIFByZXZpb3VzIGZyYWdtZW50CgkgKiAyKSBQcmV2aW91cyB2ZXJ0aWNhbCBzbGlkZQoJICogMykgUHJldmlvdXMgaG9yaXpvbnRhbCBzbGlkZQoJICovCglmdW5jdGlvbiBuYXZpZ2F0ZVByZXYoKSB7CgoJCS8vIFByaW9yaXRpemUgcmV2ZWFsaW5nIGZyYWdtZW50cwoJCWlmKCBwcmV2aW91c0ZyYWdtZW50KCkgPT09IGZhbHNlICkgewoJCQlpZiggYXZhaWxhYmxlUm91dGVzKCkudXAgKSB7CgkJCQluYXZpZ2F0ZVVwKCk7CgkJCX0KCQkJZWxzZSB7CgkJCQkvLyBGZXRjaCB0aGUgcHJldmlvdXMgaG9yaXpvbnRhbCBzbGlkZSwgaWYgdGhlcmUgaXMgb25lCgkJCQl2YXIgcHJldmlvdXNTbGlkZTsKCgkJCQlpZiggY29uZmlnLnJ0bCApIHsKCQkJCQlwcmV2aW91c1NsaWRlID0gdG9BcnJheSggZG9tLndyYXBwZXIucXVlcnlTZWxlY3RvckFsbCggSE9SSVpPTlRBTF9TTElERVNfU0VMRUNUT1IgKyAnLmZ1dHVyZScgKSApLnBvcCgpOwoJCQkJfQoJCQkJZWxzZSB7CgkJCQkJcHJldmlvdXNTbGlkZSA9IHRvQXJyYXkoIGRvbS53cmFwcGVyLnF1ZXJ5U2VsZWN0b3JBbGwoIEhPUklaT05UQUxfU0xJREVTX1NFTEVDVE9SICsgJy5wYXN0JyApICkucG9wKCk7CgkJCQl9CgoJCQkJaWYoIHByZXZpb3VzU2xpZGUgKSB7CgkJCQkJdmFyIHYgPSAoIHByZXZpb3VzU2xpZGUucXVlcnlTZWxlY3RvckFsbCggJ3NlY3Rpb24nICkubGVuZ3RoIC0gMSApIHx8IHVuZGVmaW5lZDsKCQkJCQl2YXIgaCA9IGluZGV4aCAtIDE7CgkJCQkJc2xpZGUoIGgsIHYgKTsKCQkJCX0KCQkJfQoJCX0KCgl9CgoJLyoqCgkgKiBUaGUgcmV2ZXJzZSBvZiAjbmF2aWdhdGVQcmV2KCkuCgkgKi8KCWZ1bmN0aW9uIG5hdmlnYXRlTmV4dCgpIHsKCgkJaGFzTmF2aWdhdGVkUmlnaHQgPSB0cnVlOwoJCWhhc05hdmlnYXRlZERvd24gPSB0cnVlOwoKCQkvLyBQcmlvcml0aXplIHJldmVhbGluZyBmcmFnbWVudHMKCQlpZiggbmV4dEZyYWdtZW50KCkgPT09IGZhbHNlICkgewoKCQkJdmFyIHJvdXRlcyA9IGF2YWlsYWJsZVJvdXRlcygpOwoKCQkJLy8gV2hlbiBsb29waW5nIGlzIGVuYWJsZWQgYHJvdXRlcy5kb3duYCBpcyBhbHdheXMgYXZhaWxhYmxlCgkJCS8vIHNvIHdlIG5lZWQgYSBzZXBhcmF0ZSBjaGVjayBmb3Igd2hlbiB3ZSd2ZSByZWFjaGVkIHRoZQoJCQkvLyBlbmQgb2YgYSBzdGFjayBhbmQgc2hvdWxkIG1vdmUgaG9yaXpvbnRhbGx5CgkJCWlmKCByb3V0ZXMuZG93biAmJiByb3V0ZXMucmlnaHQgJiYgY29uZmlnLmxvb3AgJiYgUmV2ZWFsLmlzTGFzdFZlcnRpY2FsU2xpZGUoIGN1cnJlbnRTbGlkZSApICkgewoJCQkJcm91dGVzLmRvd24gPSBmYWxzZTsKCQkJfQoKCQkJaWYoIHJvdXRlcy5kb3duICkgewoJCQkJbmF2aWdhdGVEb3duKCk7CgkJCX0KCQkJZWxzZSBpZiggY29uZmlnLnJ0bCApIHsKCQkJCW5hdmlnYXRlTGVmdCgpOwoJCQl9CgkJCWVsc2UgewoJCQkJbmF2aWdhdGVSaWdodCgpOwoJCQl9CgkJfQoKCX0KCgkvKioKCSAqIENoZWNrcyBpZiB0aGUgdGFyZ2V0IGVsZW1lbnQgcHJldmVudHMgdGhlIHRyaWdnZXJpbmcgb2YKCSAqIHN3aXBlIG5hdmlnYXRpb24uCgkgKi8KCWZ1bmN0aW9uIGlzU3dpcGVQcmV2ZW50ZWQoIHRhcmdldCApIHsKCgkJd2hpbGUoIHRhcmdldCAmJiB0eXBlb2YgdGFyZ2V0Lmhhc0F0dHJpYnV0ZSA9PT0gJ2Z1bmN0aW9uJyApIHsKCQkJaWYoIHRhcmdldC5oYXNBdHRyaWJ1dGUoICdkYXRhLXByZXZlbnQtc3dpcGUnICkgKSByZXR1cm4gdHJ1ZTsKCQkJdGFyZ2V0ID0gdGFyZ2V0LnBhcmVudE5vZGU7CgkJfQoKCQlyZXR1cm4gZmFsc2U7CgoJfQoKCgkvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS8vCgkvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSBFVkVOVFMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS8vCgkvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS8vCgoJLyoqCgkgKiBDYWxsZWQgYnkgYWxsIGV2ZW50IGhhbmRsZXJzIHRoYXQgYXJlIGJhc2VkIG9uIHVzZXIKCSAqIGlucHV0LgoJICoKCSAqIEBwYXJhbSB7b2JqZWN0fSBbZXZlbnRdCgkgKi8KCWZ1bmN0aW9uIG9uVXNlcklucHV0KCBldmVudCApIHsKCgkJaWYoIGNvbmZpZy5hdXRvU2xpZGVTdG9wcGFibGUgKSB7CgkJCXBhdXNlQXV0b1NsaWRlKCk7CgkJfQoKCX0KCgkvKioKCSAqIENhbGxlZCB3aGVuZXZlciB0aGVyZSBpcyBtb3VzZSBpbnB1dCBhdCB0aGUgZG9jdW1lbnQgbGV2ZWwKCSAqIHRvIGRldGVybWluZSBpZiB0aGUgY3Vyc29yIGlzIGFjdGl2ZSBvciBub3QuCgkgKgoJICogQHBhcmFtIHtvYmplY3R9IGV2ZW50CgkgKi8KCWZ1bmN0aW9uIG9uRG9jdW1lbnRDdXJzb3JBY3RpdmUoIGV2ZW50ICkgewoKCQlzaG93Q3Vyc29yKCk7CgoJCWNsZWFyVGltZW91dCggY3Vyc29ySW5hY3RpdmVUaW1lb3V0ICk7CgoJCWN1cnNvckluYWN0aXZlVGltZW91dCA9IHNldFRpbWVvdXQoIGhpZGVDdXJzb3IsIGNvbmZpZy5oaWRlQ3Vyc29yVGltZSApOwoKCX0KCgkvKioKCSAqIEhhbmRsZXIgZm9yIHRoZSBkb2N1bWVudCBsZXZlbCAna2V5cHJlc3MnIGV2ZW50LgoJICoKCSAqIEBwYXJhbSB7b2JqZWN0fSBldmVudAoJICovCglmdW5jdGlvbiBvbkRvY3VtZW50S2V5UHJlc3MoIGV2ZW50ICkgewoKCQkvLyBDaGVjayBpZiB0aGUgcHJlc3NlZCBrZXkgaXMgcXVlc3Rpb24gbWFyawoJCWlmKCBldmVudC5zaGlmdEtleSAmJiBldmVudC5jaGFyQ29kZSA9PT0gNjMgKSB7CgkJCXRvZ2dsZUhlbHAoKTsKCQl9CgoJfQoKCS8qKgoJICogSGFuZGxlciBmb3IgdGhlIGRvY3VtZW50IGxldmVsICdrZXlkb3duJyBldmVudC4KCSAqCgkgKiBAcGFyYW0ge29iamVjdH0gZXZlbnQKCSAqLwoJZnVuY3Rpb24gb25Eb2N1bWVudEtleURvd24oIGV2ZW50ICkgewoKCQkvLyBJZiB0aGVyZSdzIGEgY29uZGl0aW9uIHNwZWNpZmllZCBhbmQgaXQgcmV0dXJucyBmYWxzZSwKCQkvLyBpZ25vcmUgdGhpcyBldmVudAoJCWlmKCB0eXBlb2YgY29uZmlnLmtleWJvYXJkQ29uZGl0aW9uID09PSAnZnVuY3Rpb24nICYmIGNvbmZpZy5rZXlib2FyZENvbmRpdGlvbihldmVudCkgPT09IGZhbHNlICkgewoJCQlyZXR1cm4gdHJ1ZTsKCQl9CgoJCS8vIFNob3J0aGFuZAoJCXZhciBrZXlDb2RlID0gZXZlbnQua2V5Q29kZTsKCgkJLy8gUmVtZW1iZXIgaWYgYXV0by1zbGlkaW5nIHdhcyBwYXVzZWQgc28gd2UgY2FuIHRvZ2dsZSBpdAoJCXZhciBhdXRvU2xpZGVXYXNQYXVzZWQgPSBhdXRvU2xpZGVQYXVzZWQ7CgoJCW9uVXNlcklucHV0KCBldmVudCApOwoKCQkvLyBJcyB0aGVyZSBhIGZvY3VzZWQgZWxlbWVudCB0aGF0IGNvdWxkIGJlIHVzaW5nIHRoZSBrZXlib2FyZD8KCQl2YXIgYWN0aXZlRWxlbWVudElzQ0UgPSBkb2N1bWVudC5hY3RpdmVFbGVtZW50ICYmIGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQuY29udGVudEVkaXRhYmxlICE9PSAnaW5oZXJpdCc7CgkJdmFyIGFjdGl2ZUVsZW1lbnRJc0lucHV0ID0gZG9jdW1lbnQuYWN0aXZlRWxlbWVudCAmJiBkb2N1bWVudC5hY3RpdmVFbGVtZW50LnRhZ05hbWUgJiYgL2lucHV0fHRleHRhcmVhL2kudGVzdCggZG9jdW1lbnQuYWN0aXZlRWxlbWVudC50YWdOYW1lICk7CgkJdmFyIGFjdGl2ZUVsZW1lbnRJc05vdGVzID0gZG9jdW1lbnQuYWN0aXZlRWxlbWVudCAmJiBkb2N1bWVudC5hY3RpdmVFbGVtZW50LmNsYXNzTmFtZSAmJiAvc3BlYWtlci1ub3Rlcy9pLnRlc3QoIGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQuY2xhc3NOYW1lKTsKCgkJLy8gV2hpdGVsaXN0IHNwZWNpZmljIG1vZGlmaWVkICsga2V5Y29kZSBjb21iaW5hdGlvbnMKCQl2YXIgcHJldlNsaWRlU2hvcnRjdXQgPSBldmVudC5zaGlmdEtleSAmJiBldmVudC5rZXlDb2RlID09PSAzMjsKCQl2YXIgZmlyc3RTbGlkZVNob3J0Y3V0ID0gZXZlbnQuc2hpZnRLZXkgJiYga2V5Q29kZSA9PT0gMzc7CgkJdmFyIGxhc3RTbGlkZVNob3J0Y3V0ID0gZXZlbnQuc2hpZnRLZXkgJiYga2V5Q29kZSA9PT0gMzk7CgoJCS8vIFByZXZlbnQgYWxsIG90aGVyIGV2ZW50cyB3aGVuIGEgbW9kaWZpZXIgaXMgcHJlc3NlZAoJCXZhciB1bnVzZWRNb2RpZmllciA9IAkhcHJldlNsaWRlU2hvcnRjdXQgJiYgIWZpcnN0U2xpZGVTaG9ydGN1dCAmJiAhbGFzdFNsaWRlU2hvcnRjdXQgJiYKCQkJCQkJCQkoIGV2ZW50LnNoaWZ0S2V5IHx8IGV2ZW50LmFsdEtleSB8fCBldmVudC5jdHJsS2V5IHx8IGV2ZW50Lm1ldGFLZXkgKTsKCgkJLy8gRGlzcmVnYXJkIHRoZSBldmVudCBpZiB0aGVyZSdzIGEgZm9jdXNlZCBlbGVtZW50IG9yIGEKCQkvLyBrZXlib2FyZCBtb2RpZmllciBrZXkgaXMgcHJlc2VudAoJCWlmKCBhY3RpdmVFbGVtZW50SXNDRSB8fCBhY3RpdmVFbGVtZW50SXNJbnB1dCB8fCBhY3RpdmVFbGVtZW50SXNOb3RlcyB8fCB1bnVzZWRNb2RpZmllciApIHJldHVybjsKCgkJLy8gV2hpbGUgcGF1c2VkIG9ubHkgYWxsb3cgcmVzdW1lIGtleWJvYXJkIGV2ZW50czsgJ2InLCAndicsICcuJwoJCXZhciByZXN1bWVLZXlDb2RlcyA9IFs2Niw4NiwxOTAsMTkxXTsKCQl2YXIga2V5OwoKCQkvLyBDdXN0b20ga2V5IGJpbmRpbmdzIGZvciB0b2dnbGVQYXVzZSBzaG91bGQgYmUgYWJsZSB0byByZXN1bWUKCQlpZiggdHlwZW9mIGNvbmZpZy5rZXlib2FyZCA9PT0gJ29iamVjdCcgKSB7CgkJCWZvcigga2V5IGluIGNvbmZpZy5rZXlib2FyZCApIHsKCQkJCWlmKCBjb25maWcua2V5Ym9hcmRba2V5XSA9PT0gJ3RvZ2dsZVBhdXNlJyApIHsKCQkJCQlyZXN1bWVLZXlDb2Rlcy5wdXNoKCBwYXJzZUludCgga2V5LCAxMCApICk7CgkJCQl9CgkJCX0KCQl9CgoJCWlmKCBpc1BhdXNlZCgpICYmIHJlc3VtZUtleUNvZGVzLmluZGV4T2YoIGtleUNvZGUgKSA9PT0gLTEgKSB7CgkJCXJldHVybiBmYWxzZTsKCQl9CgoJCS8vIFVzZSBsaW5lYXIgbmF2aWdhdGlvbiBpZiB3ZSdyZSBjb25maWd1cmVkIHRvIE9SIGlmCgkJLy8gdGhlIHByZXNlbnRhdGlvbiBpcyBvbmUtZGltZW5zaW9uYWwKCQl2YXIgdXNlTGluZWFyTW9kZSA9IGNvbmZpZy5uYXZpZ2F0aW9uTW9kZSA9PT0gJ2xpbmVhcicgfHwgIWhhc0hvcml6b250YWxTbGlkZXMoKSB8fCAhaGFzVmVydGljYWxTbGlkZXMoKTsKCgkJdmFyIHRyaWdnZXJlZCA9IGZhbHNlOwoKCQkvLyAxLiBVc2VyIGRlZmluZWQga2V5IGJpbmRpbmdzCgkJaWYoIHR5cGVvZiBjb25maWcua2V5Ym9hcmQgPT09ICdvYmplY3QnICkgewoKCQkJZm9yKCBrZXkgaW4gY29uZmlnLmtleWJvYXJkICkgewoKCQkJCS8vIENoZWNrIGlmIHRoaXMgYmluZGluZyBtYXRjaGVzIHRoZSBwcmVzc2VkIGtleQoJCQkJaWYoIHBhcnNlSW50KCBrZXksIDEwICkgPT09IGtleUNvZGUgKSB7CgoJCQkJCXZhciB2YWx1ZSA9IGNvbmZpZy5rZXlib2FyZFsga2V5IF07CgoJCQkJCS8vIENhbGxiYWNrIGZ1bmN0aW9uCgkJCQkJaWYoIHR5cGVvZiB2YWx1ZSA9PT0gJ2Z1bmN0aW9uJyApIHsKCQkJCQkJdmFsdWUuYXBwbHkoIG51bGwsIFsgZXZlbnQgXSApOwoJCQkJCX0KCQkJCQkvLyBTdHJpbmcgc2hvcnRjdXRzIHRvIHJldmVhbC5qcyBBUEkKCQkJCQllbHNlIGlmKCB0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnICYmIHR5cGVvZiBSZXZlYWxbIHZhbHVlIF0gPT09ICdmdW5jdGlvbicgKSB7CgkJCQkJCVJldmVhbFsgdmFsdWUgXS5jYWxsKCk7CgkJCQkJfQoKCQkJCQl0cmlnZ2VyZWQgPSB0cnVlOwoKCQkJCX0KCgkJCX0KCgkJfQoKCQkvLyAyLiBSZWdpc3RlcmVkIGN1c3RvbSBrZXkgYmluZGluZ3MKCQlpZiggdHJpZ2dlcmVkID09PSBmYWxzZSApIHsKCgkJCWZvcigga2V5IGluIHJlZ2lzdGVyZWRLZXlCaW5kaW5ncyApIHsKCgkJCQkvLyBDaGVjayBpZiB0aGlzIGJpbmRpbmcgbWF0Y2hlcyB0aGUgcHJlc3NlZCBrZXkKCQkJCWlmKCBwYXJzZUludCgga2V5LCAxMCApID09PSBrZXlDb2RlICkgewoKCQkJCQl2YXIgYWN0aW9uID0gcmVnaXN0ZXJlZEtleUJpbmRpbmdzWyBrZXkgXS5jYWxsYmFjazsKCgkJCQkJLy8gQ2FsbGJhY2sgZnVuY3Rpb24KCQkJCQlpZiggdHlwZW9mIGFjdGlvbiA9PT0gJ2Z1bmN0aW9uJyApIHsKCQkJCQkJYWN0aW9uLmFwcGx5KCBudWxsLCBbIGV2ZW50IF0gKTsKCQkJCQl9CgkJCQkJLy8gU3RyaW5nIHNob3J0Y3V0cyB0byByZXZlYWwuanMgQVBJCgkJCQkJZWxzZSBpZiggdHlwZW9mIGFjdGlvbiA9PT0gJ3N0cmluZycgJiYgdHlwZW9mIFJldmVhbFsgYWN0aW9uIF0gPT09ICdmdW5jdGlvbicgKSB7CgkJCQkJCVJldmVhbFsgYWN0aW9uIF0uY2FsbCgpOwoJCQkJCX0KCgkJCQkJdHJpZ2dlcmVkID0gdHJ1ZTsKCQkJCX0KCQkJfQoJCX0KCgkJLy8gMy4gU3lzdGVtIGRlZmluZWQga2V5IGJpbmRpbmdzCgkJaWYoIHRyaWdnZXJlZCA9PT0gZmFsc2UgKSB7CgoJCQkvLyBBc3N1bWUgdHJ1ZSBhbmQgdHJ5IHRvIHByb3ZlIGZhbHNlCgkJCXRyaWdnZXJlZCA9IHRydWU7CgoJCQkvLyBQLCBQQUdFIFVQCgkJCWlmKCBrZXlDb2RlID09PSA4MCB8fCBrZXlDb2RlID09PSAzMyApIHsKCQkJCW5hdmlnYXRlUHJldigpOwoJCQl9CgkJCS8vIE4sIFBBR0UgRE9XTgoJCQllbHNlIGlmKCBrZXlDb2RlID09PSA3OCB8fCBrZXlDb2RlID09PSAzNCApIHsKCQkJCW5hdmlnYXRlTmV4dCgpOwoJCQl9CgkJCS8vIEgsIExFRlQKCQkJZWxzZSBpZigga2V5Q29kZSA9PT0gNzIgfHwga2V5Q29kZSA9PT0gMzcgKSB7CgkJCQlpZiggZmlyc3RTbGlkZVNob3J0Y3V0ICkgewoJCQkJCXNsaWRlKCAwICk7CgkJCQl9CgkJCQllbHNlIGlmKCAhaXNPdmVydmlldygpICYmIHVzZUxpbmVhck1vZGUgKSB7CgkJCQkJbmF2aWdhdGVQcmV2KCk7CgkJCQl9CgkJCQllbHNlIHsKCQkJCQluYXZpZ2F0ZUxlZnQoKTsKCQkJCX0KCQkJfQoJCQkvLyBMLCBSSUdIVAoJCQllbHNlIGlmKCBrZXlDb2RlID09PSA3NiB8fCBrZXlDb2RlID09PSAzOSApIHsKCQkJCWlmKCBsYXN0U2xpZGVTaG9ydGN1dCApIHsKCQkJCQlzbGlkZSggTnVtYmVyLk1BWF9WQUxVRSApOwoJCQkJfQoJCQkJZWxzZSBpZiggIWlzT3ZlcnZpZXcoKSAmJiB1c2VMaW5lYXJNb2RlICkgewoJCQkJCW5hdmlnYXRlTmV4dCgpOwoJCQkJfQoJCQkJZWxzZSB7CgkJCQkJbmF2aWdhdGVSaWdodCgpOwoJCQkJfQoJCQl9CgkJCS8vIEssIFVQCgkJCWVsc2UgaWYoIGtleUNvZGUgPT09IDc1IHx8IGtleUNvZGUgPT09IDM4ICkgewoJCQkJaWYoICFpc092ZXJ2aWV3KCkgJiYgdXNlTGluZWFyTW9kZSApIHsKCQkJCQluYXZpZ2F0ZVByZXYoKTsKCQkJCX0KCQkJCWVsc2UgewoJCQkJCW5hdmlnYXRlVXAoKTsKCQkJCX0KCQkJfQoJCQkvLyBKLCBET1dOCgkJCWVsc2UgaWYoIGtleUNvZGUgPT09IDc0IHx8IGtleUNvZGUgPT09IDQwICkgewoJCQkJaWYoICFpc092ZXJ2aWV3KCkgJiYgdXNlTGluZWFyTW9kZSApIHsKCQkJCQluYXZpZ2F0ZU5leHQoKTsKCQkJCX0KCQkJCWVsc2UgewoJCQkJCW5hdmlnYXRlRG93bigpOwoJCQkJfQoJCQl9CgkJCS8vIEhPTUUKCQkJZWxzZSBpZigga2V5Q29kZSA9PT0gMzYgKSB7CgkJCQlzbGlkZSggMCApOwoJCQl9CgkJCS8vIEVORAoJCQllbHNlIGlmKCBrZXlDb2RlID09PSAzNSApIHsKCQkJCXNsaWRlKCBOdW1iZXIuTUFYX1ZBTFVFICk7CgkJCX0KCQkJLy8gU1BBQ0UKCQkJZWxzZSBpZigga2V5Q29kZSA9PT0gMzIgKSB7CgkJCQlpZiggaXNPdmVydmlldygpICkgewoJCQkJCWRlYWN0aXZhdGVPdmVydmlldygpOwoJCQkJfQoJCQkJaWYoIGV2ZW50LnNoaWZ0S2V5ICkgewoJCQkJCW5hdmlnYXRlUHJldigpOwoJCQkJfQoJCQkJZWxzZSB7CgkJCQkJbmF2aWdhdGVOZXh0KCk7CgkJCQl9CgkJCX0KCQkJLy8gVFdPLVNQT1QsIFNFTUlDT0xPTiwgQiwgViwgUEVSSU9ELCBMT0dJVEVDSCBQUkVTRU5URVIgVE9PTFMgIkJMQUNLIFNDUkVFTiIgQlVUVE9OCgkJCWVsc2UgaWYoIGtleUNvZGUgPT09IDU4IHx8IGtleUNvZGUgPT09IDU5IHx8IGtleUNvZGUgPT09IDY2IHx8IGtleUNvZGUgPT09IDg2IHx8IGtleUNvZGUgPT09IDE5MCB8fCBrZXlDb2RlID09PSAxOTEgKSB7CgkJCQl0b2dnbGVQYXVzZSgpOwoJCQl9CgkJCS8vIEYKCQkJZWxzZSBpZigga2V5Q29kZSA9PT0gNzAgKSB7CgkJCQllbnRlckZ1bGxzY3JlZW4oKTsKCQkJfQoJCQkvLyBBCgkJCWVsc2UgaWYoIGtleUNvZGUgPT09IDY1ICkgewoJCQkJaWYgKCBjb25maWcuYXV0b1NsaWRlU3RvcHBhYmxlICkgewoJCQkJCXRvZ2dsZUF1dG9TbGlkZSggYXV0b1NsaWRlV2FzUGF1c2VkICk7CgkJCQl9CgkJCX0KCQkJZWxzZSB7CgkJCQl0cmlnZ2VyZWQgPSBmYWxzZTsKCQkJfQoKCQl9CgoJCS8vIElmIHRoZSBpbnB1dCByZXN1bHRlZCBpbiBhIHRyaWdnZXJlZCBhY3Rpb24gd2Ugc2hvdWxkIHByZXZlbnQKCQkvLyB0aGUgYnJvd3NlcnMgZGVmYXVsdCBiZWhhdmlvcgoJCWlmKCB0cmlnZ2VyZWQgKSB7CgkJCWV2ZW50LnByZXZlbnREZWZhdWx0ICYmIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7CgkJfQoJCS8vIEVTQyBvciBPIGtleQoJCWVsc2UgaWYgKCAoIGtleUNvZGUgPT09IDI3IHx8IGtleUNvZGUgPT09IDc5ICkgJiYgZmVhdHVyZXMudHJhbnNmb3JtczNkICkgewoJCQlpZiggZG9tLm92ZXJsYXkgKSB7CgkJCQljbG9zZU92ZXJsYXkoKTsKCQkJfQoJCQllbHNlIHsKCQkJCXRvZ2dsZU92ZXJ2aWV3KCk7CgkJCX0KCgkJCWV2ZW50LnByZXZlbnREZWZhdWx0ICYmIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7CgkJfQoKCQkvLyBJZiBhdXRvLXNsaWRpbmcgaXMgZW5hYmxlZCB3ZSBuZWVkIHRvIGN1ZSB1cAoJCS8vIGFub3RoZXIgdGltZW91dAoJCWN1ZUF1dG9TbGlkZSgpOwoKCX0KCgkvKioKCSAqIEhhbmRsZXIgZm9yIHRoZSAndG91Y2hzdGFydCcgZXZlbnQsIGVuYWJsZXMgc3VwcG9ydCBmb3IKCSAqIHN3aXBlIGFuZCBwaW5jaCBnZXN0dXJlcy4KCSAqCgkgKiBAcGFyYW0ge29iamVjdH0gZXZlbnQKCSAqLwoJZnVuY3Rpb24gb25Ub3VjaFN0YXJ0KCBldmVudCApIHsKCgkJaWYoIGlzU3dpcGVQcmV2ZW50ZWQoIGV2ZW50LnRhcmdldCApICkgcmV0dXJuIHRydWU7CgoJCXRvdWNoLnN0YXJ0WCA9IGV2ZW50LnRvdWNoZXNbMF0uY2xpZW50WDsKCQl0b3VjaC5zdGFydFkgPSBldmVudC50b3VjaGVzWzBdLmNsaWVudFk7CgkJdG91Y2guc3RhcnRDb3VudCA9IGV2ZW50LnRvdWNoZXMubGVuZ3RoOwoKCX0KCgkvKioKCSAqIEhhbmRsZXIgZm9yIHRoZSAndG91Y2htb3ZlJyBldmVudC4KCSAqCgkgKiBAcGFyYW0ge29iamVjdH0gZXZlbnQKCSAqLwoJZnVuY3Rpb24gb25Ub3VjaE1vdmUoIGV2ZW50ICkgewoKCQlpZiggaXNTd2lwZVByZXZlbnRlZCggZXZlbnQudGFyZ2V0ICkgKSByZXR1cm4gdHJ1ZTsKCgkJLy8gRWFjaCB0b3VjaCBzaG91bGQgb25seSB0cmlnZ2VyIG9uZSBhY3Rpb24KCQlpZiggIXRvdWNoLmNhcHR1cmVkICkgewoJCQlvblVzZXJJbnB1dCggZXZlbnQgKTsKCgkJCXZhciBjdXJyZW50WCA9IGV2ZW50LnRvdWNoZXNbMF0uY2xpZW50WDsKCQkJdmFyIGN1cnJlbnRZID0gZXZlbnQudG91Y2hlc1swXS5jbGllbnRZOwoKCQkJLy8gVGhlcmUgd2FzIG9ubHkgb25lIHRvdWNoIHBvaW50LCBsb29rIGZvciBhIHN3aXBlCgkJCWlmKCBldmVudC50b3VjaGVzLmxlbmd0aCA9PT0gMSAmJiB0b3VjaC5zdGFydENvdW50ICE9PSAyICkgewoKCQkJCXZhciBkZWx0YVggPSBjdXJyZW50WCAtIHRvdWNoLnN0YXJ0WCwKCQkJCQlkZWx0YVkgPSBjdXJyZW50WSAtIHRvdWNoLnN0YXJ0WTsKCgkJCQlpZiggZGVsdGFYID4gdG91Y2gudGhyZXNob2xkICYmIE1hdGguYWJzKCBkZWx0YVggKSA+IE1hdGguYWJzKCBkZWx0YVkgKSApIHsKCQkJCQl0b3VjaC5jYXB0dXJlZCA9IHRydWU7CgkJCQkJbmF2aWdhdGVMZWZ0KCk7CgkJCQl9CgkJCQllbHNlIGlmKCBkZWx0YVggPCAtdG91Y2gudGhyZXNob2xkICYmIE1hdGguYWJzKCBkZWx0YVggKSA+IE1hdGguYWJzKCBkZWx0YVkgKSApIHsKCQkJCQl0b3VjaC5jYXB0dXJlZCA9IHRydWU7CgkJCQkJbmF2aWdhdGVSaWdodCgpOwoJCQkJfQoJCQkJZWxzZSBpZiggZGVsdGFZID4gdG91Y2gudGhyZXNob2xkICkgewoJCQkJCXRvdWNoLmNhcHR1cmVkID0gdHJ1ZTsKCQkJCQluYXZpZ2F0ZVVwKCk7CgkJCQl9CgkJCQllbHNlIGlmKCBkZWx0YVkgPCAtdG91Y2gudGhyZXNob2xkICkgewoJCQkJCXRvdWNoLmNhcHR1cmVkID0gdHJ1ZTsKCQkJCQluYXZpZ2F0ZURvd24oKTsKCQkJCX0KCgkJCQkvLyBJZiB3ZSdyZSBlbWJlZGRlZCwgb25seSBibG9jayB0b3VjaCBldmVudHMgaWYgdGhleSBoYXZlCgkJCQkvLyB0cmlnZ2VyZWQgYW4gYWN0aW9uCgkJCQlpZiggY29uZmlnLmVtYmVkZGVkICkgewoJCQkJCWlmKCB0b3VjaC5jYXB0dXJlZCB8fCBpc1ZlcnRpY2FsU2xpZGUoIGN1cnJlbnRTbGlkZSApICkgewoJCQkJCQlldmVudC5wcmV2ZW50RGVmYXVsdCgpOwoJCQkJCX0KCQkJCX0KCQkJCS8vIE5vdCBlbWJlZGRlZD8gQmxvY2sgdGhlbSBhbGwgdG8gYXZvaWQgbmVlZGxlc3MgdG9zc2luZwoJCQkJLy8gYXJvdW5kIG9mIHRoZSB2aWV3cG9ydCBpbiBpT1MKCQkJCWVsc2UgewoJCQkJCWV2ZW50LnByZXZlbnREZWZhdWx0KCk7CgkJCQl9CgoJCQl9CgkJfQoJCS8vIFRoZXJlJ3MgYSBidWcgd2l0aCBzd2lwaW5nIG9uIHNvbWUgQW5kcm9pZCBkZXZpY2VzIHVubGVzcwoJCS8vIHRoZSBkZWZhdWx0IGFjdGlvbiBpcyBhbHdheXMgcHJldmVudGVkCgkJZWxzZSBpZiggVUEubWF0Y2goIC9hbmRyb2lkL2dpICkgKSB7CgkJCWV2ZW50LnByZXZlbnREZWZhdWx0KCk7CgkJfQoKCX0KCgkvKioKCSAqIEhhbmRsZXIgZm9yIHRoZSAndG91Y2hlbmQnIGV2ZW50LgoJICoKCSAqIEBwYXJhbSB7b2JqZWN0fSBldmVudAoJICovCglmdW5jdGlvbiBvblRvdWNoRW5kKCBldmVudCApIHsKCgkJdG91Y2guY2FwdHVyZWQgPSBmYWxzZTsKCgl9CgoJLyoqCgkgKiBDb252ZXJ0IHBvaW50ZXIgZG93biB0byB0b3VjaCBzdGFydC4KCSAqCgkgKiBAcGFyYW0ge29iamVjdH0gZXZlbnQKCSAqLwoJZnVuY3Rpb24gb25Qb2ludGVyRG93biggZXZlbnQgKSB7CgoJCWlmKCBldmVudC5wb2ludGVyVHlwZSA9PT0gZXZlbnQuTVNQT0lOVEVSX1RZUEVfVE9VQ0ggfHwgZXZlbnQucG9pbnRlclR5cGUgPT09ICJ0b3VjaCIgKSB7CgkJCWV2ZW50LnRvdWNoZXMgPSBbeyBjbGllbnRYOiBldmVudC5jbGllbnRYLCBjbGllbnRZOiBldmVudC5jbGllbnRZIH1dOwoJCQlvblRvdWNoU3RhcnQoIGV2ZW50ICk7CgkJfQoKCX0KCgkvKioKCSAqIENvbnZlcnQgcG9pbnRlciBtb3ZlIHRvIHRvdWNoIG1vdmUuCgkgKgoJICogQHBhcmFtIHtvYmplY3R9IGV2ZW50CgkgKi8KCWZ1bmN0aW9uIG9uUG9pbnRlck1vdmUoIGV2ZW50ICkgewoKCQlpZiggZXZlbnQucG9pbnRlclR5cGUgPT09IGV2ZW50Lk1TUE9JTlRFUl9UWVBFX1RPVUNIIHx8IGV2ZW50LnBvaW50ZXJUeXBlID09PSAidG91Y2giICkgIHsKCQkJZXZlbnQudG91Y2hlcyA9IFt7IGNsaWVudFg6IGV2ZW50LmNsaWVudFgsIGNsaWVudFk6IGV2ZW50LmNsaWVudFkgfV07CgkJCW9uVG91Y2hNb3ZlKCBldmVudCApOwoJCX0KCgl9CgoJLyoqCgkgKiBDb252ZXJ0IHBvaW50ZXIgdXAgdG8gdG91Y2ggZW5kLgoJICoKCSAqIEBwYXJhbSB7b2JqZWN0fSBldmVudAoJICovCglmdW5jdGlvbiBvblBvaW50ZXJVcCggZXZlbnQgKSB7CgoJCWlmKCBldmVudC5wb2ludGVyVHlwZSA9PT0gZXZlbnQuTVNQT0lOVEVSX1RZUEVfVE9VQ0ggfHwgZXZlbnQucG9pbnRlclR5cGUgPT09ICJ0b3VjaCIgKSAgewoJCQlldmVudC50b3VjaGVzID0gW3sgY2xpZW50WDogZXZlbnQuY2xpZW50WCwgY2xpZW50WTogZXZlbnQuY2xpZW50WSB9XTsKCQkJb25Ub3VjaEVuZCggZXZlbnQgKTsKCQl9CgoJfQoKCS8qKgoJICogSGFuZGxlcyBtb3VzZSB3aGVlbCBzY3JvbGxpbmcsIHRocm90dGxlZCB0byBhdm9pZCBza2lwcGluZwoJICogbXVsdGlwbGUgc2xpZGVzLgoJICoKCSAqIEBwYXJhbSB7b2JqZWN0fSBldmVudAoJICovCglmdW5jdGlvbiBvbkRvY3VtZW50TW91c2VTY3JvbGwoIGV2ZW50ICkgewoKCQlpZiggRGF0ZS5ub3coKSAtIGxhc3RNb3VzZVdoZWVsU3RlcCA+IDYwMCApIHsKCgkJCWxhc3RNb3VzZVdoZWVsU3RlcCA9IERhdGUubm93KCk7CgoJCQl2YXIgZGVsdGEgPSBldmVudC5kZXRhaWwgfHwgLWV2ZW50LndoZWVsRGVsdGE7CgkJCWlmKCBkZWx0YSA+IDAgKSB7CgkJCQluYXZpZ2F0ZU5leHQoKTsKCQkJfQoJCQllbHNlIGlmKCBkZWx0YSA8IDAgKSB7CgkJCQluYXZpZ2F0ZVByZXYoKTsKCQkJfQoKCQl9CgoJfQoKCS8qKgoJICogQ2xpY2tpbmcgb24gdGhlIHByb2dyZXNzIGJhciByZXN1bHRzIGluIGEgbmF2aWdhdGlvbiB0byB0aGUKCSAqIGNsb3Nlc3QgYXBwcm94aW1hdGUgaG9yaXpvbnRhbCBzbGlkZSB1c2luZyB0aGlzIGVxdWF0aW9uOgoJICoKCSAqICggY2xpY2tYIC8gcHJlc2VudGF0aW9uV2lkdGggKSAqIG51bWJlck9mU2xpZGVzCgkgKgoJICogQHBhcmFtIHtvYmplY3R9IGV2ZW50CgkgKi8KCWZ1bmN0aW9uIG9uUHJvZ3Jlc3NDbGlja2VkKCBldmVudCApIHsKCgkJb25Vc2VySW5wdXQoIGV2ZW50ICk7CgoJCWV2ZW50LnByZXZlbnREZWZhdWx0KCk7CgoJCXZhciBzbGlkZXNUb3RhbCA9IHRvQXJyYXkoIGRvbS53cmFwcGVyLnF1ZXJ5U2VsZWN0b3JBbGwoIEhPUklaT05UQUxfU0xJREVTX1NFTEVDVE9SICkgKS5sZW5ndGg7CgkJdmFyIHNsaWRlSW5kZXggPSBNYXRoLmZsb29yKCAoIGV2ZW50LmNsaWVudFggLyBkb20ud3JhcHBlci5vZmZzZXRXaWR0aCApICogc2xpZGVzVG90YWwgKTsKCgkJaWYoIGNvbmZpZy5ydGwgKSB7CgkJCXNsaWRlSW5kZXggPSBzbGlkZXNUb3RhbCAtIHNsaWRlSW5kZXg7CgkJfQoKCQlzbGlkZSggc2xpZGVJbmRleCApOwoKCX0KCgkvKioKCSAqIEV2ZW50IGhhbmRsZXIgZm9yIG5hdmlnYXRpb24gY29udHJvbCBidXR0b25zLgoJICovCglmdW5jdGlvbiBvbk5hdmlnYXRlTGVmdENsaWNrZWQoIGV2ZW50ICkgeyBldmVudC5wcmV2ZW50RGVmYXVsdCgpOyBvblVzZXJJbnB1dCgpOyBjb25maWcubmF2aWdhdGlvbk1vZGUgPT09ICdsaW5lYXInID8gbmF2aWdhdGVQcmV2KCkgOiBuYXZpZ2F0ZUxlZnQoKTsgfQoJZnVuY3Rpb24gb25OYXZpZ2F0ZVJpZ2h0Q2xpY2tlZCggZXZlbnQgKSB7IGV2ZW50LnByZXZlbnREZWZhdWx0KCk7IG9uVXNlcklucHV0KCk7IGNvbmZpZy5uYXZpZ2F0aW9uTW9kZSA9PT0gJ2xpbmVhcicgPyBuYXZpZ2F0ZU5leHQoKSA6IG5hdmlnYXRlUmlnaHQoKTsgfQoJZnVuY3Rpb24gb25OYXZpZ2F0ZVVwQ2xpY2tlZCggZXZlbnQgKSB7IGV2ZW50LnByZXZlbnREZWZhdWx0KCk7IG9uVXNlcklucHV0KCk7IG5hdmlnYXRlVXAoKTsgfQoJZnVuY3Rpb24gb25OYXZpZ2F0ZURvd25DbGlja2VkKCBldmVudCApIHsgZXZlbnQucHJldmVudERlZmF1bHQoKTsgb25Vc2VySW5wdXQoKTsgbmF2aWdhdGVEb3duKCk7IH0KCWZ1bmN0aW9uIG9uTmF2aWdhdGVQcmV2Q2xpY2tlZCggZXZlbnQgKSB7IGV2ZW50LnByZXZlbnREZWZhdWx0KCk7IG9uVXNlcklucHV0KCk7IG5hdmlnYXRlUHJldigpOyB9CglmdW5jdGlvbiBvbk5hdmlnYXRlTmV4dENsaWNrZWQoIGV2ZW50ICkgeyBldmVudC5wcmV2ZW50RGVmYXVsdCgpOyBvblVzZXJJbnB1dCgpOyBuYXZpZ2F0ZU5leHQoKTsgfQoKCS8qKgoJICogSGFuZGxlciBmb3IgdGhlIHdpbmRvdyBsZXZlbCAnaGFzaGNoYW5nZScgZXZlbnQuCgkgKgoJICogQHBhcmFtIHtvYmplY3R9IFtldmVudF0KCSAqLwoJZnVuY3Rpb24gb25XaW5kb3dIYXNoQ2hhbmdlKCBldmVudCApIHsKCgkJcmVhZFVSTCgpOwoKCX0KCgkvKioKCSAqIEhhbmRsZXIgZm9yIHRoZSB3aW5kb3cgbGV2ZWwgJ3Jlc2l6ZScgZXZlbnQuCgkgKgoJICogQHBhcmFtIHtvYmplY3R9IFtldmVudF0KCSAqLwoJZnVuY3Rpb24gb25XaW5kb3dSZXNpemUoIGV2ZW50ICkgewoKCQlsYXlvdXQoKTsKCgl9CgoJLyoqCgkgKiBIYW5kbGUgZm9yIHRoZSB3aW5kb3cgbGV2ZWwgJ3Zpc2liaWxpdHljaGFuZ2UnIGV2ZW50LgoJICoKCSAqIEBwYXJhbSB7b2JqZWN0fSBbZXZlbnRdCgkgKi8KCWZ1bmN0aW9uIG9uUGFnZVZpc2liaWxpdHlDaGFuZ2UoIGV2ZW50ICkgewoKCQl2YXIgaXNIaWRkZW4gPSAgZG9jdW1lbnQud2Via2l0SGlkZGVuIHx8CgkJCQkJCWRvY3VtZW50Lm1zSGlkZGVuIHx8CgkJCQkJCWRvY3VtZW50LmhpZGRlbjsKCgkJLy8gSWYsIGFmdGVyIGNsaWNraW5nIGEgbGluayBvciBzaW1pbGFyIGFuZCB3ZSdyZSBjb21pbmcgYmFjaywKCQkvLyBmb2N1cyB0aGUgZG9jdW1lbnQuYm9keSB0byBlbnN1cmUgd2UgY2FuIHVzZSBrZXlib2FyZCBzaG9ydGN1dHMKCQlpZiggaXNIaWRkZW4gPT09IGZhbHNlICYmIGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgIT09IGRvY3VtZW50LmJvZHkgKSB7CgkJCS8vIE5vdCBhbGwgZWxlbWVudHMgc3VwcG9ydCAuYmx1cigpIC0gU1ZHcyBhbW9uZyB0aGVtLgoJCQlpZiggdHlwZW9mIGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQuYmx1ciA9PT0gJ2Z1bmN0aW9uJyApIHsKCQkJCWRvY3VtZW50LmFjdGl2ZUVsZW1lbnQuYmx1cigpOwoJCQl9CgkJCWRvY3VtZW50LmJvZHkuZm9jdXMoKTsKCQl9CgoJfQoKCS8qKgoJICogSW52b2tlZCB3aGVuIGEgc2xpZGUgaXMgYW5kIHdlJ3JlIGluIHRoZSBvdmVydmlldy4KCSAqCgkgKiBAcGFyYW0ge29iamVjdH0gZXZlbnQKCSAqLwoJZnVuY3Rpb24gb25PdmVydmlld1NsaWRlQ2xpY2tlZCggZXZlbnQgKSB7CgoJCS8vIFRPRE8gVGhlcmUncyBhIGJ1ZyBoZXJlIHdoZXJlIHRoZSBldmVudCBsaXN0ZW5lcnMgYXJlIG5vdAoJCS8vIHJlbW92ZWQgYWZ0ZXIgZGVhY3RpdmF0aW5nIHRoZSBvdmVydmlldy4KCQlpZiggZXZlbnRzQXJlQm91bmQgJiYgaXNPdmVydmlldygpICkgewoJCQlldmVudC5wcmV2ZW50RGVmYXVsdCgpOwoKCQkJdmFyIGVsZW1lbnQgPSBldmVudC50YXJnZXQ7CgoJCQl3aGlsZSggZWxlbWVudCAmJiAhZWxlbWVudC5ub2RlTmFtZS5tYXRjaCggL3NlY3Rpb24vZ2kgKSApIHsKCQkJCWVsZW1lbnQgPSBlbGVtZW50LnBhcmVudE5vZGU7CgkJCX0KCgkJCWlmKCBlbGVtZW50ICYmICFlbGVtZW50LmNsYXNzTGlzdC5jb250YWlucyggJ2Rpc2FibGVkJyApICkgewoKCQkJCWRlYWN0aXZhdGVPdmVydmlldygpOwoKCQkJCWlmKCBlbGVtZW50Lm5vZGVOYW1lLm1hdGNoKCAvc2VjdGlvbi9naSApICkgewoJCQkJCXZhciBoID0gcGFyc2VJbnQoIGVsZW1lbnQuZ2V0QXR0cmlidXRlKCAnZGF0YS1pbmRleC1oJyApLCAxMCApLAoJCQkJCQl2ID0gcGFyc2VJbnQoIGVsZW1lbnQuZ2V0QXR0cmlidXRlKCAnZGF0YS1pbmRleC12JyApLCAxMCApOwoKCQkJCQlzbGlkZSggaCwgdiApOwoJCQkJfQoKCQkJfQoJCX0KCgl9CgoJLyoqCgkgKiBIYW5kbGVzIGNsaWNrcyBvbiBsaW5rcyB0aGF0IGFyZSBzZXQgdG8gcHJldmlldyBpbiB0aGUKCSAqIGlmcmFtZSBvdmVybGF5LgoJICoKCSAqIEBwYXJhbSB7b2JqZWN0fSBldmVudAoJICovCglmdW5jdGlvbiBvblByZXZpZXdMaW5rQ2xpY2tlZCggZXZlbnQgKSB7CgoJCWlmKCBldmVudC5jdXJyZW50VGFyZ2V0ICYmIGV2ZW50LmN1cnJlbnRUYXJnZXQuaGFzQXR0cmlidXRlKCAnaHJlZicgKSApIHsKCQkJdmFyIHVybCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuZ2V0QXR0cmlidXRlKCAnaHJlZicgKTsKCQkJaWYoIHVybCApIHsKCQkJCXNob3dQcmV2aWV3KCB1cmwgKTsKCQkJCWV2ZW50LnByZXZlbnREZWZhdWx0KCk7CgkJCX0KCQl9CgoJfQoKCS8qKgoJICogSGFuZGxlcyBjbGljayBvbiB0aGUgYXV0by1zbGlkaW5nIGNvbnRyb2xzIGVsZW1lbnQuCgkgKgoJICogQHBhcmFtIHtvYmplY3R9IFtldmVudF0KCSAqLwoJZnVuY3Rpb24gb25BdXRvU2xpZGVQbGF5ZXJDbGljayggZXZlbnQgKSB7CgoJCS8vIFJlcGxheQoJCWlmKCBSZXZlYWwuaXNMYXN0U2xpZGUoKSAmJiBjb25maWcubG9vcCA9PT0gZmFsc2UgKSB7CgkJCXNsaWRlKCAwLCAwICk7CgkJCXJlc3VtZUF1dG9TbGlkZSgpOwoJCX0KCQkvLyBSZXN1bWUKCQllbHNlIGlmKCBhdXRvU2xpZGVQYXVzZWQgKSB7CgkJCXJlc3VtZUF1dG9TbGlkZSgpOwoJCX0KCQkvLyBQYXVzZQoJCWVsc2UgewoJCQlwYXVzZUF1dG9TbGlkZSgpOwoJCX0KCgl9CgoKCS8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLy8KCS8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSBQTEFZQkFDSyBDT01QT05FTlQgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLy8KCS8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLy8KCgoJLyoqCgkgKiBDb25zdHJ1Y3RvciBmb3IgdGhlIHBsYXliYWNrIGNvbXBvbmVudCwgd2hpY2ggZGlzcGxheXMKCSAqIHBsYXkvcGF1c2UvcHJvZ3Jlc3MgY29udHJvbHMuCgkgKgoJICogQHBhcmFtIHtIVE1MRWxlbWVudH0gY29udGFpbmVyIFRoZSBjb21wb25lbnQgd2lsbCBhcHBlbmQKCSAqIGl0c2VsZiB0byB0aGlzCgkgKiBAcGFyYW0ge2Z1bmN0aW9ufSBwcm9ncmVzc0NoZWNrIEEgbWV0aG9kIHdoaWNoIHdpbGwgYmUKCSAqIGNhbGxlZCBmcmVxdWVudGx5IHRvIGdldCB0aGUgY3VycmVudCBwcm9ncmVzcyBvbiBhIHJhbmdlCgkgKiBvZiAwLTEKCSAqLwoJZnVuY3Rpb24gUGxheWJhY2soIGNvbnRhaW5lciwgcHJvZ3Jlc3NDaGVjayApIHsKCgkJLy8gQ29zbWV0aWNzCgkJdGhpcy5kaWFtZXRlciA9IDEwMDsKCQl0aGlzLmRpYW1ldGVyMiA9IHRoaXMuZGlhbWV0ZXIvMjsKCQl0aGlzLnRoaWNrbmVzcyA9IDY7CgoJCS8vIEZsYWdzIGlmIHdlIGFyZSBjdXJyZW50bHkgcGxheWluZwoJCXRoaXMucGxheWluZyA9IGZhbHNlOwoKCQkvLyBDdXJyZW50IHByb2dyZXNzIG9uIGEgMC0xIHJhbmdlCgkJdGhpcy5wcm9ncmVzcyA9IDA7CgoJCS8vIFVzZWQgdG8gbG9vcCB0aGUgYW5pbWF0aW9uIHNtb290aGx5CgkJdGhpcy5wcm9ncmVzc09mZnNldCA9IDE7CgoJCXRoaXMuY29udGFpbmVyID0gY29udGFpbmVyOwoJCXRoaXMucHJvZ3Jlc3NDaGVjayA9IHByb2dyZXNzQ2hlY2s7CgoJCXRoaXMuY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggJ2NhbnZhcycgKTsKCQl0aGlzLmNhbnZhcy5jbGFzc05hbWUgPSAncGxheWJhY2snOwoJCXRoaXMuY2FudmFzLndpZHRoID0gdGhpcy5kaWFtZXRlcjsKCQl0aGlzLmNhbnZhcy5oZWlnaHQgPSB0aGlzLmRpYW1ldGVyOwoJCXRoaXMuY2FudmFzLnN0eWxlLndpZHRoID0gdGhpcy5kaWFtZXRlcjIgKyAncHgnOwoJCXRoaXMuY2FudmFzLnN0eWxlLmhlaWdodCA9IHRoaXMuZGlhbWV0ZXIyICsgJ3B4JzsKCQl0aGlzLmNvbnRleHQgPSB0aGlzLmNhbnZhcy5nZXRDb250ZXh0KCAnMmQnICk7CgoJCXRoaXMuY29udGFpbmVyLmFwcGVuZENoaWxkKCB0aGlzLmNhbnZhcyApOwoKCQl0aGlzLnJlbmRlcigpOwoKCX0KCgkvKioKCSAqIEBwYXJhbSB2YWx1ZQoJICovCglQbGF5YmFjay5wcm90b3R5cGUuc2V0UGxheWluZyA9IGZ1bmN0aW9uKCB2YWx1ZSApIHsKCgkJdmFyIHdhc1BsYXlpbmcgPSB0aGlzLnBsYXlpbmc7CgoJCXRoaXMucGxheWluZyA9IHZhbHVlOwoKCQkvLyBTdGFydCByZXBhaW50aW5nIGlmIHdlIHdlcmVuJ3QgYWxyZWFkeQoJCWlmKCAhd2FzUGxheWluZyAmJiB0aGlzLnBsYXlpbmcgKSB7CgkJCXRoaXMuYW5pbWF0ZSgpOwoJCX0KCQllbHNlIHsKCQkJdGhpcy5yZW5kZXIoKTsKCQl9CgoJfTsKCglQbGF5YmFjay5wcm90b3R5cGUuYW5pbWF0ZSA9IGZ1bmN0aW9uKCkgewoKCQl2YXIgcHJvZ3Jlc3NCZWZvcmUgPSB0aGlzLnByb2dyZXNzOwoKCQl0aGlzLnByb2dyZXNzID0gdGhpcy5wcm9ncmVzc0NoZWNrKCk7CgoJCS8vIFdoZW4gd2UgbG9vcCwgb2Zmc2V0IHRoZSBwcm9ncmVzcyBzbyB0aGF0IGl0IGVhc2VzCgkJLy8gc21vb3RobHkgcmF0aGVyIHRoYW4gaW1tZWRpYXRlbHkgcmVzZXR0aW5nCgkJaWYoIHByb2dyZXNzQmVmb3JlID4gMC44ICYmIHRoaXMucHJvZ3Jlc3MgPCAwLjIgKSB7CgkJCXRoaXMucHJvZ3Jlc3NPZmZzZXQgPSB0aGlzLnByb2dyZXNzOwoJCX0KCgkJdGhpcy5yZW5kZXIoKTsKCgkJaWYoIHRoaXMucGxheWluZyApIHsKCQkJZmVhdHVyZXMucmVxdWVzdEFuaW1hdGlvbkZyYW1lTWV0aG9kLmNhbGwoIHdpbmRvdywgdGhpcy5hbmltYXRlLmJpbmQoIHRoaXMgKSApOwoJCX0KCgl9OwoKCS8qKgoJICogUmVuZGVycyB0aGUgY3VycmVudCBwcm9ncmVzcyBhbmQgcGxheWJhY2sgc3RhdGUuCgkgKi8KCVBsYXliYWNrLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbigpIHsKCgkJdmFyIHByb2dyZXNzID0gdGhpcy5wbGF5aW5nID8gdGhpcy5wcm9ncmVzcyA6IDAsCgkJCXJhZGl1cyA9ICggdGhpcy5kaWFtZXRlcjIgKSAtIHRoaXMudGhpY2tuZXNzLAoJCQl4ID0gdGhpcy5kaWFtZXRlcjIsCgkJCXkgPSB0aGlzLmRpYW1ldGVyMiwKCQkJaWNvblNpemUgPSAyODsKCgkJLy8gRWFzZSB0b3dhcmRzIDEKCQl0aGlzLnByb2dyZXNzT2Zmc2V0ICs9ICggMSAtIHRoaXMucHJvZ3Jlc3NPZmZzZXQgKSAqIDAuMTsKCgkJdmFyIGVuZEFuZ2xlID0gKCAtIE1hdGguUEkgLyAyICkgKyAoIHByb2dyZXNzICogKCBNYXRoLlBJICogMiApICk7CgkJdmFyIHN0YXJ0QW5nbGUgPSAoIC0gTWF0aC5QSSAvIDIgKSArICggdGhpcy5wcm9ncmVzc09mZnNldCAqICggTWF0aC5QSSAqIDIgKSApOwoKCQl0aGlzLmNvbnRleHQuc2F2ZSgpOwoJCXRoaXMuY29udGV4dC5jbGVhclJlY3QoIDAsIDAsIHRoaXMuZGlhbWV0ZXIsIHRoaXMuZGlhbWV0ZXIgKTsKCgkJLy8gU29saWQgYmFja2dyb3VuZCBjb2xvcgoJCXRoaXMuY29udGV4dC5iZWdpblBhdGgoKTsKCQl0aGlzLmNvbnRleHQuYXJjKCB4LCB5LCByYWRpdXMgKyA0LCAwLCBNYXRoLlBJICogMiwgZmFsc2UgKTsKCQl0aGlzLmNvbnRleHQuZmlsbFN0eWxlID0gJ3JnYmEoIDAsIDAsIDAsIDAuNCApJzsKCQl0aGlzLmNvbnRleHQuZmlsbCgpOwoKCQkvLyBEcmF3IHByb2dyZXNzIHRyYWNrCgkJdGhpcy5jb250ZXh0LmJlZ2luUGF0aCgpOwoJCXRoaXMuY29udGV4dC5hcmMoIHgsIHksIHJhZGl1cywgMCwgTWF0aC5QSSAqIDIsIGZhbHNlICk7CgkJdGhpcy5jb250ZXh0LmxpbmVXaWR0aCA9IHRoaXMudGhpY2tuZXNzOwoJCXRoaXMuY29udGV4dC5zdHJva2VTdHlsZSA9ICdyZ2JhKCAyNTUsIDI1NSwgMjU1LCAwLjIgKSc7CgkJdGhpcy5jb250ZXh0LnN0cm9rZSgpOwoKCQlpZiggdGhpcy5wbGF5aW5nICkgewoJCQkvLyBEcmF3IHByb2dyZXNzIG9uIHRvcCBvZiB0cmFjawoJCQl0aGlzLmNvbnRleHQuYmVnaW5QYXRoKCk7CgkJCXRoaXMuY29udGV4dC5hcmMoIHgsIHksIHJhZGl1cywgc3RhcnRBbmdsZSwgZW5kQW5nbGUsIGZhbHNlICk7CgkJCXRoaXMuY29udGV4dC5saW5lV2lkdGggPSB0aGlzLnRoaWNrbmVzczsKCQkJdGhpcy5jb250ZXh0LnN0cm9rZVN0eWxlID0gJyNmZmYnOwoJCQl0aGlzLmNvbnRleHQuc3Ryb2tlKCk7CgkJfQoKCQl0aGlzLmNvbnRleHQudHJhbnNsYXRlKCB4IC0gKCBpY29uU2l6ZSAvIDIgKSwgeSAtICggaWNvblNpemUgLyAyICkgKTsKCgkJLy8gRHJhdyBwbGF5L3BhdXNlIGljb25zCgkJaWYoIHRoaXMucGxheWluZyApIHsKCQkJdGhpcy5jb250ZXh0LmZpbGxTdHlsZSA9ICcjZmZmJzsKCQkJdGhpcy5jb250ZXh0LmZpbGxSZWN0KCAwLCAwLCBpY29uU2l6ZSAvIDIgLSA0LCBpY29uU2l6ZSApOwoJCQl0aGlzLmNvbnRleHQuZmlsbFJlY3QoIGljb25TaXplIC8gMiArIDQsIDAsIGljb25TaXplIC8gMiAtIDQsIGljb25TaXplICk7CgkJfQoJCWVsc2UgewoJCQl0aGlzLmNvbnRleHQuYmVnaW5QYXRoKCk7CgkJCXRoaXMuY29udGV4dC50cmFuc2xhdGUoIDQsIDAgKTsKCQkJdGhpcy5jb250ZXh0Lm1vdmVUbyggMCwgMCApOwoJCQl0aGlzLmNvbnRleHQubGluZVRvKCBpY29uU2l6ZSAtIDQsIGljb25TaXplIC8gMiApOwoJCQl0aGlzLmNvbnRleHQubGluZVRvKCAwLCBpY29uU2l6ZSApOwoJCQl0aGlzLmNvbnRleHQuZmlsbFN0eWxlID0gJyNmZmYnOwoJCQl0aGlzLmNvbnRleHQuZmlsbCgpOwoJCX0KCgkJdGhpcy5jb250ZXh0LnJlc3RvcmUoKTsKCgl9OwoKCVBsYXliYWNrLnByb3RvdHlwZS5vbiA9IGZ1bmN0aW9uKCB0eXBlLCBsaXN0ZW5lciApIHsKCQl0aGlzLmNhbnZhcy5hZGRFdmVudExpc3RlbmVyKCB0eXBlLCBsaXN0ZW5lciwgZmFsc2UgKTsKCX07CgoJUGxheWJhY2sucHJvdG90eXBlLm9mZiA9IGZ1bmN0aW9uKCB0eXBlLCBsaXN0ZW5lciApIHsKCQl0aGlzLmNhbnZhcy5yZW1vdmVFdmVudExpc3RlbmVyKCB0eXBlLCBsaXN0ZW5lciwgZmFsc2UgKTsKCX07CgoJUGxheWJhY2sucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbigpIHsKCgkJdGhpcy5wbGF5aW5nID0gZmFsc2U7CgoJCWlmKCB0aGlzLmNhbnZhcy5wYXJlbnROb2RlICkgewoJCQl0aGlzLmNvbnRhaW5lci5yZW1vdmVDaGlsZCggdGhpcy5jYW52YXMgKTsKCQl9CgoJfTsKCgoJLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0vLwoJLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSBBUEkgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0vLwoJLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0vLwoKCglSZXZlYWwgPSB7CgkJVkVSU0lPTjogVkVSU0lPTiwKCgkJaW5pdGlhbGl6ZTogaW5pdGlhbGl6ZSwKCQljb25maWd1cmU6IGNvbmZpZ3VyZSwKCgkJc3luYzogc3luYywKCQlzeW5jU2xpZGU6IHN5bmNTbGlkZSwKCQlzeW5jRnJhZ21lbnRzOiBzeW5jRnJhZ21lbnRzLAoKCQkvLyBOYXZpZ2F0aW9uIG1ldGhvZHMKCQlzbGlkZTogc2xpZGUsCgkJbGVmdDogbmF2aWdhdGVMZWZ0LAoJCXJpZ2h0OiBuYXZpZ2F0ZVJpZ2h0LAoJCXVwOiBuYXZpZ2F0ZVVwLAoJCWRvd246IG5hdmlnYXRlRG93biwKCQlwcmV2OiBuYXZpZ2F0ZVByZXYsCgkJbmV4dDogbmF2aWdhdGVOZXh0LAoKCQkvLyBGcmFnbWVudCBtZXRob2RzCgkJbmF2aWdhdGVGcmFnbWVudDogbmF2aWdhdGVGcmFnbWVudCwKCQlwcmV2RnJhZ21lbnQ6IHByZXZpb3VzRnJhZ21lbnQsCgkJbmV4dEZyYWdtZW50OiBuZXh0RnJhZ21lbnQsCgoJCS8vIERlcHJlY2F0ZWQgYWxpYXNlcwoJCW5hdmlnYXRlVG86IHNsaWRlLAoJCW5hdmlnYXRlTGVmdDogbmF2aWdhdGVMZWZ0LAoJCW5hdmlnYXRlUmlnaHQ6IG5hdmlnYXRlUmlnaHQsCgkJbmF2aWdhdGVVcDogbmF2aWdhdGVVcCwKCQluYXZpZ2F0ZURvd246IG5hdmlnYXRlRG93biwKCQluYXZpZ2F0ZVByZXY6IG5hdmlnYXRlUHJldiwKCQluYXZpZ2F0ZU5leHQ6IG5hdmlnYXRlTmV4dCwKCgkJLy8gRm9yY2VzIGFuIHVwZGF0ZSBpbiBzbGlkZSBsYXlvdXQKCQlsYXlvdXQ6IGxheW91dCwKCgkJLy8gUmFuZG9taXplcyB0aGUgb3JkZXIgb2Ygc2xpZGVzCgkJc2h1ZmZsZTogc2h1ZmZsZSwKCgkJLy8gUmV0dXJucyBhbiBvYmplY3Qgd2l0aCB0aGUgYXZhaWxhYmxlIHJvdXRlcyBhcyBib29sZWFucyAobGVmdC9yaWdodC90b3AvYm90dG9tKQoJCWF2YWlsYWJsZVJvdXRlczogYXZhaWxhYmxlUm91dGVzLAoKCQkvLyBSZXR1cm5zIGFuIG9iamVjdCB3aXRoIHRoZSBhdmFpbGFibGUgZnJhZ21lbnRzIGFzIGJvb2xlYW5zIChwcmV2L25leHQpCgkJYXZhaWxhYmxlRnJhZ21lbnRzOiBhdmFpbGFibGVGcmFnbWVudHMsCgoJCS8vIFRvZ2dsZXMgYSBoZWxwIG92ZXJsYXkgd2l0aCBrZXlib2FyZCBzaG9ydGN1dHMKCQl0b2dnbGVIZWxwOiB0b2dnbGVIZWxwLAoKCQkvLyBUb2dnbGVzIHRoZSBvdmVydmlldyBtb2RlIG9uL29mZgoJCXRvZ2dsZU92ZXJ2aWV3OiB0b2dnbGVPdmVydmlldywKCgkJLy8gVG9nZ2xlcyB0aGUgImJsYWNrIHNjcmVlbiIgbW9kZSBvbi9vZmYKCQl0b2dnbGVQYXVzZTogdG9nZ2xlUGF1c2UsCgoJCS8vIFRvZ2dsZXMgdGhlIGF1dG8gc2xpZGUgbW9kZSBvbi9vZmYKCQl0b2dnbGVBdXRvU2xpZGU6IHRvZ2dsZUF1dG9TbGlkZSwKCgkJLy8gU3RhdGUgY2hlY2tzCgkJaXNPdmVydmlldzogaXNPdmVydmlldywKCQlpc1BhdXNlZDogaXNQYXVzZWQsCgkJaXNBdXRvU2xpZGluZzogaXNBdXRvU2xpZGluZywKCQlpc1NwZWFrZXJOb3RlczogaXNTcGVha2VyTm90ZXMsCgoJCS8vIFNsaWRlIHByZWxvYWRpbmcKCQlsb2FkU2xpZGU6IGxvYWRTbGlkZSwKCQl1bmxvYWRTbGlkZTogdW5sb2FkU2xpZGUsCgoJCS8vIEFkZHMgb3IgcmVtb3ZlcyBhbGwgaW50ZXJuYWwgZXZlbnQgbGlzdGVuZXJzIChzdWNoIGFzIGtleWJvYXJkKQoJCWFkZEV2ZW50TGlzdGVuZXJzOiBhZGRFdmVudExpc3RlbmVycywKCQlyZW1vdmVFdmVudExpc3RlbmVyczogcmVtb3ZlRXZlbnRMaXN0ZW5lcnMsCgoJCS8vIEZhY2lsaXR5IGZvciBwZXJzaXN0aW5nIGFuZCByZXN0b3JpbmcgdGhlIHByZXNlbnRhdGlvbiBzdGF0ZQoJCWdldFN0YXRlOiBnZXRTdGF0ZSwKCQlzZXRTdGF0ZTogc2V0U3RhdGUsCgoJCS8vIFByZXNlbnRhdGlvbiBwcm9ncmVzcwoJCWdldFNsaWRlUGFzdENvdW50OiBnZXRTbGlkZVBhc3RDb3VudCwKCgkJLy8gUHJlc2VudGF0aW9uIHByb2dyZXNzIG9uIHJhbmdlIG9mIDAtMQoJCWdldFByb2dyZXNzOiBnZXRQcm9ncmVzcywKCgkJLy8gUmV0dXJucyB0aGUgaW5kaWNlcyBvZiB0aGUgY3VycmVudCwgb3Igc3BlY2lmaWVkLCBzbGlkZQoJCWdldEluZGljZXM6IGdldEluZGljZXMsCgoJCS8vIFJldHVybnMgYW4gQXJyYXkgb2YgYWxsIHNsaWRlcwoJCWdldFNsaWRlczogZ2V0U2xpZGVzLAoKCQkvLyBSZXR1cm5zIGFuIEFycmF5IG9mIG9iamVjdHMgcmVwcmVzZW50aW5nIHRoZSBhdHRyaWJ1dGVzIG9uCgkJLy8gdGhlIHNsaWRlcwoJCWdldFNsaWRlc0F0dHJpYnV0ZXM6IGdldFNsaWRlc0F0dHJpYnV0ZXMsCgoJCS8vIFJldHVybnMgdGhlIHRvdGFsIG51bWJlciBvZiBzbGlkZXMKCQlnZXRUb3RhbFNsaWRlczogZ2V0VG90YWxTbGlkZXMsCgoJCS8vIFJldHVybnMgdGhlIHNsaWRlIGVsZW1lbnQgYXQgdGhlIHNwZWNpZmllZCBpbmRleAoJCWdldFNsaWRlOiBnZXRTbGlkZSwKCgkJLy8gUmV0dXJucyB0aGUgc2xpZGUgYmFja2dyb3VuZCBlbGVtZW50IGF0IHRoZSBzcGVjaWZpZWQgaW5kZXgKCQlnZXRTbGlkZUJhY2tncm91bmQ6IGdldFNsaWRlQmFja2dyb3VuZCwKCgkJLy8gUmV0dXJucyB0aGUgc3BlYWtlciBub3RlcyBzdHJpbmcgZm9yIGEgc2xpZGUsIG9yIG51bGwKCQlnZXRTbGlkZU5vdGVzOiBnZXRTbGlkZU5vdGVzLAoKCQkvLyBSZXR1cm5zIGFuIGFycmF5IHdpdGggYWxsIGhvcml6b250YWwvdmVydGljYWwgc2xpZGVzIGluIHRoZSBkZWNrCgkJZ2V0SG9yaXpvbnRhbFNsaWRlczogZ2V0SG9yaXpvbnRhbFNsaWRlcywKCQlnZXRWZXJ0aWNhbFNsaWRlczogZ2V0VmVydGljYWxTbGlkZXMsCgoJCS8vIENoZWNrcyBpZiB0aGUgcHJlc2VudGF0aW9uIGNvbnRhaW5zIHR3byBvciBtb3JlCgkJLy8gaG9yaXpvbnRhbC92ZXJ0aWNhbCBzbGlkZXMKCQloYXNIb3Jpem9udGFsU2xpZGVzOiBoYXNIb3Jpem9udGFsU2xpZGVzLAoJCWhhc1ZlcnRpY2FsU2xpZGVzOiBoYXNWZXJ0aWNhbFNsaWRlcywKCgkJLy8gUmV0dXJucyB0aGUgcHJldmlvdXMgc2xpZGUgZWxlbWVudCwgbWF5IGJlIG51bGwKCQlnZXRQcmV2aW91c1NsaWRlOiBmdW5jdGlvbigpIHsKCQkJcmV0dXJuIHByZXZpb3VzU2xpZGU7CgkJfSwKCgkJLy8gUmV0dXJucyB0aGUgY3VycmVudCBzbGlkZSBlbGVtZW50CgkJZ2V0Q3VycmVudFNsaWRlOiBmdW5jdGlvbigpIHsKCQkJcmV0dXJuIGN1cnJlbnRTbGlkZTsKCQl9LAoKCQkvLyBSZXR1cm5zIHRoZSBjdXJyZW50IHNjYWxlIG9mIHRoZSBwcmVzZW50YXRpb24gY29udGVudAoJCWdldFNjYWxlOiBmdW5jdGlvbigpIHsKCQkJcmV0dXJuIHNjYWxlOwoJCX0sCgoJCS8vIFJldHVybnMgdGhlIGN1cnJlbnQgY29uZmlndXJhdGlvbiBvYmplY3QKCQlnZXRDb25maWc6IGZ1bmN0aW9uKCkgewoJCQlyZXR1cm4gY29uZmlnOwoJCX0sCgoJCS8vIEhlbHBlciBtZXRob2QsIHJldHJpZXZlcyBxdWVyeSBzdHJpbmcgYXMgYSBrZXkvdmFsdWUgaGFzaAoJCWdldFF1ZXJ5SGFzaDogZnVuY3Rpb24oKSB7CgkJCXZhciBxdWVyeSA9IHt9OwoKCQkJbG9jYXRpb24uc2VhcmNoLnJlcGxhY2UoIC9bQS1aMC05XSs/PShbXHdcLiUtXSopL2dpLCBmdW5jdGlvbihhKSB7CgkJCQlxdWVyeVsgYS5zcGxpdCggJz0nICkuc2hpZnQoKSBdID0gYS5zcGxpdCggJz0nICkucG9wKCk7CgkJCX0gKTsKCgkJCS8vIEJhc2ljIGRlc2VyaWFsaXphdGlvbgoJCQlmb3IoIHZhciBpIGluIHF1ZXJ5ICkgewoJCQkJdmFyIHZhbHVlID0gcXVlcnlbIGkgXTsKCgkJCQlxdWVyeVsgaSBdID0gZGVzZXJpYWxpemUoIHVuZXNjYXBlKCB2YWx1ZSApICk7CgkJCX0KCgkJCXJldHVybiBxdWVyeTsKCQl9LAoKCQkvLyBSZXR1cm5zIHRoZSB0b3AtbGV2ZWwgRE9NIGVsZW1lbnQKCQlnZXRSZXZlYWxFbGVtZW50OiBmdW5jdGlvbigpIHsKCQkJcmV0dXJuIGRvbS53cmFwcGVyIHx8IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoICcucmV2ZWFsJyApOwoJCX0sCgoJCS8vIFJldHVybnMgYSBoYXNoIHdpdGggYWxsIHJlZ2lzdGVyZWQgcGx1Z2lucwoJCWdldFBsdWdpbnM6IGZ1bmN0aW9uKCkgewoJCQlyZXR1cm4gcGx1Z2luczsKCQl9LAoKCQkvLyBSZXR1cm5zIHRydWUgaWYgd2UncmUgY3VycmVudGx5IG9uIHRoZSBmaXJzdCBzbGlkZQoJCWlzRmlyc3RTbGlkZTogZnVuY3Rpb24oKSB7CgkJCXJldHVybiAoIGluZGV4aCA9PT0gMCAmJiBpbmRleHYgPT09IDAgKTsKCQl9LAoKCQkvLyBSZXR1cm5zIHRydWUgaWYgd2UncmUgY3VycmVudGx5IG9uIHRoZSBsYXN0IHNsaWRlCgkJaXNMYXN0U2xpZGU6IGZ1bmN0aW9uKCkgewoJCQlpZiggY3VycmVudFNsaWRlICkgewoJCQkJLy8gRG9lcyB0aGlzIHNsaWRlIGhhdmUgYSBuZXh0IHNpYmxpbmc/CgkJCQlpZiggY3VycmVudFNsaWRlLm5leHRFbGVtZW50U2libGluZyApIHJldHVybiBmYWxzZTsKCgkJCQkvLyBJZiBpdCdzIHZlcnRpY2FsLCBkb2VzIGl0cyBwYXJlbnQgaGF2ZSBhIG5leHQgc2libGluZz8KCQkJCWlmKCBpc1ZlcnRpY2FsU2xpZGUoIGN1cnJlbnRTbGlkZSApICYmIGN1cnJlbnRTbGlkZS5wYXJlbnROb2RlLm5leHRFbGVtZW50U2libGluZyApIHJldHVybiBmYWxzZTsKCgkJCQlyZXR1cm4gdHJ1ZTsKCQkJfQoKCQkJcmV0dXJuIGZhbHNlOwoJCX0sCgoJCS8vIFJldHVybnMgdHJ1ZSBpZiB3ZSdyZSBvbiB0aGUgbGFzdCBzbGlkZSBpbiB0aGUgY3VycmVudAoJCS8vIHZlcnRpY2FsIHN0YWNrCgkJaXNMYXN0VmVydGljYWxTbGlkZTogZnVuY3Rpb24oKSB7CgkJCWlmKCBjdXJyZW50U2xpZGUgJiYgaXNWZXJ0aWNhbFNsaWRlKCBjdXJyZW50U2xpZGUgKSApIHsKCQkJCS8vIERvZXMgdGhpcyBzbGlkZSBoYXZlIGEgbmV4dCBzaWJsaW5nPwoJCQkJaWYoIGN1cnJlbnRTbGlkZS5uZXh0RWxlbWVudFNpYmxpbmcgKSByZXR1cm4gZmFsc2U7CgoJCQkJcmV0dXJuIHRydWU7CgkJCX0KCgkJCXJldHVybiBmYWxzZTsKCQl9LAoKCQkvLyBDaGVja3MgaWYgcmV2ZWFsLmpzIGhhcyBiZWVuIGxvYWRlZCBhbmQgaXMgcmVhZHkgZm9yIHVzZQoJCWlzUmVhZHk6IGZ1bmN0aW9uKCkgewoJCQlyZXR1cm4gbG9hZGVkOwoJCX0sCgoJCS8vIEZvcndhcmQgZXZlbnQgYmluZGluZyB0byB0aGUgcmV2ZWFsIERPTSBlbGVtZW50CgkJYWRkRXZlbnRMaXN0ZW5lcjogZnVuY3Rpb24oIHR5cGUsIGxpc3RlbmVyLCB1c2VDYXB0dXJlICkgewoJCQlpZiggJ2FkZEV2ZW50TGlzdGVuZXInIGluIHdpbmRvdyApIHsKCQkJCVJldmVhbC5nZXRSZXZlYWxFbGVtZW50KCkuYWRkRXZlbnRMaXN0ZW5lciggdHlwZSwgbGlzdGVuZXIsIHVzZUNhcHR1cmUgKTsKCQkJfQoJCX0sCgkJcmVtb3ZlRXZlbnRMaXN0ZW5lcjogZnVuY3Rpb24oIHR5cGUsIGxpc3RlbmVyLCB1c2VDYXB0dXJlICkgewoJCQlpZiggJ2FkZEV2ZW50TGlzdGVuZXInIGluIHdpbmRvdyApIHsKCQkJCVJldmVhbC5nZXRSZXZlYWxFbGVtZW50KCkucmVtb3ZlRXZlbnRMaXN0ZW5lciggdHlwZSwgbGlzdGVuZXIsIHVzZUNhcHR1cmUgKTsKCQkJfQoJCX0sCgoJCS8vIEFkZHMvcmVtb3ZlcyBhIGN1c3RvbSBrZXkgYmluZGluZwoJCWFkZEtleUJpbmRpbmc6IGFkZEtleUJpbmRpbmcsCgkJcmVtb3ZlS2V5QmluZGluZzogcmVtb3ZlS2V5QmluZGluZywKCgkJLy8gQVBJIGZvciByZWdpc3RlcmluZyBhbmQgcmV0cmlldmluZyBwbHVnaW5zCgkJcmVnaXN0ZXJQbHVnaW46IHJlZ2lzdGVyUGx1Z2luLAoJCWhhc1BsdWdpbjogaGFzUGx1Z2luLAoJCWdldFBsdWdpbjogZ2V0UGx1Z2luLAoKCQkvLyBQcm9ncmFtbWF0aWNhbGx5IHRyaWdnZXJzIGEga2V5Ym9hcmQgZXZlbnQKCQl0cmlnZ2VyS2V5OiBmdW5jdGlvbigga2V5Q29kZSApIHsKCQkJb25Eb2N1bWVudEtleURvd24oIHsga2V5Q29kZToga2V5Q29kZSB9ICk7CgkJfSwKCgkJLy8gUmVnaXN0ZXJzIGEgbmV3IHNob3J0Y3V0IHRvIGluY2x1ZGUgaW4gdGhlIGhlbHAgb3ZlcmxheQoJCXJlZ2lzdGVyS2V5Ym9hcmRTaG9ydGN1dDogZnVuY3Rpb24oIGtleSwgdmFsdWUgKSB7CgkJCWtleWJvYXJkU2hvcnRjdXRzW2tleV0gPSB2YWx1ZTsKCQl9Cgl9OwoKCXJldHVybiBSZXZlYWw7Cgp9KSk7Cg=="></script>

  <script>

      // Full list of configuration options available at:
      // https://github.com/hakimel/reveal.js#configuration
      Reveal.initialize({

        // Optional reveal.js plugins
        dependencies: [
          { src: 'https://revealjs.com/lib/js/classList.js', condition: function() { return !document.body.classList; } },
          { src: 'https://revealjs.com/plugin/zoom-js/zoom.js', async: true },
              { src: 'https://revealjs.com/plugin/notes/notes.js', async: true }
        ]
      });
    </script>
    </body>
</html>
